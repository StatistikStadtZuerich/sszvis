<!DOCTYPE html>
<meta charset="utf-8">

<link href="../src/nv.d3.css" rel="stylesheet" type="text/css">
<link href="teststyle.css" rel="stylesheet" type='text/css'>
<body>
<div style='position:relative;'>
    <div class='chart third' id='test1'>
        <h2>Simple historicalBar, sin</h2>
        <svg></svg>
    </div>
    <div class='chart third' id='test2'>
        <h2>Simple historicalBar, linear</h2>
        <svg></svg>
    </div>
    <div class='chart third' id='test3'>
        <h2>Simple historicalBar, no data</h2>
        <svg></svg>
    </div>
    <div class='chart third' id='test4'>
        <h2>Simple historicalBarChart, sin</h2>
        <svg></svg>
    </div>
    <div class='chart third' id='test5'>
        <h2>Simple historicalBarChart, linear</h2>
        <svg></svg>
    </div>
    <div class='chart third' id='test6'>
        <h2>Simple historicalBarChart, no data</h2>
        <svg></svg>
    </div>
</div>

<script src="../lib/d3.v3.js"></script>

<script src="../src/core.js"></script>
<script src="../src/utils.js"></script>
<script src="../src/layer.js"></script>
<script src="../src/tooltip.js"></script>
<script src="../src/interactiveLayer.js"></script>

<script src="../src/models/legend.js"></script>
<script src="../src/models/axis.js"></script>
<script src="../src/chart.js"></script>

<script src="../src/models/bar/historical/historicalBar.js"></script>
<script src="../src/models/bar/historical/historicalBarChart.js"></script>

<script src="testScript.js"></script>
<script>

    function dataSin() {
        var sin = [];

        for (var i = 0; i < 100; i++) {
            sin.push({x: i, y: Math.sin(i/5)});
        }

        return [
            {
                values: sin,
                key: "Sine Wave",
                color: "#ff7f0e"
            }
        ];
    }
    function linear() {
        var array = [];

        for (var i = 0; i < 100; i++) {
            array.push({x: i, y: i});
        }

        return [
            {
                values: array,
                key: "Linear",
                color: "#ff7f0e"
            }
        ];
    }
    var testData = dataSin()
        , testData2 = linear()
        , testDataZeros = [{
            values: Array.apply(null, new Array(5)).map(Number.prototype.valueOf,0),
            key: 'Zeros',
            color: '#ff7f0e'
        }];


    var chart = null;

    function historicalBarChart( elementId, data ){
        nv.addGraph(function() {
            chart = nv.models.historicalBarChart();

            chart
                    .margin({left: 100, bottom: 100, top: 0, right: 0})
                    .x(function(d, i) { return i })
                    .transitionDuration(250)
                    .showLegend(false);

            chart.xAxis
                    .axisLabel("Time (s)")
                    .tickFormat(d3.format(',.1f'));

            chart.yAxis
                    .axisLabel('Voltage (v)')
                    .tickFormat(d3.format(',.2f'));

            chart.showXAxis(true);

            d3.select('#'+elementId+' svg')
                    .datum(data)
                    .transition().duration(0)
                    .call(chart);

            nv.utils.windowResize(chart.update);

            chart.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

            return chart;
        });
    }
    function historicalBar( elementId, data ){
        nv.addGraph(function() {
            chart = nv.models.historicalBar()
                .x(function(d, i) { return i });
            d3.select('#'+elementId+' svg')
                    .datum(data)
                    .transition().duration(0)
                    .call(chart);
            nv.utils.windowResize(chart.update);
            return chart;
        });
    }

    historicalBar('test1', testData);
    historicalBar('test2', testData2);
    historicalBar('test3', testDataZeros);

    historicalBarChart('test4', testData);
    historicalBarChart('test5', testData2);
    historicalBarChart('test6', testDataZeros);

</script>
