/*! nvd3 - v0.0.1 - 2014-05-27 */!function(a,b){"function"==typeof define&&define.amd?define(["exports","d3"],b):"object"==typeof exports?b(exports,require("d3")):a.nv=b({},a.d3)}(this,function(a,b){function c(a,b){return new Date(b,a+1,0).getDate()}function d(a,b,c){return function(d,e,f){var g=a(d),h=[];if(d>g&&b(g),f>1)for(;e>g;){var i=new Date(+g);c(i)%f===0&&h.push(i),b(g)}else for(;e>g;)h.push(new Date(+g)),b(g);return h}}function e(c,d){this.options=a.utils.extend({},c,K),this.options.id=Math.floor(1e4*Math.random());var e=this.options.margin;Object.defineProperty(e,"leftright",{get:function(){return e.left+e.right}}),Object.defineProperty(e,"topbottom",{get:function(){return e.top+e.bottom}}),d=a.utils.valueOrDefault(d,[]),d=d.concat(["stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"]),this.dispatch=b.dispatch.apply(null,d),this.renderWatch=a.utils.renderWatch(this.dispatch)}function f(b){b=a.utils.extend({},b,L,{margin:{top:0,left:0,right:0,bottom:0},width:null,height:null,chartClass:"interactiveLineLayer"}),e.call(this,b,["elementMousemove","elementMouseout","elementDblclick"]),this.tooltip=a.models.tooltip(),this.renderWatch=a.utils.renderWatch(this.dispatch,this.duration()),this.renderGuideLine(function(b){if(this.showGuideLine()){var c=this.wrap.select(".nv-interactiveGuideLine").selectAll("line").data(null!=b?[a.utils.NaNtoZero(b)]:[],String);c.enter().append("line").attr("class","nv-guideline").attr("x1",function(a){return a}).attr("x2",function(a){return a}).attr("y1",this.available.height).attr("y2",0),c.exit().remove()}}.bind(this))}function g(c){c=a.utils.extend({},c,M,{margin:{top:0,right:0,bottom:0,left:0},width:75,height:60,chartClass:"axis",wrapClass:"axis"}),e.call(this,c),this.axis=b.svg.axis().scale(this.scale()).orient("bottom").tickFormat(function(a){return a})}function h(b){b=a.utils.extend({},b,N,{margin:{top:5,right:0,bottom:5,left:0},width:400,height:20,chartClass:"legend",wrapClass:"legend"}),e.call(this,b,["legendClick","legendDblclick","legendMouseover","legendMouseout"])}function i(b){b=a.utils.extend({},b,O,{margin:{top:0,right:0,bottom:0,left:0},width:400,chartClass:"distribution",wrapClass:"distribution"}),e.call(this,b,[]),this.getData(function(a){return a[this.axis()]}.bind(this)),this.renderWatch=a.utils.renderWatch(this.dispatch,this.duration())}function k(b,c){b=a.utils.extend({},b,P),b.tooltip=a.utils.valueOrDefault(b.tooltip,function(a,b){return"<h3>"+a+"</h3><p>"+b+"</p>"}),b.tooltips=a.utils.valueOrDefault(b.tooltips,!0),b.showLegend=a.utils.valueOrDefault(b.showLegend,!0),c=a.utils.valueOrDefault(c,[]),b.tooltips&&(c=c.concat(["tooltipShow","tooltipHide"])),e.call(this,b,c),this.state=a.utils.valueOrDefault(this.state,{}),this.legend=a.models.legend(),this.xAxis=this.getAxis(),this.yAxis=this.getAxis()}function l(b){b=a.utils.extend({},b,Q,{margin:{top:0,right:0,bottom:0,left:0},width:960,height:500,chartClass:"discretebar"}),e.call(this,b,[])}function m(b){b=a.utils.extend({},b,R,{margin:{top:15,right:10,bottom:50,left:60},chartClass:"discreteBarWithAxes",wrapClass:"barsWrap"}),this.discreteBar=this.getDiscreteBar(),this.state=this.getStateManager(),k.call(this,b)}function n(b){b=a.utils.extend({},b,S,{margin:{top:0,right:0,bottom:0,left:0},width:960,height:500,chartClass:"historicalBar"}),e.call(this,b,[])}function o(b){b=a.utils.valueOrDefault(b,{margin:{top:30,right:90,bottom:50,left:90},chartClass:"historicalBarChart",wrapClass:"barsWrap"}),k.call(this,b),this.historicalBar=a.models.historicalBar(),this.state=this.getStateManager()}function p(b){b=a.utils.extend({},b,U,{margin:{top:0,right:0,bottom:0,left:0},width:500,height:500,chartClass:"multibar"}),e.call(this,b,[]),this.renderWatch=a.utils.renderWatch(this.dispatch,this.duration())}function q(b){b=a.utils.extend({},b,V,{margin:{top:30,right:20,bottom:50,left:60},chartClass:"multiBarWithLegend",wrapClass:"barsWrap"}),k.call(this,b),this.multibar=this.getMultiBar(),this.controls=this.getLegend(),this.state=this.getStateManager(),this.state.stacked=!1,this.stateGetter=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),stacked:this.stacked()}}.bind(this)}.bind(this),this.stateSetter=function(a){return function(b){void 0!==b.stacked&&this.stacked(b.stacked),void 0!==b.active&&a.forEach(function(a,c){a.disabled=!b.active[c]})}.bind(this)}.bind(this),this.controls.updateState(!1)}function r(b){b=a.utils.extend({},b,W,{margin:{top:0,right:0,bottom:0,left:0},width:960,height:500,chartClass:"multibarHorizontal",wrapClass:""}),this._barColor=a.utils.defaultColor(),k.call(this,b,["chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"])}function s(c){var d=this;c=a.utils.extend({},c,X,{margin:{top:30,right:20,bottom:50,left:60},chartClass:"multiBarHorizontalChart",wrapClass:"barsWrap"}),k.call(this,c,["tooltipShow","tooltipHide","stateChange","changeState","renderEnd"]),this.multibarHorizontal=this.getMultibarHorizontal(),this.legend=this.getLegend(),this.xAxis=this.getAxis(),this.yAxis=this.getAxis(),this.state={stacked:this.stacked()},this.legend=a.models.legend().height(30),this.controls=a.models.legend().height(30).updateState(!1),this.controlWidth=function(){return d.showControls()?180:0},this.multibarHorizontal.stacked(this.stacked()),this.xAxis.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a}),this.yAxis.orient("bottom").tickFormat(b.format(",.1f")),this.state=this.getStateManager(),this.state.stacked=!1,this.showTooltip=function(b,c){var e=b.pos[0]+(c.offsetLeft||0),f=b.pos[1]+(c.offsetTop||0),g=d.xAxis.tickFormat()(d.multibarHorizontal.x()(b.point,b.pointIndex)),h=d.yAxis.tickFormat()(d.multibarHorizontal.y()(b.point,b.pointIndex)),i=d.tooltip()(b.series.key,g,h);a.tooltip.show([e,f],i,b.value<0?"e":"w",null,c)},this.stateGetter=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),stacked:d.stacked()}}},this.stateSetter=function(a){return function(b){void 0!==b.stacked&&d.stacked(b.stacked),void 0!==b.active&&a.forEach(function(a,c){a.disabled=!b.active[c]})}}}function t(c){c=a.utils.extend({},c,Y,{margin:{top:0,right:0,bottom:0,left:0},width:380,height:30,chartClass:"bullet"}),e.call(this,c,[]),this.xScale0(this.__chart__||b.scale.linear()),this.renderWatch=a.utils.renderWatch(this.dispatch)}function u(b){b=a.utils.extend({},b,Z,{margin:{top:5,right:40,bottom:20,left:120},chartClass:"bulletChart",wrapClass:"bulletWrap"}),k.call(this,b),this.bullet=this.getBullet(),this.state=this.getStateManager()}function v(c){c=a.utils.extend({},c,$,{margin:{top:30,right:30,bottom:50,left:60},chartClass:"cumulativeLine",wrapClass:"linesWrap"}),k.call(this,c,[""]),this.line=this.getLine(),this.controls=this.getLegend(),this.controls.updateState(!1),this.interactiveLayer=this.getInteractiveLayer(),this.state=b.functor({index:0,rescaleY:this.rescaleY()}),this.indexLine=null}function w(b){b=a.utils.extend({},b,_,{margin:{top:0,right:0,bottom:0,left:0},width:960,height:500,chartClass:"line",wrapClass:"scatterWrap"}),e.call(this,b,[]),this.scatter=this.getScatter().size(16).sizeDomain([16,256]),this.scatter.size(),this.renderWatch=a.utils.renderWatch(this.dispatch,this.duration())}function x(b){b=a.utils.extend({},b,ab,{margin:{top:30,right:20,bottom:50,left:60},chartClass:"lineChart",wrapClass:"linesWrap"}),k.call(this,b),this.line=this.getLine(),this.interactiveLayer=this.getInteractiveLayer(),this.state=this.getStateManager()}function y(b){b=a.utils.extend({},b,bb,{margin:{top:30,right:60,bottom:50,left:60},chartClass:"linePlusBar"}),k.call(this,b),this.line=this.getLine(),this.historicalBar=this.getHistoricalBar(),this.y1Axis=this.getAxis(),this.y2Axis=this.getAxis(),this.xAxis.tickPadding(7),this.historicalBar.padData(!0),this.line.clipEdge(!1).padData(!0),this.y1Axis.orient("left"),this.y2Axis.orient("right")}function z(c){c=a.utils.extend({},c,cb,{margin:{top:30,right:30,bottom:30,left:60},chartClass:"linePlusBar",wrapClass:"",margin2:{top:0,right:30,bottom:20,left:60}}),k.call(this,c,["brush"]),this.line=this.getLine(),this.line2=this.getLine(),this.bars=this.getHistoricalBar(),this.bars2=this.getHistoricalBar(),this.x2Axis=this.getAxis(),this.y1Axis=this.getAxis(),this.y2Axis=this.getAxis(),this.y3Axis=this.getAxis(),this.y4Axis=this.getAxis(),this.legend=this.getLegend(),this.brush=b.svg.brush(),this.line.clipEdge(!0),this.line2.interactive(!1),this.xAxis.orient("bottom").tickPadding(5),this.y1Axis.orient("left"),this.y2Axis.orient("right"),this.x2Axis.orient("bottom").tickPadding(5),this.y3Axis.orient("left"),this.y4Axis.orient("right");var d=this;this.showTooltip=function(b,c){d.extent()&&(b.pointIndex+=Math.ceil(d.extent()[0]));var e=b.pos[0]+(c.offsetLeft||0),f=b.pos[1]+(c.offsetTop||0),g=d.xAxis.tickFormat()(d.line.x()(b.point,b.pointIndex)),h=(b.series.bar?d.y1Axis:d.y2Axis).tickFormat()(d.line.y()(b.point,b.pointIndex)),i=d.tooltip()(b.series.key,g,h);a.tooltip.show([e,f],i,b.value<0?"n":"s",null,c)}}function A(b){b=a.utils.extend({},b,eb,{margin:{top:0,right:0,bottom:0,left:0},width:500,height:500,chartClass:"pie",wrapClass:"pieWrap"}),e.call(this,b,[])}function B(b){b=a.utils.extend({},b,fb,{margin:{top:30,right:20,bottom:20,left:20},chartClass:"pieChart",wrapClass:"pieChartWrap"}),k.call(this,b),this.pie=this.getPie(),this.state=this.getStateManager(),this.pie.showLabels(!0)}function C(b){b=a.utils.extend({},b,gb),A.call(this,b)}function D(a){B.call(this,a)}function E(b){b=a.utils.extend({},b,hb,{margin:{top:0,right:0,bottom:0,left:0},width:960,height:500,chartClass:"scatter",wrapClass:"scatterWrap"}),e.call(this,b,["elementClick","elementMouseover","elementMouseout"])}function F(c){c=a.utils.extend({},c,ib,{margin:{top:30,right:20,bottom:50,left:75},chartClass:"scatterChart",wrapClass:"scatterWrap"}),k.call(this,c),this.scatter=this.getScatter(),this.distX=this.getDistribution(),this.distY=this.getDistribution(),this.controls=this.getLegend(),this.state=this.getStateManager(),this.xScale(b.fisheye?b.fisheye.scale(b.scale.linear).distortion(0):this.scatter.xScale()),this.yScale(b.fisheye?b.fisheye.scale(b.scale.linear).distortion(0):this.scatter.yScale()),this.scatter.xScale(this.xScale()).yScale(this.yScale()),this.distX.axis("x"),this.distY.axis("y"),this.controls.updateState(!1)}function G(b){b=a.utils.extend({},b,jb,{margin:{top:2,right:0,bottom:2,left:0},width:400,height:32,chartClass:"sparkline"}),e.call(this,b,[])}function H(b){b=a.utils.extend({},b,kb,{margin:{top:15,right:100,bottom:10,left:50},chartClass:"sparklineplus"}),k.call(this,b),this.sparkline=this.getSparkline(),this.state=this.getStateManager()}function I(b){b=a.utils.extend({},b,lb,{margin:{top:0,right:0,bottom:0,left:0},chartClass:"stackedarea"}),k.call(this,b,["areaClick","areaMouseover","areaMouseout"]),this.scatter=this.getScatter(),this.renderWatch=a.utils.renderWatch(this.dispatch,this.duration())}function J(b){b=a.utils.extend({},b,mb,{margin:{top:30,right:25,bottom:50,left:60},chartClass:"stackedAreaChart",wrapClass:"stackedAreaChartWrap"}),k.call(this,b),this.stacked=this.getStackedArea(),this.controls=this.getLegend(),this.interactiveLayer=this.getInteractiveGuideline(),this.state=this.getStateManager(),this.controls.updateState(!1)}var a=a||{};a.version="1.1.15b",a.dev=!0,a.tooltip=a.tooltip||{},a.utils=a.utils||{},a.models=a.models||{},a.charts={},a.graphs=[],a.logs={},a.dispatch=b.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),a.dev&&(a.dispatch.on("render_start",function(){a.logs.startTime=+new Date}),a.dispatch.on("render_end",function(){a.logs.endTime=+new Date,a.logs.totalTime=a.logs.endTime-a.logs.startTime,a.log("total",a.logs.totalTime)})),a.log=function(){if(a.dev&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(a.dev&&"function"==typeof console.log&&Function.prototype.bind){var b=Function.prototype.bind.call(console.log,console);b.apply(console,arguments)}return arguments[arguments.length-1]},a.deprecated=function(b){a.dev&&console&&console.warn&&console.warn("`"+b+"` has been deprecated.")},a.render=function(b){b=b||1,a.render.active=!0,a.dispatch.render_start(),setTimeout(function(){for(var c,d,e=0;b>e&&(d=a.render.queue[e]);e++)c=d.generate(),typeof d.callback==typeof Function&&d.callback(c),a.graphs.push(c);a.render.queue.splice(0,e),a.render.queue.length?setTimeout(arguments.callee,0):(a.dispatch.render_end(),a.render.active=!1)},0)},a.render.active=!1,a.render.queue=[],a.addGraph=function(b){typeof arguments[0]==typeof Function&&(b={generate:arguments[0],callback:arguments[1]}),a.render.queue.push(b),a.render.active||a.render()},a.identity=function(a){return a},a.strip=function(a){return a.replace(/(\s|&)/g,"")},b.time.monthEnd=function(a){return new Date(a.getFullYear(),a.getMonth(),0)},b.time.monthEnds=d(b.time.monthEnd,function(a){a.setUTCDate(a.getUTCDate()+1),a.setDate(c(a.getMonth()+1,a.getFullYear()))},function(a){return a.getMonth()}),a.utils.windowSize=function(){var a={width:640,height:480};return document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(a.width=document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(a.width=window.innerWidth,a.height=window.innerHeight),a},a.utils.windowResize=function(a){if(void 0!==a){var b=window.onresize;window.onresize=function(c){"function"==typeof b&&b(c),a(c)}}},a.utils.getColor=function(b){return arguments.length?"[object Array]"===Object.prototype.toString.call(b)?function(a,c){return a.color||b[c%b.length]}:b:a.utils.defaultColor()},a.utils.defaultColor=function(){var a=b.scale.category20().range();return function(b,c){return b.color||a[c%a.length]}},a.utils.customTheme=function(a,c,d){c=c||function(a){return a.key},d=d||b.scale.category20().range();var e=d.length;return function(b){var f=c(b);return e||(e=d.length),"undefined"!=typeof a[f]?"function"==typeof a[f]?a[f]():a[f]:d[--e]}},a.utils.pjax=function(c,d){function e(e){b.html(e,function(e){var f=b.select(d).node();f.parentNode.replaceChild(b.select(e).select(d).node(),f),a.utils.pjax(c,d)})}b.selectAll(c).on("click",function(){history.pushState(this.href,this.textContent,this.href),e(this.href),b.event.preventDefault()}),b.select(window).on("popstate",function(){b.event.state&&e(b.event.state)})},a.utils.calcApproxTextWidth=function(a){if("function"==typeof a.style&&"function"==typeof a.text){var b=parseInt(a.style("font-size").replace("px","")),c=a.text().length;return c*b*.5}return 0},a.utils.NaNtoZero=function(a){return"number"!=typeof a||isNaN(a)||null===a||1/0===a?0:a},function(){b.selection.prototype.watchTransition=function(a){var b=[this].concat([].slice.call(arguments,1));return a.transition.apply(a,b)}}(),a.utils.renderWatch=function(b,c){if(!(this instanceof a.utils.renderWatch))return new a.utils.renderWatch(b,c);var d=void 0!==c?c:250,e=[],f=this;this.models=function(a){return a=[].slice.call(arguments,0),a.forEach(function(a){a.__rendered=!1,function(a){a.dispatch.on("renderEnd",function(){a.__rendered=!0,f.renderEnd("model")})}(a),e.indexOf(a)<0&&e.push(a)}),this},this.reset=function(a){void 0!==a&&(d=a),e=[]},this.transition=function(a,b,c){if(b=arguments.length>1?[].slice.call(arguments,1):[],c=b.length>1?b.pop():void 0!==d?d:250,a.__rendered=!1,e.indexOf(a)<0&&e.push(a),0===c)return a.__rendered=!0,a.delay=function(){return this},a.duration=function(){return this},a;a.__rendered=0===a.length?!0:a.every(function(a){return!a.length})?!0:!1;var g=0;return a.transition().duration(c).each(function(){++g}).each("end",function(){0===--g&&(a.__rendered=!0,f.renderEnd.apply(this,b))})},this.renderEnd=function(){e.every(function(a){return a.__rendered})&&(e.forEach(function(a){a.__rendered=!1}),b.renderEnd.apply(this,arguments))}},a.utils.state=function(){if(!(this instanceof a.utils.state))return new a.utils.state;var c={},d=function(){},e=function(){return{}};init=null,this.dispatch=b.dispatch("change","set"),this.dispatch.on("set",function(a){d(a,!0)}),this.getter=function(a){return e=a,this},this.setter=function(a,b){return b||(b=function(){}),d=function(c,d){a(c),d&&b()},this},this.init=function(a){init=a};var f=function(){var a=e();if(JSON.stringify(a)===JSON.stringify(c))return!1;for(var b in a)void 0===c[b]&&(c[b]={}),c[b]=a[b],changed=!0;return!0};this.update=function(){init&&(d(init,!1),init=null),f.call(this)&&this.dispatch.change(c)}},a.utils.optionsFunc=function(c){return a.deprecated("nv.utils.optionsFunc"),c&&b.map(c).forEach(function(a,b){"function"==typeof this[a]&&this[a](b)}.bind(this)),this},a.utils.valueOrDefault=function(a,b){return void 0===a||null===a?b:a},a.utils.rebindp=function(a,b,c,d){var e=d instanceof Array?d:[].slice.call(arguments,3);e.forEach(function(d){a[d]=function(e){var f=null;switch(arguments.length){case 0:f=c[d].call(b);break;case 1:f=c[d].call(b,e);break;default:f=c[d].apply(b,arguments)}return f===b?a:f}})},a.utils.create=function(a,b,c){a.prototype=Object.create(b.prototype),a.prototype.constructor=a;for(var d in c)!function(b){a.prototype[b]=function(a){return 0===arguments.length?this.options[b]:(this.options[b]=a,this)}}(d)},a.utils.extend=function(b){var c={}.hasOwnProperty;if(b)for(var d=arguments.length;--d;){var e=arguments[d];for(var f in e)if(c.call(e,f))if("object"==typeof e[f])if(e[f]instanceof Array){b[f]=[];for(var g=0;g<e[f].length;g++)b[f].push(e[f][g])}else"object"==typeof b[f]?a.utils.extend(b[f],e[f]):e[f]&&(b[f]=a.utils.extend({},e[f]));else b[f]=e[f]}return b};var K={height:null,width:null,size:{},margin:{top:20,right:20,bottom:30,left:40},opacityDefault:1e-6,color:a.utils.defaultColor(),duration:0};a.utils.create(e,Object,K),e.prototype.render=function(a){var b=this;this.renderWatch.reset(),a.each(function(a){b.renderElement(this,a)}),this.renderWatch.renderEnd(""+this.name||"Layer immediate")},e.prototype.renderElement=function(a,b){this.setRoot(a),this.wrapper(b),this.hasData(b)&&(this.draw(b),this.attachEvents())},e.prototype.setRoot=function(a){this.svg=b.select(a),this.width(this.width()||parseInt(this.svg.style("width"))||960),this.height(this.height()||parseInt(this.svg.style("height"))||500),this.svg.attr({width:this.width(),height:this.height()});var c=this.margin(),d=this.options,e=this.available={};Object.defineProperty(e,"width",{get:function(){return Math.max(d.width-c.leftright,0)}}),Object.defineProperty(e,"height",{get:function(){return Math.max(d.height-c.topbottom,0)}})},e.prototype.wrapper=function(a,b){b||(b=[]);var c="nv-"+this.options.chartClass,d="nv-"+this.options.wrapClass;this.wrap=this.svg.selectAll("g.nv-wrap."+d).data([a]),this.wrapEnter=this.wrap.enter().append("g").attr({"class":"nvd3 nv-wrap "+c}),this.defsEnter=this.wrapEnter.append("defs"),this.gEnter=this.wrapEnter.append("g"),this.g=this.wrap.select("g"),b.concat([d]).forEach(function(a){this.gEnter.append("g").attr("class",a)},this),this.wrap.attr("transform","translate("+this.margin().left+","+this.margin().top+")")},e.prototype.draw=function(){},e.prototype.attachEvents=function(){var a=null;this.svg.call(function(b){b.each(function(b){a=b})}),this.dispatch.on("changeState",function(b){"undefined"!=typeof b.disabled&&(a.forEach(function(a,c){a.disabled=b.disabled[c]}),this.state.disabled=b.disabled)}.bind(this))},e.prototype.margin=function(b){if(!arguments.length)return this.options.margin;var c=this.options.margin;return c.top=a.utils.valueOrDefault(b.bottom,c.top),c.bottom=a.utils.valueOrDefault(b.bottom,c.bottom),c.left=a.utils.valueOrDefault(b.left,c.left),c.right=a.utils.valueOrDefault(b.right,c.right),this},e.prototype.hasData=function(a){function b(a){return!a.values||a.values.length>0}return a&&a.length>0&&a.filter(b).length>0},e.prototype.duration=function(a){return arguments?(this.options.duration=a,this):this.options.duration},e.prototype.transitionDuration=function(b){return a.deprecated("transitionDuration"),this.duration(b)},e.prototype.color=function(b){return arguments.length?(this.options.color=a.utils.getColor(b),this):this.options.color};var L={xScale:b.scale.linear(),yScale:b.scale.linear(),showGuideLine:!0,svgContainer:null,isMSIE:-1!==navigator.userAgent.indexOf("MSIE"),renderGuideLine:null};a.utils.create(f,e,L),f.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a,["nv-interactiveGuideLine"])},f.prototype.draw=function(){function a(){var a=b.mouse(this),d=a[0],e=a[1],f=!0,g=!1;if(c.isMSIE()&&(d=b.event.offsetX,e=b.event.offsetY,"svg"!==b.event.target.tagName&&(f=!1),b.event.target.className.baseVal.match("nv-legend")&&(g=!0)),f&&(d-=c.margin().left,e-=c.margin().top),0>d||0>e||d>c.available.width||e>c.available.height||b.event.relatedTarget&&void 0===b.event.relatedTarget.ownerSVGElement||g){if(c.isMSIE()&&b.event.relatedTarget&&void 0===b.event.relatedTarget.ownerSVGElement&&b.event.relatedTarget.className.match(c.tooltip.nvPointerEventsClass))return;return c.dispatch.elementMouseout({mouseX:d,mouseY:e}),void c.renderGuideLine()(null)}var h=c.xScale().invert(d);c.dispatch.elementMousemove({mouseX:d,mouseY:e,pointXValue:h}),"dblclick"===b.event.type&&c.dispatch.elementDblclick({mouseX:d,mouseY:e,pointXValue:h})}if(this.svgContainer()){var c=this;c.svgContainer().on("mousemove",a,!0).on("mouseout",a,!0).on("dblclick",a)}},a.interactiveGuideline=function(){"use strict";function b(a){return c.render(a),b}var c=new f,d=["margin","width","height","xScale","yScale","showGuideLine","svgContainer","renderGuideLine"];return b.dispatch=c.dispatch,b.tooltip=c.tooltip,b.options=a.utils.optionsFunc.bind(b),a.utils.rebindp(b,c,f.prototype,d),b},a.interactiveBisect=function(a,c,d){"use strict";if(!a instanceof Array)return null;"function"!=typeof d&&(d=function(a){return a.x});var e=b.bisector(d).left,f=b.max([0,e(a,c)-1]),g=d(a[f],f);if("undefined"==typeof g&&(g=f),g===c)return f;var h=b.min([f+1,a.length-1]),i=d(a[h],h);return"undefined"==typeof i&&(i=h),Math.abs(i-c)>=Math.abs(g-c)?f:h},a.nearestValueIndex=function(a,b,c){"use strict";var d=1/0,e=null;return a.forEach(function(a,f){var g=Math.abs(b-a);d>=g&&c>g&&(d=g,e=f)}),e},function(){"use strict";a.tooltip={},a.models.tooltip=function(){function c(){if(m){var a=b.select(m);"svg"!==a.node().tagName&&(a=a.select("svg"));var c=a.node()?a.attr("viewBox"):null;if(c){c=c.split(" ");var d=parseInt(a.style("width"))/c[2];o.left=o.left*d,o.top=o.top*d}}}function d(a){var c;c=b.select(m?m:"body");var d=c.select(".nvtooltip");return null===d.node()&&(d=c.append("div").attr("class","nvtooltip "+(l?l:"xy-tooltip")).attr("id",q)),d.node().innerHTML=a,d.style("top",0).style("left",0).style("opacity",0),d.selectAll("div, table, td, tr").classed(r,!0),d.classed(r,!0),d.node()}function e(){if(p&&v(g)){c();var b=o.left,f=null!=k?k:o.top,l=d(u(g));if(n=l,m){var q=m.getElementsByTagName("svg")[0],r=(q?q.getBoundingClientRect():m.getBoundingClientRect(),{left:0,top:0});if(q){var s=q.getBoundingClientRect(),t=m.getBoundingClientRect(),w=s.top;if(0>w){var x=m.getBoundingClientRect();w=Math.abs(w)>x.height?0:w}r.top=Math.abs(w-t.top),r.left=Math.abs(s.left-t.left)}b+=m.offsetLeft+r.left-2*m.scrollLeft,f+=m.offsetTop+r.top-2*m.scrollTop}return j&&j>0&&(f=Math.floor(f/j)*j),a.tooltip.calcTooltipPosition([b,f],h,i,l),e}}var f=null,g=null,h="w",i=50,j=25,k=null,l=null,m=null,n=null,o={left:null,top:null},p=!0,q="nvtooltip-"+Math.floor(1e5*Math.random()),r="nv-pointer-events-none",s=function(a){return a},t=function(a){return a},u=function(a){if(null!=f)return f;if(null==a)return"";var c=b.select(document.createElement("table")),d=c.selectAll("thead").data([a]).enter().append("thead");d.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(t(a.value));var e=c.selectAll("tbody").data([a]).enter().append("tbody"),g=e.selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",function(a){return a.highlight});g.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(a){return a.color}),g.append("td").classed("key",!0).html(function(a){return a.key}),g.append("td").classed("value",!0).html(function(a,b){return s(a.value,b)}),g.selectAll("td").each(function(a){if(a.highlight){var c=b.scale.linear().domain([0,1]).range(["#fff",a.color]),d=.6;b.select(this).style("border-bottom-color",c(d)).style("border-top-color",c(d))}});var h=c.node().outerHTML;return void 0!==a.footer&&(h+="<div class='footer'>"+a.footer+"</div>"),h},v=function(a){return a&&a.series&&a.series.length>0};return e.nvPointerEventsClass=r,e.content=function(a){return arguments.length?(f=a,e):f},e.tooltipElem=function(){return n},e.contentGenerator=function(a){return arguments.length?("function"==typeof a&&(u=a),e):u},e.data=function(a){return arguments.length?(g=a,e):g},e.gravity=function(a){return arguments.length?(h=a,e):h},e.distance=function(a){return arguments.length?(i=a,e):i},e.snapDistance=function(a){return arguments.length?(j=a,e):j},e.classes=function(a){return arguments.length?(l=a,e):l},e.chartContainer=function(a){return arguments.length?(m=a,e):m},e.position=function(a){return arguments.length?(o.left="undefined"!=typeof a.left?a.left:o.left,o.top="undefined"!=typeof a.top?a.top:o.top,e):o},e.fixedTop=function(a){return arguments.length?(k=a,e):k},e.enabled=function(a){return arguments.length?(p=a,e):p},e.valueFormatter=function(a){return arguments.length?("function"==typeof a&&(s=a),e):s},e.headerFormatter=function(a){return arguments.length?("function"==typeof a&&(t=a),e):t},e.id=function(){return q},e},a.tooltip.show=function(b,c,d,e,f,g){var h=document.createElement("div");h.className="nvtooltip "+(g?g:"xy-tooltip");var i=f;(!f||f.tagName.match(/g|svg/i))&&(i=document.getElementsByTagName("body")[0]),h.style.left=0,h.style.top=0,h.style.opacity=0,h.innerHTML=c,"string"!=typeof c?h.appendChild(c):h.innerHTML=c,i.appendChild(h),f&&(b[0]=b[0]-f.scrollLeft,b[1]=b[1]-f.scrollTop),a.tooltip.calcTooltipPosition(b,d,e,h)},a.tooltip.findFirstNonSVGParent=function(a){for(;null!==a.tagName.match(/^g|svg$/i);)a=a.parentNode;return a},a.tooltip.findTotalOffsetTop=function(a,b){var c=b;do isNaN(a.offsetTop)||(c+=a.offsetTop);while(a=a.offsetParent);return c},a.tooltip.findTotalOffsetLeft=function(a,b){var c=b;do isNaN(a.offsetLeft)||(c+=a.offsetLeft);while(a=a.offsetParent);return c},a.tooltip.calcTooltipPosition=function(b,c,d,e){var f,g,h=parseInt(e.offsetHeight),i=parseInt(e.offsetWidth),j=a.utils.windowSize().width,k=a.utils.windowSize().height,l=window.pageYOffset,m=window.pageXOffset;k=window.innerWidth>=document.body.scrollWidth?k:k-16,j=window.innerHeight>=document.body.scrollHeight?j:j-16,c=c||"s",d=d||20;var n=function(b){return a.tooltip.findTotalOffsetTop(b,g)},o=function(b){return a.tooltip.findTotalOffsetLeft(b,f)};switch(c){case"e":f=b[0]-i-d,g=b[1]-h/2;var p=o(e),q=n(e);m>p&&(f=b[0]+d>m?b[0]+d:m-p+f),l>q&&(g=l-q+g),q+h>l+k&&(g=l+k-q+g-h);break;case"w":f=b[0]+d,g=b[1]-h/2;var p=o(e),q=n(e);p+i>j&&(f=b[0]-i-d),l>q&&(g=l+5),q+h>l+k&&(g=l+k-q+g-h);break;case"n":f=b[0]-i/2-5,g=b[1]+d;var p=o(e),q=n(e);m>p&&(f=m+5),p+i>j&&(f=f-i/2+5),q+h>l+k&&(g=l+k-q+g-h);break;case"s":f=b[0]-i/2,g=b[1]-h-d;var p=o(e),q=n(e);m>p&&(f=m+5),p+i>j&&(f=f-i/2+5),l>q&&(g=l);break;case"none":f=b[0],g=b[1]-d;var p=o(e),q=n(e)}return e.style.left=f+"px",e.style.top=g+"px",e.style.opacity=1,e.style.position="absolute",e},a.tooltip.cleanup=function(){for(var a=document.getElementsByClassName("nvtooltip"),b=[];a.length;)b.push(a[0]),a[0].style.transitionDelay="0 !important",a[0].style.opacity=0,a[0].className="nvtooltip-pending-removal";setTimeout(function(){for(;b.length;){var a=b.pop();a.parentNode.removeChild(a)}},500)}}();var M={axisLabelText:null,showMaxMin:!0,highlightZero:!0,rotateLabels:0,rotateYLabel:!0,staggerLabels:!1,isOrdinal:!1,ticks:null,axisLabelDistance:12,axisRendered:!1,maxMinRendered:!1,scale0:function(){},axisLabel:null,scale:b.scale.linear(),duration:250};a.utils.create(g,e,M),g.prototype.wrapper=function(b){var c=[],d="nv-"+this.options.chartClass,e="nv-"+this.options.wrapClass;this.wrap=this.svg.selectAll("g.nv-wrap."+e).data([b]),this.wrapEnter=this.wrap.enter().append("g").attr({"class":"nvd3 nv-wrap "+d}),this.defsEnter=this.wrapEnter.append("defs"),this.gEnter=this.wrapEnter.append("g"),this.g=this.wrap.select("g"),c.concat([e]).forEach(function(a){this.gEnter.append("g").attr("class",a)},this),this.renderWatch.reset(),this.renderWatch=a.utils.renderWatch(this.dispatch,this.duration())},g.prototype.draw=function(){var a=this,c=null,d=null,e=this.scale(),f=this.scale0(),g=null;null!==this.ticks()?this.axis.ticks(this.ticks()):("top"==this.axis.orient()||"bottom"==this.axis.orient())&&this.axis.ticks(Math.abs(e.range()[1]-e.range()[0])/100),this.g.watchTransition(this.renderWatch,"axis").call(this.axis),f(f()||this.axis.scale);var h=this.axis.tickFormat();null==h&&(h=f().tickFormat());var i=this.g.selectAll("text.nv-axislabel").data([this.axisLabelText()||null]);switch(i.exit().remove(),this.axis.orient()){case"top":i.enter().append("text").attr("class","nv-axislabel"),g=2==e.range().length?e.range()[1]:e.range()[e.range().length-1]+(e.range()[1]-e.range()[0]),i.attr("text-anchor","middle").attr("y",0).attr("x",g/2),this.showMaxMin()&&(c=this.wrap.selectAll("g.nv-axisMaxMin").data(e.domain()),c.enter().append("g").attr("class","nv-axisMaxMin").append("text"),c.exit().remove(),c.attr("transform",function(a){return"translate("+e(a)+",0)"}).select("text").attr("dy","-0.5em").attr("y",-this.axis.tickPadding()).attr("text-anchor","middle").text(function(a){var b=h(a);return(""+b).match("NaN")?"":b}),c.watchTransition(this.renderWatch,"min-max top").attr("transform",function(a,b){return"translate("+e.range()[b]+",0)"}));break;case"bottom":d=36;var j=30,k=this.g.selectAll("g").select("text");if(this.rotateLabels()%360){k.each(function(){var a=this.getBBox().width;a>j&&(j=a)});var l=Math.abs(Math.sin(this.rotateLabels()*Math.PI/180));d=(l?l*j:j)+30,k.attr("transform",function(){return"rotate("+a.rotateLabels()+" 0,0)"}).style("text-anchor",a.rotateLabels()%360>0?"start":"end")}i.enter().append("text").attr("class","nv-axislabel"),g=2==e.range().length?e.range()[1]:e.range()[e.range().length-1]+(e.range()[1]-e.range()[0]),i.attr("text-anchor","middle").attr("y",d).attr("x",g/2),this.showMaxMin()&&(c=this.wrap.selectAll("g.nv-axisMaxMin").data([e.domain()[0],e.domain()[e.domain().length-1]]),c.enter().append("g").attr("class","nv-axisMaxMin").append("text"),c.exit().remove(),c.attr("transform",function(b){return"translate("+(e(b)+(a.isOrdinal()?e.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",this.axis.tickPadding()).attr("transform",function(){return"rotate("+a.rotateLabels()+" 0,0)"}).style("text-anchor",a.rotateLabels()?a.rotateLabels()%360>0?"start":"end":"middle").text(function(a){var b=h(a);return(""+b).match("NaN")?"":b}),c.watchTransition(this.renderWatch,"min-max bottom").attr("transform",function(b){return"translate("+(e(b)+(a.isOrdinal()?e.rangeBand()/2:0))+",0)"})),a.staggerLabels()&&k.attr("transform",function(a,b){return"translate(0,"+(b%2==0?"0":"12")+")"});break;case"right":i.enter().append("text").attr("class","nv-axislabel"),i.style("text-anchor",this.rotateYLabel()?"middle":"begin").attr("transform",this.rotateYLabel()?"rotate(90)":"").attr("y",this.rotateYLabel()?-Math.max(this.margin().right,this.width())+12:-10).attr("x",this.rotateYLabel()?e.range()[0]/2:this.axis.tickPadding()),this.showMaxMin()&&(c=this.wrap.selectAll("g.nv-axisMaxMin").data(e.domain()),c.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),c.exit().remove(),c.attr("transform",function(a){return"translate(0,"+e(a)+")"
}).select("text").attr("dy",".32em").attr("y",0).attr("x",this.axis.tickPadding()).style("text-anchor","start").text(function(a){var b=h(a);return(""+b).match("NaN")?"":b}),c.watchTransition(this.renderWatch,"min-max right").attr("transform",function(a,b){return"translate(0,"+e.range()[b]+")"}).select("text").style("opacity",1));break;case"left":i.enter().append("text").attr("class","nv-axislabel"),i.style("text-anchor",this.rotateYLabel()?"middle":"end").attr("transform",this.rotateYLabel()?"rotate(-90)":"").attr("y",this.rotateYLabel()?-Math.max(this.margin().left,this.width())+this.axisLabelDistance():-10).attr("x",this.rotateYLabel()?-e.range()[0]/2:-this.axis.tickPadding()),this.showMaxMin()&&(c=this.wrap.selectAll("g.nv-axisMaxMin").data(e.domain()),c.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),c.exit().remove(),c.attr("transform",function(b){return"translate(0,"+a.scale0()(b)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-this.axis.tickPadding()).attr("text-anchor","end").text(function(a){var b=h(a);return(""+b).match("NaN")?"":b}),c.watchTransition(this.renderWatch,"min-max right").attr("transform",function(a,b){return"translate(0,"+e.range()[b]+")"}).select("text").style("opacity",1))}if(i.text(function(a){return a}),!this.showMaxMin()||"left"!==this.axis.orient()&&"right"!==this.axis.orient()||(this.g.selectAll("g").each(function(a){b.select(this).select("text").attr("opacity",1),(e(a)<e.range()[1]+10||e(a)>e.range()[0]-10)&&((a>1e-10||-1e-10>a)&&b.select(this).attr("opacity",0),b.select(this).select("text").attr("opacity",0))}),e.domain()[0]==e.domain()[1]&&0==e.domain()[0]&&this.wrap.selectAll("g.nv-axisMaxMin").style("opacity",function(a,b){return b?0:1})),this.showMaxMin()&&("top"===this.axis.orient()||"bottom"===this.axis.orient())){var m=[];this.wrap.selectAll("g.nv-axisMaxMin").each(function(a,b){try{m.push(b?e(a)-this.getBBox().width-4:e(a)+this.getBBox().width+4)}catch(c){m.push(b?e(a)-4:e(a)+4)}}),this.g.selectAll("g").each(function(a){(e(a)<m[0]||e(a)>m[1])&&(a>1e-10||-1e-10>a?b.select(this).remove():b.select(this).select("text").remove())})}this.highlightZero()&&this.g.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(1e5*a.__data__)/1e6)&&void 0!==a.__data__}).classed("zero",!0),f(e.copy())},g.prototype.scale=function(a){return arguments.length?(this.options.scale=a,this.axis.scale(a),this.isOrdinal("function"==typeof this.options.scale.rangeBands),b.rebind(this,this.options.scale,"domain","range","rangeBand","rangeBands"),this):this.options.scale},a.models.axis=function(){"use strict";function c(a){return d.render(a),c}var d=new g,e=["margin","width","ticks","height","axisLabel","showMaxMin","highlightZero","scale","rotateYLabel","rotateLabels","staggerLabels","axisLabelDistance","duration"];return c.axis=d.axis,c.dispatch=d.dispatch,b.rebind(c,d.axis,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),b.rebind(c,d.scale(),"domain","range","rangeBand","rangeBands"),c.options=a.utils.optionsFunc.bind(c),a.utils.rebindp(c,d,g.prototype,e),c};var N={getKey:function(a){return a.key},align:!0,rightAlign:!0,updateState:!0,radioButtonMode:!1};a.utils.create(h,e,N),h.prototype.wrapper=function(a){var b="nv-"+this.options.chartClass,c="nv-"+this.options.wrapClass;this.wrap=this.svg.selectAll("g.nv-wrap."+c).data([a]),this.wrapEnter=this.wrap.enter().append("g").attr({"class":"nvd3 nv-wrap "+b}),this.defsEnter=this.wrapEnter.append("defs"),this.gEnter=this.wrapEnter.append("g"),this.g=this.wrap.select("g")},h.prototype.draw=function(c){var d,e=this,f=null,g=null,h=[],i=0,j=0,k=[],l=null,m=[],n=0,o=0,p=null,q=5,r=5,s=0,t=null;if(f=this.g.selectAll(".nv-series").data(function(a){return a}),g=f.enter().append("g").attr("class","nv-series").on("mouseover",function(a,b){e.dispatch.legendMouseover(a,b)}).on("mouseout",function(a,b){e.dispatch.legendMouseout(a,b)}).on("click",function(a,b){e.updateState()&&(e.radioButtonMode()?(c.forEach(function(a){a.disabled=!0}),a.disabled=!1):(a.disabled=!a.disabled,c.every(function(a){return a.disabled})&&c.forEach(function(a){a.disabled=!1})),e.dispatch.stateChange({disabled:c.map(function(a){return!!a.disabled})})),e.dispatch.legendClick(a,b)}).on("dblclick",function(a,b){e.updateState()&&(c.forEach(function(a){a.disabled=!0}),a.disabled=!1,e.dispatch.stateChange({disabled:c.map(function(a){return!!a.disabled})})),e.dispatch.legendDblclick(a,b)}),g.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),g.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8"),f.classed("disabled",function(a){return a.disabled}),f.exit().remove(),f.select("circle").style("fill",function(a,b){return a.color||e.color()(a,b)}).style("stroke",function(a,b){return a.color||e.color()(a,b)}),f.select("text").text(e.getKey()),this.align()){for(f.each(function(){l=b.select(this).select("text");try{if(d=l.node().getComputedTextLength(),0>=d)throw Error()}catch(c){d=a.utils.calcApproxTextWidth(l)}h.push(d+28)});j<this.available.width&&i<h.length;)k[i]=h[i],j+=h[i++];for(0===i&&(i=1);j>this.available.width&&i>1;){for(k=[],i--,o=0;o<h.length;o++)h[o]>(k[o%i]||0)&&(k[o%i]=h[o]);j=k.reduce(function(a,b){return a+b})}for(n=0,p=0;i>n;n++)m[n]=p,p+=k[n];f.attr("transform",function(a,b){return"translate("+m[b%i]+","+(5+20*Math.floor(b/i))+")"}),this.rightAlign()?this.g.attr("transform","translate("+(this.width()-this.margin().right-j)+","+this.margin().top+")"):this.g.attr("transform","translate(0,"+this.margin().top+")"),this.height(this.margin().top+this.margin().bottom+20*Math.ceil(h.length/i))}else f.attr("transform",function(){var a=b.select(this).select("text").node().getComputedTextLength()+28;return t=r,e.width()<e.margin().left+e.margin().right+t+a&&(r=t=5,q+=20),r+=a,r>s&&(s=r),"translate("+t+","+q+")"}),this.g.attr("transform","translate("+(this.width()-this.margin().right-s)+","+this.margin().top+")"),this.height(this.margin().top+this.margin().bottom+q+15)},h.prototype.key=function(a){return arguments.length?(this.options.getKey=a,this):this.options.getKey},a.models.legend=function(){"use strict";function b(a){return c.render(a),b}var c=new h,d=["margin","width","height","key","color","align","rightAlign","updateState","radioButtonMode"];return b.dispatch=c.dispatch,b.options=a.utils.optionsFunc.bind(b),a.utils.rebindp(b,c,h.prototype,d),b};var O={axis:"x",getData:null,scale:b.scale.linear(),domain:null,scale0:null,color:a.utils.defaultColor(),duration:250,size:8};a.utils.create(i,e,O),i.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a,[])},i.prototype.draw=function(){var a=this,b="x"==this.axis()?"y":"x";this.scale0(this.scale0()||this.scale());var c=this.g.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});c.enter().append("g"),c.attr("class",function(a,b){return"nv-dist nv-series-"+b}).style("stroke",function(b,c){return a.color(b,c)});var d=c.selectAll("line.nv-dist"+this.axis()).data(function(a){return a.values});d.enter().append("line").attr(this.axis()+"1",function(b,c){return a.scale0()(a.getData()(b,c))}).attr(this.axis()+"2",function(b,c){return a.scale0()(a.getData()(b,c))}),this.renderWatch.transition(c.exit().selectAll("line.nv-dist"+this.axis()),"dist exit").attr(this.axis()+"1",function(b,c){return a.scale()(a.getData()(b,c))}).attr(this.axis()+"2",function(b,c){return a.scale()(a.getData()(b,c))}).style("stroke-opacity",0).remove(),d.attr("class",function(b,c){return"nv-dist"+a.axis()+" nv-dist"+a.axis()+"-"+c}).attr(b+"1",0).attr(b+"2",this.size()),this.renderWatch.transition(d,"dist").attr(this.axis()+"1",function(b,c){return a.scale()(a.getData()(b,c))}).attr(this.axis()+"2",function(b,c){return a.scale()(a.getData()(b,c))}),this.scale0(this.scale().copy())},i.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.renderWatch.reset(a),this):this.options.duration},i.prototype.size=function(a){return arguments.length?(this.options.size=a,this):this.options.size},a.models.distribution=function(){"use strict";function b(a){return c.render(a),b}var c=new i,d=["margin","width","height","axis","size","getData","scale","color","duration"];return b.dispatch=c.dispatch,b.options=a.utils.optionsFunc.bind(b),a.utils.rebindp(b,c,i.prototype,d),b};var P={noData:"No Data Available",showXAxis:!0,showYAxis:!0,showLegend:!0,rightAlignYAxis:!1,reduceXTicks:!0,tooltips:!0};a.utils.create(k,e,P),k.prototype.getStateManager=function(){return a.utils.state()},k.prototype.getLegend=function(){return a.models.legend()},k.prototype.getAxis=function(){return a.models.axis()},k.prototype.wrapper=function(a,b){var c=[];this.showXAxis()&&c.push("nv-x nv-axis"),this.showYAxis()&&c.push("nv-y nv-axis"),this.showLegend()&&c.push("nv-legendWrap"),c=c.concat(b||[]),e.prototype.wrapper.call(this,a,c),this.axis={x:this.wrap.select(".nv-x.nv-axis"),y:this.wrap.select(".nv-y.nv-axis")},this.buildLegend(a),this.wrap.attr("transform","translate("+this.margin().left+","+this.margin().top+")")},k.prototype.prepareLegend=function(a){if(this.state.disabled=a.map(function(a){return!!a.disabled}),!this.defaultState){var b;this.defaultState={};for(b in this.state)this.defaultState[b]=this.state[b]instanceof Array?this.state[b].slice(0):this.state[b]}},k.prototype.buildLegend=function(a){this.prepareLegend(a),this.options.showLegend&&(this.legend.width(this.size().width),this.g.select(".nv-legendWrap").datum(a).call(this.legend),this.margin.top=this.legend.height(),this.wrap.select(".nv-legendWrap").attr("transform","translate(0,"+-this.margin().top+")"))},k.prototype.showLegend=function(a){return arguments.length?(this.options.showLegend=a,this):this.options.showLegend},k.prototype.draw=function(a){this.plotAxes(a)},k.prototype.plotAxes=function(a){if(this.rightAlignYAxis()&&this.axis.y.attr("transform","translate("+this.available.width+", 0)"),this.showXAxis()){this.xAxis.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(a){return a}).scale(this.xScale()).ticks(this.available.width/100).tickSize(-this.available.height,0),this.axis.x.attr("transform","translate(0,"+this.yScale().range()[0]+")").transition().call(this.xAxis);var c=this.g.select(".nv-x.nv-axis > g").selectAll("g");if(c.selectAll("line, text").style("opacity",1),this.xAxis.staggerLabels()){var d=function(a,b){return"translate("+a+","+b+")"},e=5,f=17;c.selectAll("text").attr("transform",function(a,b,c){return d(0,c%2==0?e:f)});var g=b.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;this.g.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(a,b){return d(0,0===b||g%2!==0?f:e)})}this.reduceXTicks()&&c.filter(function(b,c){return c%Math.ceil(a[0].values.length/(this.available.width/100))!==0}.bind(this)).selectAll("text, line").style("opacity",0),this.xAxis.rotateLabels()&&c.selectAll(".tick text").attr("transform","rotate("+that.rotateLabels()+" 0,0)").style("text-anchor",that.rotateLabels()>0?"start":"end"),this.axis.x.selectAll("g.nv-axisMaxMin text").style("opacity",1)}this.showYAxis()&&(this.yAxis.orient(this.rightAlignYAxis()?"right":"left").tickFormat(b.format(",.1f")).scale(this.yScale()).ticks(this.available.height/36).tickSize(-this.available.width,0),this.axis.y.transition().call(this.yAxis))},k.prototype.noData=function(a){if(void 0!==this.svg){if(this.hasData(a))return this.svg.selectAll(".nv-noData").remove(),!1;var b=this.svg.selectAll(".nv-noData").data([this.options.noData]);return b.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),b.attr("x",this.width()/2).attr("y",this.height()/2).text(function(a){return a}),!0}},k.prototype.attachEvents=function(){e.prototype.attachEvents.call(this),this.legend.dispatch.on("stateChange",function(a){this.state=a,this.dispatch.stateChange(this.state)}.bind(this)),this.dispatch.on("tooltipShow",function(a){this.options.tooltips&&this.showTooltip(a)}.bind(this)),this.dispatch.on("tooltipHide",function(){this.options.tooltips&&a.tooltip.cleanup()}.bind(this)),this.dispatch.on("stateChange",function(){this.update()}.bind(this))},k.prototype.update=function(){this.svg.call(function(a){this.render(a)}.bind(this))},k.prototype.tooltip=function(a){return arguments.length?(this.options.tooltip=a,this):this.options.tooltip},k.prototype.tooltipContent=function(a){return this.tooltip(a),this},k.prototype.rightAlignYAxis=function(a){return arguments.length?(this.options.rightAlignYAxis=a,this.yAxis.orient(a?"right":"left"),this):this.options.rightAlignYAxis},k.prototype.reduceXTicks=function(a){return arguments.length?(this.options.reduceXTicks=a,this):this.options.reduceXTicks},k.prototype.state=function(b){return a.deprecated("Chart.state"),arguments.length?(this.options.state=b,this):this.options.state};var Q={xScale:b.scale.ordinal(),yScale:b.scale.linear(),xScale0:null,yScale0:null,forceY:[0],showValues:!1,valueFormat:b.format(",.2f"),xDomain:null,yDomain:null,xRange:null,yRange:null,rectClass:"discreteBar",id:null,x:null,y:null};a.utils.create(l,e,Q),l.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a,["nv-groups"])},l.prototype.draw=function(a){function c(c,e){return{value:f.y()(c,e),point:c,series:a[c.series],pos:[f.xScale()(f.x()(c,e))+f.xScale().rangeBand()*(c.series+.5)/d,f.yScale()(f.y()(c,e))],pointIndex:e,seriesIndex:c.series,e:b.event}}var d=a.length,e="nv-bar",f=this,g=this.available.width,h=this.available.height;a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});var i=this.xDomain()&&this.yDomain()?[]:a.map(function(a){return a.values.map(function(a,b){return{x:f.x()(a,b),y:f.y()(a,b),y0:a.y0}})});this.xScale().domain(this.xDomain()||b.merge(i).map(function(a){return a.x})).rangeBands(this.xRange()||[0,g],.1),this.yScale().domain(this.yDomain()||b.extent(b.merge(i).map(function(a){return a.y}).concat(this.forceY()))),this.yScale().range(this.showValues()?this.yRange()||[h-(this.yScale().domain()[0]<0?12:0),this.yScale().domain()[1]>0?12:0]:this.yRange()||[h,0]),this.xScale0(this.xScale0()||this.xScale()),this.yScale0(this.yScale0()||this.yScale().copy().range([this.yScale()(0),this.yScale()(0)]));var j=this.wrap.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});j.enter().append("g").style("stroke-opacity",this.opacityDefault()).style("fill-opacity",this.opacityDefault()),j.exit().transition().style("stroke-opacity",this.opacityDefault()).style("fill-opacity",this.opacityDefault()).remove(),j.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}),j.transition().style("stroke-opacity",1).style("fill-opacity",.75);var k=j.selectAll("g."+e).data(function(a){return a.values});k.exit().remove();var l=k.enter().append("g").attr("transform",function(a,b){return"translate("+(f.xScale()(f.x()(a,b))+.05*f.xScale().rangeBand())+", "+f.yScale()(0)+")"}).on("mouseover",function(a,d){b.select(this).classed("hover",!0),f.dispatch.elementMouseover(c(a,d))}).on("mouseout",function(a,d){b.select(this).classed("hover",!1),f.dispatch.elementMouseout(c(a,d))}).on("click",function(a,d){f.dispatch.elementClick(c(a,d)),b.event.stopPropagation()}).on("dblclick",function(a,d){f.dispatch.elementDblClick(c(a,d)),b.event.stopPropagation()});l.append("rect").attr("height",0).attr("width",.9*this.xScale().rangeBand()/d),this.showValues()?(l.append("text").attr("text-anchor","middle"),k.select("text").text(function(a,b){return f.valueFormat()(f.y()(a,b))}).transition().attr("x",.9*this.xScale().rangeBand()/2).attr("y",function(a,b){return f.y()(a,b)<0?f.yScale()(f.y()(a,b))-f.yScale()(0)+12:-4})):k.selectAll("text").remove(),k.attr("class",function(a,b){return e+" "+(f.y()(a,b)<0?"negative":"positive")}).style("fill",function(a,b){return a.color||f.color()(a,b)}).style("stroke",function(a,b){return a.color||f.color()(a,b)}).select("rect").attr("class",this.rectClass()).transition().attr("width",.9*this.xScale().rangeBand()/d),k.transition().attr("transform",function(a,b){var c=f.xScale()(f.x()(a,b))+.05*f.xScale().rangeBand(),d=f.y()(a,b)<0?f.yScale()(0):f.yScale()(0)-f.yScale()(f.y()(a,b))<1?f.yScale()(0)-1:f.yScale()(f.y()(a,b));return"translate("+c+", "+d+")"}).select("rect").attr("height",function(a,b){return Math.max(Math.abs(f.yScale()(f.y()(a,b))-f.yScale()(f.yDomain()&&f.yDomain()[0]||0))||1)}),f.xScale0(f.xScale().copy()),f.yScale0(f.yScale().copy())},a.models.discreteBar=function(){"use strict";function b(a){return c.render(a),b}var c=new l,d=["x","y","margin","width","height","xScale","yScale","xDomain","yDomain","xRange","yRange","forceY","id","showValues","valueFormat","rectClass","color"];return b.dispatch=c.dispatch,b.options=a.utils.optionsFunc.bind(b),a.utils.rebindp(b,c,l.prototype,d),b};var R={defaultState:null,xTicksPadding:[5,17],xScale:null,yScale:null,transitionDuration:250,state:null,staggerLabels:null,tooltips:!0,x:null,y:null,id:null};a.utils.create(m,k,R),m.prototype.getDiscreteBar=function(){return a.models.discreteBar()},m.prototype.wrapper=function(a){k.prototype.wrapper.call(this,a,[])},m.prototype.draw=function(a){this.discreteBar.width(this.available.width).height(this.available.height);var c=this.g.select(".nv-barsWrap").datum(a);b.transition(c).call(this.discreteBar),this.xScale(this.discreteBar.xScale()),this.yScale(this.discreteBar.yScale().clamp(!0)),this.x(this.discreteBar.x()),this.y(this.discreteBar.y()),this.id(this.discreteBar.id()),this.defsEnter.append("clipPath").attr("id","nv-x-label-clip-"+this.id()).append("rect"),this.g.select("#nv-x-label-clip-"+this.id()+" rect").attr("width",this.xScale().rangeBand()*(this.staggerLabels()?2:1)).attr("height",16).attr("x",-this.xScale().rangeBand()/(this.staggerLabels()?1:2)),this.g.select(".nv-zeroLine line").attr("x1",0).attr("x2",this.available.width).attr("y1",this.y()(0)).attr("y2",this.y()(0)),k.prototype.draw.call(this,a)},m.prototype.attachEvents=function(){k.prototype.attachEvents.call(this),this.discreteBar.dispatch.on("elementMouseout.tooltip",function(a){this.dispatch.tooltipHide(a)}.bind(this)).on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+this.margin().left,a.pos[1]+this.margin().top],this.dispatch.tooltipShow(a)}.bind(this))},m.prototype.showTooltip=function(b){var c=this.svg[0][0],d=b.pos[0]+(c.offsetLeft||0),e=b.pos[1]+(c.offsetTop||0),f=this.xAxis.tickFormat()(this.x()(b.point,b.pointIndex)),g=this.yAxis.tickFormat()(this.y()(b.point,b.pointIndex)),h=this.tooltip()(b.series.key,f,g);a.tooltip.show([d,e],h,b.value<0?"n":"s",null,c)},a.models.discreteBarChart=function(){"use strict";function c(a){return d.render(a),c}var d=new m,e=["margin","width","height","tooltips","tooltipContent","showLegend","showXAxis","showYAxis","rightAlignYAxis","staggerLabels","noData","transitionDuration","state","reduceXTicks"];return c.dispatch=d.dispatch,c.legend=d.legend,c.discreteBar=d.discreteBar,c.xAxis=d.xAxis,c.yAxis=d.yAxis,c.state=d.state,b.rebind(c,d.discreteBar,"x","y","color","xDomain","yDomain","xRange","yRange","forceX","forceY","id","showValues","valueFormat"),c.options=a.utils.optionsFunc.bind(c),a.utils.rebindp(c,d,m.prototype,e),c};var S={xScale:b.scale.linear(),yScale:b.scale.linear(),forceX:null,forceY:[0],padData:!1,clipEdge:!0,xDomain:null,yDomain:null,xRange:null,yRange:null,interactive:!0,id:null,x:function(a){return a.x},y:function(a){return a.y}};a.utils.create(n,e,S),n.prototype.attachEvents=function(){e.prototype.attachEvents.call(this),this.svg.on("click",function(a,c){this.dispatch.chartClick({data:a,index:c,pos:b.event,id:this.id()})}.bind(this))},n.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a[0].values,["nv-bars"])},n.prototype.draw=function(c){var d=this,e=this.available.width,f=this.available.height;this.xScale().domain(this.xDomain()||b.extent(c[0].values.map(this.x()).concat(this.forceX()))),this.xScale().range(this.padData()?this.xRange()||[.5*e/c[0].values.length,e*(c[0].values.length-.5)/c[0].values.length]:this.xRange()||[0,e]),this.yScale().domain(this.yDomain()||b.extent(c[0].values.map(this.y()).concat(this.forceY()))).range(this.yRange()||[f,0]),this.xScale().domain()[0]===this.xScale().domain()[1]&&this.xScale().domain(this.xScale().domain()[0]?[this.xScale().domain()[0]-.01*this.xScale().domain()[0],this.xScale().domain()[1]+.01*this.xScale().domain()[1]]:[-1,1]),this.yScale().domain()[0]===this.yScale().domain()[1]&&this.yScale().domain(this.yScale().domain()[0]?[this.yScale().domain()[0]+.01*this.yScale().domain()[0],this.yScale().domain()[1]-.01*this.yScale().domain()[1]]:[-1,1]),this.defsEnter.append("clipPath").attr("id","nv-chart-clip-path-"+this.id()).append("rect"),this.wrap.select("#nv-chart-clip-path-"+this.id()+" rect").attr("width",e).attr("height",f),this.g.attr("clip-path",this.clipEdge()?"url(#nv-chart-clip-path-"+this.id()+")":"");var g=this.wrap.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a},function(a,b){return d.x()(a,b)});g.exit().remove();g.enter().append("rect").attr("x",0).attr("y",function(b){return a.utils.NaNtoZero(d.yScale()(Math.max(0,d.y()(b))))}).attr("height",function(b){return a.utils.NaNtoZero(Math.abs(d.yScale()(d.y()(b))-d.yScale()(0)))}).attr("transform",function(a,b){return"translate("+(d.xScale()(d.x()(a,b))-e/c[0].values.length*.45)+",0)"}).on("mouseover",function(a,e){d.interactive()&&(b.select(this).classed("hover",!0),d.dispatch.elementMouseover({point:a,series:c[0],pos:[d.xScale()(d.x()(a,e)),d.yScale()(d.y()(a,e))],pointIndex:e,seriesIndex:0,e:b.event}))}).on("mouseout",function(a,e){d.interactive()&&(b.select(this).classed("hover",!1),d.dispatch.elementMouseout({point:a,series:c[0],pointIndex:e,seriesIndex:0,e:b.event}))}).on("click",function(a,c){d.interactive()&&(d.dispatch.elementClick({value:d.y()(a,c),data:a,index:c,pos:[d.xScale()(d.x()(a,c)),d.yScale()(d.y()(a,c))],e:b.event,id:d.id()}),b.event.stopPropagation())}).on("dblclick",function(a,c){d.interactive()&&(d.dispatch.elementDblClick({value:d.y()(a,c),data:a,index:c,pos:[d.xScale()(d.x()(a,c)),d.yScale()(d.y()(a,c))],e:b.event,id:d.id()}),b.event.stopPropagation())});g.attr("fill",function(a,b){return d.color()(a,b)}).attr("class",function(a,b,c){return(d.y()(a,b)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+c+"-"+b}).transition().attr("transform",function(a,b){return"translate("+(d.xScale()(d.x()(a,b))-e/c[0].values.length*.45)+",0)"}).attr("width",e/c[0].values.length*.9),g.transition().attr("y",function(b,c){var e=d.y()(b,c)<0?d.yScale()(0):d.yScale()(0)-d.yScale()(d.y()(b,c))<1?d.yScale()(0)-1:d.yScale()(d.y()(b,c));return a.utils.NaNtoZero(e)}).attr("height",function(b,c){return a.utils.NaNtoZero(Math.max(Math.abs(d.yScale()(d.y()(b,c))-d.yScale()(0)),1))})},n.prototype.highlightPoint=function(a,c){b.select(".nv-"+this.options.chartClass+"-"+this.id()).select(".nv-bars .nv-bar-0-"+a).classed("hover",c)},n.prototype.clearHighlights=function(){b.select(".nv-"+this.options.chartClass+"-"+this.id()).select(".nv-bars .nv-bar.hover").classed("hover",!1)},a.models.historicalBar=function(){"use strict";function b(a){return c.render(a),b}var c=new n,d=["x","y","width","height","margin","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","padData","clipEdge","color","id","interactive"];return b.dispatch=c.dispatch,b.options=a.utils.optionsFunc.bind(b),a.utils.rebindp(b,c,n.prototype,d),b};var T={defaultState:null,transitionDuration:250,xScale:null,yScale:null,tooltips:!0};a.utils.create(o,k,T),o.prototype.wrapper=function(a){k.prototype.wrapper.call(this,a)},o.prototype.draw=function(a){this.historicalBar.width(this.available.width).height(this.available.height).color(b.functor(a.map(function(a,b){return a.color||this.color(a,b)}.bind(this)).filter(function(b,c){return!a[c].disabled}))),this.xScale(this.historicalBar.xScale()),this.yScale(this.historicalBar.yScale());this.g.select(".nv-barsWrap").datum(a.filter(function(a){return!a.disabled})).transition().call(this.historicalBar);k.prototype.draw.call(this,a)},o.prototype.attachEvents=function(){k.prototype.attachEvents.call(this);var a=null;this.svg.call(function(b){b.each(function(b){a=b})}),this.historicalBar.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+this.margin().left,a.pos[1]+this.margin().top],this.dispatch.tooltipShow(a)}.bind(this)).on("elementMouseout.tooltip",function(a){this.dispatch.tooltipHide(a)}.bind(this)),this.legend.dispatch.on("legendClick",function(b){b.disabled=!b.disabled,a.filter(function(a){return!a.disabled}).length||a.map(function(a){return a.disabled=!1,this.wrap.selectAll(".nv-series").classed("disabled",!1),a}.bind(this)),this.state.disabled=a.map(function(a){return!!a.disabled}),this.dispatch.stateChange(this.state),this.svg.transition().call(this.historicalBar)}.bind(this)).on("legendDblclick",function(b){a.forEach(function(a){a.disabled=!0}),b.disabled=!1,this.state.disabled=a.map(function(a){return!!a.disabled}),this.dispatch.stateChange(this.state),this.update()}.bind(this)),this.dispatch.on("tooltipShow",function(a){this.tooltips()&&this.showTooltip(a,this.svg[0][0].parentNode)}.bind(this))},o.prototype.color=function(b){return arguments.length?(this.options.color=a.utils.getColor(b),this.legend.color(this.color()),this):this.options.color},o.prototype.showTooltip=function(c,d){if(d){var e=b.select(d).select("svg"),f=e.node()?e.attr("viewBox"):null;if(f){f=f.split(" ");var g=parseInt(e.style("width"))/f[2];c.pos[0]=c.pos[0]*g,c.pos[1]=c.pos[1]*g}}var h=c.pos[0]+(d.offsetLeft||0),i=c.pos[1]+(d.offsetTop||0),j=this.xAxis.tickFormat()(this.historicalBar.x()(c.point,c.pointIndex)),k=this.yAxis.tickFormat()(this.historicalBar.y()(c.point,c.pointIndex)),l=this.tooltip()(c.series.key,j,k);a.tooltip.show([h,i],l,null,null,d)},a.models.historicalBarChart=function(){"use strict";function c(a){return d.render(a),c}var d=new o,e=["margin","width","height","color","showLegend","showXAxis","showYAxis","rightAlignYAxis","tooltips","tooltipContent","state","defaultState","noData","transitionDuration","reduceXTicks"];return c.dispatch=d.dispatch,c.historicalBar=d.historicalBar,c.legend=d.legend,c.xAxis=d.xAxis,c.yAxis=d.yAxis,c.state=d.state,b.rebind(c,d.historicalBar,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","highlightPoint","clearHighlights","interactive"),c.options=a.utils.optionsFunc.bind(c),a.utils.rebindp(c,d,o.prototype,e),c};var U={xScale:b.scale.ordinal(),yScale:b.scale.linear(),disabled:[],xDomain:null,yDomain:null,xRange:null,yRange:null,clipEdge:!0,stacked:!1,stackOffset:"zero",hideable:!1,groupSpacing:.1,forceY:[0],xScale0:null,yScale0:null,duration:1e3,barColor:null,id:null,x:function(a){return a.x},y:function(a){return a.y},color:null};a.utils.create(p,e,U),p.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a,["nv-groups"])},p.prototype.draw=function(a){function c(a,c,e){return b.rgb(d.barColor()(a,c)).darker(d.disabled().map(function(a,b){return b}).filter(function(a,b){return!d.disabled[b]})[e]).toString()}var d=this,e=this.available.width,f=this.available.height,g=[],h=null,i=null,j=null,k=function(c,e){return{value:d.y()(c),point:c,series:a[c.series],pos:[d.xScale()(d.x()(c))+d.xScale().rangeBand()*(d.stacked()?a.length/2:c.series+.5)/a.length,d.yScale()(d.y()(c)+(d.stacked()?c.y0:0))],pointIndex:e,seriesIndex:c.series,e:b.event}};this.hideable()&&a.length&&(g=[{values:a[0].values.map(function(a){return{x:a.x,y:0,series:a.series,size:.01}})}]),this.stacked()&&(a=b.layout.stack().offset(this.stackOffset()).values(function(a){return a.values}).y(this.y())(!a.length&&g?g:a)),a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})}),this.stacked()&&a[0].values.map(function(b,c){var d=0,e=0;a.map(function(a){var b=a.values[c];b.size=Math.abs(b.y),b.y<0?(b.y1=e,e-=b.size):(b.y1=b.size+d,d+=b.size)})}),h=this.xDomain()&&this.yDomain()?[]:a.map(function(a){return a.values.map(function(a){return{x:d.x()(a),y:d.y()(a),y0:a.y0,y1:a.y1}})}),this.xScale().domain(this.xDomain()||b.merge(h).map(d.x())).rangeBands(this.xRange()||[0,e],this.groupSpacing()),this.yScale().domain(this.yDomain()||b.extent(b.merge(h).map(function(a){return d.stacked()?d.y()(a)>0?a.y1:a.y1+d.y()(a):d.y()(a)}).concat(this.forceY()))).range(this.yRange()||[f,0]),this.xScale().domain()[0]===this.xScale().domain()[1]&&this.xScale().domain(this.xScale().domain()[0]?[this.xScale().domain()[0]-.01*this.xScale().domain()[0],this.xScale().domain()[1]+.01*this.xScale().domain()[1]]:[-1,1]),this.yScale().domain()[0]===this.yScale().domain()[1]&&this.yScale().domain(this.yScale().domain()[0]?[this.yScale().domain()[0]+.01*this.yScale().domain()[0],this.yScale().domain()[1]-.01*this.yScale().domain()[1]]:[-1,1]),this.xScale0(this.xScale0()||this.xScale()),this.yScale0(this.yScale0()||this.yScale()),this.defsEnter.append("clipPath").attr("id","nv-edge-clip-"+this.id()).append("rect"),this.wrap.select("#nv-edge-clip-"+this.id()+" rect").attr("width",e).attr("height",f),this.g.attr("clip-path",this.clipEdge()?"url(#nv-edge-clip-"+this.id()+")":"");var l=this.wrap.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});l.enter().append("g").style("stroke-opacity",this.opacityDefault()).style("fill-opacity",this.opacityDefault()),i=this.renderWatch.transition(l.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(250,this.duration())).attr("y",function(a){return d.yScale0()(d.stacked()?a.y0:0)}).attr("height",0).remove(),i.delay&&i.delay(function(b,c){return c*d.duration()/a[0].values.length}),l.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return d.color()(a,b)}).style("stroke",function(a,b){return d.color()(a,b)}),l.style("stroke-opacity",1).style("fill-opacity",.75);var m=l.selectAll("rect.nv-bar").data(function(b){return g&&!a.length?g.values:b.values});m.exit().remove(),j=m.enter().append("rect").attr("class",function(a){return d.y()(a)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(b,c,e){return d.stacked()?0:e*d.xScale().rangeBand()/a.length}).attr("y",function(a){return d.yScale0()(d.stacked()?a.y0:0)}).attr("height",0).attr("width",this.xScale().rangeBand()/(this.stacked()?1:a.length)).attr("transform",function(a){return"translate("+d.xScale()(d.x()(a))+",0)"}),m.style("fill",function(a,b,c){return d.color()(a,c,b)}).style("stroke",function(a,b,c){return d.color()(a,c,b)}).on("mouseover",function(a,c){b.select(this).classed("hover",!0),d.dispatch.elementMouseover(k(a,c))}).on("mouseout",function(a,c){b.select(this).classed("hover",!1),d.dispatch.elementMouseout(k(a,c))}).on("click",function(a,c){d.dispatch.elementClick(k(a,c)),b.event.stopPropagation()}).on("dblclick",function(a,c){d.dispatch.elementDblClick(k(a,c)),b.event.stopPropagation()}),m.attr("class",function(a){return d.y()(a)<0?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",function(a){return"translate("+d.xScale()(d.x()(a))+",0)"}),this.barColor()&&(this.disabled()||this.disabled(a.map(function(){return!0})),m.style("fill",c).style("stroke",c));var n=m.watchTransition(this.renderWatch,"multibar",Math.min(250,this.duration())).delay(function(b,c){return c*d.duration()/a[0].values.length});this.stacked()?n.attr("y",function(a){return d.y()(d.stacked()?a.y1:0)}).attr("height",function(a){return Math.max(Math.abs(d.yScale()(a.y+(d.stacked()?a.y0:0))-d.yScale()(d.stacked()?a.y0:0)),1)}).attr("x",function(b){return d.stacked()?0:b.series*d.xScale().rangeBand()/a.length}).attr("width",this.xScale().rangeBand()/(this.stacked()?1:a.length)):n.attr("x",function(b){return b.series*d.xScale().rangeBand()/a.length}).attr("width",this.xScale().rangeBand()/a.length).attr("y",function(a){return d.yScale()(a)<0?d.yScale()(0):d.yScale()(0)-d.yScale()(d.y()(a))<1?d.yScale()(0)-1:d.yScale()(d.y()(a))||0
}).attr("height",function(a,b){return Math.max(Math.abs(d.yScale()(d.y()(a,b))-d.yScale()(0)),1)||0})},p.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.renderWatch.reset(a),this):this.options.duration},p.prototype.delay=function(b){return a.deprecated("multiBar.delay"),this.duration(b)},p.prototype.barColor=function(b){return arguments.length?(this.options.barColor=a.utils.getColor(b),this):this.options.barColor},a.models.multiBar=function(){"use strict";function b(a){return c.render(a),b}var c=new p,d=["x","y","margin","width","height","xScale","yScale","xDomain","yDomain","xRange","yRange","forceY","stacked","stackOffset","clipEdge","color","barColor","disabled","id","hideable","groupSpacing","duration","delay"];return b.dispatch=c.dispatch,b.options=a.utils.optionsFunc.bind(b),a.utils.rebindp(b,c,p.prototype,d),b};var V={stacked:!1,defaultState:null,showControls:!0,color:null,xScale:null,yScale:null,tooltips:!0,duration:250,rotateLabels:!1,staggerLabels:!1,controlsData:[]};a.utils.create(q,k,V),q.prototype.getMultiBar=function(){return a.models.multiBar()},q.prototype.wrapper=function(b){k.prototype.wrapper.call(this,b,["nv-controlsWrap"]),this.renderWatch=a.utils.renderWatch(this.dispatch),this.renderWatch.reset(),this.showXAxis()&&this.renderWatch.models(this.xAxis),this.showYAxis()&&this.renderWatch.models(this.yAxis),this.renderWatch.models(this.multibar)},q.prototype.draw=function(a){this.multibar.stacked(this.stacked()).disabled(a.map(function(a){return a.disabled})).width(this.available.width).height(this.available.height),this.xScale(this.multibar.xScale()),this.yScale(this.multibar.yScale());var c=this.g.select(".nv-barsWrap").datum(a.filter(function(a){return!a.disabled}));b.transition(c).call(this.multibar),this.state.setter(this.stateSetter(a),this.update).getter(this.stateGetter(a)).update(),this.state.disabled=a.map(function(a){return!!a.disabled}),this.showControls()&&(this.controlsData([{key:"Grouped",disabled:this.stacked()},{key:"Stacked",disabled:!this.stacked()}]),this.controls.width(this.showControls()?180:0).color(["#444","#444","#444"]),this.g.select(".nv-controlsWrap").datum(this.controlsData()).attr("transform","translate(0,"+-this.margin().top+")").call(this.controls)),k.prototype.draw.call(this,a)},q.prototype.attachEvents=function(){k.prototype.attachEvents.call(this),this.multibar.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+this.margin().left,a.pos[1]+this.margin().top],this.dispatch.tooltipShow(a)}.bind(this)).on("elementMouseout.tooltip",function(a){this.dispatch.tooltipHide(a)}.bind(this)),this.legend.dispatch.on("legendClick",function(){this.update()}.bind(this)),this.controls.dispatch.on("legendClick",function(a){if(a.disabled){switch(this.controlsData(this.controlsData().map(function(a){return a.disabled=!0,a})),a.disabled=!1,a.key){case"Grouped":this.stacked(!1),this.multibar.stacked(!1);break;case"Stacked":this.stacked(!0),this.multibar.stacked(!0)}this.state.stacked=this.multibar.stacked(),this.dispatch.stateChange(this.state),this.update()}}.bind(this)),this.dispatch.on("tooltipShow",function(a){this.tooltips()&&this.showTooltip(a,this.svg[0][0].parentNode)}.bind(this)).on("changeState",function(a){"undefined"!=typeof a.disabled&&(this.data.forEach(function(b,c){b.disabled=a.disabled[c]}),this.state.disabled=a.disabled),"undefined"!=typeof a.stacked&&(this.multibar.stacked(a.stacked),this.state.stacked=a.stacked,this.stacked(a.stacked)),this.update()}.bind(this))},q.prototype.color=function(b){return arguments.length?(this.options.color=a.utils.getColor(b),this.legend.color(this.options.color),this.multibar.color(this.options.color),this):this.options.color},q.prototype.showTooltip=function(b,c){var d=b.pos[0]+(c.offsetLeft||0),e=b.pos[1]+(c.offsetTop||0),f=this.xAxis.tickFormat()(this.multibar.x()(b.point,b.pointIndex)),g=this.yAxis.tickFormat()(this.multibar.y()(b.point,b.pointIndex)),h=this.tooltip()(b.series.key,f,g);a.tooltip.show([d,e],h,b.value<0?"n":"s",null,c)},q.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.multibar.duration(a),this.xAxis.duration(a),this.yAxis.duration(a),this.renderWatch.reset(a),this):this.options.duration},a.models.multiBarChart=function(){"use strict";function c(a){return d.render(a),c}var d=new q,e=["margin","width","height","color","showControls","showLegend","showXAxis","showYAxis","rightAlignYAxis","rotateLabels","staggerLabels","tooltip","tooltips","tooltipContent","state","defaultState","noData","duration","transitionDuration","reduceXTicks"];return c.dispatch=d.dispatch,c.multibar=d.multibar,c.legend=d.legend,c.xAxis=d.xAxis,c.yAxis=d.yAxis,c.state=d.state,b.rebind(c,d.multibar,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing","xScale","yScale"),c.options=a.utils.optionsFunc.bind(c),a.utils.rebindp(c,d,q.prototype,e),c};var W={xScale:b.scale.ordinal(),yScale:b.scale.linear(),forceY:[0],color:a.utils.defaultColor(),disabled:null,stacked:!1,showValues:!1,showBarLabels:!1,valuePadding:60,valueFormat:b.format(",.2f"),delay:1200,xDomain:null,yDomain:null,xRange:null,yRange:null,duration:null,id:null};a.utils.create(r,k,W),r.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a,["nv-groups"])},r.prototype.draw=function(a){var c,d,e=this,f=this.available.width,g=this.available.height;this.stacked()&&(a=b.layout.stack().offset("zero").values(function(a){return a.values}).y(this.y())(a)),a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})}),this.stacked()&&a[0].values.map(function(b,c){var d=0,e=0;a.map(function(a){var b=a.values[c];b.size=Math.abs(b.y),b.y<0?(b.y1=e-b.size,e-=b.size):(b.y1=d,d+=b.size)})});var h=this.xDomain()&&this.yDomain()?[]:a.map(function(a){return a.values.map(function(a,b){return{x:e.x()(a,b),y:e.y()(a,b),y0:a.y0,y1:a.y1}})});this.xScale().domain(this.xDomain()||b.merge(h).map(function(a){return a.x})).rangeBands(this.xRange()||[0,g],.1),this.yScale().domain(this.yDomain()||b.extent(b.merge(h).map(function(a){return e.stacked()?a.y>0?a.y1+a.y:a.y1:a.y}).concat(e.forceY()))),this.yScale().range(this.showValues()&&!this.stacked()?this.yRange()||[this.yScale().domain()[0]<0?this.valuePadding():0,f-(this.yScale().domain()[1]>0?this.valuePadding():0)]:this.yRange()||[0,f]),c=c||this.xScale(),d=d||b.scale.linear().domain(this.yScale().domain()).range([this.yScale()(0),this.yScale()(0)]);var i=this.wrap.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});i.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),i.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),i.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a){return e.color()(a)}).style("stroke",function(a){return e.color()(a)}),i.transition().style("stroke-opacity",1).style("fill-opacity",.75);var j=i.selectAll("g.nv-bar").data(function(a){return a.values});j.exit().remove();var k=j.enter().append("g").attr("transform",function(b,c,f){return"translate("+d(e.stacked()?b.y0:0)+","+(e.stacked()?0:f*e.xScale().rangeBand()/a.length+e.xScale()(e.x()(b,c)))+")"});if(k.append("rect").attr("width",0).attr("height",this.xScale().rangeBand()/(e.stacked()?1:a.length)),j.on("mouseover",function(c,d){b.select(this).classed("hover",!0),e.dispatch.elementMouseover({value:e.y()(c,d),point:c,series:a[c.series],pos:[e.yScale()(e.y()(c,d)+(e.stacked()?c.y0:0)),e.xScale()(e.x()(c,d))+e.xScale().rangeBand()*(e.stacked()?a.length/2:c.series+.5)/a.length],pointIndex:d,seriesIndex:c.series,e:b.event})}).on("mouseout",function(c,d){b.select(this).classed("hover",!1),e.dispatch.elementMouseout({value:e.y()(c,d),point:c,series:a[c.series],pointIndex:d,seriesIndex:c.series,e:b.event})}).on("click",function(c,d){e.dispatch.elementClick({value:e.y()(c,d),point:c,series:a[c.series],pos:[e.xScale()(e.x()(c,d))+e.xScale().rangeBand()*(e.stacked()?a.length/2:c.series+.5)/a.length,e.yScale()(e.y()(c,d)+(e.stacked()?c.y0:0))],pointIndex:d,seriesIndex:c.series,e:b.event}),b.event.stopPropagation()}).on("dblclick",function(c,d){e.dispatch.elementDblClick({value:e.y()(c,d),point:c,series:a[c.series],pos:[e.xScale()(e.x()(c,d))+e.xScale().rangeBand()*(e.stacked()?a.length/2:c.series+.5)/a.length,e.yScale()(e.y()(c,d)+(e.stacked()?c.y0:0))],pointIndex:d,seriesIndex:c.series,e:b.event}),b.event.stopPropagation()}),k.append("text"),this.showValues()&&!this.stacked()?(j.select("text").attr("text-anchor",function(a,b){return e.y()(a,b)<0?"end":"start"}).attr("y",this.xScale().rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return e.valueFormat()(e.y()(a,b))}),j.transition().select("text").attr("x",function(a,b){return e.y()(a,b)<0?-4:e.yScale()(e.y()(a,b))-e.yScale()(0)+4})):j.selectAll("text").text(""),this.showBarLabels()&&!this.stacked()?(k.append("text").classed("nv-bar-label",!0),j.select("text.nv-bar-label").attr("text-anchor",function(a,b){return e.y()(a,b)<0?"start":"end"}).attr("y",this.xScale().rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return e.x()(a,b)}),j.transition().select("text.nv-bar-label").attr("x",function(a,b){return e.y(a,b)<0?e.yScale()(0)-e.yScale()(e.y(a,b))+4:-4})):j.selectAll("text.nv-bar-label").text(""),j.attr("class",function(a,b){return e.y()(a,b)<0?"nv-bar negative":"nv-bar positive"}),this._barColor){this.disabled()||this.disabled(a.map(function(){return!0}));var l=function(a,c,d){return b.rgb(e._barColor(a,c)).darker(e.disabled().map(function(a,b){return b}).filter(function(a,b){return!e.disabled()[b]})[d]).toString()};j.style("fill",l).style("stroke",l)}this.stacked()?j.transition().attr("transform",function(a,b){return"translate("+e.yScale()(a.y1)+","+e.xScale()(e.x()(a,b))+")"}).select("rect").attr("width",function(a,b){return Math.abs(e.yScale()(e.y()(a,b)+a.y0)-e.yScale()(a.y0))}).attr("height",this.xScale().rangeBand()):j.transition().attr("transform",function(b,c){return"translate("+e.yScale()(e.y()(b,c)<0?e.y()(b,c):0)+","+(b.series*e.xScale().rangeBand()/a.length+e.xScale()(e.x()(b,c)))+")"}).select("rect").attr("height",this.xScale().rangeBand()/a.length).attr("width",function(a,b){return Math.max(Math.abs(e.yScale()(e.y()(a,b))-e.yScale()(0)),1)}),c=this.xScale().copy(),d=this.yScale().copy()},r.prototype.barColor=function(b){return arguments.length?(this._barColor=a.utils.getColor(b),this):this._barColor},a.models.multiBarHorizontal=function(){"use strict";function b(a){return c.render(a),b}var c=new r;return b.dispatch=c.dispatch,b.options=a.utils.optionsFunc.bind(b),a.utils.rebindp(b,c,r.prototype,"x","y","margin","width","height","xScale","yScale","xDomain","yDomain","xRange","yRange","forceY","stacked","color","barColor","disabled","id","delay","showValues","showBarLabels","valueFormat","valuePadding"),b};var X={showLegend:!0,showControls:!0,showXAxis:!0,showYAxis:!0,stacked:!1,tooltips:!0,defaultState:null,transitionDuration:250,controlsData:[],xScale:null,yScale:null,tooltipContent:null,tooltip:null,color:a.utils.defaultColor()};a.utils.create(s,k,X),s.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a,["nv-x nv-axis","nv-y nv-axis","nv-zeroLine","nv-controlsWrap"]),this.state.setter(this.stateSetter(a),this.update).getter(this.stateGetter(a)).update()},s.prototype.draw=function(a){var c=this,d=this.available.width,f=this.available.height;if(this.state.disabled=a.map(function(a){return!!a.disabled}),!this.defaultState()){var g;this.defaultState({});for(g in this.state)this.defaultState()[g]=this.state[g]instanceof Array?this.state[g].slice(0):this.state[g]}this.xScale(this.multibarHorizontal.xScale()),this.yScale(this.multibarHorizontal.yScale()),this.multibarHorizontal.margin({left:0,top:0,bottom:0,right:0}).disabled(a.map(function(a){return a.disabled})).width(d).height(f).color(a.map(function(a,b){return a.color||c.color()(a,b)}).filter(function(b,c){return!a[c].disabled})),this.g.select(".nv-barsWrap").datum(a.filter(function(a){return!a.disabled})).transition().call(this.multibarHorizontal),this.showLegend()&&(this.legend.width(d-this.controlWidth()),this.multibarHorizontal.barColor()&&a.forEach(function(a,c){a.color=b.rgb("#ccc").darker(1.5*c).toString()}),this.g.select(".nv-legendWrap").datum(a).call(this.legend),this.margin().top!=this.legend.height()&&(this.margin().top=this.legend.height(),f=(this.height()||parseInt(e.svg.style("height"))||400)-this.margin().top-this.margin().bottom),this.g.select(".nv-legendWrap").attr("transform","translate("+this.controlWidth()+","+-this.margin().top+")")),this.showControls()&&(this.controlsData([{key:"Grouped",disabled:this.multibarHorizontal.stacked()},{key:"Stacked",disabled:!this.multibarHorizontal.stacked()}]),this.controls.width(this.controlWidth()).color(["#444","#444","#444"]),this.g.select(".nv-controlsWrap").datum(this.controlsData()).attr("transform","translate(0,"+-this.margin().top+")").call(this.controls)),this.showXAxis()&&(this.xAxis.scale(this.xScale()).ticks(f/24).tickSize(-d,0),this.g.select(".nv-x.nv-axis").transition().call(this.xAxis)),this.showYAxis()&&(this.yAxis.scale(this.yScale()).ticks(d/100).tickSize(-f,0),this.g.select(".nv-y.nv-axis").attr("transform","translate(0,"+f+")").transition().call(this.yAxis)),this.g.select(".nv-zeroLine line").attr("x1",this.yScale()(0)).attr("x2",this.yScale()(0)).attr("y1",0).attr("y2",-f)},s.prototype.attachEvents=function(){k.prototype.attachEvents.call(this),this.legend.dispatch.on("stateChange",function(a){this.state=a,this.dispatch.stateChange(this.state),this.update()}.bind(this)),this.controls.dispatch.on("legendClick",function(a){if(a.disabled){switch(this.controlsData(this.controlsData().map(function(a){return a.disabled=!0,a})),a.disabled=!1,a.key){case"Grouped":this.multibarHorizontal.stacked(!1);break;case"Stacked":this.multibarHorizontal.stacked(!0)}this.state.stacked=this.multibarHorizontal.stacked(),this.dispatch.stateChange(this.state),this.update()}}.bind(this)),this.dispatch.on("changeState",function(a){"undefined"!=typeof a.disabled&&(data.forEach(function(b,c){b.disabled=a.disabled[c]}),this.state.disabled=a.disabled),"undefined"!=typeof a.stacked&&(this.multibarHorizontal.stacked(a.stacked),this.state.stacked=a.stacked),this.update()}.bind(this)).on("tooltipShow",function(a){this.tooltips()&&this.showTooltip(a,this.svg[0][0].parentNode)}.bind(this)).on("tooltipHide",function(){this.tooltips()&&a.tooltip.cleanup()}.bind(this)),this.multibarHorizontal.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+this.margin().left,a.pos[1]+this.margin().top],this.dispatch.tooltipShow(a)}.bind(this)).on("elementMouseout.tooltip",function(a){this.dispatch.tooltipHide(a)}.bind(this))},s.prototype.getMultibarHorizontal=function(){return a.models.multiBarHorizontal()},s.prototype.color=function(b){return arguments.length?(this.options.color=a.utils.getColor(b),this.legend.color(this.color()),this):this.options.color},s.prototype.tooltipContent=function(a){return arguments.length?(this.tooltip(a),this):this.tooltip()},a.models.multiBarHorizontalChart=function(){"use strict";function c(a){return d.render(a),c}var d=new s;return c.dispatch=d.dispatch,c.multibarHorizontal=d.multibarHorizontal,c.legend=d.legend,c.xAxis=d.xAxis,c.yAxis=d.yAxis,c.state=d.state,c.options=a.utils.optionsFunc.bind(c),b.rebind(c,d.multibarHorizontal,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","showBarLabels","valueFormat","stacked","barColor"),c.options=a.utils.optionsFunc.bind(c),a.utils.rebindp(c,d,s.prototype,"tooltip","color","margin","width","height","showControls","showLegend","showXAxis","showYAxis","tooltips","tooltipContent","state","defaultState","noData","transitionDuration"),c},a.models.multiBarTimeSeries=function(){"use strict";function c(a){return a.each(function(a){var c=l-k.left-k.right,y=m-k.top-k.bottom,z=b.select(this);u&&(a=b.layout.stack().offset("zero").values(function(a){return a.values}).y(r)(a)),a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});var A=d&&e?[]:a.map(function(a){return a.values.map(function(a,b){return{x:q(a,b),y:r(a,b),y0:a.y0}})});n.domain(d||b.extent(b.merge(A).map(function(a){return a.x}))).range(f||[0,c]),o.domain(e||b.extent(b.merge(A).map(function(a){return a.y+(u?a.y0:0)}).concat(s))).range(g||[y,0]),n.domain()[0]===n.domain()[1]&&n.domain(n.domain()[0]?[n.domain()[0]-.01*n.domain()[0],n.domain()[1]+.01*n.domain()[1]]:[-1,1]),o.domain()[0]===o.domain()[1]&&o.domain(o.domain()[0]?[o.domain()[0]+.01*o.domain()[0],o.domain()[1]-.01*o.domain()[1]]:[-1,1]),h=h||n,i=i||o;var B=z.selectAll("g.nv-wrap.nv-multibar").data([a]),C=B.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),D=C.append("defs"),E=C.append("g"),F=B.select("g");E.append("g").attr("class","nv-groups"),B.attr("transform","translate("+k.left+","+k.top+")"),D.append("clipPath").attr("id","nv-edge-clip-"+p).append("rect"),B.select("#nv-edge-clip-"+p+" rect").attr("width",c).attr("height",y),F.attr("clip-path",t?"url(#nv-edge-clip-"+p+")":"");var G=B.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});G.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),b.transition(G.exit()).selectAll("rect.nv-bar").delay(function(b,c){return c*w/a[0].values.length}).attr("y",function(a){return i(u?a.y0:0)}).attr("height",0).remove(),G.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return v(a,b)}).style("stroke",function(a,b){return v(a,b)}),b.transition(G).style("stroke-opacity",1).style("fill-opacity",.75);var H=G.selectAll("rect.nv-bar").data(function(a){return a.values});H.exit().remove();for(var I=0,J=0;J<A.length;J+=1)I=Math.max(A[J].length,I);{var K=c/I-.1,L=K/a.length;H.enter().append("rect").attr("class",function(a,b){return r(a,b)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(a,b,c){return u?0:b*K+c*L}).attr("y",function(a){return i(u?a.y0:0)}).attr("height",0).attr("width",u?K:L)}H.on("mouseover",function(c,d){b.select(this).classed("hover",!0),x.elementMouseover({value:r(c,d),point:c,series:a[c.series],pos:[n(q(c,d))+L*(u?a.length/2:c.series+.5)/a.length,o(r(c,d)+(u?c.y0:0))],pointIndex:d,seriesIndex:c.series,e:b.event})}).on("mouseout",function(c,d){b.select(this).classed("hover",!1),x.elementMouseout({value:r(c,d),point:c,series:a[c.series],pointIndex:d,seriesIndex:c.series,e:b.event})}).on("click",function(c,d){x.elementClick({value:r(c,d),point:c,series:a[c.series],pos:[n(q(c,d))+L*(u?a.length/2:c.series+.5)/a.length,o(r(c,d)+(u?c.y0:0))],pointIndex:d,seriesIndex:c.series,e:b.event}),b.event.stopPropagation()}).on("dblclick",function(c,d){x.elementDblClick({value:r(c,d),point:c,series:a[c.series],pos:[n(q(c,d))+L*(u?a.length/2:c.series+.5)/a.length,o(r(c,d)+(u?c.y0:0))],pointIndex:d,seriesIndex:c.series,e:b.event}),b.event.stopPropagation()}),H.attr("class",function(a,b){return r(a,b)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(a,b){return"translate("+n(q(a,b))+",0)"}),u?b.transition(H).delay(function(b,c){return c*w/a[0].values.length}).attr("y",function(a,b){return o(r(a,b)+(u?a.y0:0))}).attr("height",function(a){return Math.abs(o(a.y+(u?a.y0:0))-o(u?a.y0:0))}).each("end",function(){b.transition(b.select(this)).attr("x",function(a,b){return u?0:b*K+j*L}).attr("width",u?K:L)}):b.transition(H).delay(function(b,c){return c*w/a[0].values.length}).attr("x",function(a){return a.series*L}).attr("width",L).each("end",function(){b.transition(b.select(this)).attr("y",function(a,b){return o(r(a,b)<0?0:r(a,b))}).attr("height",function(a,b){return Math.abs(o(r(a,b))-o(0))})}),h=n.copy(),i=o.copy()}),c}var d,e,f,g,h,i,k={top:0,right:0,bottom:0,left:0},l=960,m=500,n=b.time.scale(),o=b.scale.linear(),p=Math.floor(1e4*Math.random()),q=function(a){return a.x},r=function(a){return a.y},s=[0],t=!0,u=!1,v=a.utils.defaultColor(),w=1200,x=b.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return c.dispatch=x,c.options=a.utils.optionsFunc.bind(c),c.x=function(a){return arguments.length?(q=a,c):q},c.y=function(a){return arguments.length?(r=a,c):r},c.margin=function(a){return arguments.length?(k.top="undefined"!=typeof a.top?a.top:k.top,k.right="undefined"!=typeof a.right?a.right:k.right,k.bottom="undefined"!=typeof a.bottom?a.bottom:k.bottom,k.left="undefined"!=typeof a.left?a.left:k.left,c):k},c.width=function(a){return arguments.length?(l=a,c):l},c.height=function(a){return arguments.length?(m=a,c):m},c.xScale=function(a){return arguments.length?(n=a,c):n},c.yScale=function(a){return arguments.length?(o=a,c):o},c.xDomain=function(a){return arguments.length?(d=a,c):d},c.yDomain=function(a){return arguments.length?(e=a,c):e},c.xRange=function(a){return arguments.length?(f=a,c):f},c.yRange=function(a){return arguments.length?(g=a,c):g},c.forceY=function(a){return arguments.length?(s=a,c):s},c.stacked=function(a){return arguments.length?(u=a,c):u},c.clipEdge=function(a){return arguments.length?(t=a,c):t},c.color=function(b){return arguments.length?(v=a.utils.getColor(b),c):v},c.id=function(a){return arguments.length?(p=a,c):p},c.delay=function(a){return arguments.length?(w=a,c):w},c},a.models.multiBarTimeSeriesChart=function(){"use strict";function c(a){return a.each(function(t){var x=b.select(this),y=this,z=(l||parseInt(x.style("width"))||960)-k.left-k.right,A=(m||parseInt(x.style("height"))||400)-k.top-k.bottom;if(c.update=function(){a.transition().call(c)},c.container=this,!(t&&t.length&&t.filter(function(a){return a.values.length}).length)){var B=x.selectAll(".nv-noData").data([u]);return B.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),B.attr("x",k.left+z/2).attr("y",k.top+A/2).text(function(a){return a}),c}x.selectAll(".nv-noData").remove(),d=f.xScale(),e=f.yScale();var C=x.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([t]),D=C.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),E=C.select("g");if(D.append("g").attr("class","nv-x nv-axis"),D.append("g").attr("class","nv-y nv-axis"),D.append("g").attr("class","nv-barsWrap"),D.append("g").attr("class","nv-legendWrap"),D.append("g").attr("class","nv-controlsWrap"),p&&(i.width(z/2),E.select(".nv-legendWrap").datum(t).call(i),k.top!=i.height()&&(k.top=i.height(),A=(m||parseInt(x.style("height"))||400)-k.top-k.bottom),E.select(".nv-legendWrap").attr("transform","translate("+z/2+","+-k.top+")")),o){var F=[{key:"Grouped",disabled:f.stacked()},{key:"Stacked",disabled:!f.stacked()}];j.width(180).color(["#444","#444","#444"]),E.select(".nv-controlsWrap").datum(F).attr("transform","translate(0,"+-k.top+")").call(j)}C.attr("transform","translate("+k.left+","+k.top+")"),f.width(z).height(A).color(t.map(function(a,b){return a.color||n(a,b)}).filter(function(a,b){return!t[b].disabled}));var G=E.select(".nv-barsWrap").datum(t.filter(function(a){return!a.disabled}));b.transition(G).call(f),g.scale(d).ticks(z/100).tickSize(-A,0),E.select(".nv-x.nv-axis").attr("transform","translate(0,"+e.range()[0]+")"),b.transition(E.select(".nv-x.nv-axis")).call(g);var H=E.select(".nv-x.nv-axis > g").selectAll("g");H.selectAll("line, text").style("opacity",1),q&&H.filter(function(a,b){return b%Math.ceil(t[0].values.length/(z/100))!==0}).selectAll("text, line").style("opacity",0),r&&H.selectAll("text").attr("transform",function(){return"rotate("+r+" 0,0)"}).attr("text-transform",r>0?"start":"end"),h.scale(e).ticks(A/36).tickSize(-z,0),b.transition(E.select(".nv-y.nv-axis")).call(h),i.dispatch.on("legendClick",function(b){b.disabled=!b.disabled,t.filter(function(a){return!a.disabled}).length||t.map(function(a){return a.disabled=!1,C.selectAll(".nv-series").classed("disabled",!1),a}),a.transition().call(c)}),j.dispatch.on("legendClick",function(b){if(b.disabled){switch(F=F.map(function(a){return a.disabled=!0,a}),b.disabled=!1,b.key){case"Grouped":f.stacked(!1);break;case"Stacked":f.stacked(!0)}a.transition().call(c)}}),v.on("tooltipShow",function(a){s&&w(a,y.parentNode)})}),c}var d,e,f=a.models.multiBarTimeSeries(),g=a.models.axis(),h=a.models.axis(),i=a.models.legend(),j=a.models.legend(),k={top:30,right:20,bottom:50,left:60},l=null,m=null,n=a.utils.defaultColor(),o=!0,p=!0,q=!0,r=0,s=!0,t=function(a,b,c){return"<h3>"+a+"</h3><p>"+c+" on "+b+"</p>"},u="No Data Available.",v=b.dispatch("tooltipShow","tooltipHide");f.stacked(!1),g.orient("bottom").tickPadding(7).highlightZero(!1).showMaxMin(!1),h.orient("left").tickFormat(b.format(",.1f"));var w=function(b,d){var e=b.pos[0]+(d.offsetLeft||0),i=b.pos[1]+(d.offsetTop||0),j=g.tickFormat()(f.x()(b.point,b.pointIndex)),k=h.tickFormat()(f.y()(b.point,b.pointIndex)),l=t(b.series.key,j,k,b,c);a.tooltip.show([e,i],l,b.value<0?"n":"s",null,d)};return f.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+k.left,a.pos[1]+k.top],v.tooltipShow(a)}),f.dispatch.on("elementMouseout.tooltip",function(a){v.tooltipHide(a)}),v.on("tooltipHide",function(){s&&a.tooltip.cleanup()}),c.dispatch=v,c.multibar=f,c.legend=i,c.xAxis=g,c.yAxis=h,b.rebind(c,f,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","delay"),c.options=a.utils.optionsFunc.bind(c),c.margin=function(a){return arguments.length?(k.top="undefined"!=typeof a.top?a.top:k.top,k.right="undefined"!=typeof a.right?a.right:k.right,k.bottom="undefined"!=typeof a.bottom?a.bottom:k.bottom,k.left="undefined"!=typeof a.left?a.left:k.left,c):k},c.width=function(a){return arguments.length?(l=a,c):l},c.height=function(a){return arguments.length?(m=a,c):m},c.color=function(b){return arguments.length?(n=a.utils.getColor(b),i.color(n),c):n},c.showControls=function(a){return arguments.length?(o=a,c):o},c.showLegend=function(a){return arguments.length?(p=a,c):p},c.reduceXTicks=function(a){return arguments.length?(q=a,c):q},c.rotateLabels=function(a){return arguments.length?(r=a,c):r},c.tooltip=function(a){return arguments.length?(t=a,c):t},c.tooltips=function(a){return arguments.length?(s=a,c):s},c.tooltipContent=function(a){return arguments.length?(t=a,c):t},c.noData=function(a){return arguments.length?(u=a,c):u},c};var Y={reverse:!1,ranges:function(a){return a.ranges},markers:function(a){return a.markers},measures:function(a){return a.measures},rangeLabels:function(a){return a.rangeLabels?a.rangeLabels:[]},markerLabels:function(a){return a.markerLabels?a.markerLabels:[]},measureLabels:function(a){return a.measureLabels?a.measureLabels:[]},forceX:[0],tickFormat:null,xScale1:b.scale.linear(),xScale0:null,color:a.utils.getColor(["#1f77b4"]),orient:"left"};a.utils.create(t,e,Y),t.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a),this.gEnter.append("rect").attr("class","nv-range nv-rangeMax"),this.gEnter.append("rect").attr("class","nv-range nv-rangeAvg"),this.gEnter.append("rect").attr("class","nv-range nv-rangeMin"),this.gEnter.append("rect").attr("class","nv-measure"),this.gEnter.append("path").attr("class","nv-markerTriangle")},t.prototype.draw=function(a,c){var d=this,e=this.available.width,f=this.available.height,g=this.ranges().call(this,a,c).slice().sort(b.descending),h=this.markers().call(this,a,c).slice().sort(b.descending),i=this.measures().call(this,a,c).slice().sort(b.descending),j=this.rangeLabels().call(this,a,c).slice(),k=this.markerLabels().call(this,a,c).slice(),l=this.measureLabels().call(this,a,c).slice(),m=b.min(g),n=b.max(g),o=g[1];this.xScale1().domain(b.extent(b.merge([this.forceX(),g]))).range(this.reverse()?[e,0]:[0,e]),this.xScale0().domain([0,1/0]).range(this.xScale1().range()),this.__chart__=this.xScale1();var p=function(a){return Math.abs(d.xScale1()(a)-d.xScale1()(0))},q=function(a){return d.xScale1()(0>a?a:0)};this.g.select("rect.nv-rangeMax").attr("height",f).attr("width",p(n>0?n:m)).attr("x",q(n>0?n:m)).datum(n>0?n:m),this.g.select("rect.nv-rangeAvg").attr("height",f).attr("width",p(o)).attr("x",q(o)).datum(o),this.g.select("rect.nv-rangeMin").attr("height",f).attr("width",p(n)).attr("x",q(n)).attr("width",p(n>0?m:n)).attr("x",q(n>0?m:n)).datum(n>0?m:n),this.g.select("rect.nv-measure").style("fill",this.color()).attr("height",f/3).attr("y",f/3).attr("width",0>i?this.xScale1()(0)-this.xScale1()(i[0]):this.xScale1()(i[0])-this.xScale1()(0)).attr("x",q(i)).on("mouseover",function(){d.dispatch.elementMouseover({value:i[0],label:l[0]||"Current",pos:[d.xScale1()(i[0]),f/2]})}).on("mouseout",function(){d.dispatch.elementMouseout({value:i[0],label:l[0]||"Current"})});var r=f/6;h[0]?this.g.selectAll("path.nv-markerTriangle").attr("transform",function(){return"translate("+d.xScale1()(h[0])+","+f/2+")"}).attr("d","M0,"+r+"L"+r+","+-r+" "+-r+","+-r+"Z").on("mouseover",function(){d.dispatch.elementMouseover({value:h[0],label:k[0]||"Previous",pos:[d.xScale1()(h[0]),f/2]})}).on("mouseout",function(){d.dispatch.elementMouseout({value:h[0],label:k[0]||"Previous"})}):this.g.selectAll("path.nv-markerTriangle").remove(),this.wrap.selectAll(".nv-range").on("mouseover",function(a,b){var c=j[b]||(b?1==b?"Mean":"Minimum":"Maximum");d.dispatch.elementMouseover({value:a,label:c,pos:[d.xScale1()(a),f/2]})}).on("mouseout",function(a,b){var c=j[b]||(b?1==b?"Mean":"Minimum":"Maximum");d.dispatch.elementMouseout({value:a,label:c})})},t.prototype.orient=function(a){return arguments.length?(this.options.orient=a,this.reverse("right"==this.options.orient||"bottom"==this.options.orient),this):this.options.orient},t.prototype.noData=function(a){return!a||"undefined"==typeof a||null==a},t.prototype.hasData=function(a){return a&&a.markers.length&&a.measures.length&&a.ranges.length&&a.subtitle&&a.title},a.models.bullet=function(){"use strict";function b(a){return c.render(a),b}var c=new t,d=["ranges","markers","measures","forceX","width","height","margin","tickFormat","orient","color"];return b.dispatch=c.dispatch,b.options=a.utils.optionsFunc.bind(b),a.utils.rebindp(b,c,t.prototype,d),b};var Z={orient:"left",reverse:!1,ranges:function(a){return a.ranges},markers:function(a){return a.markers},measures:function(a){return a.measures},tickFormat:null,tooltips:!0,showXAxis:!1,showYAxis:!1};a.utils.create(u,k,Z),u.prototype.getBullet=function(){return a.models.bullet()},u.prototype.wrapper=function(a){var b=["nv-titles"],c=["nv-legendWrap"].concat(b||[]);e.prototype.wrapper.call(this,a,c),this.wrap.attr("transform","translate("+this.margin().left+","+this.margin().top+")")},u.prototype.renderElement=function(a,b){if(this.setRoot(a),!b||!this.ranges().call(this,b)){var c=this.svg.selectAll(".nv-noData").data([this.options.noData]);return c.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),c.attr("x",this.margin().left+this.available.width/2).attr("y",18+this.margin().top+this.available.height/2).text(function(a){return a}),this}return this.svg.selectAll(".nv-noData").remove(),this.wrapper(b),this.draw(b),this.attachEvents(),this},u.prototype.draw=function(a,c){var d=this.available.width,e=this.available.height,f=this.ranges().call(this,a,c).slice().sort(b.descending),g=this.markers().call(this,a,c).slice().sort(b.descending),h=this.measures().call(this,a,c).slice().sort(b.descending),i=b.scale.linear().domain([0,Math.max(f[0],g[0],h[0])]).range(this.reverse()?[d,0]:[0,d]),j=this.__chart__||b.scale.linear().domain([0,1/0]).range(i.range());this.__chart__=i;var k=this.gEnter.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(this.height()-this.margin().top-this.margin().bottom)/2+")");k.append("text").attr("class","nv-title").text(function(a){return a.title}),k.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle}),this.bullet.margin({top:0,right:0,bottom:0,left:0}).width(d).height(e);
var l=this.g.select(".nv-bulletWrap");b.transition(l).call(this.bullet);var m=this.tickFormat()||i.tickFormat(d/100),n=this.g.selectAll("g.nv-tick").data(i.ticks(d/50),function(a){return this.textContent||m(a)}),o=n.enter().append("g").attr("class","nv-tick").attr("transform",function(a){return"translate("+j(a)+",0)"}).style("opacity",this.opacityDefault());o.append("line").attr("y1",e).attr("y2",7*e/6),o.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*e/6).text(m);var p=b.transition(n).attr("transform",function(a){return"translate("+i(a)+",0)"}).style("opacity",1);p.select("line").attr("y1",e).attr("y2",7*e/6),p.select("text").attr("y",7*e/6),b.transition(n.exit()).attr("transform",function(a){return"translate("+i(a)+",0)"}).style("opacity",this.opacityDefault()).remove()},u.prototype.attachEvents=function(){this.bullet.dispatch.on("elementMouseover.tooltip",function(a){this.dispatch.tooltipShow(a)}.bind(this)).on("elementMouseout.tooltip",function(){this.dispatch.tooltipHide()}.bind(this)),this.dispatch.on("tooltipHide",function(){this.tooltips()&&a.tooltip.cleanup()}.bind(this)).on("tooltipShow",function(a){this.svg.call(function(b){b.each(function(b){a.key=b.title,this.tooltips()&&this.showTooltip(a,this.svg[0][0])}.bind(this))}.bind(this))}.bind(this))},u.prototype.orient=function(a){return arguments.length?(this.options.orient=a,this.reverse("right"==this.orient()||"bottom"==this.orient()),this):this.options.orient},u.prototype.showTooltip=function(b,c){var d=b.pos[0]+(c.offsetLeft||0)+this.margin().left,e=b.pos[1]+(c.offsetTop||0)+this.margin().top,f=this.tooltip()(b.key,b.label,b.value);a.tooltip.show([d,e],f,b.value<0?"e":"w",null,c)},a.models.bulletChart=function(){"use strict";function c(a){return d.render(a),c}var d=new u,e=["orient","tooltipContent","ranges","markers","measures","width","height","margin","tickFormat","tooltips","noData","reduceXTicks","rightAlignYAxis","showXAxis","showYAxis"];return c.dispatch=d.dispatch,c.legend=d.legend,c.bullet=d.bullet,c.xAxis=d.xAxis,c.yAxis=d.yAxis,c.state=d.state,b.rebind(c,d.bullet,"color"),c.options=a.utils.optionsFunc.bind(c),a.utils.rebindp(c,d,u.prototype,e),c};var $={tooltips:!0,showControls:!0,rescaleY:!0,tooltip:function(a,b,c){return"<h3>"+a+"</h3><p>"+c+" at "+b+"</p>"},defaultState:null,average:function(a){return a.average},transitionDuration:250,noErrorCheck:!1,dxScale:b.scale.linear(),index:{i:0,x:0},xScale:null,yScale:null,duration:250,useInteractiveGuideline:!1,state:null,id:null,x:function(a){return a.x},y:function(a){return a.y}};a.utils.create(v,k,$),v.prototype.getLine=function(){return a.models.line()},v.prototype.getInteractiveLayer=function(){return a.interactiveGuideline()},v.prototype.wrapper=function(b){k.prototype.wrapper.call(this,b,["nv-interactive","nv-background","nv-avgLinesWrap","nv-controlsWrap"]),this.renderWatch=a.utils.renderWatch(this.dispatch,this.duration()),this.renderWatch.models(this.line),this.showXAxis()&&this.renderWatch.models(this.xAxis),this.showYAxis()&&this.renderWatch.models(this.yAxis)},v.prototype.draw=function(a){this.id(this.line.id()),this.x(this.line.x()),this.y(this.line.y()),this.svg.classed("nv-chart-"+this.id(),!0),this.xScale(this.line.xScale()),this.line.yScale(),this.yScale(this.line.yScale());var c=this,d=this.available.width,e=this.available.height,f=b.behavior.drag().on("dragstart",this.dragStart).on("drag",this.dragMove).on("dragend",this.dragEnd);if(this.rescaleY())this.line.yDomain(null);else{var g=a.filter(function(a){return!a.disabled}).map(function(a){var d=b.extent(a.values,c.line.y());return d[0]<-.95&&(d[0]=-.95),[(d[0]-d[1])/(1+d[1]),(d[1]-d[0])/(1+d[0])]}),h=[b.min(g,function(a){return a[0]}),b.max(g,function(a){return a[1]})];this.line.yDomain(h)}this.dxScale().domain([0,a[0].values.length-1]).range([0,d]).clamp(!0);var a=this.indexify(this.index().i,a);if(this.showControls()){var i=[{key:"Re-scale y-axis",disabled:!this.rescaleY()}];this.controls.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),this.g.select(".nv-controlsWrap").datum(i).attr("transform","translate(0,"+-this.margin().top+")").call(this.controls)}var j=a.filter(function(a){return a.tempDisabled});this.wrap.select(".tempDisabled").remove(),j.length&&this.wrap.append("text").attr("class","tempDisabled").attr("x",d/2).attr("y","-.71em").style("text-anchor","end").text(j.map(function(a){return a.key}).join(", ")+" values cannot be calculated for this time period."),this.useInteractiveGuideline()&&(this.interactiveLayer.width(d).height(e).margin({left:this.margin().left,top:this.margin().top}).svgContainer(this.svg).xScale(this.xScale()),this.wrap.select(".nv-interactive").call(this.interactiveLayer),this.wrap.select(".nv-interactiveLineLayer").attr("transform","translate(0,0)")),this.gEnter.select(".nv-background").append("rect"),this.g.select(".nv-background rect").attr("width",d).attr("height",e),this.line.y(function(a){return a.display.y}).width(d).height(e).color(a.map(function(a,b){return a.color||c.color()(a,b)}).filter(function(b,c){return!a[c].disabled&&!a[c].tempDisabled}));var k=this.g.select(".nv-linesWrap").style("pointer-events",this.useInteractiveGuideline()?"none":"all").datum(a.filter(function(a){return!a.disabled&&!a.tempDisabled}));k.call(this.line),a.forEach(function(a,b){a.seriesIndex=b});var l=a.filter(function(a){return!a.disabled&&!!c.average()(a)}),m=this.g.select(".nv-avgLinesWrap").style("pointer-events","none").selectAll("line").data(l,function(a){return a.key}),n=function(a){var b=c.yScale()(c.average()(a));return 0>b?0:b>e?e:b};m.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(a){return c.line.color()(a,a.seriesIndex)}).attr("x1",0).attr("x2",d).attr("y1",n).attr("y2",n),m.style("stroke-opacity",function(a){var b=c.yScale()(c.average()(a));return 0>b||b>e?0:1}).attr("x1",0).attr("x2",d).attr("y1",n).attr("y2",n),m.exit().remove(),this.indexLine=k.selectAll(".nv-indexLine").data([c.index()]),this.indexLine.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(f),this.indexLine.attr("transform",function(a){return"translate("+c.dxScale()(a.i)+",0)"}).attr("height",e),this.plotAxes(a)},v.prototype.plotAxes=function(a){this.rightAlignYAxis()&&this.wrap.select(".nv-y.nv-axis").attr("transform","translate("+this.available.width+", 0)"),this.showXAxis()&&(this.xAxis.ticks(Math.min(a[0].values.length,this.available.width/70)).orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).scale(this.xScale()).tickSize(-this.available.height,0),this.wrap.select(".nv-x.nv-axis").style("pointer-events","none").attr("transform","translate(0,"+this.yScale().range()[0]+")").transition().call(this.xAxis)),this.showYAxis()&&(this.yAxis.orient(this.rightAlignYAxis()?"right":"left").tickFormat(b.format(",.1f")).scale(this.yScale()).ticks(this.available.height/36).tickSize(-this.available.width,0),this.wrap.select(".nv-y.nv-axis").transition().call(this.yAxis))},v.prototype.attachEvents=function(){var c=this,d=null;this.svg.call(function(a){a.each(function(a){d=a})}),this.line.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+this.margin().left,a.pos[1]+c.margin().top],c.dispatch.tooltipShow(a)}).on("elementMouseout.tooltip",function(a){c.dispatch.tooltipHide(a)}).on("elementClick",function(a){c.index().i=a.pointIndex,c.index().x=c.dxScale()(c.index().i),c.state().index=c.index().i,c.dispatch.stateChange(c.state()),c.updateZero()}),this.controls.dispatch.on("legendClick",function(a){a.disabled=!a.disabled,c.rescaleY(!a.disabled),c.state().rescaleY=c.rescaleY(),c.dispatch.stateChange(c.state()),c.update()}),this.legend.dispatch.on("stateChange",function(a){c.state().disabled=a.disabled,c.dispatch.stateChange(c.state()),c.update()}),this.interactiveLayer.dispatch.on("elementMousemove",function(b){c.line.clearHighlights();var e,f,g,h=[];if(d.filter(function(a,b){return a.seriesIndex=b,!a.disabled}).forEach(function(d,i){f=a.interactiveBisect(d.values,b.pointXValue,c.x()),c.line.highlightPoint(i,f,!0);var j=d.values[f];"undefined"!=typeof j&&("undefined"==typeof e&&(e=j),"undefined"==typeof g&&(g=c.xScale()(c.x()(j,f))),h.push({key:d.key,value:c.y()(j,f),color:c.color()(d,d.seriesIndex)}))}),h.length>2){var i=c.yScale().invert(b.mouseY),j=Math.abs(c.yScale().domain()[0]-c.yScale().domain()[1]),k=.03*j,l=a.nearestValueIndex(h.map(function(a){return a.value}),i,k);null!==l&&(h[l].highlight=!0)}var m=c.xAxis.tickFormat()(c.x()(e,f),f);c.interactiveLayer.tooltip.position({left:g+c.margin().left,top:b.mouseY+c.margin().top}).chartContainer(c.parentNode).enabled(c.tooltips()).valueFormatter(function(a){return c.yAxis.tickFormat()(a)}).data({value:m,series:h})(),c.interactiveLayer.renderGuideLine()(g)}).on("elementMouseout",function(){c.dispatch.tooltipHide(),c.line.clearHighlights()}),this.dispatch.on("tooltipHide",function(){c.tooltips()&&a.tooltip.cleanup()}).on("tooltipShow",function(a){c.tooltips()&&c.showTooltip()(a,c.svg[0][0])}).on("changeState",function(a){"undefined"!=typeof a.disabled&&c.svg.call(function(b){b.each(function(b){b.forEach(function(b,c){b.disabled=a.disabled[c]}),c.state().disabled=a.disabled})}),"undefined"!=typeof a.index&&(c.index().i=a.index,c.index().x=c.dxScale()(c.index().i),c.state().index=a.index,c.indexLine.data([c.index()])),"undefined"!=typeof a.rescaleY&&c.rescaleY(a.rescaleY),c.update()}),this.g.select(".nv-background rect").on("click",function(){c.index().x=b.mouse(this)[0],c.index().i=Math.round(c.dxScale().invert(c.index().x)),c.state().index=c.index().i,c.dispatch.stateChange(c.state()),c.updateZero()})},v.prototype.indexify=function(a,b){return b.map(function(b){if(!b.values)return b;var c=b.values[a];if(null==c)return b;var d=this.line.y()(c,a);return-.95>d&&!this.noErrorCheck()?(b.tempDisabled=!0,b):(b.tempDisabled=!1,b.values=b.values.map(function(a,b){return a.display={y:(this.line.y()(a,b)-d)/(1+d)},a}.bind(this)),b)}.bind(this))},v.prototype.updateZero=function(){this.indexLine.data([this.index()]);var a=this.duration();this.duration(0),this.update(),this.duration(a)},v.prototype.dragStart=function(){this.svg.style("cursor","ew-resize")},v.prototype.dragMove=function(){this.index().x=b.event.x,this.index().i=Math.round(this.dxScale().invert(this.index().x)),this.updateZero()},v.prototype.dragEnd=function(){this.svg.style("cursor","auto"),this.state().index=this.index().i,this.dispatch.stateChange(this.state())},v.prototype.showTooltip=function(b,c){var d=b.pos[0]+(c.offsetLeft||0),e=b.pos[1]+(c.offsetTop||0),f=this.xAxis.tickFormat()(this.line.x()(b.point,b.pointIndex)),g=this.yAxis.tickFormat()(this.line.y()(b.point,b.pointIndex)),h=this.tooltip()(b.series.key,f,g);a.tooltip.show([d,e],h,null,null,c)},v.prototype.color=function(b){return arguments.length?(this.options.color=a.utils.getColor(b),this.legend.color(this.options.color),this):this.options.color},v.prototype.useInteractiveGuideline=function(a){return arguments.length?(this.options.useInteractiveGuideline=a,a===!0&&(this.line.interactive(!1),this.line.useVoronoi(!1)),this):this.options.useInteractiveGuideline},v.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.line.duration(a),this.xAxis.duration(a),this.yAxis.duration(a),this.renderWatch.reset(a),this):this.options.duration},v.prototype.x=function(a){return arguments.length?(this.options.x=a,this.line.x(a),this):this.options.x},v.prototype.y=function(a){return arguments.length?(this.options.y=a,this.line.y(a),this):this.options.y},a.models.cumulativeLineChart=function(){"use strict";function c(a){return d.render(a),c}var d=new v,e=["margin","width","height","color","rescaleY","showControls","useInteractiveGuideline","showLegend","showXAxis","showYAxis","tooltips","tooltipContent","state","defaultState","noData","average","duration","transitionDuration","noErrorCheck","reduceXTicks","rightAlignYAxis","x","y"];return c.dispatch=d.dispatch,c.lines=d.line,c.legend=d.legend,c.interactiveLayer=d.interactiveLayer,c.xAxis=d.xAxis,c.yAxis=d.yAxis,b.rebind(c,d.line,"isArea","x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id"),c.options=a.utils.optionsFunc.bind(c),a.utils.rebindp(c,d,v.prototype,e),c};var _={isArea:function(a){return a.area},clipEdge:!1,interpolate:"linear",xScale:null,yScale:null,xScale0:null,yScale0:null,duration:250,x:null,y:null,id:null};a.utils.create(w,e,_),w.prototype.getScatter=function(){return a.models.scatter()},w.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a,["nv-groups"])},w.prototype.draw=function(){var c=this,d=this.available.width,e=this.available.height,f=this.wrap.select(".nv-scatterWrap");this.scatter.width(d).height(e),this.scatter.width(),f.transition().call(this.scatter),this.x(this.scatter.x()),this.y(this.scatter.y()),this.color(this.scatter.color()),this.id(this.scatter.id()),this.xScale(this.scatter.xScale()),this.yScale(this.scatter.yScale()),this.xScale0(this.xScale0()||this.xScale()),this.yScale0(this.yScale0()||this.yScale()),this.defsEnter.append("clipPath").attr("id","nv-edge-clip-"+this.id()).append("rect"),this.wrap.select("#nv-edge-clip-"+this.id()+" rect").attr("width",d).attr("height",e>0?e:0),this.g.attr("clip-path",this.clipEdge()?"url(#nv-edge-clip-"+this.id()+")":""),f.attr("clip-path",this.clipEdge()?"url(#nv-edge-clip-"+this.id()+")":"");var g=this.wrap.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});g.enter().append("g").style("stroke-opacity",this.opacityDefault()).style("fill-opacity",this.opacityDefault()),g.exit().remove(),g.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return c.color()(a,b)}).style("stroke",function(a,b){return c.color()(a,b)}),g.watchTransition(this.renderWatch,"line: groups").style("stroke-opacity",1).style("fill-opacity",.5);var h=g.selectAll("path.nv-area").data(function(a){return c.isArea()(a)?[a]:[]});h.enter().append("path").attr("class","nv-area").attr("d",function(d){return b.svg.area().interpolate(c.interpolate()).defined(c.defined).x(function(b,d){return a.utils.NaNtoZero(c.xScale0()(c.x()(b,d)))}).y0(function(b,d){return a.utils.NaNtoZero(c.yScale0()(c.y()(b,d)))}).y1(function(){return c.yScale0()(c.yScale().domain()[0]<=0?c.yScale().domain()[1]>=0?0:c.yScale().domain()[1]:c.yScale().domain()[0])}).apply(c,[d.values])}),g.exit().selectAll("path.nv-area").remove(),h.watchTransition(this.renderWatch,"line: areaPaths").attr("d",function(d){return b.svg.area().interpolate(c.interpolate()).defined(c.defined).x(function(b,d){return a.utils.NaNtoZero(c.xScale()(c.x()(b,d)))}).y0(function(b,d){return a.utils.NaNtoZero(c.yScale()(c.y()(b,d)))}).y1(function(){return c.yScale()(c.yScale().domain()[0]<=0?c.yScale().domain()[1]>=0?0:c.yScale().domain()[1]:c.yScale().domain()[0])}).apply(c,[d.values])});var i=g.selectAll("path.nv-"+this.options.chartClass).data(function(a){return[a.values]});i.enter().append("path").attr("class","nv-"+this.options.chartClass).attr("d",b.svg.line().interpolate(this.interpolate()).defined(function(a,b){return!isNaN(c.y()(a,b))&&null!==c.y()(a,b)}).x(function(b,d){return a.utils.NaNtoZero(c.xScale0()(c.x()(b,d)))}).y(function(b,d){return a.utils.NaNtoZero(c.yScale0()(c.y()(b,d)))})),i.watchTransition(this.renderWatch,"line: linePaths").attr("d",b.svg.line().interpolate(this.interpolate()).defined(function(a,b){return!isNaN(c.y()(a,b))&&null!==c.y()(a,b)}).x(function(b,d){return a.utils.NaNtoZero(c.xScale()(c.x()(b,d)))}).y(function(b,d){return a.utils.NaNtoZero(c.yScale()(c.y()(b,d)))})),c.xScale0(this.xScale().copy()),c.yScale0(this.yScale().copy())},w.prototype.attachEvents=function(){e.prototype.attachEvents.call(this),this.scatter.dispatch.on("elementClick",function(){this.dispatch.elementClick.apply(this,arguments)}.bind(this)).on("elementMouseover",function(){this.dispatch.elementMouseover.apply(this,arguments)}.bind(this)).on("elementMouseout",function(){this.dispatch.elementMouseout.apply(this,arguments)}.bind(this))},w.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.scatter.duration(a),this.renderWatch.reset(a),this):this.options.duration},w.prototype.defined=function(a,b){return!isNaN(this.y()(a,b))&&null!==this.y()(a,b)},a.models.line=function(){"use strict";function c(a){return d.render(a),c}var d=new w,e=["margin","width","height","interpolate","isArea","duration","transitionDuration"];return b.rebind(c,d.scatter,"x","y","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","id","interactive","size","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights","clipEdge","color"),c.dispatch=d.dispatch,c.scatter=d.scatter,c.options=a.utils.optionsFunc.bind(c),c.xScale(),a.utils.rebindp(c,d,w.prototype,e),c};var ab={defaultState:null,xScale:null,yScale:null,interactive:null,useVoronoi:null,tooltips:!0,duration:250,useInteractiveGuideline:!1,state:null,x:function(a){return a.x},y:function(a){return a.y},id:null};a.utils.create(x,k,ab),x.prototype.getLine=function(){return a.models.line()},x.prototype.getInteractiveLayer=function(){return a.interactiveGuideline()},x.prototype.wrapper=function(b){k.prototype.wrapper.call(this,b,["nv-interactive"]),this.renderWatch=a.utils.renderWatch(this.dispatch,this.duration()),this.renderWatch.models(this.line),this.showXAxis()&&this.renderWatch.models(this.xAxis),this.showYAxis()&&this.renderWatch.models(this.yAxis)},x.prototype.draw=function(a){var b=this,c=this.available.width,d=this.available.height;this.xScale(this.line.xScale()),this.yScale(this.line.yScale()),this.x(this.line.x()),this.y(this.line.y()),this.id(this.line.id()),this.line.width(c).height(d).color(a.map(function(a,c){return a.color||b.color()(a,c)}).filter(function(b,c){return!a[c].disabled}));this.g.select(".nv-linesWrap").datum(a.filter(function(a){return!a.disabled})).transition().call(this.line);this.useInteractiveGuideline()&&(this.interactiveLayer.width(c).height(d).margin({left:this.margin().left,top:this.margin().top}).svgContainer(this.svg).xScale(this.xScale()),this.wrap.select(".nv-interactive").call(this.interactiveLayer),this.wrap.select(".nv-interactiveLineLayer").attr("transform","translate(0,0)")),k.prototype.draw.call(this,a)},x.prototype.attachEvents=function(){e.prototype.attachEvents.call(this);var b=this;this.legend.dispatch.on("stateChange",function(a){b.state=a,b.dispatch.stateChange(b.state),b.update()}),this.interactiveLayer.dispatch.on("elementMousemove",function(c){b.line.clearHighlights();var d,e,f,g=[];if(b.svg.call(function(h){h.each(function(h){h.filter(function(a,b){return a.seriesIndex=b,!a.disabled}).forEach(function(h,i){e=a.interactiveBisect(h.values,c.pointXValue,b.x()),b.line.highlightPoint(i,e,!0);var j=h.values[e];"undefined"!=typeof j&&("undefined"==typeof d&&(d=j),"undefined"==typeof f&&(f=b.xScale()(b.x()(j,e))),g.push({key:h.key,value:b.y()(j,e),color:b.color()(h,h.seriesIndex)}))})})}),g.length>2){var h=b.yScale().invert(c.mouseY),i=Math.abs(b.yScale().domain()[0]-b.yScale().domain()[1]),j=.03*i,k=a.nearestValueIndex(g.map(function(a){return a.value}),h,j);null!==k&&(g[k].highlight=!0)}var l=b.xAxis.tickFormat()(b.x()(d,e));b.interactiveLayer.tooltip.position({left:f+b.margin().left,top:c.mouseY+b.margin().top}).chartContainer(b.svg[0][0].parentNode).enabled(b.tooltips()).valueFormatter(function(a){return b.yAxis.tickFormat()(a)}).data({value:l,series:g})(),b.interactiveLayer.renderGuideLine()(f)}).on("elementMouseout",function(){b.dispatch.tooltipHide(),b.line.clearHighlights()}),this.dispatch.on("tooltipShow",function(a){b.tooltips()&&b.showTooltip(a,b.svg[0][0].parentNode)}).on("changeState",function(a){"undefined"!=typeof a.disabled&&data.length===a.disabled.length&&(b.svg.call(function(b){b.each(function(b){b.forEach(function(b,c){b.disabled=a.disabled[c]})})}),b.state.disabled=a.disabled),b.update()}).on("tooltipHide",function(){b.tooltips()&&a.tooltip.cleanup()}),this.line.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.margin().left,a.pos[1]+b.margin().top],b.dispatch.tooltipShow(a)}).on("elementMouseout.tooltip",function(a){b.dispatch.tooltipHide(a)})},x.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.renderWatch.reset(a),this.line.duration(a),this.xAxis.duration(a),this.yAxis.duration(a),this):this.options.duration},x.prototype.color=function(b){return arguments.length?(this.options.color=a.utils.getColor(b),this.legend.color(this.color()),this):this.options.color},x.prototype.useInteractiveGuideline=function(a){return arguments.length?(this.options.useInteractiveGuideline=a,a===!0&&(this.interactive(!1),this.useVoronoi(!1)),this):this.options.useInteractiveGuideline},x.prototype.showTooltip=function(b,c){var d=b.pos[0]+(c.offsetLeft||0),e=b.pos[1]+(c.offsetTop||0),f=this.xAxis.tickFormat()(this.line.x()(b.point,b.pointIndex)),g=this.yAxis.tickFormat()(this.line.y()(b.point,b.pointIndex)),h=this.tooltip()(b.series.key,f,g);a.tooltip.show([d,e],h,null,null,c)},a.models.lineChart=function(){"use strict";function c(a){return d.render(a),c}var d=new x,e=["margin","width","height","color","showXAxis","showYAxis","tooltips","tooltipContent","state","defaultState","noData","duration","transitionDuration","useInteractiveGuideline","reduceXTicks","rightAlignYAxis"];return c.dispatch=d.dispatch,c.lines=d.line,c.legend=d.legend,c.interactiveLayer=d.interactiveLayer,c.state=d.state,c.xAxis=d.xAxis,c.yAxis=d.yAxis,b.rebind(c,d.line,"margin","width","height","interpolate","isArea","duration","transitionDuration","x","y","id"),c.options=a.utils.optionsFunc.bind(c),a.utils.rebindp(c,d,x.prototype,e),c};var bb={tooltips:!0,state:null,defaultState:null,xScale:null,yScale1:null,yScale2:null,color:a.utils.defaultColor()};a.utils.create(y,k,bb),y.prototype.getLine=function(){return a.models.line()},y.prototype.getHistoricalBar=function(){return a.models.historicalBar()},y.prototype.wrapper=function(a){k.prototype.wrapper.call(this,a,["nv-y1 nv-axis","nv-y2 nv-axis","nv-barsWrap","nv-linesWrap"])},y.prototype.draw=function(a){var c=this,d=this.available.width,e=this.available.height,f=a.filter(function(a){return!a.disabled&&a.bar}),g=a.filter(function(a){return!a.bar}),h=this.g.select(".nv-barsWrap").datum(f.length?f:[{values:[]}]),i=this.g.select(".nv-linesWrap").datum(g[0]&&!g[0].disabled?g:[{values:[]}]);this.line.margin({top:0,right:0,bottom:0,left:0}).width(d).height(e).color(a.map(function(a,b){return a.color||c.color()(a,b)}).filter(function(b,c){return!a[c].disabled&&!a[c].bar})),this.historicalBar.margin({top:0,right:0,bottom:0,left:0}).width(d).height(e).color(a.map(function(a,b){return a.color||c.color()(a,b)}).filter(function(b,c){return!a[c].disabled&&a[c].bar})),b.transition(h).call(this.historicalBar),b.transition(i).call(this.line),this.xScale(g.filter(function(a){return!a.disabled}).length&&g.filter(function(a){return!a.disabled})[0].values.length?this.line.xScale():this.historicalBar.xScale()),this.yScale1(this.historicalBar.yScale()),this.yScale2(this.line.yScale()),this.xAxis.scale(this.xScale()).ticks(d/100).tickSize(-e,0),this.y1Axis.scale(this.yScale1()).ticks(e/36).tickSize(-d,0),this.y2Axis.scale(this.yScale2()).ticks(e/36).tickSize(f.length?0:-d,0),this.g.select(".nv-x.nv-axis").attr("transform","translate(0,"+this.yScale1().range()[0]+")"),this.g.select(".nv-y2.nv-axis").style("opacity",g.length?1:0).attr("transform","translate("+d+",0)"),b.transition(this.g.select(".nv-x.nv-axis")).call(this.xAxis),b.transition(this.g.select(".nv-y1.nv-axis")).style("opacity",f.length?1:0).call(this.y1Axis),b.transition(this.g.select(".nv-y2.nv-axis")).call(this.y2Axis)},y.prototype.attachEvents=function(){k.prototype.attachEvents.call(this);var b=this;this.dispatch.on("tooltipShow",function(a){b.tooltips()&&b.showTooltip(a,b.svg[0][0])}).on("changeState",function(a){"undefined"!=typeof a.disabled&&b.svg.call(function(c){c.each(function(c){c.forEach(function(b,c){b.disabled=a.disabled[c]}),b.state.disabled=a.disabled})}),b.update()}).on("tooltipHide",function(){b.tooltips()&&a.tooltip.cleanup()}),this.legend.dispatch.on("stateChange",function(a){b.state=a,b.dispatch.stateChange(b.state),b.update()}),this.line.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.margin().left,a.pos[1]+b.margin().top],b.dispatch.tooltipShow(a)}).on("elementMouseout.tooltip",function(a){b.dispatch.tooltipHide(a)}),this.historicalBar.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.margin().left,a.pos[1]+b.margin().top],b.dispatch.tooltipShow(a)}).on("elementMouseout.tooltip",function(a){b.dispatch.tooltipHide(a)})},y.prototype.x=function(a){return arguments.length?(this.xScale(a),this.line.x(a),this.historicalBar.x(a),this):this.xScale()},y.prototype.color=function(b){return arguments.length?(this.options.color=a.utils.getColor(b),this.legend.color(b),this):this.options.color},y.prototype.showTooltip=function(b,c){var d=b.pos[0]+(c.offsetLeft||0),e=b.pos[1]+(c.offsetTop||0),f=this.xAxis.tickFormat()(this.line.x()(b.point,b.pointIndex)),g=(b.series.bar?this.y1Axis:this.y2Axis).tickFormat()(this.line.y()(b.point,b.pointIndex)),h=this.tooltip()(b.series.key,f,g);a.tooltip.show([d,e],h,b.value<0?"n":"s",null,c)},a.models.linePlusBarChart=function(){"use strict";function c(a){return d.render(a),c}var d=new y,e=["x","margin","width","height","color","showLegend","tooltips","tooltipContent","state","defaultState","noData","showXAxis","showYAxis","rightAlignYAxis","reduceXTicks"];return c.dispatch=d.dispatch,c.legend=d.legend,c.lines=d.line,c.bars=d.historicalBar,c.y1Axis=d.y1Axis,c.y2Axis=d.y2Axis,c.xAxis=d.xAxis,c.state=d.state,b.rebind(c,d.line,"defined","size","clipVoronoi","interpolate"),b.rebind(c,d.historicalBar,"forceY"),c.options=a.utils.optionsFunc.bind(c),a.utils.rebindp(c,d,y.prototype,e),c};var cb={finderHeight:100,color:a.utils.defaultColor(),extent:null,brushExtent:null,tooltips:!0,xScale:null,yScale:null,x2Scale:null,y1Scale:null,y2Scale:null,y3Scale:null,y4Scale:null,_x:function(a){return a.x},_y:function(a){return a.y},transitionDuration:0};a.utils.create(z,k,cb),z.prototype.getLine=function(){return a.models.line()},z.prototype.getHistoricalBar=function(){return a.models.historicalBar()},z.prototype.wrapper=function(a){k.prototype.wrapper.call(this,a,[""])},z.prototype.draw=function(a){function c(a){var b=+("e"==a),c=b?1:-1,d=i/3;return"M"+.5*c+","+d+"A6,6 0 0 "+b+" "+6.5*c+","+(d+6)+"V"+(2*d-6)+"A6,6 0 0 "+b+" "+.5*c+","+2*d+"ZM"+2.5*c+","+(d+8)+"V"+(2*d-8)+"M"+4.5*c+","+(d+8)+"V"+(2*d-8)}function d(){f.brush.empty()||f.brush.extent(f.brushExtent()),s.data([f.brush.empty()?f.x2Scale().domain():f.brushExtent()]).each(function(a){var c=f.x2Scale()(a[0])-f.x2Scale().range()[0],d=f.x2Scale().range()[1]-f.x2Scale()(a[1]);b.select(this).select(".left").attr("width",0>c?0:c),b.select(this).select(".right").attr("x",f.x2Scale()(a[1])).attr("width",0>d?0:d)})}function e(){f.brushExtent(f.brush.empty()?null:f.brush.extent()),f.extent(f.brush.empty()?f.x2Scale().domain():f.brush.extent()),f.dispatch.brush({extent:f.extent(),brush:f.brush}),d(),f.bars.width(g).height(h).color(a.map(function(a,b){return a.color||f.color()(a,b)}).filter(function(b,c){return!a[c].disabled&&a[c].bar})),f.line.width(g).height(h).color(a.map(function(a,b){return a.color||f.color()(a,b)}).filter(function(b,c){return!a[c].disabled&&!a[c].bar}));var b=f.g.select(".nv-focus .nv-barsWrap").datum(j.length?j.map(function(a){return{key:a.key,values:a.values.filter(function(a,b){return f.bars.x()(a,b)>=f.extent[0]&&f.bars.x()(a,b)<=f.extent()[1]})}}):[{values:[]}]),c=f.g.select(".nv-focus .nv-linesWrap").datum(l[0].disabled?[{values:[]}]:l.map(function(a){return{key:a.key,values:a.values.filter(function(a,b){return f.line.x()(a,b)>=f.extent()[0]&&f.line.x()(a,b)<=f.extent()[1]})}}));f.xScale(j.length?f.bars.xScale():f.line.xScale()),f.xAxis.scale(f.xScale()).ticks(g/100).tickSize(-h,0),f.xAxis.domain([Math.ceil(f.extent()[0]),Math.floor(f.extent()[1])]),f.g.select(".nv-x.nv-axis").transition().duration(f.transitionDuration()).call(f.xAxis),b.transition().duration(f.transitionDuration()).call(f.bars),c.transition().duration(f.transitionDuration()).call(f.line),f.g.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+f.y1Scale().range()[0]+")"),f.y1Axis.scale(f.y1Scale()).ticks(h/36).tickSize(-g,0),f.g.select(".nv-focus .nv-y1.nv-axis").style("opacity",j.length?1:0),f.y2Axis.scale(f.y2Scale()).ticks(h/36).tickSize(j.length?0:-g,0),f.g.select(".nv-focus .nv-y2.nv-axis").style("opacity",l.length?1:0).attr("transform","translate("+f.xScale().range()[1]+",0)"),f.g.select(".nv-focus .nv-y1.nv-axis").transition().duration(f.transitionDuration()).call(f.y1Axis),f.g.select(".nv-focus .nv-y2.nv-axis").transition().duration(f.transitionDuration()).call(f.y2Axis)}var f=this,g=this.available.width,h=this.available.height-this.finderHeight(),i=this.finderHeight()-this.options.margin2.top-this.options.margin2.bottom,j=a.filter(function(a){return!a.disabled&&a.bar}),l=a.filter(function(a){return!a.bar});this.xScale(this.bars.xScale()),this.yScale(this.bars.xScale()),this.x2Scale(this.x2Axis.scale()),this.y1Scale(this.bars.yScale()),this.y2Scale(this.line.yScale()),this.y3Scale(this.bars2.yScale()),this.y4Scale(this.line2.yScale());var m=a.filter(function(a){return!a.disabled&&a.bar}).map(function(a){return a.values.map(function(a,b){return{x:f.x()(a,b),y:f.y()(a,b)}})}),n=a.filter(function(a){return!a.disabled&&!a.bar}).map(function(a){return a.values.map(function(a,b){return{x:f.x()(a,b),y:f.y()(a,b)}})});this.xScale().range([0,g]),this.x2Scale().domain(b.extent(b.merge(m.concat(n)),function(a){return a.x})).range([0,g]);var o=this.gEnter.append("g").attr("class","nv-focus");o.append("g").attr("class","nv-x nv-axis"),o.append("g").attr("class","nv-y1 nv-axis"),o.append("g").attr("class","nv-y2 nv-axis"),o.append("g").attr("class","nv-barsWrap"),o.append("g").attr("class","nv-linesWrap");var p=this.gEnter.append("g").attr("class","nv-context");p.append("g").attr("class","nv-x nv-axis"),p.append("g").attr("class","nv-y1 nv-axis"),p.append("g").attr("class","nv-y2 nv-axis"),p.append("g").attr("class","nv-barsWrap"),p.append("g").attr("class","nv-linesWrap"),p.append("g").attr("class","nv-brushBackground"),p.append("g").attr("class","nv-x nv-brush"),this.bars2.width(g).height(i).color(a.map(function(a,b){return a.color||f.color()(a,b)}).filter(function(b,c){return!a[c].disabled&&a[c].bar})),this.line2.width(g).height(i).color(a.map(function(a,b){return a.color||f.color()(a,b)}).filter(function(b,c){return!a[c].disabled&&!a[c].bar}));var q=this.g.select(".nv-context .nv-barsWrap").datum(j.length?j:[{values:[]}]),r=this.g.select(".nv-context .nv-linesWrap").datum(l[0].disabled?[{values:[]}]:l);this.g.select(".nv-context").attr("transform","translate(0,"+(h+this.margin().bottom+this.options.margin2.top)+")"),q.transition().call(this.bars2),r.transition().call(this.line2),this.brush.x(this.x2Scale()).on("brush",e),this.brushExtent()&&this.brush.extent(this.brushExtent());var s=this.g.select(".nv-brushBackground").selectAll("g").data([this.brushExtent()||this.brush.extent()]),t=s.enter().append("g");t.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",i),t.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",i);var u=this.g.select(".nv-x.nv-brush").call(this.brush);u.selectAll("rect").attr("height",i),u.selectAll(".resize").append("path").attr("d",c),this.x2Axis.ticks(g/100).tickSize(-i,0),this.g.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+this.y3Scale().range()[0]+")"),this.g.select(".nv-context .nv-x.nv-axis").transition().call(this.x2Axis),this.y3Axis.scale(this.y3Scale()).ticks(i/36).tickSize(-g,0),this.g.select(".nv-context .nv-y1.nv-axis").style("opacity",j.length?1:0).attr("transform","translate(0,"+this.x2Scale().range()[0]+")"),this.g.select(".nv-context .nv-y1.nv-axis").transition().call(this.y3Axis),this.y4Axis.scale(this.y4Scale()).ticks(i/36).tickSize(j.length?0:-g,0),this.g.select(".nv-context .nv-y2.nv-axis").style("opacity",l.length?1:0).attr("transform","translate("+this.x2Scale().range()[1]+",0)"),this.g.select(".nv-context .nv-y2.nv-axis").transition().call(this.y4Axis),k.prototype.draw.call(this,a),e()
},z.prototype.attachEvents=function(){k.prototype.attachEvents.call(this),this.line.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+this.margin().left,a.pos[1]+this.margin().top],this.dispatch.tooltipShow(a)}.bind(this)).on("elementMouseout.tooltip",function(a){this.dispatch.tooltipHide(a)}.bind(this)),this.bars.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+this.margin().left,a.pos[1]+this.margin().top],this.dispatch.tooltipShow(a)}.bind(this)).on("elementMouseout.tooltip",function(a){this.dispatch.tooltipHide(a)}.bind(this)),this.legend.dispatch.on("stateChange",function(){this.update()}.bind(this)),this.dispatch.on("tooltipShow",function(a){this.tooltips()&&this.showTooltip(a,this.svg[0][0].parentNode)}.bind(this))},z.prototype.x=function(a){return arguments.length?(this._x(a),this.line.x(a),this.bars.x(a),this):this._x()},z.prototype.y=function(a){return arguments.length?(this._y(a),this.line.y(a),this.bars.y(a),this):this._y()},z.prototype.color=function(b){return arguments.length?(this.options.color=a.utils.getColor(b),this.legend.color(this.color()),this):this.options.color},a.models.linePlusBarWithFocusChart=function(){"use strict";function c(a){return d.render(a),c}var d=new z,e=["x","y","margin","width","height","color","showLegend","tooltips","tooltipContent","noData","brushExtent","finderHeight","yScale","reduceXTicks","rightAlignYAxis","showXAxis","showYAxis"];return c.dispatch=d.dispatch,c.legend=d.legend,c.lines=d.line,c.lines2=d.line2,c.bars=d.bars,c.bars2=d.bars2,c.xAxis=d.xAxis,c.x2Axis=d.x2Axis,c.y1Axis=d.y1Axis,c.y2Axis=d.y2Axis,c.y3Axis=d.y3Axis,c.y4Axis=d.y4Axis,b.rebind(c,d.line,"defined","size","clipVoronoi","interpolate"),c.options=a.utils.optionsFunc.bind(c),a.utils.rebindp(c,d,z.prototype,e),c},a.models.lineFisheye=function(){"use strict";function c(a){return a.each(function(a){h.setRoot(this);var c=h.available.width,p=h.available.height;d=d||o.xScale(),e=e||o.yScale(),f=f||d,g=g||e,h.wrapChart(a);var q=h.wrap.select(".nv-scatterWrap").datum(a);h.gEnter.append("g").attr("class","nv-groups"),o.width(c).height(p),b.transition(q).call(o),h.defsEnter.append("clipPath").attr("id","nv-edge-clip-"+j).append("rect"),h.wrap.select("#nv-edge-clip-"+j+" rect").attr("width",c).attr("height",p),h.g.attr("clip-path",m?"url(#nv-edge-clip-"+j+")":""),q.attr("clip-path",m?"url(#nv-edge-clip-"+j+")":"");var r=h.wrap.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});r.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),b.transition(r.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),r.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return i(a,b)}).style("stroke",function(a,b){return i(a,b)}),b.transition(r).style("stroke-opacity",1).style("fill-opacity",.5);var s=r.selectAll("path").data(function(a){return[a.values]});s.enter().append("path").attr("class","nv-line").attr("d",b.svg.line().interpolate(n).x(function(a,b){return f(k(a,b))}).y(function(a,b){return g(l(a,b))})),b.transition(r.exit().selectAll("path")).attr("d",b.svg.line().interpolate(n).x(function(a,b){return d(k(a,b))}).y(function(a,b){return e(l(a,b))})).remove(),b.transition(s).attr("d",b.svg.line().interpolate(n).x(function(a,b){return d(k(a,b))}).y(function(a,b){return e(l(a,b))})),f=d.copy(),g=e.copy()}),c}var d,e,f,g,h=new h({margin:{top:0,right:0,bottom:0,left:0},width:960,height:500,chartClass:"line",wrapClass:"scatterWrap"}),i=a.utils.defaultColor(),j=Math.floor(1e4*Math.random()),k=function(a){return a.x},l=function(a){return a.y},m=!1,n="linear",o=a.models.scatter().id(j).size(16).sizeDomain([16,256]);return c.dispatch=o.dispatch,b.rebind(c,o,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","clipRadius"),c.options=a.utils.optionsFunc.bind(c),c.margin=function(b){return arguments.length?(h.margin.top=a.utils.valueOrDefault(b.top,h.margin.top),h.margin.right=a.utils.valueOrDefault(b.right,h.margin.right),h.margin.bottom=a.utils.valueOrDefault(b.bottom,h.margin.bottom),h.margin.left=a.utils.valueOrDefault(b.left,h.margin.left),c):h.margin},c.width=function(a){return arguments.length?(h.options.size.width=a,c):h.options.size.width},c.height=function(a){return arguments.length?(h.options.size.height=a,c):h.options.size.height},c.x=function(a){return arguments.length?(k=a,o.x(a),c):k},c.y=function(a){return arguments.length?(l=a,o.y(a),c):l},c.clipEdge=function(a){return arguments.length?(m=a,c):m},c.color=function(b){return arguments.length?(i=a.utils.getColor(b),o.color(i),c):i},c.id=function(a){return arguments.length?(j=a,c):j},c.interpolate=function(a){return arguments.length?(n=a,c):n},c},a.models.lineChartFisheye=function(){"use strict";function c(j){return j.each(function(j){function u(){if(h)return y.select(".nv-point-paths").style("pointer-events","all"),!1;y.select(".nv-background").style("pointer-events","all"),y.select(".nv-point-paths").style("pointer-events","none");var a=b.mouse(this);z.call(k),y.select(".nv-x.nv-axis").call(l),p.distortion(g).focus(a[0])}if(d.setRoot(this),d.noData(j))return c;var v=this,w=d.available.width,x=d.available.height;c.update=function(){d.svg.transition().call(c)},c.container=this,d.wrapChart(j),d.gEnter.append("rect").attr("class","nvd3 nv-background").attr("width",w).attr("height",x),d.gEnter.append("g").attr("class","nv-x nv-axis"),d.gEnter.append("g").attr("class","nv-y nv-axis"),d.gEnter.append("g").attr("class","nv-linesWrap"),d.gEnter.append("g").attr("class","nv-legendWrap"),d.gEnter.append("g").attr("class","nv-controlsWrap"),d.gEnter.append("g").attr("class","nv-controlsWrap");var y=d.wrap.select("g");d.options.showLegend&&(n.width(w),y.select(".nv-legendWrap").datum(j).call(n),d.margin.top!=n.height()&&(d.margin.top=n.height(),x=(d.options.size.height||parseInt(d.svg.style("height"))||400)-d.margin.top-d.margin.bottom),y.select(".nv-legendWrap").attr("transform","translate(0,"+-d.margin.top+")")),f&&(o.width(180).color(["#444"]),y.select(".nv-controlsWrap").datum(t).attr("transform","translate(0,"+-d.margin.top+")").call(o)),k.width(w).height(x).color(j.map(function(a,b){return a.color||e(a,b)}).filter(function(a,b){return!j[b].disabled}));var z=y.select(".nv-linesWrap").datum(j.filter(function(a){return!a.disabled}));b.transition(z).call(k),l.ticks(w/100).tickSize(-x,0),y.select(".nv-x.nv-axis").attr("transform","translate(0,"+q.range()[0]+")"),b.transition(y.select(".nv-x.nv-axis")).call(l),m.ticks(x/36).tickSize(-w,0),b.transition(y.select(".nv-y.nv-axis")).call(m),y.select(".nv-background").on("mousemove",u).on("click",function(){h=!h}),o.dispatch.on("legendClick",function(a){a.disabled=!a.disabled,g=a.disabled?0:5,y.select(".nv-background").style("pointer-events",a.disabled?"none":"all"),y.select(".nv-point-paths").style("pointer-events",a.disabled?"all":"none"),a.disabled?(p.distortion(g).focus(0),z.call(k),y.select(".nv-x.nv-axis").call(l)):h=!1,c.update()}),n.dispatch.on("stateChange",function(){c.update()}).on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+d.margin.left,a.pos[1]+d.margin.top],r.tooltipShow(a)}),i&&r.on("tooltipShow",function(a){s(a,v.parentNode)}),k.dispatch.on("elementMouseout.tooltip",function(a){r.tooltipHide(a)}),i&&r.on("tooltipHide",a.tooltip.cleanup)}),c}var d=new d({margin:{top:30,right:20,bottom:50,left:60},chartClass:"lineChart"}),e=a.utils.defaultColor(),f=!0,g=0,h=!1,i=!0,j=function(a,b,c){return"<h3>"+a+"</h3><p>"+c+" at "+b+"</p>"},k=a.models.lineFisheye().xScale(p),l=a.models.axis().scale(p).orient("bottom").tickPadding(5),m=a.models.axis().scale(q).orient("left"),n=a.models.legend().height(30),o=a.models.legend().height(30).updateState(!1),p=b.fisheye.scale(b.scale.linear).distortion(0),q=k.yScale(),r=b.dispatch("tooltipShow","tooltipHide"),s=function(b,c){var d=b.pos[0]+(c.offsetLeft||0),e=b.pos[1]+(c.offsetTop||0),f=l.tickFormat()(k.x()(b.point,b.pointIndex)),g=m.tickFormat()(k.y()(b.point,b.pointIndex)),h=j(b.series.key,f,g);a.tooltip.show([d,e],h,null,null,c)},t=[{key:"Magnify",disabled:!0}];return c.dispatch=r,c.legend=n,c.xAxis=l,c.yAxis=m,b.rebind(c,k,"defined","x","y","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate"),c.options=a.utils.optionsFunc.bind(c),c.margin=function(b){return arguments.length?(d.margin.top=a.utils.valueOrDefault(b.top,d.margin.top),d.margin.right=a.utils.valueOrDefault(b.right,d.margin.right),d.margin.bottom=a.utils.valueOrDefault(b.bottom,d.margin.bottom),d.margin.left=a.utils.valueOrDefault(b.left,d.margin.left),c):d.margin},c.width=function(a){return arguments.length?(d.options.size.width=a,c):d.options.size.width},c.height=function(a){return arguments.length?(d.options.size.height=a,c):d.options.size.height},c.color=function(b){return arguments.length?(e=a.utils.getColor(b),n.color(e),c):e},c.showLegend=function(a){return arguments.length?(d.options.showLegend=a,c):d.options.showLegend},c.tooltips=function(a){return arguments.length?(i=a,c):i},c.tooltipContent=function(a){return arguments.length?(j=a,c):j},c.noData=function(a){return arguments.length?(d.options.noData=a,c):d.options.noData},c},a.models.lineWithFocusChart=function(){"use strict";function c(a){return a.each(function(a){function v(a){var b=+("e"==a),c=b?1:-1,d=E/3;return"M"+.5*c+","+d+"A6,6 0 0 "+b+" "+6.5*c+","+(d+6)+"V"+(2*d-6)+"A6,6 0 0 "+b+" "+.5*c+","+2*d+"ZM"+2.5*c+","+(d+8)+"V"+(2*d-8)+"M"+4.5*c+","+(d+8)+"V"+(2*d-8)}function z(){o.empty()||o.extent(t),I.data([o.empty()?f.domain():t]).each(function(a){var c=f(a[0])-d.range()[0],e=d.range()[1]-f(a[1]);b.select(this).select(".left").attr("width",0>c?0:c),b.select(this).select(".right").attr("x",f(a[1])).attr("width",0>e?0:e)})}function A(){t=o.empty()?null:o.extent();var b=o.empty()?f.domain():o.extent();if(!(Math.abs(b[0]-b[1])<=1)){w.brush({extent:b,brush:o}),z();var c=p.g.select(".nv-focus .nv-linesWrap").datum(a.filter(function(a){return!a.disabled}).map(function(a){return{key:a.key,area:a.area,values:a.values.filter(function(a,c){return h.x()(a,c)>=b[0]&&h.x()(a,c)<=b[1]})}}));c.transition().duration(x).call(h),p.g.select(".nv-focus .nv-x.nv-axis").transition().duration(x).call(j),p.g.select(".nv-focus .nv-y.nv-axis").transition().duration(x).call(k)}}if(p.setRoot(this),p.noData(a))return c;var B=this,C=p.available.width,D=(p.options.size.height||parseInt(p.svg.style("height"))||400)-p.margin.top-p.margin.bottom-s,E=s-q.top-q.bottom;c.update=function(){p.svg.transition().duration(x).call(c)},d=h.xScale(),e=h.yScale(),f=i.xScale(),g=i.yScale(),p.wrapChart(a);var F=p.gEnter.append("g").attr("class","nv-focus");F.append("g").attr("class","nv-x nv-axis"),F.append("g").attr("class","nv-y nv-axis"),F.append("g").attr("class","nv-linesWrap");var G=p.gEnter.append("g").attr("class","nv-context");G.append("g").attr("class","nv-x nv-axis"),G.append("g").attr("class","nv-y nv-axis"),G.append("g").attr("class","nv-linesWrap"),G.append("g").attr("class","nv-brushBackground"),G.append("g").attr("class","nv-x nv-brush"),p.options.showLegend&&(n.width(C),p.g.select(".nv-legendWrap").datum(a).call(n),p.margin.top!=n.height()&&(p.margin.top=n.height(),D=(p.options.size.height||parseInt(p.svg.style("height"))||400)-p.margin.top-p.margin.bottom-s),p.g.select(".nv-legendWrap").attr("transform","translate(0,"+-p.margin.top+")")),h.width(C).height(D).color(a.map(function(a,b){return a.color||r(a,b)}).filter(function(b,c){return!a[c].disabled})),i.defined(h.defined()).width(C).height(E).color(a.map(function(a,b){return a.color||r(a,b)}).filter(function(b,c){return!a[c].disabled})),p.g.select(".nv-context").attr("transform","translate(0,"+(D+p.margin.bottom+q.top)+")");var H=p.g.select(".nv-context .nv-linesWrap").datum(a.filter(function(a){return!a.disabled}));b.transition(H).call(i),j.scale(d).ticks(C/100).tickSize(-D,0),k.scale(e).ticks(D/36).tickSize(-C,0),p.g.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+D+")"),o.x(f).on("brush",function(){var a=c.transitionDuration();c.transitionDuration(0),A(),c.transitionDuration(a)}),t&&o.extent(t);var I=p.g.select(".nv-brushBackground").selectAll("g").data([t||o.extent()]),J=I.enter().append("g");J.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",E),J.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",E);var K=p.g.select(".nv-x.nv-brush").call(o);K.selectAll("rect").attr("height",E),K.selectAll(".resize").append("path").attr("d",v),A(),l.scale(f).ticks(C/100).tickSize(-E,0),p.g.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+g.range()[0]+")"),b.transition(p.g.select(".nv-context .nv-x.nv-axis")).call(l),m.scale(g).ticks(E/36).tickSize(-C,0),b.transition(p.g.select(".nv-context .nv-y.nv-axis")).call(m),p.g.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+g.range()[0]+")"),n.dispatch.on("stateChange",function(){c.update()}),w.on("tooltipShow",function(a){u&&y(a,B.parentNode)})}),c}var d,e,f,g,h=a.models.line(),i=a.models.line(),j=a.models.axis(),k=a.models.axis(),l=a.models.axis(),m=a.models.axis(),n=a.models.legend(),o=b.svg.brush(),p=new p({chartClass:"lineWithFocusChart",margin:{top:30,right:30,bottom:30,left:60}}),q={top:0,right:30,bottom:20,left:60},r=a.utils.defaultColor(),s=100,t=null,u=!0,v=function(a,b,c){return"<h3>"+a+"</h3><p>"+c+" at "+b+"</p>"},w=b.dispatch("tooltipShow","tooltipHide","brush"),x=250;h.clipEdge(!0),i.interactive(!1),j.orient("bottom").tickPadding(5),k.orient("left"),l.orient("bottom").tickPadding(5),m.orient("left");var y=function(b,c){var d=b.pos[0]+(c.offsetLeft||0),e=b.pos[1]+(c.offsetTop||0),f=j.tickFormat()(h.x()(b.point,b.pointIndex)),g=k.tickFormat()(h.y()(b.point,b.pointIndex)),i=v(b.series.key,f,g);a.tooltip.show([d,e],i,null,null,c)};return h.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+p.margin.left,a.pos[1]+p.margin.top],w.tooltipShow(a)}),h.dispatch.on("elementMouseout.tooltip",function(a){w.tooltipHide(a)}),w.on("tooltipHide",function(){u&&a.tooltip.cleanup()}),c.dispatch=w,c.legend=n,c.lines=h,c.lines2=i,c.xAxis=j,c.yAxis=k,c.x2Axis=l,c.y2Axis=m,b.rebind(c,h,"defined","isArea","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),c.options=a.utils.optionsFunc.bind(c),c.x=function(a){return arguments.length?(h.x(a),i.x(a),c):h.x},c.y=function(a){return arguments.length?(h.y(a),i.y(a),c):h.y},c.margin=function(b){return arguments.length?(p.margin.top=a.utils.valueOrDefault(b.top,p.margin.top),p.margin.right=a.utils.valueOrDefault(b.right,p.margin.right),p.margin.bottom=a.utils.valueOrDefault(b.bottom,p.margin.bottom),p.margin.left=a.utils.valueOrDefault(b.left,p.margin.left),c):p.margin},c.margin2=function(a){return arguments.length?(q=a,c):q},c.width=function(a){return arguments.length?(p.options.size.width=a,c):p.options.size.width},c.height=function(a){return arguments.length?(p.options.size.height=a,c):p.options.size.height},c.height2=function(a){return arguments.length?(s=a,c):s},c.color=function(b){return arguments.length?(r=a.utils.getColor(b),n.color(r),c):r},c.showLegend=function(a){return arguments.length?(p.options.showLegend=a,c):p.options.showLegend},c.tooltips=function(a){return arguments.length?(u=a,c):u},c.tooltipContent=function(a){return arguments.length?(v=a,c):v},c.interpolate=function(a){return arguments.length?(h.interpolate(a),i.interpolate(a),c):h.interpolate()},c.noData=function(a){return arguments.length?(p.options.noData=a,c):p.options.noData},c.xTickFormat=function(a){return arguments.length?(j.tickFormat(a),l.tickFormat(a),c):j.tickFormat()},c.yTickFormat=function(a){return arguments.length?(k.tickFormat(a),m.tickFormat(a),c):k.tickFormat()},c.brushExtent=function(a){return arguments.length?(t=a,c):t},c.transitionDuration=function(a){return arguments.length?(x=a,c):x},c};var db={Normal:{rotateAngle:function(){return 0},textAnchor:function(){return"middle"}},Sunbeam:{rotateAngle:function(a){var b=(a.startAngle+a.endAngle)/2*(180/Math.PI);return(a.startAngle+a.endAngle)/2<Math.PI?b-=90:b+=90,b},textAnchor:function(a){return(a.startAngle+a.endAngle)/2<Math.PI?"start":"end"}}},eb={startAngle:0,endAngle:0,pieLabelsOutside:!0,showLabels:!0,labelType:"key",labelThreshold:.02,labelLayout:db.Normal,labelFormat:b.format("%"),valueFormat:b.format(",.2f"),id:null,x:function(a){return a.x},y:function(a){return a.y},description:null};a.utils.create(A,e,eb),A.prototype.radius=function(){return Math.min(this.available.width,this.available.height)/2},A.prototype.arcRadius=function(){return this.radius()-this.radius()/5},A.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a,["nv-pieLabels"]),this.wrap.attr("transform","translate("+this.available.width/2+","+this.available.height/2+")")},A.prototype.draw=function(c){var d=null,e=null,f=null,g=null;d=this.getArc(),e=function(c){c.endAngle=isNaN(c.endAngle)?0:c.endAngle,c.startAngle=isNaN(c.startAngle)?0:c.startAngle,c.innerRadius=a.utils.valueOrDefault(c.innerRadius,0);var e=b.interpolate(this._current,c);return this._current=e(0),function(a){return d(e(a))}}.bind(this),f=b.layout.pie().sort(null).value(function(a){return a.disabled?0:this.y()(a)}.bind(this)),g=this.g.selectAll(".nv-slice").data(f),g.exit().remove(),this.paths=g.enter().append("path"),this.paths.each(function(a){isNaN(a.startAngle)&&(a.startAngle=0),isNaN(a.endAngle)&&(a.endAngle=0),this._current=a}.bind(this)).attr({fill:function(a,b){return this.color()(a,b)}.bind(this),stroke:function(a,b){return this.color()(a,b)}.bind(this)}).transition().attr("d",d).attrTween("d",e),this.showLabels()&&this.doLabels(c,d,f)},A.prototype.doLabels=function(a,c,d){var e=null,f=null,g=this,h={},i=14,j=140,k=function(a){return Math.floor(a[0]/j)*j+","+Math.floor(a[1]/i)*i};e=this.wrap.select(".nv-pieLabels").selectAll(".nv-label").data(d),e.exit().remove(),f=this.pieLabelsOutside()?c:b.svg.arc().innerRadius(0),e.enter().append("g").classed("nv-label",!0).each(function(){var a=b.select(this);a.attr("transform",function(a){return a.outerRadius=this.arcRadius()+10,a.innerRadius=this.arcRadius()+15,"translate("+f.centroid(a)+") rotate("+this.labelLayout().rotateAngle(a)+")"}.bind(g)),a.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),a.append("text").style("text-anchor",g.labelLayout().textAnchor).style("fill","#000")}),e.transition().attr("transform",function(a){a.outerRadius=this.arcRadius()+10,a.innerRadius=this.arcRadius()+15;var b=f.centroid(a);if(a.value){var c=k(b);h[c]&&(b[1]-=i),h[k(b)]=!0}return"translate("+b+") rotate("+this.labelLayout().rotateAngle(a)+")"}.bind(this)),e.select(".nv-label text").style("text-anchor",this.labelLayout().textAnchor).text(function(a){var b=(a.endAngle-a.startAngle)/(2*Math.PI),c={key:this.x()(a.data),value:this.y()(a.data),percent:this.labelFormat()(b)};return a.value&&b>this.labelThreshold()?c[this.labelType()]:""}.bind(this))},A.prototype.mouseData=function(a,c){return{label:this.x()(a.data),value:this.y()(a.data),point:a.data,pointIndex:c,pos:[b.event.pageX,b.event.pageY],id:this.id()}},A.prototype.attachEvents=function(){this.svg.on("click",function(a,c){this.dispatch.chartClick({data:a,index:c,pos:b.event,id:this.id()})}.bind(this));var a=this;this.paths.attr("class","nv-slice").on("mouseover",function(c,d){b.select(this).classed("hover",!0),a.dispatch.elementMouseover(a.mouseData(c,d))}).on("mouseout",function(c,d){b.select(this).classed("hover",!1),a.dispatch.elementMouseout(a.mouseData(c,d))}).on("click",function(a,c){this.dispatch.elementClick(this.mouseData(a,c)),b.event.stopPropagation()}.bind(this)).on("dblclick",function(a,c){this.dispatch.elementDblClick(this.mouseData(a,c)),b.event.stopPropagation()}.bind(this))},A.prototype.getArc=function(){var a=b.svg.arc().outerRadius(this.arcRadius());return this.startAngle()&&a.startAngle(this.startAngle()),this.endAngle()&&a.endAngle(this.endAngle()),a},A.prototype.layoutCenter=function(){return this.layout.center(this)},A.prototype.labelSunbeamLayout=function(a){return arguments.length?(this.labelLayout(a?db.Sunbeam:db.Normal),this):this.labelLayout()===db.Sunbeam},a.models.pie=function(){"use strict";function b(a){return c.render(a),b}var c=new A,d=["margin","width","height","x","y","description","showLabels","labelSunbeamLayout","pieLabelsOutside","labelType","startAngle","endAngle","id","color","labelThreshold","valueFormat"];return b.dispatch=c.dispatch,b.options=a.utils.optionsFunc.bind(b),a.utils.rebindp(b,c,A.prototype,d),b};var fb={tooltips:!0,showXAxis:!1,showYAxis:!1};a.utils.create(B,k,fb),B.prototype.getPie=function(){return a.models.pie()},B.prototype.draw=function(a){this.pie.width(this.available.width).height(this.available.height);var c=this.g.select(".nv-pieChartWrap").datum(a);b.transition(c).call(this.pie)},B.prototype.attachEvents=function(){k.prototype.attachEvents.call(this),this.pie.dispatch.on("elementMouseout.tooltip",function(a){this.dispatch.tooltipHide(a)}.bind(this)),this.pie.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+this.margin().left,a.pos[1]+this.margin().top],this.dispatch.tooltipShow(a)}.bind(this))},B.prototype.color=function(b){return arguments.length?(this.options.color=a.utils.getColor(b),this.legend.color(this.color()),this.pie.color(this.color()),this):this.options.color},B.prototype.showTooltip=function(b,c){var d=this.pie.description()(b.point)||this.pie.x()(b.point),e=b.pos[0]+(c&&c.offsetLeft||0),f=b.pos[1]+(c&&c.offsetTop||0),g=this.pie.valueFormat()(this.pie.y()(b.point)),h=this.tooltip()(d,g);a.tooltip.show([e,f],h,b.value<0?"n":"s",null,c)},a.models.pieChart=function(){"use strict";function c(a){return d.render(a),c}var d=new B,e=["margin","width","height","color","tooltips","tooltipContent","showLegend","duration","noData","state","reduceXTicks","rightAlignYAxis","showXAxis","showYAxis"];return c.legend=d.legend,c.dispatch=d.dispatch,c.pie=d.pie,c.state=d.state,b.rebind(c,d.pie,"valueFormat","x","y","description","id","showLabels","pieLabelsOutside","labelType","labelThreshold","labelSunbeamLayout","labelLayout","labelFormat"),c.options=a.utils.optionsFunc.bind(c),a.utils.rebindp(c,d,B.prototype,e),c};var gb={donutRatio:.5,donutLabelsOutside:!1};a.utils.create(C,A,gb),C.prototype.getArc=function(){var a=A.prototype.getArc.call(this);return a.innerRadius(this.radius()*this.donutRatio()),a},a.models.donut=function(){function b(a){return c.render(a),b}var c=new C,d=["margin","width","height","x","y","description","showLabels","labelSunbeamLayout","donutLabelsOutside","pieLabelsOutside","labelType","donutRatio","startAngle","endAngle","id","color","labelThreshold","valueFormat"];return b.dispatch=c.dispatch,a.utils.rebindp(b,c,C.prototype,d),b.options=a.utils.optionsFunc.bind(b),b},a.utils.create(D,B,{}),D.prototype.getPie=function(){return a.models.donut()},a.models.donutChart=function(){function c(a){return d.render(a),c}var d=new D;return c.legend=d.legend,c.dispatch=d.dispatch,c.pie=d.pie,b.rebind(c,d.pie,"valueFormat","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold"),a.utils.rebindp(c,d,D.prototype,"margin","width","height","color","tooltips","tooltipContent","showLegend","duration","noData","state","showLegend"),c.options=a.utils.optionsFunc.bind(c),c};var hb={id:null,x:function(a){return a.x},y:function(a){return a.y},xScale:b.scale.linear(),yScale:b.scale.linear(),zScale:b.scale.linear(),getSize:function(a){return a.size||1},getShape:function(a){return a.shape||"circle"},onlyCircles:!0,forceX:[],forceY:[],forceSize:[],interactive:!0,pointKey:null,pointActive:function(a){return!a.notActive},padData:!1,padDataOuter:.1,clipEdge:!1,clipVoronoi:!0,clipRadius:function(){return 25},xDomain:null,yDomain:null,xRange:null,yRange:null,sizeDomain:null,sizeRange:null,singlePoint:!1,xScale0:null,yScale0:null,zScale0:null,timeoutID:null,needsUpdate:!1,useVoronoi:!0,duration:250};a.utils.create(E,e,hb),E.prototype.wrapper=function(b){var c=["nv-groups","nv-point-paths"],d="nv-"+this.options.chartClass,e="nv-"+this.options.wrapClass;this.wrap=this.svg.selectAll("g.nv-wrap."+e).data([b]),this.wrapEnter=this.wrap.enter().append("g").attr("class","nvd3 nv-wrap "+d+" nv-chart-"+this.id()+(this.singlePoint()?" nv-single-point":"")),this.defsEnter=this.wrapEnter.append("defs"),this.gEnter=this.wrapEnter.append("g"),this.g=this.wrap.select("g"),c.concat([e]).forEach(function(a){this.gEnter.append("g").attr("class",a)},this),this.defsEnter.append("clipPath").attr("id","nv-edge-clip-"+this.id()).append("rect"),this.wrap.select("#nv-edge-clip-"+this.id()+" rect").attr("width",this.available.width).attr("height",this.available.height>0?this.available.height:0),this.g.attr("clip-path",this.clipEdge()?"url(#nv-edge-clip-"+this.id()+")":""),this.wrap.attr("transform","translate("+this.margin().left+","+this.margin().top+")"),this.renderWatch=a.utils.renderWatch(this.dispatch,this.duration())},E.prototype.draw=function(c){function d(){if(!e.interactive())return!1;var a=b.merge(c.map(function(a,b){return a.values.map(function(a,c){var d=e.x()(a,c),f=e.y()(a,c);return[e.xScale()(d)+1e-7*Math.random(),e.yScale()(f)+1e-7*Math.random(),b,c,a]}).filter(function(a,b){return e.pointActive()(a[4],b)})}));if(e.useVoronoi()===!0){if(e.clipVoronoi()){var d=e.wrap.select("defs").selectAll(".nv-point-clips").data([e.id()]).enter();d.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+e.id());var f=e.wrap.select("#nv-points-clip-"+e.id()).selectAll("circle").data(a);f.enter().append("circle").attr("r",e.clipRadius()),f.exit().remove(),f.attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]}),e.wrap.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+e.id()+")")}a.length&&(a.push([e.xScale().range()[0]-20,e.yScale().range()[0]-20,null,null]),a.push([e.xScale().range()[1]+20,e.yScale().range()[1]+20,null,null]),a.push([e.xScale().range()[0]-20,e.yScale().range()[0]+20,null,null]),a.push([e.xScale().range()[1]+20,e.yScale().range()[1]-20,null,null]));var g=b.geom.polygon([[-10,-10],[-10,e.height()+10],[e.width()+10,e.height()+10],[e.width()+10,-10]]),h=b.geom.voronoi(a).map(function(b,c){return{data:g.clip(b),series:a[c][2],point:a[c][3]}}),i=e.wrap.select(".nv-point-paths").selectAll("path").data(h);i.enter().append("path").attr("class",function(a,b){return"nv-path-"+b}),i.exit().remove(),i.attr("d",function(a){return 0===a.data.length?"M 0 0":"M"+a.data.join("L")+"Z"});var j=function(a,b){if(e.needsUpdate())return 0;var d=c[a.series];if("undefined"!=typeof d){var f=d.values[a.point];b({point:f,series:d,pos:[e.xScale()(e.x()(f,a.point))+e.margin().left,e.yScale()(e.y()(f,a.point))+e.margin().top],seriesIndex:a.series,pointIndex:a.point})}};i.on("click",function(a){j(a,e.dispatch.elementClick)}).on("mouseover",function(a){j(a,e.dispatch.elementMouseover)}).on("mouseout",function(a){j(a,e.dispatch.elementMouseout)})}else e.wrap.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(a,b){if(e.needsUpdate()||!c[a.series])return 0;var d=c[a.series],f=d.values[b];e.dispatch.elementClick({point:f,series:d,pos:[e.xScale()(e.x()(f,b))+e.margin().left,e.yScale()(e.y()(f,b))+e.margin().top],seriesIndex:a.series,pointIndex:b})}).on("mouseover",function(a,b){if(e.needsUpdate()||!c[a.series])return 0;var d=c[a.series],f=d.values[b];e.dispatch.elementMouseover({point:f,series:d,pos:[e.xScale()(e.x()(f,b))+e.margin().left,e.yScale()(e.y()(f,b))+e.margin().top],seriesIndex:a.series,pointIndex:b})}).on("mouseout",function(a,b){if(e.needsUpdate()||!c[a.series])return 0;var d=c[a.series],f=d.values[b];e.dispatch.elementMouseout({point:f,series:d,seriesIndex:a.series,pointIndex:b})});e.needsUpdate(!1)}var e=this,f=this.available.width,g=this.available.height;c.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});var h=this.xDomain()&&this.yDomain()&&this.sizeDomain()?[]:b.merge(c.map(function(a){return a.values.map(function(a,b){return{x:e.x()(a,b),y:e.y()(a,b),size:e.getSize()(a,b)}})}));this.xScale().domain(this.xDomain()||b.extent(h.map(function(a){return a.x}).concat(this.forceX()))),this.xScale().range(this.padData()&&c[0]?this.xRange()||[(f*this.padDataOuter()+f)/(2*c[0].values.length),f-f*(1+this.padDataOuter())/(2*c[0].values.length)]:this.xRange()||[0,f]),this.yScale().domain(this.yDomain()||b.extent(h.map(function(a){return a.y}).concat(this.forceY()))).range(this.yRange()||[g,0]),this.zScale().domain(this.sizeDomain()||b.extent(h.map(function(a){return a.size}).concat(this.forceSize()))).range(this.sizeRange()||[16,256]),(this.xScale().domain()[0]===this.xScale().domain()[1]||this.yScale().domain()[0]===this.yScale().domain()[1])&&this.singlePoint(!0),this.xScale().domain()[0]===this.xScale().domain()[1]&&this.xScale().domain(this.xScale().domain()[0]?[this.xScale().domain()[0]-.01*this.xScale().domain()[0],this.xScale().domain()[1]+.01*this.xScale().domain()[1]]:[-1,1]),this.yScale().domain()[0]===this.yScale().domain()[1]&&this.yScale().domain(this.yScale().domain()[0]?[this.yScale().domain()[0]-.01*this.yScale().domain()[0],this.yScale().domain()[1]+.01*this.yScale().domain()[1]]:[-1,1]),isNaN(this.xScale().domain()[0])&&this.xScale().domain([-1,1]),isNaN(this.yScale().domain()[0])&&this.yScale().domain([-1,1]),this.xScale0(this.xScale0()||this.xScale()),this.yScale0(this.yScale0()||this.yScale()),this.zScale0(this.zScale0()||this.zScale()),this.needsUpdate(!0);var i=this.wrap.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});if(i.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),i.exit().remove(),i.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}),i.watchTransition(this.renderWatch,"scatter: groups").style("fill",function(a,b){return e.color()(a,b)}).style("stroke",function(a,b){return e.color()(a,b)}).style("stroke-opacity",1).style("fill-opacity",.5),this.onlyCircles()){var j=i.selectAll("circle.nv-point").data(function(a){return a.values},this.pointKey());j.enter().append("circle").style("fill",function(a){return a.color}).style("stroke",function(a){return a.color}).attr("cx",function(b,c){return a.utils.NaNtoZero(e.xScale0()(e.x()(b,c)))}).attr("cy",function(b,c){return a.utils.NaNtoZero(e.yScale0()(e.y()(b,c)))}).attr("r",function(a,b){return Math.sqrt(e.zScale()(e.getSize()(a,b))/Math.PI)}),j.exit().remove(),i.exit().selectAll("path.nv-point").watchTransition(this.renderWatch,"scatter exit").attr("cx",function(b,c){return a.utils.NaNtoZero(e.xScale()(e.x()(b,c)))}).attr("cy",function(b,c){return a.utils.NaNtoZero(e.yScale()(e.y()(b,c)))}).remove(),j.each(function(a,c){b.select(this).classed("nv-point",!0).classed("nv-point-"+c,!0).classed("hover",!1)}),j.watchTransition(this.renderWatch,"scatter points").attr("cx",function(b,c){return a.utils.NaNtoZero(e.xScale()(e.x()(b,c)))}).attr("cy",function(b,c){return a.utils.NaNtoZero(e.yScale()(e.y()(b,c)))}).attr("r",function(a,b){return Math.sqrt(e.zScale()(e.getSize()(a,b))/Math.PI)})}else{var j=i.selectAll("path.nv-point").data(function(a){return a.values});j.enter().append("path").style("fill",function(a){return a.color}).style("stroke",function(a){return a.color}).attr("transform",function(a,b){return"translate("+e.xScale0()(e.x()(a,b))+","+e.yScale0()(e.y()(a,b))+")"}).attr("d",b.svg.symbol().type(e.getShape()).size(function(a,b){return e.zScale()(e.getSize()(a,b))})),j.exit().remove(),i.exit().selectAll("path.nv-point").watchTransition(e.renderWatch,"scatter exit").attr("transform",function(a,b){return"translate("+e.xScale()(e.x()(a,b))+","+e.yScale()(e.y()(a,b))+")"}).remove(),j.each(function(a,c){b.select(this).classed("nv-point",!0).classed("nv-point-"+c,!0).classed("hover",!1)
}),j.watchTransition(this.renderWatch,"scatter points").attr("transform",function(a,b){return"translate("+e.xScale()(e.x()(a,b))+","+e.yScale()(e.y()(a,b))+")"}).attr("d",b.svg.symbol().type(this.getShape()).size(function(a,b){return e.zScale()(e.getSize()(a,b))}))}clearTimeout(this.timeoutID()),this.timeoutID(setTimeout(d,300)),this.xScale0(this.xScale().copy()),this.yScale0(this.yScale().copy()),this.zScale0(this.zScale().copy())},E.prototype.attachEvents=function(){this.dispatch.on("elementMouseover.point",function(a){this.interactive()&&this.highlightPoint(a.seriesIndex,a.pointIndex,!0)}.bind(this)).on("elementMouseout.point",function(a){this.interactive()&&this.highlightPoint(a.seriesIndex,a.pointIndex,!1)}.bind(this))},E.prototype.clearHighlights=function(){b.selectAll(".nv-chart-"+this.id()+" .nv-point.hover").classed("hover",!1)},E.prototype.highlightPoint=function(a,c,d){b.select(".nv-chart-"+this.id()+" .nv-series-"+a+" .nv-point-"+c).classed("hover",d)},E.prototype.useVoronoi=function(a){return arguments.length?(this.options.useVoronoi=a,this.useVoronoi()===!1&&this.clipVoronoi(!1),this):this.options.useVoronoi},E.prototype.color=function(b){return arguments.length?(this.options.color=a.utils.getColor(b),this):this.options.color},E.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.renderWatch.reset(a),this):this.options.duration},E.prototype.size=function(a){return arguments.length?(this.options.getSize=b.functor(a),this):this.options.getSize},E.prototype.shape=function(a){return arguments.length?(this.options.getShape=a,this):this.options.getShape},a.models.scatter=function(){"use strict";function b(a){return c.render(a),b}var c=new E,d=["clearHighlights","highlightPoint","x","y","size","margin","width","height","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","xRange","yRange","sizeRange","forceX","forceY","forceSize","interactive","pointKey","pointActive","padData","padDataOuter","clipEdge","clipVoronoi","useVoronoi","clipRadius","color","shape","onlyCircles","id","singlePoint","duration"];return b.dispatch=c.dispatch,b.options=a.utils.optionsFunc.bind(b),a.utils.rebindp(b,c,E.prototype,d),b};var ib={xScale:null,yScale:null,xPadding:0,yPadding:0,showDistX:!1,showDistY:!1,showControls:!!b.fisheye,fisheye:0,pauseFisheye:!1,tooltips:!0,tooltipX:function(a,b){return"<strong>"+b+"</strong>"},tooltipY:function(a,b,c){return"<strong>"+c+"</strong>"},tooltip:null,defaultState:null,transitionDuration:250,controlsData:[{key:"Magnify",disabled:!0}],xScale0:null,yScale0:null,duration:250,state:null};a.utils.create(F,k,ib),F.prototype.getScatter=function(){return a.models.scatter()},F.prototype.getDistribution=function(){return a.models.distribution()},F.prototype.wrapper=function(b){k.prototype.wrapper.call(this,b,["nv-distWrap","nv-controlsWrap"]),this.renderWatch=a.utils.renderWatch(this.dispatch,this.duration()),this.renderWatch.models(this.scatter),this.showXAxis()&&this.renderWatch.models(this.xAxis),this.showYAxis()&&this.renderWatch.models(this.yAxis),this.showDistX()&&this.renderWatch.models(this.distX),this.showDistY()&&this.renderWatch.models(this.distY)},F.prototype.draw=function(a){function c(){if(d.pauseFisheye())return d.g.select(".nv-point-paths").style("pointer-events","all"),!1;d.g.select(".nv-point-paths").style("pointer-events","none");var c=b.mouse(this);d.xScale().distortion(d.fisheye()).focus(c[0]),d.yScale().distortion(d.fisheye()).focus(c[1]),d.g.select(".nv-scatterWrap").call(d.scatter),d.showXAxis()&&d.g.select(".nv-x.nv-axis").call(d.xAxis),d.showYAxis()&&d.g.select(".nv-y.nv-axis").call(d.yAxis),d.g.select(".nv-distributionX").datum(a.filter(function(a){return!a.disabled})).call(d.distX),d.g.select(".nv-distributionY").datum(a.filter(function(a){return!a.disabled})).call(d.distY)}var d=this;if(this.xScale0(this.xScale0()||this.xScale()),this.yScale0(this.yScale0()||this.yScale()),this.scatter.margin({top:0,right:0,bottom:0,left:0}).width(this.available.width).height(this.available.height).color(a.map(function(a,b){return a.color||d.color()(a,b)}).filter(function(b,c){return!a[c].disabled})),0!==this.xPadding()&&this.scatter.xDomain(null),0!==this.yPadding()&&this.scatter.yDomain(null),this.wrap.select(".nv-scatterWrap").datum(a.filter(function(a){return!a.disabled})).call(this.scatter),0!==this.xPadding()){var e=this.xScale().domain()[1]-this.xScale().domain()[0];this.scatter.xDomain([this.xScale().domain()[0]-this.xPadding()*e,this.xScale().domain()[1]+this.xPadding()*e])}if(0!==this.yPadding()){var f=this.yScale().domain()[1]-this.yScale().domain()[0];this.scatter.yDomain([this.yScale().domain()[0]-this.yPadding()*f,this.yScale().domain()[1]+this.yPadding()*f])}(0!==this.yPadding()||0!==this.xPadding())&&this.wrap.select(".nv-scatterWrap").datum(a.filter(function(a){return!a.disabled})).call(this.scatter),this.showDistX()&&(this.distX.margin({top:0,right:0,bottom:0,left:0}).getData(this.scatter.x()).scale(this.xScale()).width(this.available.width).color(a.map(function(a,b){return a.color||d.color()(a,b)}).filter(function(b,c){return!a[c].disabled})),this.gEnter.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),this.g.select(".nv-distributionX").attr("transform","translate(0,"+this.yScale().range()[0]+")").datum(a.filter(function(a){return!a.disabled})).call(this.distX)),this.showDistY()&&(this.distY.margin({top:0,right:0,bottom:0,left:0}).getData(this.scatter.y()).scale(this.yScale()).width(this.available.height).color(a.map(function(a,b){return a.color||d.color()(a,b)}).filter(function(b,c){return!a[c].disabled})),this.gEnter.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),this.g.select(".nv-distributionY").attr("transform","translate("+(this.rightAlignYAxis()?this.available.width:-this.distY.size())+",0)").datum(a.filter(function(a){return!a.disabled})).call(this.distY)),b.fisheye&&(this.g.select(".nv-background").attr("width",this.available.width).attr("height",this.available.height),this.g.select(".nv-background").on("mousemove",c),this.g.select(".nv-background").on("click",function(){d.pauseFisheye(!d.pauseFisheye())}),this.scatter.dispatch.on("elementClick.freezeFisheye",function(){d.pauseFisheye(!d.pauseFisheye())})),this.xScale0(this.xScale().copy()),this.yScale0(this.yScale().copy()),k.prototype.draw.call(this,a)},F.prototype.attachEvents=function(){k.prototype.attachEvents.call(this);var c=this;this.scatter.dispatch.on("elementMouseout.tooltip",function(a){this.dispatch.tooltipHide(a),b.select(".nv-chart-"+this.scatter.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0),b.select(".nv-chart-"+this.scatter.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",this.distY.size())}.bind(this)),this.dispatch.on("tooltipHide",function(){this.tooltips()&&a.tooltip.cleanup()}.bind(this)),this.controls.dispatch.on("legendClick",function(a){a.disabled=!a.disabled,c.fisheye(a.disabled?0:2.5),c.g.select(".nv-background").style("pointer-events",a.disabled?"none":"all"),c.g.select(".nv-point-paths").style("pointer-events",a.disabled?"all":"none"),a.disabled?(c.xScale().distortion(c.fisheye()).focus(0),c.yScale().distortion(c.fisheye()).focus(0),c.g.select(".nv-scatterWrap").call(c.scatter),c.g.select(".nv-x.nv-axis").call(c.xAxis),c.g.select(".nv-y.nv-axis").call(c.yAxis)):c.pauseFisheye(!1),c.update()}),c.legend.dispatch.on("stateChange",function(a){c.state.disabled=a.disabled,c.dispatch.stateChange(c.state),c.update()}),c.scatter.dispatch.on("elementMouseover.tooltip",function(a){b.select(".nv-chart-"+c.scatter.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",function(){return a.pos[1]-c.available().height}),b.select(".nv-chart-"+c.scatter.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+c.distX.size()),a.pos=[a.pos[0]+c.margin().left,a.pos[1]+c.margin().top],c.dispatch.tooltipShow(a)}),this.dispatch.on("tooltipShow",function(a){c.tooltips()&&c.showTooltip(a,c.svg[0][0])}),c.dispatch.on("changeState",function(a){"undefined"!=typeof a.disabled&&c.svg.call(function(b){b.each(function(b){b.forEach(function(b,c){b.disabled=a.disabled[c]}),c.state.disabled=a.disabled})}),c.update()})},F.prototype.showTooltip=function(b,c){var d=b.pos[0]+(c.offsetLeft||0),e=b.pos[1]+(c.offsetTop||0),f=b.pos[0]+(c.offsetLeft||0),g=this.yScale().range()[0]+this.margin().top+(c.offsetTop||0),h=this.xScale().range()[0]+this.margin().left+(c.offsetLeft||0),i=b.pos[1]+(c.offsetTop||0),j=this.xAxis.tickFormat()(this.scatter.x()(b.point,b.pointIndex)),k=this.yAxis.tickFormat()(this.scatter.y()(b.point,b.pointIndex));null!=this.tooltipX()&&a.tooltip.show([f,g],this.tooltipX()(b.series.key,j,k,b,this),"n",1,c,"x-nvtooltip"),null!=this.tooltipY()&&a.tooltip.show([h,i],this.tooltipY()(b.series.key,j,k,b,this),"e",1,c,"y-nvtooltip"),null!=this.tooltip()&&a.tooltip.show([d,e],this.tooltip()(b.series.key,j,k,b,this),b.value<0?"n":"s",null,c)},F.prototype.color=function(b){return arguments.length?(this.options.color=a.utils.getColor(b),this.legend.color(this.color()),this.distX.color(this.color()),this.distY.color(this.color()),this):this.options.color},F.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.renderWatch.reset(a),this.scatter.duration(a),this.xAxis.duration(a),this.yAxis.duration(a),this.distX.duration(a),this.distY.duration(a),this):this.options.duration},a.models.scatterChart=function(){"use strict";function c(a){return d.render(a),c}var d=new F,e=["margin","width","height","color","showDistX","showDistY","showControls","showLegend","showXAxis","showYAxis","fisheye","xPadding","yPadding","tooltips","tooltipContent","state","defaultState","noData","duration","transitionDuration","tooltipX","tooltipY","reduceXTicks","rightAlignYAxis"];return c.dispatch=d.dispatch,c.scatter=d.scatter,c.legend=d.legend,c.controls=d.controls,c.distX=d.distX,c.distY=d.distY,c.xAxis=d.xAxis,c.yAxis=d.yAxis,b.rebind(c,d.scatter,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),c.options=a.utils.optionsFunc.bind(c),a.utils.rebindp(c,d,F.prototype,e),c},a.models.scatterPlusLineChart=function(){"use strict";function c(a){return K.reset(),K.models(d),t&&K.models(e),u&&K.models(f),q&&K.models(i),r&&K.models(j),a.each(function(a){function A(){if(y)return U.select(".nv-point-paths").style("pointer-events","all"),!1;U.select(".nv-point-paths").style("pointer-events","none");var c=b.mouse(this);o.distortion(x).focus(c[0]),p.distortion(x).focus(c[1]),U.select(".nv-scatterWrap").datum(a.filter(function(a){return!a.disabled})).call(d),t&&U.select(".nv-x.nv-axis").call(e),u&&U.select(".nv-y.nv-axis").call(f),U.select(".nv-distributionX").datum(a.filter(function(a){return!a.disabled})).call(i),U.select(".nv-distributionY").datum(a.filter(function(a){return!a.disabled})).call(j)}var B=b.select(this),C=this,N=(l||parseInt(B.style("width"))||960)-k.left-k.right,O=(m||parseInt(B.style("height"))||400)-k.top-k.bottom;if(c.update=function(){0===H?B.call(c):B.transition().duration(H).call(c)},c.container=this,D.disabled=a.map(function(a){return!!a.disabled}),!E){var P;E={};for(P in D)E[P]=D[P]instanceof Array?D[P].slice(0):D[P]}if(!(a&&a.length&&a.filter(function(a){return a.values.length}).length)){var Q=B.selectAll(".nv-noData").data([G]);return Q.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),Q.attr("x",k.left+N/2).attr("y",k.top+O/2).text(function(a){return a}),K.renderEnd("scatter immediate"),c}B.selectAll(".nv-noData").remove(),o=d.xScale(),p=d.yScale(),I=I||o,J=J||p;var R=B.selectAll("g.nv-wrap.nv-scatterChart").data([a]),S=R.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+d.id()),T=S.append("g"),U=R.select("g");T.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),T.append("g").attr("class","nv-x nv-axis"),T.append("g").attr("class","nv-y nv-axis"),T.append("g").attr("class","nv-scatterWrap"),T.append("g").attr("class","nv-regressionLinesWrap"),T.append("g").attr("class","nv-distWrap"),T.append("g").attr("class","nv-legendWrap"),T.append("g").attr("class","nv-controlsWrap"),R.attr("transform","translate("+k.left+","+k.top+")"),v&&U.select(".nv-y.nv-axis").attr("transform","translate("+N+",0)"),s&&(g.width(N/2),R.select(".nv-legendWrap").datum(a).call(g),k.top!=g.height()&&(k.top=g.height(),O=(m||parseInt(B.style("height"))||400)-k.top-k.bottom),R.select(".nv-legendWrap").attr("transform","translate("+N/2+","+-k.top+")")),w&&(h.width(180).color(["#444"]),U.select(".nv-controlsWrap").datum(M).attr("transform","translate(0,"+-k.top+")").call(h)),d.width(N).height(O).color(a.map(function(a,b){return a.color||n(a,b)}).filter(function(b,c){return!a[c].disabled})),R.select(".nv-scatterWrap").datum(a.filter(function(a){return!a.disabled})).call(d),R.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+d.id()+")");var V=R.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});V.enter().append("g").attr("class","nv-regLines");{var W=V.selectAll(".nv-regLine").data(function(a){return[a]});W.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0)}W.watchTransition(K,"scatterPlusLineChart: regline").attr("x1",o.range()[0]).attr("x2",o.range()[1]).attr("y1",function(a){return p(o.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a){return p(o.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,b,c){return n(a,c)}).style("stroke-opacity",function(a){return a.disabled||"undefined"==typeof a.slope||"undefined"==typeof a.intercept?0:1}),t&&(e.scale(o).ticks(e.ticks()?e.ticks():N/100).tickSize(-O,0),U.select(".nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")").call(e)),u&&(f.scale(p).ticks(f.ticks()?f.ticks():O/36).tickSize(-N,0),U.select(".nv-y.nv-axis").call(f)),q&&(i.getData(d.x()).scale(o).width(N).color(a.map(function(a,b){return a.color||n(a,b)}).filter(function(b,c){return!a[c].disabled})),T.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),U.select(".nv-distributionX").attr("transform","translate(0,"+p.range()[0]+")").datum(a.filter(function(a){return!a.disabled})).call(i)),r&&(j.getData(d.y()).scale(p).width(O).color(a.map(function(a,b){return a.color||n(a,b)}).filter(function(b,c){return!a[c].disabled})),T.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),U.select(".nv-distributionY").attr("transform","translate("+(v?N:-j.size())+",0)").datum(a.filter(function(a){return!a.disabled})).call(j)),b.fisheye&&(U.select(".nv-background").attr("width",N).attr("height",O),U.select(".nv-background").on("mousemove",A),U.select(".nv-background").on("click",function(){y=!y}),d.dispatch.on("elementClick.freezeFisheye",function(){y=!y})),h.dispatch.on("legendClick",function(a){a.disabled=!a.disabled,x=a.disabled?0:2.5,U.select(".nv-background").style("pointer-events",a.disabled?"none":"all"),U.select(".nv-point-paths").style("pointer-events",a.disabled?"all":"none"),a.disabled?(o.distortion(x).focus(0),p.distortion(x).focus(0),U.select(".nv-scatterWrap").call(d),U.select(".nv-x.nv-axis").call(e),U.select(".nv-y.nv-axis").call(f)):y=!1,c.update()}),g.dispatch.on("stateChange",function(a){D=a,F.stateChange(D),c.update()}),d.dispatch.on("elementMouseover.tooltip",function(a){b.select(".nv-chart-"+d.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.pos[1]-O),b.select(".nv-chart-"+d.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+i.size()),a.pos=[a.pos[0]+k.left,a.pos[1]+k.top],F.tooltipShow(a)}),F.on("tooltipShow",function(a){z&&L(a,C.parentNode)}),F.on("changeState",function(b){"undefined"!=typeof b.disabled&&(a.forEach(function(a,c){a.disabled=b.disabled[c]}),D.disabled=b.disabled),c.update()}),I=o.copy(),J=p.copy()}),K.renderEnd("scatter with line immediate"),c}var d=a.models.scatter(),e=a.models.axis(),f=a.models.axis(),g=a.models.legend(),h=a.models.legend(),i=a.models.distribution(),j=a.models.distribution(),k={top:30,right:20,bottom:50,left:75},l=null,m=null,n=a.utils.defaultColor(),o=b.fisheye?b.fisheye.scale(b.scale.linear).distortion(0):d.xScale(),p=b.fisheye?b.fisheye.scale(b.scale.linear).distortion(0):d.yScale(),q=!1,r=!1,s=!0,t=!0,u=!0,v=!1,w=!!b.fisheye,x=0,y=!1,z=!0,A=function(a,b){return"<strong>"+b+"</strong>"},B=function(a,b,c){return"<strong>"+c+"</strong>"},C=function(a,b,c,d){return"<h3>"+a+"</h3><p>"+d+"</p>"},D={},E=null,F=b.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),G="No Data Available.",H=250;d.xScale(o).yScale(p),e.orient("bottom").tickPadding(10),f.orient(v?"right":"left").tickPadding(10),i.axis("x"),j.axis("y"),h.updateState(!1);var I,J,K=a.utils.renderWatch(F,H),L=function(b,g){var h=b.pos[0]+(g.offsetLeft||0),i=b.pos[1]+(g.offsetTop||0),j=b.pos[0]+(g.offsetLeft||0),l=p.range()[0]+k.top+(g.offsetTop||0),m=o.range()[0]+k.left+(g.offsetLeft||0),n=b.pos[1]+(g.offsetTop||0),q=e.tickFormat()(d.x()(b.point,b.pointIndex)),r=f.tickFormat()(d.y()(b.point,b.pointIndex));null!=A&&a.tooltip.show([j,l],A(b.series.key,q,r,b,c),"n",1,g,"x-nvtooltip"),null!=B&&a.tooltip.show([m,n],B(b.series.key,q,r,b,c),"e",1,g,"y-nvtooltip"),null!=C&&a.tooltip.show([h,i],C(b.series.key,q,r,b.point.tooltip,b,c),b.value<0?"n":"s",null,g)},M=[{key:"Magnify",disabled:!0}];return d.dispatch.on("elementMouseout.tooltip",function(a){F.tooltipHide(a),b.select(".nv-chart-"+d.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0),b.select(".nv-chart-"+d.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",j.size())}),F.on("tooltipHide",function(){z&&a.tooltip.cleanup()}),c.dispatch=F,c.scatter=d,c.legend=g,c.controls=h,c.xAxis=e,c.yAxis=f,c.distX=i,c.distY=j,b.rebind(c,d,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),c.options=a.utils.optionsFunc.bind(c),c.margin=function(a){return arguments.length?(k.top="undefined"!=typeof a.top?a.top:k.top,k.right="undefined"!=typeof a.right?a.right:k.right,k.bottom="undefined"!=typeof a.bottom?a.bottom:k.bottom,k.left="undefined"!=typeof a.left?a.left:k.left,c):k},c.width=function(a){return arguments.length?(l=a,c):l},c.height=function(a){return arguments.length?(m=a,c):m},c.color=function(b){return arguments.length?(n=a.utils.getColor(b),g.color(n),i.color(n),j.color(n),c):n},c.showDistX=function(a){return arguments.length?(q=a,c):q},c.showDistY=function(a){return arguments.length?(r=a,c):r},c.showControls=function(a){return arguments.length?(w=a,c):w},c.showLegend=function(a){return arguments.length?(s=a,c):s},c.showXAxis=function(a){return arguments.length?(t=a,c):t},c.showYAxis=function(a){return arguments.length?(u=a,c):u},c.rightAlignYAxis=function(a){return arguments.length?(v=a,f.orient(a?"right":"left"),c):v},c.fisheye=function(a){return arguments.length?(x=a,c):x},c.tooltips=function(a){return arguments.length?(z=a,c):z},c.tooltipContent=function(a){return arguments.length?(C=a,c):C},c.tooltipXContent=function(a){return arguments.length?(A=a,c):A},c.tooltipYContent=function(a){return arguments.length?(B=a,c):B},c.state=function(a){return arguments.length?(D=a,c):D},c.defaultState=function(a){return arguments.length?(E=a,c):E},c.noData=function(a){return arguments.length?(G=a,c):G},c.transitionDuration=function(b){return a.deprecated("scatterPlusLineChart.transitionDuration"),c.duration(b)},c.duration=function(a){return arguments.length?(H=a,c):H},c};var jb={animate:!0,xScale:b.scale.linear(),yScale:b.scale.linear(),xDomain:null,yDomain:null,xRange:null,yRange:null,color:a.utils.getColor(["#000000"]),x:function(a){return a.x},y:function(a){return a.y}};a.utils.create(G,e,jb),G.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a,[])},G.prototype.draw=function(a){var c=this,d=this.available.width,e=this.available.height;this.xScale().domain(this.xDomain()||b.extent(a,this.x())).range(this.xRange()||[0,d]),this.yScale().domain(this.yDomain()||b.extent(a,this.y())).range(this.yRange()||[e,0]);var f=this.wrap.selectAll("path").data(function(a){return[a]});f.enter().append("path"),f.exit().remove(),f.style("stroke",function(a,b){return a.color||c.color()(a,b)}).attr("d",b.svg.line().x(function(a,b){return c.xScale()(c.x()(a,b))}).y(function(a,b){return c.yScale()(c.y()(a,b))}));var g=this.wrap.selectAll("circle.nv-point").data(function(a){function b(b){if(-1!=b){var c=a[b];return c.pointIndex=b,c}return null}var d=a.map(function(a,b){return c.y()(a,b)}),e=b(d.lastIndexOf(c.yScale().domain()[1])),f=b(d.indexOf(c.yScale().domain()[0])),g=b(d.length-1);return[f,e,g].filter(function(a){return null!=a})});g.enter().append("circle"),g.exit().remove(),g.attr("cx",function(a){return c.xScale()(c.x()(a,a.pointIndex))}).attr("cy",function(a){return c.yScale()(c.y()(a,a.pointIndex))}).attr("r",2).attr("class",function(a){return c.x()(a,a.pointIndex)==c.xScale().domain()[1]?"nv-point nv-currentValue":c.y()(a,a.pointIndex)==c.yScale().domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})},a.models.sparkline=function(){"use strict";function b(a){return c.render(a),b}var c=new G,d=["margin","width","height","x","y","xScale","yScale","xDomain","yDomain","xRange","yRange","animate","color"];return b.dispatch=c.dispatch,b.options=a.utils.optionsFunc.bind(b),a.utils.rebindp(b,c,G.prototype,d),b};var kb={index:[],paused:!1,xTickFormat:b.format(",r"),yTickFormat:b.format(",.2f"),showValue:!0,alignValue:!0,rightAlignValue:!1,xScale:null,yScale:null};a.utils.create(H,k,kb),H.prototype.getSparkline=function(){return a.models.sparkline()},H.prototype.wrapper=function(a){var b=["nv-valueWrap","nv-sparklineWrap","nv-hoverArea"];e.prototype.wrapper.call(this,a,b),this.wrap.attr("transform","translate("+this.margin().left+","+this.margin().top+")")},H.prototype.draw=function(a){function c(){if(!e.paused()){var b=e.g.selectAll(".nv-hoverValue").data(e.index()),c=b.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);b.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),b.attr("transform",function(b){return"translate("+e.xScale()(e.sparkline.x()(a[b],b))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),e.index().length&&(c.append("line").attr("x1",0).attr("y1",-e.margin().top).attr("x2",0).attr("y2",g),c.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-e.margin().top).attr("text-anchor","end").attr("dy",".9em"),e.g.select(".nv-hoverValue .nv-xValue").text(e.xTickFormat()(e.sparkline.x()(a[e.index()[0]],e.index()[0]))),c.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-e.margin().top).attr("text-anchor","start").attr("dy",".9em"),e.g.select(".nv-hoverValue .nv-yValue").text(e.yTickFormat()(e.sparkline.y()(a[e.index()[0]],e.index()[0]))))}}function d(){function d(a,b){for(var c=Math.abs(e.sparkline.x()(a[0],0)-b),d=0,f=0;f<a.length;f++)Math.abs(e.sparkline.x()(a[f],f)-b)<c&&(c=Math.abs(e.sparkline.x()(a[f],f)-b),d=f);return d}if(!e.paused()){var f=b.mouse(this)[0]-e.margin().left;e.index([d(a,Math.round(e.xScale().invert(f)))]),c()}}var e=this,f=this.available.width,g=this.available.height,h=null,i=null,j=this.sparkline.y()(a[a.length-1],a.length-1);this.xScale(this.sparkline.xScale()),this.yScale(this.sparkline.yScale()),this.sparkline.width(f).height(g),this.g.select(".nv-sparklineWrap").call(this.sparkline),h=this.g.select(".nv-valueWrap"),i=h.selectAll(".nv-currentValue").data([j]),i.enter().append("text").attr("class","nv-currentValue").attr("dx",this.rightAlignValue()?-8:8).attr("dy",".9em").style("text-anchor",this.rightAlignValue()?"end":"start"),i.attr("x",f+(this.rightAlignValue()?this.margin().right:0)).attr("y",this.alignValue()?function(a){return e.yScale()(a)}:0).style("fill",this.color()(a[a.length-1],a.length-1)).text(this.yTickFormat()(j)),this.gEnter.select(".nv-hoverArea").append("rect").on("mousemove",d).on("click",function(){e.paused(!e.paused())}).on("mouseout",function(){e.index([]),c()}),this.g.select(".nv-hoverArea rect").attr("transform",function(){return"translate("+-e.margin().left+","+-e.margin().top+")"}).attr("width",f+this.margin().left+this.margin().right).attr("height",g+this.margin().top)},H.prototype.attachEvents=function(){k.prototype.attachEvents.call(this)},a.models.sparklinePlus=function(){"use strict";function c(a){return d.render(a),c}var d=new H,e=["margin","width","height","xTickFormat","yTickFormat","showValue","alignValue","rightAlignValue","noData"];return c.dispatch=d.dispatch,c.sparkline=d.sparkline,c.state=d.state,b.rebind(c,d.sparkline,"x","y","xScale","yScale","color"),c.options=a.utils.optionsFunc.bind(c),a.utils.rebindp(c,d,H.prototype,e),c};var lb={id:Math.floor(1e5*Math.random()),offset:"zero",order:"default",interpolate:"linear",clipEdge:!1,xScale:null,yScale:null,dataRaw:null,duration:250,style:"stack",x:null,y:null};a.utils.create(I,k,lb),I.prototype.getScatter=function(){return a.models.scatter()},I.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a,["nv-areaWrap","nv-scatterWrap"]),this.scatter.size(2.2).sizeDomain([2.2,2.2]),this.renderWatch.models(this.scatter)},I.prototype.draw=function(a){var c=this,d=a.filter(function(a){return!a.disabled}),e=null,f=null,g=null,h=null,i=function(a){return{point:a,series:a.key,pos:[b.event.pageX,b.event.pageY],seriesIndex:a.seriesIndex}};this.xScale(this.scatter.xScale()),this.yScale(this.scatter.yScale()),this.x(this.scatter.x()),this.y(this.scatter.y()),this.dataRaw(a),a.forEach(function(a,b){a.seriesIndex=b,a.values=a.values.map(function(a,c){return a.index=c,a.seriesIndex=b,a})}),a=b.layout.stack().order(this.order()).offset(this.offset()).values(function(a){return a.values}).x(this.x()).y(this.y()).out(function(a,b,d){var e=0===c.y()(a)?0:d;a.display={y:e,y0:b}})(d),this.scatter.width(this.available.width).height(this.available.height).x(this.x()).y(function(a){return a.display.y+a.display.y0}).forceY([0]).color(a.map(function(a){return a.color||c.color()(a,a.seriesIndex)})),e=this.g.select(".nv-scatterWrap").datum(a),e.call(this.scatter),this.defsEnter.append("clipPath").attr("id","nv-edge-clip-"+this.id()).append("rect"),this.wrap.select("#nv-edge-clip-"+this.id()+" rect").attr("width",this.available.width).attr("height",this.available.height),this.g.attr("clip-path",this.clipEdge()?"url(#nv-edge-clip-"+this.id()+")":""),f=b.svg.area().x(function(a){return c.xScale()(c.x()(a))}).y0(function(a){return c.yScale()(a.display.y0)}).y1(function(a){return c.yScale()(a.display.y+a.display.y0)}).interpolate(this.interpolate()),g=b.svg.area().x(function(a){return c.xScale()(c.x()(a))}).y0(function(a){return c.yScale()(a.display.y0)}).y1(function(a){return c.yScale()(a.display.y0)}),h=this.g.select(".nv-areaWrap").selectAll("path.nv-area").data(a),h.enter().append("path").attr("class",function(a,b){return"nv-area nv-area-"+b}).attr("d",function(a){return g(a.values,a.seriesIndex)}).on("mouseover",function(a){b.select(this).classed("hover",!0),c.dispatch.areaMouseover(i(a))}).on("mouseout",function(a){b.select(this).classed("hover",!1),c.dispatch.areaMouseout(i(a))}).on("click",function(a){b.select(this).classed("hover",!1),c.dispatch.areaClick(i(a))}),h.exit().remove(),h.style("fill",function(a){return a.color||c.color()(a,a.seriesIndex)}).style("stroke",function(a){return a.color||c.color()(a,a.seriesIndex)}),h.watchTransition(this.renderWatch,"stackedArea path").attr("d",function(a,b){return f(a.values,b)})},I.prototype.attachEvents=function(){k.prototype.attachEvents.call(this);var a=function(a){return".nv-chart-"+this.id()+" .nv-area-"+a.seriesIndex}.bind(this);this.scatter.dispatch.on("elementMouseover.area",function(b){this.g.select(a(b)).classed("hover",!0)}.bind(this)).on("elementMouseout.area",function(b){this.g.select(a(b)).classed("hover",!1)}.bind(this)).on("elementClick.area",function(a){this.dispatch.areaClick(a)}.bind(this))},I.prototype.style=function(a){if(!arguments.length)return this.options.style;switch(this.options.style=a,a){case"stack":this.offset("zero"),this.order("default");break;case"stream":this.offset("wiggle"),this.order("inside-out");break;case"stream-center":this.offset("silhouette"),this.order("inside-out");break;case"expand":this.offset("expand"),this.order("default");break;case"stack_percent":this.offset(this.d3_stackedOffset_stackPercent),this.order("default")}return this},I.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.renderWatch.reset(a),this.scatter.duration(a),this):this.options.duration},I.prototype.d3_stackedOffset_stackPercent=function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(b=0,d=0;b<this.dataRaw().length;b++)d+=this.y()(this.dataRaw()[b].values[c]);if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)h[c]=0;return h},a.models.stackedArea=function(){"use strict";function c(a){return d.render(a),c}var d=new I,e=["margin","width","height","clipEdge","offset","order","color","style","interpolate"];return c.dispatch=d.dispatch,c.scatter=d.scatter,b.rebind(c,d.scatter,"x","y","interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","highlightPoint","clearHighlights"),c.options=a.utils.optionsFunc.bind(c),a.utils.rebindp(c,d,I.prototype,e),c};var mb={showControls:!0,tooltip:function(a,b,c){return"<h3>"+a+"</h3><p>"+c+" on "+b+"</p>"},yAxisTickFormat:b.format(",.2f"),setTickFormat:null,defaultState:null,controlWidth:250,cData:["Stacked","Stream","Expanded"],xScale:null,yScale:null,interactive:null,useVoronoi:null,tooltips:!0,useInteractiveGuideline:!1,controlLabels:{},duration:250,x:function(a){return a.x},y:function(a){return a.y}};return a.utils.create(J,k,mb),J.prototype.getInteractiveGuideline=function(){return a.interactiveGuideline()},J.prototype.getStackedArea=function(){return a.models.stackedArea()},J.prototype.wrapper=function(b){k.prototype.wrapper.call(this,b,["nv-stackedWrap","nv-controlsWrap","nv-interactive"]),this.renderWatch=a.utils.renderWatch(this.dispatch,this.duration()),this.showXAxis()&&this.renderWatch.models(this.xAxis),this.showYAxis()&&this.renderWatch.models(this.yAxis)},J.prototype.draw=function(a){var b=this,c=this.available.width,d=this.available.height;if(this.xScale(this.stacked.xScale()),this.yScale(this.stacked.yScale()),this.x(this.stacked.x()),this.y(this.stacked.y()),this.showControls()){var e=[{key:this.controlLabels().stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=this.stacked.style(),style:"stack"},{key:this.controlLabels().stream||"Stream",metaKey:"Stream",disabled:"stream"!=this.stacked.style(),style:"stream"},{key:this.controlLabels().expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=this.stacked.style(),style:"expand"},{key:this.controlLabels().stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=this.stacked.style(),style:"stack_percent"}];this.controlWidth(this.cData().length/3*260),e=e.filter(function(a){return-1!==b.cData().indexOf(a.metaKey)}),this.controls.width(this.controlWidth()).color(["#444","#444","#444"]),this.g.select(".nv-controlsWrap").datum(e).call(this.controls),this.margin().top!=Math.max(this.controls.height(),this.legend.height())&&(this.margin().top=Math.max(this.controls.height(),this.legend.height()),d=(this.height()||parseInt(this.svg.style("height"))||400)-this.margin().top-this.margin().bottom),this.g.select(".nv-controlsWrap").attr("transform","translate(0,"+-this.margin().top+")")}this.useInteractiveGuideline()&&(this.interactiveLayer.width(c).height(d).margin({left:this.margin().left,top:this.margin().top}).svgContainer(this.svg).xScale(this.xScale()),this.wrap.select(".nv-interactive").call(this.interactiveLayer),this.wrap.select(".nv-interactiveLineLayer").attr("transform","translate(0,0)")),this.stacked.margin({top:0,right:0,bottom:0,left:0}).width(c).height(d);
var f=this.g.select(".nv-stackedWrap").datum(a);f.transition().call(this.stacked),this.plotAxes(a)},J.prototype.attachEvents=function(){k.prototype.attachEvents.call(this);var c=null,d=this;this.svg.call(function(a){a.each(function(a){c=a})}),this.dispatch.on("tooltipShow",function(a){d.tooltips()&&d.showTooltip(a,d.parentNode)}).on("changeState",function(a){"undefined"!=typeof a.disabled&&c.length===a.disabled.length&&(c.forEach(function(b,c){b.disabled=a.disabled[c]}),d.state.disabled=a.disabled),"undefined"!=typeof a.style&&d.stacked.style(a.style),d.update()}).on("tooltipHide",function(){d.tooltips()&&a.tooltip.cleanup()}),this.legend.dispatch.on("stateChange",function(a){d.state.disabled=a.disabled,d.dispatch.stateChange(d.state),d.update()}),this.controls.dispatch.on("legendClick",function(a){a.disabled&&(d.controlsData(d.controlsData().map(function(a){return a.disabled=!0,a})),a.disabled=!1,d.stacked.style(a.style),d.state.style=d.stacked.style(),d.dispatch.stateChange(d.state),d.update())}),this.interactiveLayer.dispatch.on("elementMousemove",function(e){d.stacked.clearHighlights();var f,g,h,i=[];if(c.filter(function(a,b){return a.seriesIndex=b,!a.disabled}).forEach(function(b,c){g=a.interactiveBisect(b.values,e.pointXValue,d.x()),d.stacked.highlightPoint(c,g,!0);var j=b.values[g];if("undefined"!=typeof j){"undefined"==typeof f&&(f=j),"undefined"==typeof h&&(h=d.xScale()(d.x()(j,g)));var k="expand"==d.stacked.style()?j.display.y:d.y()(j,g);i.push({key:b.key,value:k,color:d.color()(b,b.seriesIndex),stackedValue:j.display})}}),i.reverse(),i.length>2){var j=d.yScale().invert(e.mouseY),k=null;i.forEach(function(a,b){j=Math.abs(j);var c=Math.abs(a.stackedValue.y0),d=Math.abs(a.stackedValue.y);return j>=c&&d+c>=j?void(k=b):void 0}),null!=k&&(i[k].highlight=!0)}var l=d.xAxis.tickFormat()(d.x()(f,g)),m="expand"==d.stacked.style()?function(a){return b.format(".1%")(a)}:function(a){return d.yAxis.tickFormat()(a)};d.interactiveLayer.tooltip.position({left:h+d.margin().left,top:e.mouseY+d.margin().top}).chartContainer(d.parentNode).enabled(d.tooltips()).valueFormatter(m).data({value:l,series:i})(),d.interactiveLayer.renderGuideLine()(h)}).on("elementMouseout",function(){d.dispatch.tooltipHide(),d.stacked.clearHighlights()}),this.stacked.dispatch.on("tooltipShow",function(a){a.pos=[a.pos[0]+d.margin().left,a.pos[1]+d.margin().top],d.dispatch.tooltipShow(a)}).on("tooltipHide",function(a){d.dispatch.tooltipHide(a)}).on("areaClick.toggle",function(a){c.forEach(1===c.filter(function(a){return!a.disabled}).length?function(a){a.disabled=!1}:function(b,c){b.disabled=c!=a.seriesIndex}),d.state.disabled=c.map(function(a){return!!a.disabled}),d.dispatch.stateChange(d.state),d.update()})},J.prototype.showTooltip=function(b,c){var d=b.pos[0]+(c.offsetLeft||0),e=b.pos[1]+(c.offsetTop||0),f=this.xAxis.tickFormat()(this.stacked.x()(b.point,b.pointIndex)),g=this.yAxis.tickFormat()(this.stacked.y()(b.point,b.pointIndex)),h=this.tooltip()(b.series.key,f,g);a.tooltip.show([d,e],h,b.value<0?"n":"s",null,c)},J.prototype.color=function(b){return arguments.length?(this.options.color=a.utils.getColor(b),this.legend.color(this.color()),this.stacked.color(this.color()),this):this.options.color},J.prototype.useInteractiveGuideline=function(a){return arguments.length?(this.options.useInteractiveGuideline=a,a===!0&&(this.interactive(!1),this.useVoronoi(!1)),this):this.options.useInteractiveGuideline},J.prototype.controlsData=function(a){return arguments.length?(this.cData(a),this):this.cData()},J.prototype.controlLabels=function(a){return arguments.length&&"object"==typeof a?(this.options.controlLabels=a,this):this.options.controlLabels},J.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.renderWatch.reset(a),this.xAxis.duration(a),this.yAxis.duration(a),this):this.options.duration},J.prototype.yAxisTickFormat=function(a){return arguments.length?(this.options.yAxisTickFormat=a,void this.yAxis.tickFormat(this.yAxisTickFormat())):this.options.yAxisTickFormat},J.prototype.setTickFormat=function(a){return this.yAxisTickFormat(a)},a.models.stackedAreaChart=function(){"use strict";function c(a){return d.render(a),c}var d=new J,e=["margin","width","height","state","defaultState","noData","showControls","showLegend","showXAxis","showYAxis","tooltip","tooltips","color","rightAlignYAxis","useInteractiveGuideline","tooltipContent","transitionDuration","controlsData","controlLabels","duration","reduceXTicks","setTickFormat"];return c.dispatch=d.dispatch,c.stacked=d.stacked,c.controls=d.controls,c.legend=d.legend,c.interactiveLayer=d.interactiveLayer,c.state=d.state,c.xAxis=d.xAxis,c.yAxis=d.yAxis,b.rebind(c,d.stacked,"x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","sizeDomain","interactive","useVoronoi","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate"),c.options=a.utils.optionsFunc.bind(c),a.utils.rebindp(c,d,J.prototype,e),c},a});