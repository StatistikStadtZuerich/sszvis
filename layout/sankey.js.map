{"version":3,"file":"sankey.js","sources":["../../src/layout/sankey.js"],"sourcesContent":[null],"names":["newLinkId","id","prepareData","mGetSource","fn","mGetTarget","mGetValue","mColumnIds","valueAcc","byAscendingValue","a","b","ascending","byDescendingValue","descending","valueSortFunc","main","inputData","columnIndex","reduce","index","columnIdsList","colIndex","has","logger","item","nodeIndex","value","valueOffset","linksFrom","linksTo","set","Map","listOfLinks","map","datum","srcId","tgtId","srcNode","get","tgtNode","src","srcOffset","tgt","tgtOffset","push","listOfNodes","values","columnTotals","totals","node","fromTotal","sum","toTotal","Math","max","length","columnLengths","colIds","sort","columnData","linkA","linkB","sumValue","link","nodes","links","apply","data","source","func","target","descendingSort","ascendingSort","idLists","computeLayout","columnHeight","columnWidth","padSpaceRatio","padMin","padMax","minDisplayPixels","computedPixPadding","min","colLength","colPadding","pixPerUnit","nonPaddingPixels","valuePadding","nodePadding","maxTotal","paddedHeights","maxPaddedHeight","columnPaddings","valueDomain","valueRange","nodeThickness","numColumns","columnXMultiplier","columnDomain","columnRange"],"mappings":"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"}