{"version":3,"file":"hierarchy.js","sources":["../../src/layout/hierarchy.ts"],"sourcesContent":[null],"names":["prepareHierarchyData","data","options","undefined","layout","createHierarchyLayout","layers","forEach","layer","value","valueAccessor","calculate","valueAcc","fn","sortFn","_a","_b","api","length","Error","nested","unwrapNested","rollup","rootData","_tag","children","hierarchy","d","sort","sum","node","keyFunc","push","accfn","sortFunc","roll","parentKey","arguments","rootKey","rollupMap","Array","from","_ref","_ref2","key","values","effectiveKey","effectiveRootKey","Map","size"],"mappings":"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"}