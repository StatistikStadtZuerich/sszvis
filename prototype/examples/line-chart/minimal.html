<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Line chart</title>
</head>
<body>
  <div id="minimal-vis"></div>
  <script src="/assets/sszvis.js"></script>
  <script>

    var d3 = sszvis.d3;
    var axis = sszvis.axis;
    var component = sszvis.component;
    var utils = sszvis.utils;

    d3.csv('/examples/line-chart/simple_line.csv')
      .row(function(d) {
        return {
          date:  d3.time.format("%d.%m.%Y").parse(d['Datum']),
          value: +d['Wert']
        }
      })
      .get(function(error, data) {
        error ? sszvis.error(error) : render(data);
      });

    function render(data) {
      var bounds = d3.bounds({width: 700, height: 400, top: 20, right: 20, bottom: 40, left: 60});

      var chart = sszvis.createChart('#minimal-vis', bounds)
        .datum(data);

      var xScale = d3.time.scale()
        .range([0, bounds.innerWidth])
        .domain(d3.extent(data, _.property('date')));

      var yScale = d3.scale.linear()
        .range([bounds.innerHeight, 0])
        .domain(d3.extent(data, _.property('value')));

      var line = component.line()
        .xScale(xScale)
        .yScale(yScale)

      var xAxis = axis.time().scale(xScale)

      var yAxis = d3.svg.axis().scale(yScale).orient("left");

      chart.selectGroup('line')
        .call(line)

      chart.selectGroup('xAxis')
        .attr('class', 'x axis')
        .attr('transform', utils.translate(0, bounds.innerHeight))
        .call(xAxis)

      chart.selectGroup('yAxis')
        .attr('class', 'y axis')
        .call(yAxis)
    }

  </script>
</body>
</html>
