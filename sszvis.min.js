/*! sszvis v2.6.8, Copyright 2014-present Statistik Stadt Zürich */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3")):"function"==typeof define&&define.amd?define(["exports","d3"],e):e((t=t||self).sszvis={},t.d3)}(this,(function(t,e){"use strict";function r(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function n(t){return!!t&&!!t[G]}function a(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return!e||e===Object.prototype}(t)||Array.isArray(t)||!!t[H]||!!t.constructor[H]||u(t)||p(t))}function o(t,e,r){void 0===r&&(r=!1),0===i(t)?(r?Object.keys:U)(t).forEach((function(n){r&&"symbol"==typeof n||e(n,t[n],t)})):t.forEach((function(r,n){return e(n,r,t)}))}function i(t){var e=t[G];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:u(t)?2:p(t)?3:0}function s(t,e){return 2===i(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function l(t,e,r){var n=i(t);2===n?t.set(e,r):3===n?(t.delete(e),t.add(r)):t[e]=r}function c(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function u(t){return j&&t instanceof Map}function p(t){return N&&t instanceof Set}function d(t){return t.o||t.t}function f(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=J(t);delete e[G];for(var r=U(e),n=0;n<r.length;n++){var a=r[n],o=e[a];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[a]})}return Object.create(Object.getPrototypeOf(t),e)}function h(t,e){m(t)||n(t)||!a(t)||(i(t)>1&&(t.set=t.add=t.clear=t.delete=v),Object.freeze(t),e&&o(t,(function(t,e){return h(e,!0)}),!0))}function v(){r(2)}function m(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function g(t){var e=V[t];return e||r(18,t),e}function y(){return D}function b(t,e){e&&(g("Patches"),t.u=[],t.s=[],t.v=e)}function x(t){k(t),t.p.forEach(w),t.p=null}function k(t){t===D&&(D=t.l)}function _(t){return D={p:[],l:D,h:t,m:!0,_:0}}function w(t){var e=t[G];0===e.i||1===e.i?e.j():e.g=!0}function z(t,e){e._=e.p.length;var n=e.p[0],o=void 0!==t&&t!==n;return e.h.O||g("ES5").S(e,t,o),o?(n[G].P&&(x(e),r(4)),a(t)&&(t=A(e,t),e.l||P(e,t)),e.u&&g("Patches").M(n[G],t,e.u,e.s)):t=A(e,n,[]),x(e),e.u&&e.v(e.u,e.s),t!==I?t:void 0}function A(t,e,r){if(m(e))return e;var n=e[G];if(!n)return o(e,(function(a,o){return S(t,n,e,a,o,r)}),!0),e;if(n.A!==t)return e;if(!n.P)return P(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=4===n.i||5===n.i?n.o=f(n.k):n.o;o(3===n.i?new Set(a):a,(function(e,o){return S(t,n,a,e,o,r)})),P(t,a,!1),r&&t.u&&g("Patches").R(n,r,t.u,t.s)}return n.o}function S(t,e,r,o,i,c){if(n(i)){var u=A(t,i,c&&e&&3!==e.i&&!s(e.D,o)?c.concat(o):void 0);if(l(r,o,u),!n(u))return;t.m=!1}if(a(i)&&!m(i)){if(!t.h.N&&t._<1)return;A(t,i),e&&e.A.l||P(t,i)}}function P(t,e,r){void 0===r&&(r=!1),t.h.N&&t.m&&h(e,r)}function F(t,e){var r=t[G];return(r?d(r):t)[e]}function E(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function T(t){t.P||(t.P=!0,t.l&&T(t.l))}function O(t){t.o||(t.o=f(t.t))}function C(t,e,r){var n=u(e)?g("MapSet").T(e,r):p(e)?g("MapSet").F(e,r):t.O?function(t,e){var r=Array.isArray(t),n={i:r?1:0,A:e?e.A:y(),P:!1,I:!1,D:{},l:e,t:t,k:null,o:null,j:null,C:!1},a=n,o=Y;r&&(a=[n],o=K);var i=Proxy.revocable(a,o),s=i.revoke,l=i.proxy;return n.k=l,n.j=s,l}(e,r):g("ES5").J(e,r);return(r?r.A:y()).p.push(n),n}function R(t){return n(t)||r(22,t),function t(e){if(!a(e))return e;var r,n=e[G],s=i(e);if(n){if(!n.P&&(n.i<4||!g("ES5").K(n)))return n.t;n.I=!0,r=M(e,s),n.I=!1}else r=M(e,s);return o(r,(function(e,a){n&&function(t,e){return 2===i(t)?t.get(e):t[e]}(n.t,e)===a||l(r,e,t(a))})),3===s?new Set(r):r}(t)}function M(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return f(t)}var B,D,L="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),j="undefined"!=typeof Map,N="undefined"!=typeof Set,W="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,I=L?Symbol.for("immer-nothing"):((B={})["immer-nothing"]=!0,B),H=L?Symbol.for("immer-draftable"):"__$immer_draftable",G=L?Symbol.for("immer-state"):"__$immer_state",U="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,J=Object.getOwnPropertyDescriptors||function(t){var e={};return U(t).forEach((function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)})),e},V={},Y={get:function(t,e){if(e===G)return t;var r=d(t);if(!s(r,e))return function(t,e,r){var n,a=E(e,r);return a?"value"in a?a.value:null===(n=a.get)||void 0===n?void 0:n.call(t.k):void 0}(t,r,e);var n=r[e];return t.I||!a(n)?n:n===F(t.t,e)?(O(t),t.o[e]=C(t.A.h,n,t)):n},has:function(t,e){return e in d(t)},ownKeys:function(t){return Reflect.ownKeys(d(t))},set:function(t,e,r){var n=E(d(t),e);if(null==n?void 0:n.set)return n.set.call(t.k,r),!0;if(!t.P){var a=F(d(t),e),o=null==a?void 0:a[G];if(o&&o.t===r)return t.o[e]=r,t.D[e]=!1,!0;if(c(r,a)&&(void 0!==r||s(t.t,e)))return!0;O(t),T(t)}return t.o[e]=r,t.D[e]=!0,!0},deleteProperty:function(t,e){return void 0!==F(t.t,e)||e in t.t?(t.D[e]=!1,O(t),T(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=d(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:n.enumerable,value:r[e]}:n},defineProperty:function(){r(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){r(12)}},K={};o(Y,(function(t,e){K[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),K.deleteProperty=function(t,e){return Y.deleteProperty.call(this,t[0],e)},K.set=function(t,e,r){return Y.set.call(this,t[0],e,r,t[0])};var q=new(function(){function t(t){this.O=W,this.N=!1,"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var e=t.prototype;return e.produce=function(t,e,n){if("function"==typeof t&&"function"!=typeof e){var o=e;e=t;var i=this;return function(t){var r=this;void 0===t&&(t=o);for(var n=arguments.length,a=Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];return i.produce(t,(function(t){var n;return(n=e).call.apply(n,[r,t].concat(a))}))}}var s;if("function"!=typeof e&&r(6),void 0!==n&&"function"!=typeof n&&r(7),a(t)){var l=_(this),c=C(this,t,void 0),u=!0;try{s=e(c),u=!1}finally{u?x(l):k(l)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(t){return b(l,n),z(t,l)}),(function(t){throw x(l),t})):(b(l,n),z(s,l))}if(!t||"object"!=typeof t){if((s=e(t))===I)return;return void 0===s&&(s=t),this.N&&h(s,!0),s}r(21,t)},e.produceWithPatches=function(t,e){var r,n,a=this;return"function"==typeof t?function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return a.produceWithPatches(e,(function(e){return t.apply(void 0,[e].concat(n))}))}:[this.produce(t,e,(function(t,e){r=t,n=e})),r,n]},e.createDraft=function(t){a(t)||r(8),n(t)&&(t=R(t));var e=_(this),o=C(this,t,void 0);return o[G].C=!0,k(e),o},e.finishDraft=function(t,e){var r=(t&&t[G]).A;return b(r,e),z(void 0,r)},e.setAutoFreeze=function(t){this.N=t},e.setUseProxies=function(t){t&&!W&&r(20),this.O=t},e.applyPatches=function(t,e){var r;for(r=e.length-1;r>=0;r--){var a=e[r];if(0===a.path.length&&"replace"===a.op){t=a.value;break}}var o=g("Patches").$;return n(t)?o(t,e):this.produce(t,(function(t){return o(t,e.slice(r+1))}))},t}()),X=(q.produceWithPatches.bind(q),q.setAutoFreeze.bind(q)),$=(q.setUseProxies.bind(q),q.applyPatches.bind(q),q.createDraft.bind(q)),Q=q.finishDraft.bind(q);function Z(t){var e=this.constructor;return this.then((function(r){return e.resolve(t()).then((function(){return r}))}),(function(r){return e.resolve(t()).then((function(){return e.reject(r)}))}))}var tt=setTimeout;function et(t){return Boolean(t&&void 0!==t.length)}function rt(){}function nt(t){if(!(this instanceof nt))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],ct(t,this)}function at(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,nt._immediateFn((function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){var n;try{n=r(t._value)}catch(t){return void it(e.promise,t)}ot(e.promise,n)}else(1===t._state?ot:it)(e.promise,t._value)}))):t._deferreds.push(e)}function ot(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if(e instanceof nt)return t._state=3,t._value=e,void st(t);if("function"==typeof r)return void ct(function(t,e){return function(){t.apply(e,arguments)}}(r,e),t)}t._state=1,t._value=e,st(t)}catch(e){it(t,e)}}function it(t,e){t._state=2,t._value=e,st(t)}function st(t){2===t._state&&0===t._deferreds.length&&nt._immediateFn((function(){t._handled||nt._unhandledRejectionFn(t._value)}));for(var e=0,r=t._deferreds.length;e<r;e++)at(t,t._deferreds[e]);t._deferreds=null}function lt(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function ct(t,e){var r=!1;try{t((function(t){r||(r=!0,ot(e,t))}),(function(t){r||(r=!0,it(e,t))}))}catch(t){if(r)return;r=!0,it(e,t)}}nt.prototype.catch=function(t){return this.then(null,t)},nt.prototype.then=function(t,e){var r=new this.constructor(rt);return at(this,new lt(t,e,r)),r},nt.prototype.finally=Z,nt.all=function(t){return new nt((function(e,r){if(!et(t))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var a=n.length;function o(t,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var s=i.then;if("function"==typeof s)return void s.call(i,(function(e){o(t,e)}),r)}n[t]=i,0==--a&&e(n)}catch(t){r(t)}}for(var i=0;i<n.length;i++)o(i,n[i])}))},nt.resolve=function(t){return t&&"object"==typeof t&&t.constructor===nt?t:new nt((function(e){e(t)}))},nt.reject=function(t){return new nt((function(e,r){r(t)}))},nt.race=function(t){return new nt((function(e,r){if(!et(t))return r(new TypeError("Promise.race accepts an array"));for(var n=0,a=t.length;n<a;n++)nt.resolve(t[n]).then(e,r)}))},nt._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){tt(t,0)},nt._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var ut=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"Promise"in ut?ut.Promise.prototype.finally||(ut.Promise.prototype.finally=Z):ut.Promise=nt;var pt="undefined"!=typeof self?self:window,dt="URLSearchParams"in pt,ft="Symbol"in pt&&"iterator"in Symbol,ht="FileReader"in pt&&"Blob"in pt&&function(){try{return new Blob,!0}catch(t){return!1}}(),vt="FormData"in pt,mt="ArrayBuffer"in pt;if(mt)var gt=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],yt=ArrayBuffer.isView||function(t){return t&&gt.indexOf(Object.prototype.toString.call(t))>-1};function bt(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function xt(t){return"string"!=typeof t&&(t=String(t)),t}function kt(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return ft&&(e[Symbol.iterator]=function(){return e}),e}function _t(t){this.map={},t instanceof _t?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function wt(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function zt(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function At(t){var e=new FileReader,r=zt(e);return e.readAsArrayBuffer(t),r}function St(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function Pt(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:ht&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:vt&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:dt&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():mt&&ht&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=St(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):mt&&(ArrayBuffer.prototype.isPrototypeOf(t)||yt(t))?this._bodyArrayBuffer=St(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):dt&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},ht&&(this.blob=function(){var t=wt(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?wt(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(At)}),this.text=function(){var t,e,r,n=wt(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=zt(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},vt&&(this.formData=function(){return this.text().then(Tt)}),this.json=function(){return this.text().then(JSON.parse)},this}_t.prototype.append=function(t,e){t=bt(t),e=xt(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},_t.prototype.delete=function(t){delete this.map[bt(t)]},_t.prototype.get=function(t){return t=bt(t),this.has(t)?this.map[t]:null},_t.prototype.has=function(t){return this.map.hasOwnProperty(bt(t))},_t.prototype.set=function(t,e){this.map[bt(t)]=xt(e)},_t.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},_t.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),kt(t)},_t.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),kt(t)},_t.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),kt(t)},ft&&(_t.prototype[Symbol.iterator]=_t.prototype.entries);var Ft=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Et(t,e){var r,n,a=(e=e||{}).body;if(t instanceof Et){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new _t(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,a||null==t._bodyInit||(a=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new _t(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),Ft.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&a)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(a),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var o=/([?&])_=[^&]*/;if(o.test(this.url))this.url=this.url.replace(o,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function Tt(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),a=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(a))}})),e}function Ot(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"",this.headers=new _t(e.headers),this.url=e.url||"",this._initBody(t)}Et.prototype.clone=function(){return new Et(this,{body:this._bodyInit})},Pt.call(Et.prototype),Pt.call(Ot.prototype),Ot.prototype.clone=function(){return new Ot(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new _t(this.headers),url:this.url})},Ot.error=function(){var t=new Ot(null,{status:0,statusText:""});return t.type="error",t};var Ct=[301,302,303,307,308];Ot.redirect=function(t,e){if(-1===Ct.indexOf(e))throw new RangeError("Invalid status code");return new Ot(null,{status:e,headers:{location:t}})};var Rt=pt.DOMException;function Mt(t,e){return new Promise((function(r,n){var a=new Et(t,e);if(a.signal&&a.signal.aborted)return n(new Rt("Aborted","AbortError"));var o=new XMLHttpRequest;function i(){o.abort()}o.onload=function(){var t,e,n={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",e=new _t,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var a=r.join(":").trim();e.append(n,a)}})),e)};n.url="responseURL"in o?o.responseURL:n.headers.get("X-Request-URL");var a="response"in o?o.response:o.responseText;setTimeout((function(){r(new Ot(a,n))}),0)},o.onerror=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},o.ontimeout=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},o.onabort=function(){setTimeout((function(){n(new Rt("Aborted","AbortError"))}),0)},o.open(a.method,function(t){try{return""===t&&pt.location.href?pt.location.href:t}catch(e){return t}}(a.url),!0),"include"===a.credentials?o.withCredentials=!0:"omit"===a.credentials&&(o.withCredentials=!1),"responseType"in o&&(ht?o.responseType="blob":mt&&a.headers.get("Content-Type")&&-1!==a.headers.get("Content-Type").indexOf("application/octet-stream")&&(o.responseType="arraybuffer")),a.headers.forEach((function(t,e){o.setRequestHeader(e,t)})),a.signal&&(a.signal.addEventListener("abort",i),o.onreadystatechange=function(){4===o.readyState&&a.signal.removeEventListener("abort",i)}),o.send(void 0===a._bodyInit?null:a._bodyInit)}))}"function"!=typeof Rt&&((Rt=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack}).prototype=Object.create(Error.prototype),Rt.prototype.constructor=Rt),Mt.polyfill=!0,pt.fetch||(pt.fetch=Mt,pt.Headers=_t,pt.Request=Et,pt.Response=Ot),function(){if("undefined"!=typeof window){var t=function(e,r){var n=e.nodeType;if(3==n)r.push(e.textContent.replace(/&/,"&amp;").replace(/</,"&lt;").replace(">","&gt;"));else if(1==n){if(r.push("<",e.tagName),e.hasAttributes())for(var a=e.attributes,o=0,i=a.length;o<i;++o){var s=a.item(o);r.push(" ",s.name,"='",s.value,"'")}if(e.hasChildNodes()){r.push(">");var l=e.childNodes;for(o=0,i=l.length;o<i;++o)t(l.item(o),r);r.push("</",e.tagName,">")}else r.push("/>")}else{if(8!=n)throw"Error serializing XML. Unhandled node of type: "+n;r.push("\x3c!--",e.nodeValue,"--\x3e")}};Object.defineProperty(SVGElement.prototype,"innerHTML",{get:function(){for(var e=[],r=this.firstChild;r;)t(r,e),r=r.nextSibling;return e.join("")},set:function(t){for(;this.firstChild;)this.removeChild(this.firstChild);try{var e=new DOMParser;e.async=!1;for(var r="<svg xmlns='http://www.w3.org/2000/svg'>"+t+"</svg>",n=e.parseFromString(r,"text/xml").documentElement.firstChild;n;)this.appendChild(this.ownerDocument.importNode(n,!0)),n=n.nextSibling}catch(t){throw new Error("Error parsing XML string")}}}),Object.defineProperty(SVGElement.prototype,"innerSVG",{get:function(){return this.innerHTML},set:function(t){this.innerHTML=t}})}}(),Number.isNaN=Number.isNaN||function(t){return"number"==typeof t&&t!=t},function(){function t(t,e){var r=i[t];return r?r.enumerable=e:i[t]=r={configurable:!0,enumerable:e,get:function(){var e=this[G];return Y.get(e,t)},set:function(e){var r=this[G];Y.set(r,t,e)}},r}function e(t){for(var e=t.length-1;e>=0;e--){var n=t[e][G];if(!n.P)switch(n.i){case 5:a(n)&&T(n);break;case 4:r(n)&&T(n)}}}function r(t){for(var e=t.t,r=t.k,n=U(r),a=n.length-1;a>=0;a--){var o=n[a];if(o!==G){var i=e[o];if(void 0===i&&!s(e,o))return!0;var l=r[o],u=l&&l[G];if(u?u.t!==i:!c(l,i))return!0}}var p=!!e[G];return n.length!==U(e).length+(p?0:1)}function a(t){var e=t.k;if(e.length!==t.t.length)return!0;var r=Object.getOwnPropertyDescriptor(e,e.length-1);return!(!r||r.get)}var i={};!function(t,e){V[t]||(V[t]=e)}("ES5",{J:function(e,r){var n=Array.isArray(e),a=function(e,r){if(e){for(var n=Array(r.length),a=0;a<r.length;a++)Object.defineProperty(n,""+a,t(a,!0));return n}var o=J(r);delete o[G];for(var i=U(o),s=0;s<i.length;s++){var l=i[s];o[l]=t(l,e||!!o[l].enumerable)}return Object.create(Object.getPrototypeOf(r),o)}(n,e),o={i:n?5:4,A:r?r.A:y(),P:!1,I:!1,D:{},l:r,t:e,k:a,o:null,g:!1,C:!1};return Object.defineProperty(a,G,{value:o,writable:!0}),a},S:function(t,r,i){i?n(r)&&r[G].A===t&&e(t.p):(t.u&&function t(e){if(e&&"object"==typeof e){var r=e[G];if(r){var n=r.t,i=r.k,l=r.D,c=r.i;if(4===c)o(i,(function(e){e!==G&&(void 0!==n[e]||s(n,e)?l[e]||t(i[e]):(l[e]=!0,T(r)))})),o(n,(function(t){void 0!==i[t]||s(i,t)||(l[t]=!1,T(r))}));else if(5===c){if(a(r)&&(T(r),l.length=!0),i.length<n.length)for(var u=i.length;u<n.length;u++)l[u]=!1;else for(var p=n.length;p<i.length;p++)l[p]=!0;for(var d=Math.min(i.length,n.length),f=0;f<d;f++)void 0===l[f]&&t(i[f])}}}}(t.p[0]),e(t.p))},K:function(t){return 4===t.i?r(t):a(t)}})}(),X(!1),e.selection.prototype.selectDiv=function(t){var e=this.selectAll('[data-d3-selectdiv="'+t+'"]').data((function(t){return[t]})),r=e.enter().append("div").attr("data-d3-selectdiv",t).style("position","absolute");return e.merge(r)},e.selection.prototype.selectGroup=function(t){var e=this.selectAll('[data-d3-selectgroup="'+t+'"]').data((function(t){return[t]})),r=e.enter().append("g").attr("data-d3-selectgroup",t);return e.merge(r)};var Bt=function(t){return t},Dt=function(t){return"[object String]"===Object.prototype.toString.call(t)},Lt=function(t){return t instanceof e.selection},jt=function(t,e){switch(t){case 0:return function(){return e.call(this)};case 1:return function(t){return e.call(this,t)};case 2:return function(t,r){return e.call(this,t,r)};case 3:return function(t,r,n){return e.call(this,t,r,n)};case 4:return function(t,r,n,a){return e.call(this,t,r,n,a)};case 5:return function(t,r,n,a,o){return e.call(this,t,r,n,a,o)};case 6:return function(t,r,n,a,o,i){return e.call(this,t,r,n,a,o,i)};case 7:return function(t,r,n,a,o,i,s){return e.call(this,t,r,n,a,o,i,s)};case 8:return function(t,r,n,a,o,i,s,l){return e.call(this,t,r,n,a,o,i,s,l)};case 9:return function(t,r,n,a,o,i,s,l,c){return e.call(this,t,r,n,a,o,i,s,l,c)};case 10:return function(t,r,n,a,o,i,s,l,c,u){return e.call(this,t,r,n,a,o,i,s,l,c,u)};default:return e}},Nt=function(){var t=arguments,e=arguments.length-1;return function(){for(var r=e,n=t[r].apply(this,arguments);r--;)n=t[r].call(this,n);return n}},Wt=function(t){return void 0!==t&&null!=t&&!Number.isNaN(t)},It=function(t,e){for(var r=new Array(t),n=0;n<t;++n)r[n]=e;return r},Ht=function(t,e){for(var r=0;r<e.length;r++)if(t(e[r]))return e[r]},Gt=function(t){return t[0]},Ut=function(t){return t.touches&&t.touches.length?t.touches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null},Jt=function(t){return null===t},Vt=function(t){return Object(t)===t},Yt=function(t){return t[t.length-1]},Kt=function(t){return function(){return!t.apply(this,arguments)}},qt=function(t){return function(e){return e[t]}},Xt=function(t,e){return function(r){var n=void 0!==r?r[t]:void 0;return void 0!==n?n:e}},$t=function(t,e){return e||(e=Bt),t.reduce((function(r,n,a){var o=e(n,a,t);return r.indexOf(o)<0?r.concat(o):r}),[])},Qt=function(t,e){return t.toString()===e.toString()},Zt=function(t){return"function"==typeof t?t:function(){return t}},te=function(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var i=t.apply(this,n);return r.cache=o.set(a,i)||o,i};return r.cache=new Map,r};function ee(t,e,r){var n=function(t){var e=t.selectAll("defs").data([0]),r=e.enter().append("defs");return e.merge(r)}(t).selectAll(e+"#"+r).data([0]),a=n.enter().append(e).attr("id",r);return n.merge(a)}function re(t){return function(){return function t(r){return r.darker=function(){return t(r.copy().range(r.range().map(e.lab).map(Se("darker",.6))))},r.brighter=function(){return t(r.copy().range(r.range().map(e.lab).map(Se("brighter",.6))))},r.reverse=function(){return t(r.copy().range(r.range().reverse()))},r}(e.scaleOrdinal().range(t.map(Ae)).unknown(Ae(t[0])))}}var ne=re(["#3431DE","#0A8DF6","#23C3F1","#7B4FB7","#DB247D","#FB737E","#007C78","#1D942E","#99C32E","#9A5B01","#FF720C","#FBB900"]),ae=re(["#3431DE","#DB247D","#1D942E","#FBB900","#23C3F1","#FF720C"]),oe=re(["#3431DE","#0A8DF6","#23C3F1","#7B4FB7","#DB247D","#FB737E"]),ie=re(["#007C78","#1D942E","#99C32E","#9A5B01","#FF720C","#FBB900"]);function se(t){return function(){return ze(e.scaleLinear().range(t.map(Ae)))}}var le=se(["#CADEFF","#5B6EFF","#211A8A"]),ce=se(["#FED2EE","#ED408D","#7D0044"]),ue=se(["#CFEED8","#34B446","#0C4B1F"]),pe=se(["#FCDDBB","#EA5D00","#611F00"]);function de(t){return function(){return function(t){return(t=function(t){var r=t.domain;if(!t.range())return t;var n=t.range().length;return t.domain=function(t){if(!t)return r.call(this);for(var a=[],o=0;o<n;o++)a.push(e.quantile(t,o/(n-1)));return r.call(this,a)},t}(t)).reverse=function(){return ze(t.copy().range(t.range().reverse()))},t}(e.scaleLinear().range(t.map(Ae)))}}var fe=de(["#611F00","#A13200","#EA5D00","#FF9A54","#FCDDBB","#CADEFF","#89AFFF","#5B6EFF","#3431DE","#211A8A"]),he=de(["#782600","#CC4309","#FF720C","#FFBC88","#E4E0DF","#AECBFF","#6B8EFF","#3B51FF","#2F2ABB"]),ve=de(["#7D0044","#C4006A","#ED408D","#FF83B9","#FED2EE","#CFEED8","#81C789","#34B446","#1A7F2D","#0C4B1F"]),me=de(["#A30059","#DB247D","#FF579E","#FFA8D0","#E4E0DF","#A8DBB1","#55BC5D","#1D942E","#10652A"]);function ge(t){return function(){return ze(e.scaleOrdinal().range(t.map(Ae)))}}var ye=ge(["#FAFAFA"]),be=ge(["#EAEAEA"]),xe=ge(["#D6D6D6"]),ke=ge(["#B8B8B8"]),_e=ge(["#7C7C7C"]),we=ge(["#545454"]);function ze(t){return(t=function(t){var r=t.domain;return t.domain=function(t){if(1===arguments.length){var n=[t[0],e.mean(t),t[1]];return r.call(this,n)}return r.apply(this,arguments)},t}(t)).reverse=function(){return ze(t.copy().range(t.range().reverse()))},t}function Ae(t){return e.lab(t)}function Se(t){var e=Array.prototype.slice.call(arguments,1);return function(r){return r[t].apply(r,e)}}var Pe=function(t){t.attr("patternUnits","userSpaceOnUse").attr("patternContentUnits","userSpaceOnUse").attr("x",0).attr("y",0).attr("width",14).attr("height",14),t.append("rect").attr("x",0).attr("y",0).attr("width",14).attr("height",14).attr("fill","#FAFAFA"),t.append("line").attr("x1",1).attr("y1",10).attr("x2",5).attr("y2",14).attr("stroke","#CCCCCC"),t.append("line").attr("x1",5).attr("y1",10).attr("x2",1).attr("y2",14).attr("stroke","#CCCCCC"),t.append("line").attr("x1",8).attr("y1",3).attr("x2",12).attr("y2",7).attr("stroke","#CCCCCC"),t.append("line").attr("x1",12).attr("y1",3).attr("x2",8).attr("y2",7).attr("stroke","#CCCCCC")},Fe=function(t){t.attr("patternUnits","userSpaceOnUse").attr("patternContentUnits","userSpaceOnUse").attr("x",0).attr("y",0).attr("width",6).attr("height",6),t.append("rect").attr("x",0).attr("y",0).attr("width",6).attr("height",6).attr("fill","#fff"),t.append("line").attr("x1",0).attr("y1",3).attr("x2",3).attr("y2",0).attr("stroke","#ddd").attr("stroke-linecap","square"),t.append("line").attr("x1",3).attr("y1",6).attr("x2",6).attr("y2",3).attr("stroke","#ddd").attr("stroke-linecap","square")},Ee=function(t){t.attr("x1",0).attr("y1",0).attr("x2",.55).attr("y2",1).attr("id","lake-fade-gradient"),t.append("stop").attr("offset",.74).attr("stop-color","white").attr("stop-opacity",1),t.append("stop").attr("offset",.97).attr("stop-color","white").attr("stop-opacity",0)},Te=function(t){t.attr("maskContentUnits","objectBoundingBox"),t.append("rect").attr("fill","url(#lake-fade-gradient)").attr("width",1).attr("height",1)},Oe=function(t){t.attr("patternUnits","userSpaceOnUse").attr("patternContentUnits","userSpaceOnUse").attr("x",0).attr("y",0).attr("width",6).attr("height",6),t.append("line").attr("x1",0).attr("y1",3).attr("x2",3).attr("y2",0).attr("stroke","#e6e6e6").attr("stroke-width",1.1),t.append("line").attr("x1",3).attr("y1",6).attr("x2",6).attr("y2",3).attr("stroke","#e6e6e6").attr("stroke-width",1.1)};function Ce(){var t={},e=null,r=Re;function n(n){e&&(n.props=function(){return Be(t)},e.apply(n,Me(arguments))),n.each((function(){this.__props__=Be(t),r.apply(this,Me(arguments))}))}return n.prop=function(e,r){return r||(r=Re),n[e]=function(t,e,r){return r||(r=Re),function(){return arguments.length?(t[e]=r.apply(null,Me(arguments)),this):t[e]}}(t,e,r.bind(n)).bind(n),n},n.delegate=function(t,e){return n[t]=function(){var r=e[t].apply(e,Me(arguments));return 0===arguments.length?r:n},n},n.renderSelection=function(t){return e=t,n},n.render=function(t){return r=t,n},n}function Re(t){return t}function Me(t){return Array.prototype.slice.call(t)}function Be(t){var e={};for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}e.selection.prototype.props=function(){if(arguments.length)throw new Error("selection.props() does not accept any arguments");if(1!=this.size())throw new Error("only one group is supported");if(1!=this._groups[0].length)throw new Error("only one node is supported");var t=this._groups[0],e=t[0];return e.__props__||{}};var De=function(t){return Math.floor(t)+.5},Le=function(t){var e=Nt(Math.floor,Number),r=t.match(/(translate\()\s*([0-9.,\- ]+)\s*(\))/i)[2].replace(","," ").replace(/\s+/," ").split(" ").map(Number);1===r.length&&r.push([0]);var n=r.map(e);return[r[0]-n[0],r[1]-n[1]]};function je(t,e){return"translate("+t+","+e+")"}function Ne(){return Ce().prop("position").position(Zt([0,0])).prop("debug").render((function(r){var n=e.select(this),a=n.props(),o=n.selectAll("[data-tooltip-anchor]").data(r),i=o.enter().append("rect").attr("height",1).attr("width",1).attr("fill","none").attr("stroke","none").attr("visibility","none").attr("data-tooltip-anchor","");if(o.exit().remove(),(o=o.merge(i)).attr("transform",Nt(t,a.position)),a.debug){var s=n.selectAll("[data-tooltip-anchor-debug]").data(r),l=s.enter().append("circle").attr("data-tooltip-anchor-debug","");s.exit().remove(),(s=s.merge(l)).attr("r",2).attr("fill","#fff").attr("stroke","#f00").attr("stroke-width",1.5).attr("transform",Nt(t,a.position))}}));function t(t){return je.apply(null,t)}}function We(t,e,r){return function(n){var a=n.enter().append("circle").classed("sszvis-rangeFlag__mark",!0).classed(t,!0);n.exit().remove(),(n=n.merge(a)).attr("r",3.5).attr("cx",e).attr("cy",r)}}var Ie={decimal:".",thousands:" ",grouping:[3],currency:["CHF ",""],dateTime:"%a. %e. %B %X %Y",date:"%d.%m.%Y",time:"%H:%M:%S",periods:[],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]},He=e.timeFormatLocale(Ie).format,Ge=e.formatLocale(Ie).format,Ue=function(t){for(var e=[[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%H:%M",function(t){return t.getMinutes()}],["%H Uhr",function(t){return t.getHours()}],["%a., %d.",function(t){return t.getDay()&&1!=t.getDate()}],["%e. %b",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",function(){return!0}]],r=0;r<e.length;++r)if(e[r][1](t))return He(e[r][0])(t)},Je=Nt((function(t){return t.toUpperCase()}),He("%b")),Ve=He("%Y"),Ye=function(t){var e,r=Math.abs(t);return null==t||isNaN(t)?"–":r>=1e4?Ge(",.0f")(t):r>=100?(e=Math.min(1,Xe(t)),$e(Ge("."+e+"f")(t))):r>0?(e=Math.min(2,Xe(t)),$e(Ge("."+e+"f")(t))):Ge(".0f")(0)},Ke=function(t,e){return arguments.length>1?Ke(t)(e):function(e){var r=Math.abs(e);return r>=100&&r<1e4?Ge("."+t+"f")(e):Ge(",."+t+"f")(e)}},qe=function(t){return String(t)};function Xe(t){return(String(Math.abs(t)).split(".")[1]||"").length}function $e(t){return t.replace(/(\.[0-9]*[1-9])0+$|\.0*$/,"$1")}var Qe=function(){return Ce().prop("header").prop("body").prop("orientation",Zt).orientation("bottom").prop("dx",Zt).dx(1).prop("dy",Zt).dy(1).prop("opacity",Zt).opacity(1).renderSelection((function(t){var r=t.datum(),n=t.props(),a=Wt,o=a(n.header)&&!a(n.body)||!a(n.header)&&a(n.body),i=t.selectAll(".sszvis-tooltip").data(r);i.exit().remove();var s=i.enter().append("div");(i=i.merge(s)).style("pointer-events","none").style("opacity",n.opacity).style("padding-top",(function(t){return"top"===n.orientation(t)?"6px":null})).style("padding-right",(function(t){return"right"===n.orientation(t)?"6px":null})).style("padding-bottom",(function(t){return"bottom"===n.orientation(t)?"6px":null})).style("padding-left",(function(t){return"left"===n.orientation(t)?"6px":null})).classed("sszvis-tooltip",!0);var l=s.append("svg").attr("class","sszvis-tooltip__background").attr("height",0).attr("width",0),c=l.append("path");if(void 0!==window.SVGFEColorMatrixElement&&2==SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE){var u=l.append("filter").attr("id","sszvisTooltipShadowFilter").attr("height","150%");u.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",2),u.append("feComponentTransfer").append("feFuncA").attr("type","linear").attr("slope",.2);var p=u.append("feMerge");p.append("feMergeNode"),p.append("feMergeNode").attr("in","SourceGraphic"),c.attr("filter","url(#sszvisTooltipShadowFilter)")}else l.classed("sszvis-tooltip__background--fallback",!0);var d=s.append("div").classed("sszvis-tooltip__content",!0);d.append("div").classed("sszvis-tooltip__header",!0),d.append("div").classed("sszvis-tooltip__body",!0),i.select(".sszvis-tooltip__header").datum(qt("datum")).html(n.header||Zt("")),i.select(".sszvis-tooltip__body").datum(qt("datum")).html((function(t){var e=n.body?Zt(n.body)(t):"";return Array.isArray(e)?'<table class="sszvis-tooltip__body__table">'+e.map((function(t){return"<tr>"+t.map((function(t){return"<td>"+t+"</td>"})).join("")+"</tr>"})).join("")+"</table>":e})),t.selectAll(".sszvis-tooltip").classed("sszvis-tooltip--small",o).each((function(t){var r=e.select(this),a=r.node().getBoundingClientRect(),i=n.orientation.apply(this,arguments);switch(i){case"top":r.style("left",t.x-a.width/2+"px").style("top",t.y+n.dy(t)+"px");break;case"bottom":r.style("left",t.x-a.width/2+"px").style("top",t.y-n.dy(t)-a.height+"px");break;case"left":r.style("left",t.x+n.dx(t)+"px").style("top",t.y-a.height/2+"px");break;case"right":r.style("left",t.x-n.dx(t)-a.width+"px").style("top",t.y-a.height/2+"px")}var s=a.height+10,l=a.width+10;r.select(".sszvis-tooltip__background").attr("height",s).attr("width",l).style("left","-5px").style("top","-5px").select("path").attr("d",Ze([5,5],[l-5,s-5],i,o?3:4))}))}))};function Ze(t,e,r,n){switch(r){case"top":t[1]=t[1]+6;break;case"bottom":e[1]=e[1]-6;break;case"left":t[0]=t[0]+6;break;case"right":e[0]=e[0]-6}function a(t){return t[0]}function o(t){return t[1]}function i(t,e,r,n,a,o,i){var s=r+(a-r)/2,l=n+(o-n)/2,c=[];return i&&n===o?c=r<a?["L",s-6,l,"L",s,l-6,"L",s+6,l]:["L",s+6,l,"L",s,l+6,"L",s-6,l]:i&&r===a&&(c=n<o?["L",s,l-6,"L",s+6,l,"L",s,l+6]:["L",s,l+6,"L",s-6,l,"L",s,l-6]),[].concat(["Q",t,e,r,n],c,["L",a,o])}return[["M",a(t),o(t)+n],i(a(t),o(t),a(t)+n,o(t),a(e)-n,o(t),"top"===r),i(a(e),o(t),a(e),o(t)+n,a(e),o(e)-n,"right"===r),i(a(e),o(e),a(e)-n,o(e),a(t)+n,o(e),"bottom"===r),i(a(t),o(e),a(t),o(e)-n,a(t),o(t)+n,"left"===r)].map((function(t){return t.join(" ")})).join(" ")}var tr=function(t,r){r||(r={}),r.src||(r.src="fallback.png"),(Lt(t)?t:e.select(t)).append("img").attr("class","sszvis-fallback-image").attr("src",r.src)},er={resize:[]};"undefined"!=typeof window&&e.select(window).on("resize",function(t,e,r){var n,a=0;return arguments.length<3&&(r=!0),function(){var o=arguments,i=this;n=function(){t.apply(i,o),a=(new Date).getTime()+e,n=null,r&&setTimeout((function(){n&&n()}),e)},(new Date).getTime()>a&&n()}}((function(){rr("resize")}),500));var rr=function(t){var e=Array.prototype.slice.call(arguments,1);return er[t]&&er[t].forEach((function(t){t.apply(null,e)})),this},nr={on:function(t,e){return er[t]||(er[t]=[]),er[t]=er[t].filter((function(t){return t!==e})).concat(e),this},off:function(t,e){return er[t]?(er[t]=er[t].filter((function(t){return t!==e})),this):this},trigger:rr};function ar(t,e){if(!t)throw new Error("[sszvis.app] ".concat(e))}function or(t){return"function"==typeof t}function ir(t,e){var r=vr(e);return Ht((function(t){return lr(t,r)}),t)}function sr(t,e){return Ht((function(t){return t.name===e}),t)}function lr(t,e){var r=t.measurement,n=vr(e);return n.width<=r.width&&n.screenHeight<=r.screenHeight}function cr(t,e){var r=vr(e);return t.filter((function(t){return lr(t,r)}))}function ur(t){return t.map(mr).concat(mr({name:"_"}))}var pr,dr=(pr=ur([{name:"palm",width:540},{name:"lap",width:749}]),function(){return pr}),fr=gr("palm"),hr=gr("lap");function vr(t){var e=Xt("width",1/0),r=Xt("screenHeight",1/0);return{width:e(t),screenHeight:r(t)}}function mr(t){var e;return e=Wt(t.measurement)?vr(t.measurement):vr({width:t.width,screenHeight:t.screenHeight}),{name:t.name,measurement:e}}function gr(t){return function(e){return lr(sr(dr(),t),e)}}function yr(t,e){var r=t/e;return function(t){return t/r}}var br=yr(4,3),xr=yr(16,10),kr=function(t){return Math.min(yr(12,5)(t),500)};kr.MAX_HEIGHT=500;var _r=function(t){return Math.min(yr(1,1)(t),420)};_r.MAX_HEIGHT=420;var wr=function(t){return Math.min(yr(4,5)(t),600)};wr.MAX_HEIGHT=600;var zr={palm:br,lap:xr,_:kr},Ar=function(t){var e=ir(dr(),t);return(0,zr[e.name])(t.width)},Sr=Fr("warn"),Pr=Fr("error");function Fr(t){return function(){console&&console[t]&&Er(arguments).forEach((function(e){console[t](e)}))}}function Er(t){return Array.prototype.slice.call(t)}var Tr=function(t){return t.rangeExtent?t.rangeExtent():(e=t.range(),r=e[0],n=e[e.length-1],r<n?[r,n]:[n,r]);var e,r,n};function Or(t,r,n,a){a=(a||5)-2;var o=r;r-=2*(n=n||5);var i=[];return t.each((function(){var t,s,l=e.select(this),c=l.text().split(/[ \f\n\r\t\v]+/).reverse(),u=[],p=0,d=l.attr("y"),f=parseFloat(l.attr("dy")),h=1,v=l.style("text-anchor")||"start";if(isNaN(f)&&(f=0),e.select(l.node().parentNode).classed("tick"))switch(v){case"start":s=-r/2;break;case"middle":s=0;break;case"end":s=r/2}else switch(v){case"start":s=n;break;case"middle":s=o/2;break;case"end":s=o-n}d=+(null===d?a:d);for(var m=l.text(null).append("tspan").attr("x",s).attr("y",d).attr("dy",f+"em");c.length>0;)t=c.pop(),u.push(t),m.text(u.join(" ")),m.node().getComputedTextLength()>r&&u.length>1&&(u.pop(),m.text(u.join(" ")),u=[t],m=l.append("tspan").attr("x",s).attr("y",d).attr("dy",1.1*++p+f+"em").text(t),++h);i.push(h)})),i}var Cr=function(){return Ce().prop("scale").prop("orient").prop("ticks").prop("tickValues").prop("tickSize").prop("tickSizeInner").prop("tickSizeOuter").prop("tickPadding").prop("tickFormat").prop("_scale").prop("orient").orient("bottom").prop("alignOuterLabels").alignOuterLabels(!1).prop("contour").prop("hideBorderTickThreshold").hideBorderTickThreshold(8).prop("hideLabelThreshold").hideLabelThreshold(10).prop("highlightTick",Zt).prop("showZeroY").showZeroY(!1).prop("slant").prop("textWrap").prop("tickLength").prop("title").prop("titleAnchor").prop("titleCenter").prop("dxTitle").prop("dyTitle").prop("titleVertical").prop("vertical").vertical(!1).prop("yOffset").yOffset(0).render((function(){var t=e.select(this),r=t.props(),n=!r.vertical&&"bottom"===r.orient,a=function(){switch(r.orient){case"bottom":return e.axisBottom();case"top":return e.axisTop();case"left":return e.axisLeft();case"right":return e.axisRight()}}();["scale","ticks","tickValues","tickSizeInner","tickSizeOuter","tickPadding","tickFormat","tickSize"].forEach((function(t){if(void 0!==r[t]){if(void 0===a[t])throw new Error('axis: "'+t+'" not available');a[t](r[t])}})),r._scale&&a.scale(r._scale);var o=t.selectGroup("sszvis-axis").classed("sszvis-axis",!0).classed("sszvis-axis--top",!r.vertical&&"top"===r.orient).classed("sszvis-axis--bottom",n).classed("sszvis-axis--vertical",r.vertical).attr("transform",je(0,r.yOffset)).call(a);o.attr("fill",null).attr("font-size",null).attr("font-family",null);var i=a.scale(),s=o.selectAll("g.tick"),l=s.selectAll("text");s.each((function(){var t=Le(this.getAttribute("transform")),r=De(0)-t[0],a=De(n?2:0)+t[1];e.select(this).select("line").attr("transform",je(r,a))})),l.each((function(){"top"!==r.orient&&"bottom"!==r.orient||e.select(this).attr("dx","-0.5"),"left"!==r.orient&&"right"!==r.orient||e.select(this).attr("y","-0.5")})),o.selectAll("path.domain");var c=Tr(i);if(s.selectAll("line").each((function(t){var n=i(t),a=e.select(this);a.classed("hidden",!a.classed("sszvis-axis__longtick")&&(Dr(n,c[0])<r.hideBorderTickThreshold||Dr(n,c[1])<r.hideBorderTickThreshold))})),Wt(r.tickLength)){var u=e.extent(i.domain()),p=s.filter((function(t){return!Qt(t,u[0])&&!Qt(t,u[1])})),d=r.orient,f=2;"left"!==d&&"right"!==d||(p.selectAll("text").each((function(){f=Math.max(this.getBoundingClientRect().width,f)})),f+=2);var h=p.selectAll("line.sszvis-axis__longtick").data([0]);if(r.tickLength>f){var v=h.enter().append("line").classed("sszvis-axis__longtick",!0);h=h.merge(v),"top"===d?h.attr("y1",f).attr("y2",r.tickLength):"bottom"===d?h.attr("y1",-f).attr("y2",-r.tickLength):"left"===d?h.attr("x1",-f).attr("x2",-r.tickLength):"right"===d&&h.attr("x1",f).attr("x2",r.tickLength)}else h.remove()}if(r.alignOuterLabels){var m=Tr(i),g=m[0],y=m[1];l.style("text-anchor",(function(t){var e=i(t);return Dr(e,g)<12?"start":Dr(e,y)<12?"end":"middle"}))}if(Wt(r.textWrap)&&l.call(Or,r.textWrap),r.slant&&l.call(Lr[r.orient][r.slant]),r.highlightTick){var b=[],x=[];l.classed("hidden",!1).classed("active",r.highlightTick),r.hideLabelThreshold>0&&!r.slant&&(l.each((function(t){var e=this.getBoundingClientRect(),n={node:this,bounds:{top:e.top,right:e.right,bottom:e.bottom,left:e.left}};r.highlightTick(t)?(n.bounds.left-=r.hideLabelThreshold,n.bounds.right+=r.hideLabelThreshold,b.push(n)):x.push(n)})),b.forEach((function(t){x.forEach((function(r){var n,a;e.select(r.node).classed("hidden",(n=r.bounds,!((a=t.bounds).left>n.right||a.right<n.left||a.top>n.bottom||a.bottom<n.top)))}))})))}if(r.title){var k=o.selectAll(".sszvis-axis__title").data([r.title]),_=k.enter().append("text").classed("sszvis-axis__title",!0);k.exit().remove(),k.merge(_).text((function(t){return t})).attr("transform",(function(){var t,e=r.orient,n=Tr(i);return(t=r.titleCenter?{left:"left"===e||"right"===e?0:"top"===e||"bottom"===e?(n[0]+n[1])/2:0,top:"left"===e||"right"===e?(n[0]+n[1])/2:"top"===e?0:"bottom"===e?32:0}:{left:"left"===e||"right"===e||"top"===e?0:"bottom"===e?n[1]:0,top:"left"===e||"right"===e||"top"===e?0:"bottom"===e?32:0}).vertical=!!r.titleVertical,t.left+=r.dxTitle||0,t.top+=r.dyTitle||0,"translate("+t.left+", "+t.top+") rotate("+(t.vertical?"-90":"0")+")"})).style("text-anchor",(function(){var t=r.orient;return void 0!==r.titleAnchor?r.titleAnchor:"left"===t?"end":"right"===t?"start":"top"===t||"bottom"===t?"end":void 0}))}r.contour&&r.slant?Sr("Can't apply contour to slanted labels"):r.contour&&s.each((function(){var t=e.select(this),r=t.select("text").node(),n=t.select(".sszvis-axis__label-contour");n.empty()&&(n=e.select(r.cloneNode()).classed("sszvis-axis__label-contour",!0),this.insertBefore(n.node(),r)),n.text(r.textContent)}))}))},Rr=function(t){var e=this.scale().domain(),r=[],n=Math.round(e.length/t);void 0!==e[0]&&r.push(e[0]);for(var a=n,o=e.length;a<o-1;a+=n)void 0!==e[a]&&r.push(e[a]);return void 0!==e[e.length-1]&&r.push(e[e.length-1]),this.tickValues(r),t},Mr=function(){return Cr().yOffset(2).ticks(3).tickSizeInner(4).tickSizeOuter(6.5).tickPadding(6).tickFormat(jt(1,Ye))};Mr.time=function(){return Mr().tickFormat(Ue).alignOuterLabels(!0)},Mr.ordinal=function(){return Mr().prop("ticks",Rr).tickFormat(qe)},Mr.pyramid=function(){return Mr().ticks(10).prop("scale",(function(t){var e=t.copy(),r=e.domain(),n=e.range();return e.domain([-r[1],r[1]]).range([n[0]-n[1],n[0]+n[1]]),this._scale(e),e})).tickFormat((function(t){return Ye(Math.abs(t))}))};var Br=function(){var t=Cr().ticks(6).tickSize(0,0).tickPadding(0).tickFormat((function(e){return 0!==e||t.showZeroY()?Ye(e):null})).vertical(!0);return t};function Dr(t,e){return Math.abs(t-e)}Br.time=function(){return Br().tickFormat(Ue)},Br.ordinal=function(){return Br().prop("ticks",Rr).tickFormat(qe)};var Lr={top:{horizontal:function(t){t.style("text-anchor","middle").attr("dx","-0.5").attr("dy","0.71em").attr("transform",null)},vertical:function(t){t.style("text-anchor","start").attr("dx","0em").attr("dy","0.35em").attr("transform","rotate(-90)")},diagonal:function(t){t.style("text-anchor","start").attr("dx","0.1em").attr("dy","0.1em").attr("transform","translate(-0.5) rotate(-45)")}},bottom:{horizontal:function(t){t.style("text-anchor","middle").attr("dx","-0.5").attr("dy","0.71em").attr("transform",null)},vertical:function(t){t.style("text-anchor","end").attr("dx","-1em").attr("dy","-0.75em").attr("transform","rotate(-90)")},diagonal:function(t){t.style("text-anchor","end").attr("dx","-0.8em").attr("dy","0em").attr("transform","rotate(-45)")}}};function jr(){var t=e.dispatch("start","move","drag","end"),r=Ce().prop("debug").prop("xScale").prop("yScale").prop("draggable").prop("cancelScrolling",Zt).cancelScrolling(!1).prop("fireOnPanOnly",Zt).fireOnPanOnly(!1).prop("padding",(function(t){var e={top:0,left:0,bottom:0,right:0};for(var r in t)e[r]=t[r];return e})).padding({}).render((function(){var r=e.select(this),n=r.props(),a=Tr(n.xScale).sort(e.ascending),o=Tr(n.yScale).sort(e.ascending);a[0]-=n.padding.left,a[1]+=n.padding.right,o[0]-=n.padding.top,o[1]+=n.padding.bottom;var i=r.selectAll("[data-sszvis-behavior-move]").data([0]),s=i.enter().append("rect").attr("data-sszvis-behavior-move","").attr("class","sszvis-interactive");i=i.merge(s),n.draggable&&i.classed("sszvis-interactive--draggable",!0),i.attr("x",a[0]).attr("y",o[0]).attr("width",a[1]-a[0]).attr("height",o[1]-o[0]).attr("fill","transparent").on("mouseover",(function(){t.apply("start",this,arguments)})).on("mousedown",(function(r){var a=this,o=e.select(document),i=e.select(window),s=function(){var a=e.pointer(r),o=Nr(n.xScale,a[0]),i=Nr(n.yScale,a[1]);r.preventDefault(),t.apply("drag",this,[o,i])},l=function(){a.__dragging__=!1,i.on("mouseup.sszvis-behavior-move",null),i.on("mousemove.sszvis-behavior-move",null),o.on("mouseout.sszvis-behavior-move",null),t.apply("end",this,arguments)};i.on("mousemove.sszvis-behavior-move",s),i.on("mouseup.sszvis-behavior-move",l),o.on("mouseout.sszvis-behavior-move",(function(){var t=r.relatedTarget||r.toElement;t&&"HTML"!==t.nodeName||l()})),a.__dragging__=!0,s()})).on("mousemove",(function(r){var a=e.pointer(r),o=Nr(n.xScale,a[0]),i=Nr(n.yScale,a[1]);this.__dragging__||t.apply("move",this,[o,i])})).on("mouseout",(function(){t.apply("end",this,[])})).on("touchstart",(function(r){var a=Gt(e.pointer(r)),o=Nr(n.xScale,a[0]),i=Nr(n.yScale,a[1]),s=n.cancelScrolling(o,i);if(s&&r.preventDefault(),!n.fireOnPanOnly()||s){t.apply("start",this,[o,i]),t.apply("drag",this,[o,i]),t.apply("move",this,[o,i]);e.select(this).on("touchmove",(function(){var a=Gt(e.pointer(r)),o=Nr(n.xScale,a[0]),i=Nr(n.yScale,a[1]),s=n.cancelScrolling(o,i);s&&r.preventDefault(),!n.fireOnPanOnly()||s?(t.apply("drag",this,[o,i]),t.apply("move",this,[o,i])):t.apply("end",this,[])})).on("touchend",(function(){t.apply("end",this,[]),e.select(this).on("touchmove",null).on("touchend",null)}))}})),n.debug&&i.attr("fill","rgba(255,0,0,0.2)")}));return r.on=function(){var e=t.on.apply(t,arguments);return e===t?r:e},r}function Nr(t,e){switch(t.invert?"Linear":t.paddingInner?"Band":"Point"){case"Linear":return t.invert(e);case"Band":return function(t,e){var r=t.step(),n=t.paddingOuter()*r,a=t.paddingInner()*r,o=t.bandwidth(),i=t.range(),s=t.domain();if(1===s.length)return i[0]<=e&&i[1]>=e?s[0]:null;for(var l=s.map((function(t,e){return 0===e?[i[0],i[0]+n+o+a/2]:e===s.length-1?[i[1]-(n+o+a/2),i[1]]:[i[0]+n+e*r-a/2,i[0]+n+(e+1)*r-a/2]})),c=0,u=l.length;c<u;c++)if(l[c][0]<e&&e<=l[c][1])return s[c];return null}(t,e);case"Point":return function(t,e){var r=t.step(),n=t.padding()*r,a=t.range(),o=t.domain();if(1===o.length)return a[0]<=e&&a[1]>=e?o[0]:null;for(var i=o.map((function(t,e){return 0===e?[a[0],a[0]+n+r/2]:e===o.length-1?[a[1]-(n+r/2),a[1]]:[a[0]+n+e*r-r/2,a[0]+n+e*r+r/2]})),s=0,l=i.length;s<l;s++)if(i[s][0]<e&&e<=i[s][1])return o[s];return null}(t,e);default:throw new Error("Unknown scale type, could not invert")}}var Wr=function(t){return!Jt(t)&&Wt(t)?document.elementFromPoint(t.clientX,t.clientY):null},Ir=function(t){if(!Jt(t)){var r=e.select(t);if(!Jt(r.attr("data-sszvis-behavior-pannable"))){var n=r.datum();if(Wt(n))return n}}return null},Hr=function(t){return Ir(Wr(t))};var Gr=Math.pow(15,2);function Ur(t,e){var r=t.clientX-e[0],n=t.clientY-e[1];return r*r+n*n<Gr}var Jr,Vr,Yr=function(t){var r;return{width:(r=Dt(t)?e.select(t).node():Lt(t)?t.node():t)?r.getBoundingClientRect().width:void 0,screenWidth:window.innerWidth,screenHeight:window.innerHeight}},Kr=(Jr=document.createElement("canvas").getContext("2d"),Vr={},function(t,e,r){var n=[t,e,r].join("-");return Jr.font=t+"px "+e,Vr[n]||(Vr[n]=Jr.measureText(r).width)}),qr=function(t){return Kr(10,"Arial, sans-serif",t)},Xr=function(t){return Kr(12,"Arial, sans-serif",t)};function $r(t,r){var n=null,a=null;0===arguments.length?n={}:1===arguments.length?Vt(t)?n=t:Lt(t)?(n={},a=t):(n={},a=e.select(t)):(n=t,a=Lt(r)?r:e.select(r));var o={top:Qr(n.top,0),right:Qr(n.right,1),bottom:Qr(n.bottom,0),left:Qr(n.left,1)},i=Wt(a)?Yr(a):{width:516},s=Qr(n.width,i.width),l=Ar(i),c=Qr(n.height,l+o.top+o.bottom);return{innerHeight:c-o.top-o.bottom,innerWidth:s-o.left-o.right,padding:o,height:c,width:s,screenWidth:i.screenWidth,screenHeight:i.screenHeight}}function Qr(t,e){return void 0===t?e:t}function Zr(t,e){for(var r in t)e(t[r],r)}function tn(){var t,e={},r=[],n=[];return e.apply=function(e){return function e(a,o){if(o>=r.length)return t&&a.sort(t),a;var i=n[o],s=r[o++],l=function(t,e){for(var r,n,a={},o=0,i=t.length;o<i;++o)a[r=e(n=t[o])]?a[r].push(n):a[r]=[n];return a}(a,s.func);if("obj"===s.type){var c={};return Zr(l,(function(t,r){c[r]=e(t,o)})),c}if("arr"===s.type){var u=[];if(i)!function(t,e){for(var r=0,n=t.length;r<n;++r)e(t[r],r)}(Object.keys(l).sort(i),(function(t){u.push(e(l[t],o))}));else Zr(l,(function(t){u.push(e(t,o))}));return u}}(e,0)},e.objectBy=function(t){return r.push({type:"obj",func:t}),e},e.arrayBy=function(t,a){return r.push({type:"arr",func:t}),a&&(n[r.length-1]=a),e},e.sort=function(r){return t=r,e},e}var en=e.easePolyOut,rn=function(){return e.transition().ease(en).duration(300)},nn=function(){return e.transition().ease(en).duration(500)};function an(t){return isNaN(t)?0:t}function on(){return Ce().prop("x",Zt).prop("y",Zt).prop("width",Zt).prop("height",Zt).prop("fill",Zt).prop("stroke",Zt).prop("centerTooltip").prop("tooltipAnchor").prop("transition").transition(!0).render((function(t){var r,n=e.select(this),a=n.props(),o=Nt(an,a.x),i=Nt(an,a.y),s=Nt(an,a.width),l=Nt(an,a.height),c=n.selectAll(".sszvis-bar").data(t);if(c.exit().remove(),c.enter().append("rect").classed("sszvis-bar",!0).attr("x",o).attr("y",i).attr("width",s).attr("height",l).merge(c).attr("fill",a.fill).attr("stroke",a.stroke),a.transition&&(c=c.transition(rn())),c.attr("x",o).attr("y",i).attr("width",s).attr("height",l),a.centerTooltip)r=function(t){return[o(t)+s(t)/2,i(t)+l(t)/2]};else if(a.tooltipAnchor){var u=a.tooltipAnchor.map(parseFloat);r=function(t){return[o(t)+u[0]*s(t),i(t)+u[1]*l(t)]}}else r=function(t){return[o(t)+s(t)/2,i(t)]};var p=Ne().position(r);n.call(p)}))}function sn(){return Ce().prop("barPosition").prop("barWidth").prop("mirror").mirror(!1).render((function(t){var r=e.select(this),n=r.props(),a=e.line().x(n.barWidth).y(n.barPosition),o=r.selectAll(".sszvis-pyramid__referenceline").data(t);o.exit().remove();var i=o.enter().append("path").attr("class","sszvis-pyramid__referenceline");(o=o.merge(i)).attr("transform",n.mirror?"scale(-1, 1)":"").transition(rn()).attr("d",a)}))}var ln=qt("stack"),cn=qt("0"),un=qt("1");function pn(t){return function(r,n,a){return function(o){var i=tn().arrayBy(r).objectBy(n).apply(o),s=i.reduce((function(t,e){return $t(t.concat(Object.keys(e)))}),[]),l=e.stack().keys(s).value((function(t,e){return a(t[e][0])})).order(t)(i);return l.forEach((function(t){t.forEach((function(e){e.series=t.key,e.data=e.data[t.key][0],e.stack=r(e.data)}))})),l.keys=s,l.maxValue=e.max(l,(function(t){return e.max(t,(function(t){return t[1]}))})),l}}}var dn=pn(e.stackOrderNone),fn=pn(e.stackOrderReverse);function hn(t){return Ce().prop("xScale",Zt).prop("width",Zt).prop("yScale",Zt).prop("height",Zt).prop("fill").prop("stroke").render((function(r){var n=e.select(this),a=n.props(),o=on().x(t.x(a)).y(t.y(a)).width(t.width(a)).height(t.height(a)).fill(a.fill).stroke(a.stroke||"#FFFFFF"),i=n.selectAll(".sszvis-stack").data(r),s=i.enter().append("g").classed("sszvis-stack",!0);i.exit().remove(),(i=i.merge(s)).call(o)}))}var vn={x:function(t){return Nt(t.xScale,cn)},y:function(t){return Nt(t.yScale,ln)},width:function(t){return function(e){return t.xScale(e[1])-t.xScale(e[0])}},height:function(t){return t.height}},mn={x:function(t){return Nt(t.xScale,ln)},y:function(t){return Nt(t.yScale,un)},width:function(t){return t.width},height:function(t){return function(e){return t.yScale(e[0])-t.yScale(e[1])}}},gn=qt("data"),yn=qt("row");function bn(){return Ce().prop("stackElement").renderSelection((function(t){var r=t.datum(),n=t.props(),a=t.selectAll("[data-sszvis-stack]").data(r),o=a.enter().append("g").attr("data-sszvis-stack","");a.exit().remove(),(a=a.merge(o)).each((function(t){e.select(this).datum(t).call(n.stackElement)}))}))}function xn(){return Ce().prop("barPosition").prop("barWidth").prop("mirror").mirror(!1).render((function(t){var r=e.select(this),n=r.props(),a=e.line().x(n.barWidth).y(n.barPosition),o=r.selectAll(".sszvis-path").data(t);o.exit().remove();var i=o.enter().append("path").attr("class","sszvis-path").attr("fill","none").attr("stroke","#aaa").attr("stroke-width",2).attr("stroke-dasharray","3 3");(o=o.merge(i)).attr("transform",n.mirror?"scale(-1, 1)":"").transition(rn()).attr("d",a)}))}var kn=2*Math.PI;function _n(t,e){return e.indexOf(t)>=0}function wn(){return Ce().prop("scale").prop("rowHeight").rowHeight(21).prop("columnWidth").columnWidth(200).prop("rows").rows(3).prop("columns").columns(3).prop("verticallyCentered").verticallyCentered(!1).prop("orientation").prop("reverse").reverse(!1).prop("rightAlign").rightAlign(!1).prop("horizontalFloat").horizontalFloat(!1).prop("floatPadding").floatPadding(20).prop("floatWidth").floatWidth(600).render((function(){var t,r,n=e.select(this),a=n.props(),o=a.scale.domain();a.reverse&&(o=o.slice().reverse()),"horizontal"===a.orientation?(r=Math.ceil(a.columns),t=Math.ceil(o.length/r)):"vertical"===a.orientation&&(t=Math.ceil(a.rows),r=Math.ceil(o.length/t));var i=n.selectAll(".sszvis-legend--entry").data(o),s=i.enter().append("g").classed("sszvis-legend--entry",!0);i.exit().remove();var l=i.merge(s).selectAll(".sszvis-legend__mark").data((function(t){return[t]})),c=l.enter().append("circle").classed("sszvis-legend__mark",!0);l.exit().remove(),l.merge(c).attr("cx",a.rightAlign?-6:6).attr("cy",De(a.rowHeight/2)).attr("r",5).attr("fill",(function(t){return a.scale(t)})).attr("stroke",(function(t){return a.scale(t)})).attr("stroke-width",1);var u=i.merge(s).selectAll(".sszvis-legend__label").data((function(t){return[t]})),p=u.enter().append("text").classed("sszvis-legend__label",!0);u.exit().remove(),u.merge(p).text((function(t){return t})).attr("dy","0.35em").style("text-anchor",(function(){return a.rightAlign?"end":"start"})).attr("transform",(function(){return je(a.rightAlign?-18:18,De(a.rowHeight/2))}));var d="";if(a.verticallyCentered&&(d="translate(0,"+String(-o.length*a.rowHeight/2)+") "),a.horizontalFloat){var f=0,h=0;i.merge(s).attr("transform",(function(){var t=this.getBoundingClientRect().width;h+t>a.floatWidth&&(f+=a.rowHeight,h=0);var e=je(h,f);return h+=t+a.floatPadding,d+e}))}else i.merge(s).attr("transform",(function(e,n){return"horizontal"===a.orientation?d+"translate("+n%r*a.columnWidth+","+Math.floor(n/r)*a.rowHeight+")":"vertical"===a.orientation?d+"translate("+Math.floor(n/t)*a.columnWidth+","+n%t*a.rowHeight+")":void 0}))}))}function zn(t,r){var n=t.length,a=e.max(t,An),o=e.sum(t,An),i=n<=4?1:function t(e,r,n){return n<=1?1:r<=e/n?n:t(e,r,n-1)}(r,a,2),s=1===i&&o<=r;return{columns:i,rows:s?1:Math.ceil(n/i),columnWidth:1===i?null:a,legendWidth:i*a,horizontalFloat:s,orientation:s?null:"vertical"}}function An(t){return Xr(t)+40}var Sn,Pn=(Sn=0,function(){return++Sn});var Fn=te((function(t,r,n){return e.geoMercator().fitSize([t,r],n)}),(function(t,e,r,n){return t+","+e+","+n})),En=function(t,r,n,a){return e.geoPath().projection(Fn(t,r,n,a))},Tn=function(t,e,r){r||(r="geoId");var n=Array.isArray(t)?t.reduce((function(t,e){return t[e[r]]=e,t}),{}):{};return e.features.map((function(t){return{geoJson:t,datum:n[t.id]}}))},On=function(t){if(!t.properties.cachedCenter){var r=t.properties.center;t.properties.cachedCenter=r?r.split(",").map(parseFloat):e.geoCentroid(t)}return t.properties.cachedCenter},Cn=qt("datum");function Rn(){return Ce().prop("mergedData").prop("geoJson").prop("mapPath").prop("defined",Zt).defined(!0).prop("fill",Zt).fill((function(){return"black"})).prop("transitionColor").transitionColor(!0).render((function(){var t=e.select(this),r=t.props();function n(t){return r.defined(t.datum)?r.fill(t.datum):"url(#missing-pattern)"}ee(t,"pattern","missing-pattern").call(Pe);var a=t.selectAll(".sszvis-map__area").data(r.mergedData),o=a.enter().append("path").classed("sszvis-map__area",!0).classed("sszvis-map__area--entering",!0).attr("data-event-target","").attr("fill",n);a.classed("sszvis-map__area--entering",!1),a.exit().remove(),a=a.merge(o),t.selectAll(".sszvis-map__area--undefined").attr("fill",n),a.classed("sszvis-map__area--undefined",(function(t){return!Wt(t.datum)||!r.defined(t.datum)})).attr("d",(function(t){return r.mapPath(t.geoJson)})),r.transitionColor?a.transition().call(nn).attr("fill",n):a.attr("fill",n);var i=Ne().position((function(t){return r.mapPath.projection()(On(t.geoJson))}));t.selectGroup("tooltipAnchors").datum(r.mergedData).call(i)}))}function Mn(){return Ce().prop("keyName").keyName("geoId").prop("geoJson").prop("mapPath").prop("highlight").highlight([]).prop("highlightStroke",Zt).highlightStroke("white").prop("highlightStrokeWidth",Zt).highlightStrokeWidth(2).render((function(){var t=e.select(this),r=t.props(),n=t.selectAll(".sszvis-map__highlight");if(!r.highlight.length)return n.remove(),!0;var a=r.geoJson.features.reduce((function(t,e){return t[e.id]=e,t}),{}),o=r.highlight.reduce((function(t,e){return e&&t.push({geoJson:a[e[r.keyName]],datum:e}),t}),[]),i=(n=n.data(o)).enter().append("path").classed("sszvis-map__highlight",!0);n.exit().remove(),(n=n.merge(i)).attr("d",(function(t){return r.mapPath(t.geoJson)})).style("stroke",(function(t){return r.highlightStroke(t.datum)})).style("stroke-width",(function(t){return r.highlightStrokeWidth(t.datum)}))}))}function Bn(){return Ce().prop("geoJson").prop("mapPath").prop("borderColor").borderColor("white").prop("strokeWidth").strokeWidth(1.25).render((function(){var t=e.select(this),r=t.props(),n=t.selectAll(".sszvis-map__border").data([r.geoJson]),a=n.enter().append("path").classed("sszvis-map__border",!0);n.exit().remove(),(n=n.merge(a)).attr("d",r.mapPath).style("stroke",r.borderColor).style("stroke-width",r.strokeWidth)}))}function Dn(){return Ce().prop("mapPath").prop("lakeFeature").prop("lakeBounds").prop("lakePathColor").prop("fadeOut").fadeOut(!0).render((function(){var t=e.select(this),r=t.props();ee(t,"pattern","lake-pattern").call(Fe),r.fadeOut&&(ee(t,"linearGradient","lake-fade-gradient").call(Ee),ee(t,"mask","lake-fade-mask").call(Te));var n=t.selectAll(".sszvis-map__lakezurich").data([r.lakeFeature]),a=n.enter().append("path").classed("sszvis-map__lakezurich",!0);n.exit().remove(),(n=n.merge(a)).attr("d",r.mapPath).attr("fill","url(#lake-pattern)"),r.fadeOut&&n.attr("mask","url(#lake-fade-mask)");var o=t.selectAll(".sszvis-map__lakepath").data([r.lakeBounds]),i=o.enter().append("path").classed("sszvis-map__lakepath",!0);o.exit().remove(),(o=o.merge(i)).attr("d",r.mapPath),r.lakePathColor&&o.style("stroke",r.lakePathColor)}))}var Ln=e.timeFormatLocale(Ie).parse,jn=Ln("%d.%m.%Y"),Nn=Ln("%Y");function Wn(t){return function(){var e,r=(e=[[]],{addLine:function(){e.push([])},addWord:function(t,r){Yt(e).push({text:Zt(r),style:t})},lines:function(){return e}});function n(e){return t(r,e)}return n.newline=function(){return r.addLine(),n},["bold","italic","plain"].forEach((function(t){n[t]=function(e){return r.addWord(t,e),n}})),n}}var In,Hn=Wn((In={plain:function(t){return t},italic:function(t){return"<em>"+t+"</em>"},bold:function(t){return"<strong>"+t+"</strong>"}},function(t,e){return t.lines().map((function(t){return t.map((function(t){return In[t.style].call(null,t.text(e))})).join(" ")})).join("<br/>")})),Gn=Wn(function(){var t={plain:function(t){return"<tspan>"+t+"</tspan>"},italic:function(t){return'<tspan style="font-style:italic">'+t+"</tspan>"},bold:function(t){return'<tspan style="font-weight:bold">'+t+"</tspan>"}};return function(e,r){return e.lines().reduce((function(e,n,a){return e+'<tspan x="0" dy="'+(0===a?0:"1.2em")+'">'+n.map((function(e){return t[e.style].call(null,e.text(r))})).join(" ")+"</tspan>"}),"")}}());t.AGGLOMERATION_2012_KEY="zurichAgglomeration2012",t.DEFAULT_LEGEND_COLOR_ORDINAL_ROW_HEIGHT=21,t.DEFAULT_WIDTH=516,t.GEO_KEY_DEFAULT="geoId",t.RATIO=16/9,t.STADT_KREISE_KEY="zurichStadtKreise",t.STATISTISCHE_QUARTIERE_KEY="zurichStatistischeQuartiere",t.STATISTISCHE_ZONEN_KEY="zurichStatistischeZonen",t.SWITZERLAND_KEY="switzerland",t.WAHL_KREISE_KEY="zurichWahlKreise",t.annotationCircle=function(){return Ce().prop("x",Zt).prop("y",Zt).prop("r",Zt).prop("dx",Zt).prop("dy",Zt).prop("caption",Zt).render((function(t){var r=e.select(this),n=r.props();ee(r,"pattern","data-area-pattern").call(Oe);var a=r.selectAll(".sszvis-dataareacircle").data(t),o=a.enter().append("circle").classed("sszvis-dataareacircle",!0);if((a=a.merge(o)).attr("cx",n.x).attr("cy",n.y).attr("r",n.r).attr("fill","url(#data-area-pattern)"),n.caption){var i=r.selectAll(".sszvis-dataareacircle__caption").data(t),s=i.enter().append("text").classed("sszvis-dataareacircle__caption",!0);(i=i.merge(s)).attr("x",n.x).attr("y",n.y).attr("dx",n.dx).attr("dy",n.dy).text(n.caption)}}))},t.annotationLine=function(){return Ce().prop("x1").prop("x2").prop("y1").prop("y2").prop("xScale").prop("yScale").prop("dx",Zt).dx(0).prop("dy",Zt).dy(0).prop("caption",Zt).render((function(t){var r=e.select(this),n=r.props(),a=n.xScale(n.x1),o=n.yScale(n.y1),i=n.xScale(n.x2),s=n.yScale(n.y2),l=r.selectAll(".sszvis-referenceline").data(t);l.exit().remove();var c=l.enter().append("line").classed("sszvis-referenceline",!0);if((l=l.merge(c)).attr("x1",a).attr("y1",o).attr("x2",i).attr("y2",s),n.caption){var u=r.selectAll(".sszvis-referenceline__caption").data([0]);u.exit().remove();var p=u.enter().append("text").classed("sszvis-referenceline__caption",!0);(u=u.merge(p)).attr("transform",(function(){var t=i-a,e=s-o,r=180*Math.atan2(e,t)/Math.PI;return"translate("+(a+i)/2+","+(o+s)/2+") rotate("+r+")"})).attr("dx",n.dx).attr("dy",n.dy).text(n.caption)}}))},t.annotationRangeFlag=function(){return Ce().prop("x",Zt).prop("y0",Zt).prop("y1",Zt).render((function(t){var r=e.select(this),n=r.props(),a=Nt(De,n.x),o=Nt(De,n.y0),i=Nt(De,n.y1);r.selectAll(".sszvis-rangeFlag__mark.bottom").data(t).call(We("bottom",a,o)),r.selectAll(".sszvis-rangeFlag__mark.top").data(t).call(We("top",a,i));var s=Ne().position((function(t){return[a(t),De((n.y0(t)+n.y1(t))/2)]}));r.call(s)}))},t.annotationRangeRuler=function(){return Ce().prop("x",Zt).prop("y0",Zt).prop("y1",Zt).prop("top").prop("bottom").prop("label").prop("removeStroke").label(Zt("")).prop("total").prop("flip",Zt).flip(!1).render((function(t){var r=e.select(this),n=r.props(),a=Nt(De,n.x),o=Nt(De,n.y0),i=Nt(De,n.y1),s=function(t){return De((n.y0(t)+n.y1(t))/2)},l=r.selectAll(".sszvis-rangeRuler__rule").data([0]),c=l.enter().append("line").classed("sszvis-rangeRuler__rule",!0);l.exit().remove(),(l=l.merge(c)).attr("x1",a).attr("y1",n.top).attr("x2",a).attr("y2",n.bottom);var u=r.selectAll(".sszvis-rangeRuler--mark").data(t),p=u.enter().append("g").classed("sszvis-rangeRuler--mark",!0);u.exit().remove(),u=u.merge(p),p.append("circle").classed("sszvis-rangeRuler__p1",!0),p.append("circle").classed("sszvis-rangeRuler__p2",!0),p.append("text").classed("sszvis-rangeRuler__label-contour",!0),p.append("text").classed("sszvis-rangeRuler__label",!0),u.selectAll(".sszvis-rangeRuler__p1").data((function(t){return[t]})).attr("cx",a).attr("cy",o).attr("r",1.5),u.selectAll(".sszvis-rangeRuler__p2").data((function(t){return[t]})).attr("cx",a).attr("cy",i).attr("r",1.5),u.selectAll(".sszvis-rangeRuler__label").data((function(t){return[t]})).attr("x",(function(t){var e=n.flip(t)?-10:10;return a(t)+e})).attr("y",s).attr("dy","0.35em").style("text-anchor",(function(t){return n.flip(t)?"end":"start"})).text(Nt(Ye,n.label)),u.selectAll(".sszvis-rangeRuler__label-contour").data((function(t){return[t]})).attr("x",(function(t){var e=n.flip(t)?-10:10;return a(t)+e})).attr("y",s).attr("dy","0.35em").style("text-anchor",(function(t){return n.flip(t)?"end":"start"})).text(Nt(Ye,n.label)),r.selectAll("g.sszvis-rangeRuler--mark").each((function(){var t=e.select(this),r=t.select("text").node(),o=t.select(".sszvis-rangeRuler__label-contour");o.empty()?(o=e.select(r.cloneNode()).classed("sszvis-rangeRuler__label-contour",!0).classed("sszvis-rangeRuler__label",!1),this.insertBefore(o.node(),r)):o.attr("x",(function(t){var e=n.flip(t)?-10:10;return a(t)+e})).attr("y",s).attr("dy","0.35em").style("text-anchor",(function(t){return n.flip(t)?"end":"start"})),o.text(r.textContent)})),n.removeStroke||u.attr("stroke","white").attr("stroke-width",.5).attr("stroke-opacity",.75);var d=r.selectAll(".sszvis-rangeRuler__total").data([Yt(t)]),f=d.enter().append("text").classed("sszvis-rangeRuler__total",!0);d.exit().remove(),(d=d.merge(f)).attr("x",(function(t){var e=n.flip(t)?-10:10;return a(t)+e})).attr("y",n.top-10).style("text-anchor",(function(t){return n.flip(t)?"end":"start"})).text("Total "+Ye(n.total));var h=d.node(),v=r.select(".sszvis-rangeRuler__total-contour");v.empty()?(v=e.select(h.cloneNode()).classed("sszvis-rangeRuler__total-contour",!0).classed("sszvis-rangeRuler__total",!1),this.insertBefore(v.node(),h)):v.attr("x",(function(t){var e=n.flip(t)?-10:10;return a(t)+e})).attr("y",n.top-10).style("text-anchor",(function(t){return n.flip(t)?"end":"start"})),v.text(h.textContent),n.removeStroke||d.attr("stroke","white").attr("stroke-width",.5).attr("stroke-opacity",.75)}))},t.annotationRectangle=function(){return Ce().prop("x",Zt).prop("y",Zt).prop("width",Zt).prop("height",Zt).prop("dx",Zt).prop("dy",Zt).prop("caption",Zt).render((function(t){var r=e.select(this),n=r.props();ee(r,"pattern","data-area-pattern").call(Oe);var a=r.selectAll(".sszvis-dataarearectangle").data(t),o=a.enter().append("rect").classed("sszvis-dataarearectangle",!0);if((a=a.merge(o)).attr("x",n.x).attr("y",n.y).attr("width",n.width).attr("height",n.height).attr("fill","url(#data-area-pattern)"),n.caption){var i=r.selectAll(".sszvis-dataarearectangle__caption").data(t),s=i.enter().append("text").classed("sszvis-dataarearectangle__caption",!0);(i=i.merge(s)).attr("x",(function(t,e){return n.x(t,e)+n.width(t,e)/2})).attr("y",(function(t,e){return n.y(t,e)+n.height(t,e)/2})).attr("dx",n.dx).attr("dy",n.dy).text(n.caption)}}))},t.annotationRuler=function(){return Ce().prop("top").prop("bottom").prop("x",Zt).prop("y",Zt).prop("label").label(Zt("")).prop("color").prop("flip",Zt).flip(!1).prop("labelId",Zt).prop("reduceOverlap").reduceOverlap(!0).render((function(t){var r=e.select(this),n=r.props(),a=n.labelId||function(t){return n.x(t)+"_"+n.y(t)},o=r.selectAll(".sszvis-ruler__rule").data(t,a),i=o.enter().append("line").classed("sszvis-ruler__rule",!0);o.exit().remove(),(o=o.merge(i)).attr("x1",Nt(De,n.x)).attr("y1",n.y).attr("x2",Nt(De,n.x)).attr("y2",n.bottom);var s=r.selectAll(".sszvis-ruler__dot").data(t,a),l=s.enter().append("circle").classed("sszvis-ruler__dot",!0);s.exit().remove(),(s=s.merge(l)).attr("cx",Nt(De,n.x)).attr("cy",Nt(De,n.y)).attr("r",3.5).attr("fill",n.color);var c=r.selectAll(".sszvis-ruler__label-outline").data(t,a),u=c.enter().append("text").classed("sszvis-ruler__label-outline",!0);c.exit().remove(),c=c.merge(u);var p=r.selectAll(".sszvis-ruler__label").data(t,a),d=p.enter().append("text").classed("sszvis-ruler__label",!0);p.exit().remove(),p=p.merge(d);var f=Nt(De,n.x),h=Nt(De,n.y),v=r.selectAll(".sszvis-ruler__label, .sszvis-ruler__label-outline").attr("transform",(function(t){var e=f(t),r=h(t),a=n.flip(t)?-10:10,o=r<n.top+o?2*o:r>n.bottom-o?0:5;return je(e+a,r+o)})).style("text-anchor",(function(t){return n.flip(t)?"end":"start"})).html(n.label);if(n.reduceOverlap){var m=10,g=[],y={};for(v.attr("y",""),p.each((function(t){var e=this.getBoundingClientRect(),r={top:e.top,bottom:e.bottom,dy:0};g.push(r),y[a(t)]=r})),g.sort((function(t,r){return e.ascending(t.top,r.top)}));m--;)g.forEach((function(t,e){g.slice(e+1).forEach((function(e){var r=t.bottom-e.top;if(r>=2){var n=r/2;t.bottom-=n,t.top-=n,t.dy-=n,e.bottom+=n,e.top+=n,e.dy+=n}}))}));v.attr("y",(function(t){return y[a(t)].dy}))}}))},t.app=({init:t,render:e,actions:r={},fallback:n})=>{var a,o;ar(or(t),'An "init" function returning a Promise must be provided.'),ar(or(e),'A "render" function must be provided.');var i=Object.keys(r).reduce((t,e)=>(t[e]=t=>{l(e,t)},t),{});function s(t){a||(a=!0,requestAnimationFrame(()=>{e(o,i),a=!1})),or(t)&&t(l)}function l(t,e){ar(null!=r[t],'Action "'.concat(t,'" is not defined, add it to "actions".'));var n=$(o),a=r[t](n,e);o=Q(n),s(a)}var c=$({});t(c).then(t=>{o=Q(c),s(t),nr.on("resize",s)}).catch(t=>{ar(!1,t),n&&tr(n.element,{src:n.src})})},t.arity=jt,t.aspectRatio=yr,t.aspectRatio12to5=kr,t.aspectRatio16to10=xr,t.aspectRatio4to3=br,t.aspectRatioAuto=Ar,t.aspectRatioPortrait=wr,t.aspectRatioSquare=_r,t.axisX=Mr,t.axisY=Br,t.bar=on,t.bounds=$r,t.breakpointCreateSpec=ur,t.breakpointDefaultSpec=dr,t.breakpointFind=ir,t.breakpointFindByName=sr,t.breakpointLap=hr,t.breakpointMatch=cr,t.breakpointPalm=fr,t.breakpointTest=lr,t.buttonGroup=function(){return Ce().prop("values").prop("current").prop("width").width(300).prop("change").change(Bt).render((function(){var t=e.select(this),r=t.props(),n=r.width/r.values.length,a=t.selectAll(".sszvis-control-optionSelectable").data(["sszvis-control-buttonGroup"],(function(t){return t})),o=a.enter().append("div").classed("sszvis-control-optionSelectable",!0).classed("sszvis-control-buttonGroup",!0);a.exit().remove(),(a=a.merge(o)).style("width",r.width+"px");var i=a.selectAll(".sszvis-control-buttonGroup__item").data(r.values),s=i.enter().append("div").classed("sszvis-control-buttonGroup__item",!0);i.exit().remove(),(i=i.merge(s)).style("width",n+"px").classed("selected",(function(t){return t===r.current})).text((function(t){return t})).on("click",r.change)}))},t.cascade=tn,t.choropleth=function(){var t=e.dispatch("over","out","click"),r=Rn(),n=Bn(),a=Dn(),o=Mn(),i=Ce().prop("width").prop("height").prop("keyName").keyName("geoId").prop("withLake").withLake(!0).prop("anchoredShape").prop("features").prop("borders").prop("lakeFeatures").prop("lakeBorders").prop("lakeFadeOut").lakeFadeOut(!1).delegate("defined",r).delegate("fill",r).delegate("transitionColor",r).delegate("borderColor",n).delegate("strokeWidth",n).delegate("highlight",o).delegate("highlightStroke",o).delegate("highlightStrokeWidth",o).delegate("lakePathColor",a).render((function(i){var s=e.select(this),l=s.props(),c=En(l.width,l.height,l.features,"zurichStadtfeatures"),u=Tn(i,l.features,l.keyName);r.geoJson(l.features).mergedData(u).mapPath(c),n.geoJson(l.borders).mapPath(c),a.lakeFeature(l.lakeFeatures).lakeBounds(l.lakeBorders).mapPath(c).fadeOut(l.lakeFadeOut),o.geoJson(l.features).keyName(l.keyName).mapPath(c),s.call(r).call(n),l.withLake&&s.call(a),s.call(o),l.anchoredShape&&(l.anchoredShape.mergedData(u).mapPath(c),s.call(l.anchoredShape)),s.selectAll("[data-event-target]").on("mouseover",(function(e){t.call("over",this,e.datum)})).on("mouseout",(function(e){t.call("out",this,e.datum)})).on("click",(function(e){t.call("click",this,e.datum)}))}));return i.on=function(){var e=t.on.apply(t,arguments);return e===t?i:e},i},t.colorLegendDimensions=zn,t.colorLegendLayout=function({legendLabels:t,axisLabels:r=[],slant:n="horizontal"},a){var o=zn(t,Yr(a).width),i=t.length>6?ne().domain(t):ae().domain(t),s=wn().scale(i).horizontalFloat(o.horizontalFloat).rows(o.rows).columnWidth(o.columnWidth).orientation(o.orientation),l=function(t,r){switch(t){case"vertical":return 40+e.max(r,qr);case"diagonal":return 40+Math.sqrt(2*Math.pow(e.max(r,qr)/2,2));default:return 60}}(n,r),c=21*o.rows;return{axisLabelPadding:l,legendPadding:c,bottomPadding:l+c,legendWidth:o.legendWidth,legend:s,scale:i}},t.compose=Nt,t.contains=function(t,e){return t.indexOf(e)>=0},t.createHtmlLayer=function(t,r,n){r||(r=$r()),n||(n={});var a="data-sszvis-html-"+(n.key||"default"),o=Lt(t)?t:e.select(t);o.classed("sszvis-outer-container",!0);var i=o.selectAll("[data-sszvis-html-layer]["+a+"]").data([0]),s=i.enter().append("div").classed("sszvis-html-layer",!0).attr("data-sszvis-html-layer","").attr(a,"");return(i=i.merge(s)).style("position","absolute").style("left",r.padding.left+"px").style("top",r.padding.top+"px"),i},t.createSvgLayer=function(t,r,n){r||(r=$r()),n||(n={});var a="data-sszvis-svg-"+(n.key||"default"),o=n.title||"",i=n.description||"",s=(Lt(t)?t:e.select(t)).selectAll("svg["+a+"]").data([0]),l=s.enter().append("svg");l.classed("sszvis-svg-layer",!0).attr(a,"").attr("role","img").attr("aria-label",o+" – "+i),l.append("title").text(o),l.append("desc").text(i).classed("sszvis-svg-layer",!0).attr(a,"").attr("role","img"),s.merge(l).attr("height",r.height).attr("width",r.width);var c=s.merge(l).selectAll("[data-sszvis-svg-layer]").data((function(){return[0]})),u=c.enter().append("g").attr("data-sszvis-svg-layer","");return c.merge(u).attr("transform","translate("+r.padding.left+","+r.padding.top+")"),c.merge(u)},t.dataAreaPattern=Oe,t.defaultTransition=rn,t.defined=Wt,t.derivedSet=function(t,e){e||(e=Bt);for(var r,n,a=[],o=[],i=0,s=t.length;i<s;++i)n=e(r=t[i],i,t),a.indexOf(n)<0&&(a.push(n),o.push(r));return o},t.dimensionsHeatTable=function(t,e,r,n,a){a||(a={}),a.top||(a.top=0),a.right||(a.right=0),a.bottom||(a.bottom=0),a.left||(a.left=0);var o=t-a.left-a.right,i=Math.min((o-e*(r-1))/r,30),s=i+e,l=r*s-e;return{side:i,paddedSide:s,padRatio:1-i/s,width:l,height:n*s-e,centeredOffset:Math.max((o-l)/2,0)}},t.dimensionsHorizontalBarChart=function(t){var e=24*t+20*(t-1);return{barHeight:24,padHeight:20,padRatio:1-24/44,outerRatio:0,axisOffset:-22,barGroupHeight:e,totalHeight:e+0}},t.dimensionsVerticalBarChart=function(t,e){var r=e-1,n=t*(1-.7)/((1-.7)*r+.7*e),a=(t-n*r)/e;a>48&&(n=(t-(a=48)*e)/r),n<2&&(n=2),n>100&&(n=100);var o=a*e+n*r;return{barWidth:a,padWidth:n,padRatio:1-a/(a+n),outerRatio:(t-o)/2/(a+n),barGroupWidth:o,totalWidth:t}},t.dot=function(){return Ce().prop("x",Zt).prop("y",Zt).prop("radius").prop("stroke").prop("fill").prop("transition").transition(!0).render((function(t){var r=e.select(this),n=r.props(),a=r.selectAll(".sszvis-circle").data(t);a.exit().remove(),a.enter().append("circle").classed("sszvis-circle",!0).attr("cx",n.x).attr("cy",n.y).attr("r",n.radius).merge(a).attr("stroke",n.stroke).attr("fill",n.fill),n.transition&&(a=a.transition(rn())),a.attr("cx",n.x).attr("cy",n.y).attr("r",n.radius);var o=Ne().position((function(t){return[n.x(t),n.y(t)]}));r.call(o)}))},t.ensureDefsElement=ee,t.every=function(t,e){for(var r=0;r<e.length;r++)if(!t(e[r]))return!1;return!0},t.fallbackCanvasUnsupported=function(){return!!!document.createElement("canvas").getContext},t.fallbackRender=tr,t.fallbackUnsupported=function(){return!(!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)},t.fastTransition=function(){return e.transition().ease(en).duration(50)},t.filledArray=It,t.find=Ht,t.first=Gt,t.firstTouch=Ut,t.fitTooltip=function(t,e){var r=Math.min(1*e.innerWidth/4,100),n=Math.max(3*e.innerWidth/4,e.innerWidth-100);return function(e){var a=e.x;return a>n?"right":a<r?"left":t}},t.flatten=function(t){return Array.prototype.concat.apply([],t)},t.foldPattern=function(t,e){var r=e[t];if("function"==typeof r)return r();throw new Error("[foldPattern] No definition provided for key: "+t)},t.formatAge=function(t){return String(Math.round(t))},t.formatAxisTimeFormat=Ue,t.formatFractionPercent=function(t){return Ye(100*t)+" %"},t.formatMonth=Je,t.formatNone=function(){return""},t.formatNumber=Ye,t.formatPercent=function(t){return Ye(t)+" %"},t.formatPreciseNumber=Ke,t.formatText=qe,t.formatYear=Ve,t.functor=Zt,t.getGeoJsonCenter=On,t.groupedBars=function(){return Ce().prop("groupScale").prop("groupSize").prop("groupWidth").prop("groupSpace").groupSpace(.05).prop("y",Zt).prop("height").prop("fill").prop("stroke").prop("defined",Zt).defined(!0).render((function(t){var r=e.select(this),n=r.props(),a=e.scaleBand().domain(e.range(n.groupSize)).padding(n.groupSpace).paddingOuter(0).rangeRound([0,n.groupWidth]),o=r.selectAll("g.sszvis-bargroup").data(t),i=o.enter().append("g").classed("sszvis-bargroup",!0);o.exit().remove();var s=(o=o.merge(i)).selectAll("g.sszvis-barunit").data((function(t){return t})),l=s.enter().append("g").classed("sszvis-barunit",!0);s.exit().remove(),(s=s.merge(l)).each((function(t,e){t.__sszvisGroupedBarIndex__=e}));var c=s.filter(n.defined);c.selectAll("*").remove(),c.attr("transform",(function(){return je(0,0)})),c.append("rect").classed("sszvis-bar",!0).attr("fill",n.fill).attr("x",(function(t){return n.groupScale(t)+a(t.__sszvisGroupedBarIndex__)})).attr("y",n.y).attr("width",a.bandwidth()).attr("height",n.height);var u=s.filter(Kt(n.defined));u.selectAll("*").remove(),u.attr("transform",(function(t,e){return je(n.groupScale(t)+a(t.__sszvisGroupedBarIndex__)+a.bandwidth()/2,n.y(t,e))})),u.append("line").classed("sszvis-bar--missing line1",!0).attr("x1",-4).attr("y1",-4).attr("x2",4).attr("y2",4),u.append("line").classed("sszvis-bar--missing line2",!0).attr("x1",4).attr("y1",-4).attr("x2",-4).attr("y2",4);var p=Ne().position((function(t){var e=0,r=1/0;return t.forEach((function(t,o){e+=n.groupScale(t)+a(t.__sszvisGroupedBarIndex__)+a.bandwidth()/2,r=Math.min(r,n.y(t,o))})),[e/t.length,r]}));r.call(p)}))},t.halfPixel=De,t.handleRuler=function(){return Ce().prop("x",Zt).prop("y",Zt).prop("top").prop("bottom").prop("label").label(Zt("")).prop("color").prop("flip",Zt).flip(!1).render((function(t){var r=e.select(this),n=r.props(),a=Nt(De,n.x),o=Nt(De,n.y),i=n.bottom-4,s=n.top-24,l=r.selectAll(".sszvis-handleRuler__group").data([0]),c=l.enter().append("g").classed("sszvis-handleRuler__group",!0);l.exit().remove(),l=l.merge(c),c.append("line").classed("sszvis-ruler__rule",!0),c.append("rect").classed("sszvis-handleRuler__handle",!0),c.append("line").classed("sszvis-handleRuler__handle-mark",!0),l.selectAll(".sszvis-ruler__rule").attr("x1",a).attr("y1",De(n.top)).attr("x2",a).attr("y2",De(i)),l.selectAll(".sszvis-handleRuler__handle").attr("x",(function(t){return a(t)-5})).attr("y",De(s)).attr("width",10).attr("height",24).attr("rx",2).attr("ry",2),l.selectAll(".sszvis-handleRuler__handle-mark").attr("x1",a).attr("y1",De(s+24*.15)).attr("x2",a).attr("y2",De(s+20.4));var u=l.selectAll(".sszvis-ruler__dot").data(t),p=u.enter().append("circle").classed("sszvis-ruler__dot",!0);u.exit().remove(),(u=u.merge(p)).attr("cx",a).attr("cy",o).attr("r",3.5).attr("fill",n.color);var d=r.selectAll(".sszvis-ruler__label-outline").data(t),f=d.enter().append("text").classed("sszvis-ruler__label-outline",!0);d.exit().remove(),d=d.merge(f);var h=r.selectAll(".sszvis-ruler__label").data(t),v=h.enter().append("text").classed("sszvis-ruler__label",!0);h.exit().remove(),h=h.merge(v),r.selectAll(".sszvis-ruler__label, .sszvis-ruler__label-outline").attr("transform",(function(t){var e=Nt(De,n.x)(t),r=Nt(De,n.y)(t),a=n.flip(t)?-10:10,o=r<n.top+o?2*o:r>n.bottom-o?0:5;return je(e+a,r+o)})).style("text-anchor",(function(t){return n.flip(t)?"end":"start"})).html(n.label)}))},t.hashableSet=function(t,e){e||(e=Bt);for(var r,n={},a=[],o=0,i=t.length;o<i;++o)n[r=e(t[o],o,t)]||(n[r]=!0,a.push(r));return a},t.heatTableMissingValuePattern=function(t){var e=ye();t.attr("patternUnits","objectBoundingBox").attr("patternContentUnits","objectBoundingBox").attr("x",0).attr("y",0).attr("width",1).attr("height",1),t.append("rect").attr("x",0).attr("y",0).attr("width",1).attr("height",1).attr("fill",e),t.append("line").attr("x1",.35).attr("y1",.35).attr("x2",.65).attr("y2",.65).attr("stroke-width",.035).attr("stroke","#A4A4A4"),t.append("line").attr("x1",.65).attr("y1",.35).attr("x2",.35).attr("y2",.65).attr("stroke-width",.035).attr("stroke","#A4A4A4")},t.identity=Bt,t.isFunction=function(t){return"function"==typeof t},t.isNull=Jt,t.isNumber=function(t){return"[object Number]"===Object.prototype.toString.call(t)&&!Number.isNaN(t)},t.isObject=Vt,t.isSelection=Lt,t.isString=Dt,t.last=Yt,t.layoutPopulationPyramid=function(t,e){for(var r=Math.min(wr(t),480),n=1*(e-1),a=Math.round((r-n)/e),o=e*(a=Math.max(a,2))+n,i=o-a,s=a+1,l=[];i>=0;)l.push(i),i-=s;var c=Math.min(t/2,.8*wr.MAX_HEIGHT/2);return{barHeight:a,padding:1,totalHeight:o,positions:l,maxBarLength:c,chartPadding:Math.max((t-2*c)/2,1)}},t.layoutSmallMultiples=function(){return Ce().prop("width").prop("height").prop("paddingX").prop("paddingY").prop("rows").prop("cols").render((function(t){var r=e.select(this),n=r.props(),a=(n.width-n.paddingX*(n.cols-1))/n.cols,o=(n.height-n.paddingY*(n.rows-1))/n.rows,i=a/2,s=o/2,l=r.selectAll("g.sszvis-multiple").data(t),c=l.enter().append("g").classed("sszvis-g sszvis-multiple",!0);l.exit().remove();var u=(l=l.merge(c)).selectAll("g.sszvis-multiple-chart").data((function(t){return[t.values]})),p=u.enter().append("g").classed("sszvis-multiple-chart",!0);u.exit().remove(),u=u.merge(p),l.datum((function(t,e){return t.gx=e%n.cols*(a+n.paddingX),t.gw=a,t.cx=i,t.gy=Math.floor(e/n.cols)*(o+n.paddingY),t.gh=o,t.cy=s,t})).attr("transform",(function(t){return"translate("+t.gx+","+t.gy+")"}))}))},t.layoutStackedAreaMultiples=function(t,e,r){r||(r=.1);for(var n=t/(e-r),a=n*(1-r),o=a,i=[];o-t<1;)i.push(o),o+=n;return{range:i,bandHeight:a,padHeight:n*r}},t.legendColorBinned=function(){return Ce().prop("scale").prop("displayValues").prop("endpoints").prop("width").width(200).prop("labelFormat").labelFormat(Bt).render((function(){var t=e.select(this),r=t.props();if(!r.scale)return Pr("legend.binnedColorScale - a scale must be specified.");if(!r.displayValues)return Pr("legend.binnedColorScale - display values must be specified.");if(!r.endpoints)return Pr("legend.binnedColorScale - endpoints must be specified");var n=[0,r.width-10],a=e.scaleLinear().domain(r.endpoints).range(n),o=0,i=[],s=r.endpoints[0];r.displayValues.forEach((function(t){var e=a(t)-o,n=o%1;i.push({x:Math.floor(5+o),w:e+n,c:r.scale(s),p:t}),o+=e,s=t})),i.push({x:Math.floor(5+o),w:n[1]-o,c:r.scale(s)});var l=t.selectAll("circle.sszvis-legend__circle").data(r.endpoints),c=l.enter().append("circle").classed("sszvis-legend__circle",!0);(l=l.merge(c)).exit().remove(),l.attr("r",5).attr("cy",5).attr("cx",(function(t,e){return 0===e?5:r.width-5})).attr("fill",r.scale);var u=t.selectAll("rect.sszvis-legend__crispmark").data(i),p=u.enter().append("rect").classed("sszvis-legend__crispmark",!0);(u=u.merge(p)).exit().remove(),u.attr("x",(function(t){return t.x})).attr("y",0).attr("width",(function(t){return t.w})).attr("height",10).attr("fill",(function(t){return t.c}));var d=i.slice(0,-1),f=t.selectAll("line.sszvis-legend__crispmark").data(d),h=f.enter().append("line").classed("sszvis-legend__crispmark",!0);f.merge(h),f.exit().remove(),f.attr("x1",(function(t){return De(t.x+t.w)})).attr("x2",(function(t){return De(t.x+t.w)})).attr("y1",11).attr("y2",16).attr("stroke","#B8B8B8");var v=t.selectAll(".sszvis-legend__axislabel").data(d),m=v.enter().append("text").classed("sszvis-legend__axislabel",!0);(v=v.merge(m)).exit().remove(),v.style("text-anchor","middle").attr("transform",(function(t){return"translate("+(t.x+t.w)+",30)"})).text((function(t){return r.labelFormat(t.p)}))}))},t.legendColorLinear=function(){return Ce().prop("scale").prop("displayValues").displayValues([]).prop("width").width(200).prop("segments").segments(8).prop("labelText").prop("labelFormat").labelFormat(Bt).render((function(){var t=e.select(this),r=t.props();if(!r.scale)return Pr("legend.linearColorScale - a scale must be specified."),!1;var n=r.scale.domain(),a=r.displayValues;!a.length&&r.scale.ticks&&(a=r.scale.ticks(r.segments-1)),a.push(Yt(n));var o=a.length>0?r.width/a.length:0,i=t.selectAll("rect.sszvis-legend__mark").data(a),s=i.enter().append("rect").classed("sszvis-legend__mark",!0);i.exit().remove(),(i=i.merge(s)).attr("x",(function(t,e){return e*o-1})).attr("y",0).attr("width",o+1).attr("height",10).attr("fill",(function(t){return r.scale(t)}));var l=[Gt(n),Yt(n)],c=r.labelText||l,u=t.selectAll("circle.ssvis-legend--mark").data(l),p=u.enter().append("circle").attr("class","ssvis-legend--mark");u.exit().remove(),(u=u.merge(p)).attr("cx",(function(t,e){return e*r.width})).attr("cy",5).attr("r",5).attr("fill",(function(t){return r.scale(t)}));var d=t.selectAll(".sszvis-legend__label").data(c),f=d.enter().append("text").classed("sszvis-legend__label",!0);d.exit().remove(),d=d.merge(f);d.style("text-anchor",(function(t,e){return 0===e?"end":"start"})).attr("dy","0.35em").attr("transform",(function(t,e){return"translate("+(e*r.width+16*(0===e?-1:1))+", 5)"})).text((function(t,e){return r.labelFormat(t,e)}))}))},t.legendColorOrdinal=wn,t.legendRadius=function(){return Ce().prop("scale").prop("tickFormat").tickFormat(Bt).prop("tickValues").render((function(){var t=e.select(this),r=t.props(),n=r.scale.domain(),a=r.tickValues||[n[1],r.scale.invert(e.mean(r.scale.range())),n[0]],o=Tr(r.scale)[1],i=t.selectAll("g.sszvis-legend__elementgroup").data([0]),s=i.enter().append("g").attr("class","sszvis-legend__elementgroup");(i=i.merge(s)).attr("transform",je(De(o),De(o)));var l=i.selectAll("circle.sszvis-legend__greyline").data(a),c=l.enter().append("circle").classed("sszvis-legend__greyline",!0);function u(t){return o-2*r.scale(t)}l.exit().remove(),(l=l.merge(c)).attr("r",r.scale).attr("stroke-width",1).attr("cy",(function(t){return o-r.scale(t)}));var p=i.selectAll("line.sszvis-legend__dashedline").data(a),d=p.enter().append("line").classed("sszvis-legend__dashedline",!0);p.exit().remove(),(p=p.merge(d)).attr("x1",0).attr("y1",u).attr("x2",o+15).attr("y2",u);var f=i.selectAll(".sszvis-legend__label").data(a),h=f.enter().append("text").attr("class","sszvis-legend__label sszvis-legend__label--small");f.exit().remove(),(f=f.merge(h)).attr("dx",o+18).attr("y",u).attr("dy","0.35em").text(r.tickFormat)}))},t.line=function(){return Ce().prop("x").prop("y").prop("stroke").prop("strokeWidth").prop("defined").prop("key").key((function(t,e){return e})).prop("valuesAccessor").valuesAccessor(Bt).prop("transition").transition(!0).render((function(t){var r=e.select(this),n=r.props(),a=e.line().defined(void 0!==n.defined?n.defined:Nt(Kt(isNaN),n.y)).x(n.x).y(n.y),o=r.selectAll(".sszvis-line").data(t,n.key),i=o.enter().append("path").classed("sszvis-line",!0).style("stroke",n.stroke);(o=o.merge(i)).exit().remove(),o.order(),n.transition&&(o=o.transition(rn())),o.attr("d",Nt(a,n.valuesAccessor)).style("stroke",n.stroke).style("stroke-width",n.strokeWidth)}))},t.loadError=function(t){Pr(t)},t.locale=Ie,t.mapLakeFadeGradient=Ee,t.mapLakeGradientMask=Te,t.mapLakePattern=Fe,t.mapMissingValuePattern=Pe,t.mapRendererBase=Rn,t.mapRendererBubble=function(){var t=e.dispatch("over","out","click"),r=Ce().prop("mergedData").prop("mapPath").prop("radius",Zt).prop("fill",Zt).prop("strokeColor",Zt).strokeColor("#ffffff").prop("strokeWidth",Zt).strokeWidth(1).prop("transition").transition(!0).render((function(){var r=e.select(this),n=r.props(),a=Nt(n.radius,Cn),o=r.selectGroup("anchoredCircles").selectAll(".sszvis-anchored-circle").data(n.mergedData,(function(t){return t.geoJson.id}));if(o.enter().append("circle").attr("class","sszvis-anchored-circle sszvis-anchored-circle--entering").attr("r",a).on("mouseover",(function(e){t.call("over",this,e.datum)})).on("mouseout",(function(e){t.call("out",this,e.datum)})).on("click",(function(e){t.call("click",this,e.datum)})).merge(o).attr("transform",(function(t){var e=n.mapPath.projection()(On(t.geoJson));return je(e[0],e[1])})).style("fill",(function(t){return n.fill(t.datum)})).style("stroke",(function(t){return n.strokeColor(t.datum)})).style("stroke-width",(function(t){return n.strokeWidth(t.datum)})).sort((function(t,e){return n.radius(e.datum)-n.radius(t.datum)})),o.classed("sszvis-anchored-circle--entering",!1),n.transition){var i=rn();o.exit().transition(i).attr("r",0).remove(),o.transition(i).attr("r",a)}else o.exit().remove(),o.attr("r",a)}));return r.on=function(){var e=t.on.apply(t,arguments);return e===t?r:e},r},t.mapRendererGeoJson=function(){var t=e.dispatch("over","out","click"),r=Ce().prop("dataKeyName").dataKeyName("geoId").prop("geoJsonKeyName").geoJsonKeyName("id").prop("geoJson").prop("mapPath").prop("defined",Zt).defined(!0).prop("fill",Zt).fill("black").prop("stroke",Zt).stroke("black").prop("strokeWidth",Zt).strokeWidth(1.25).prop("transitionColor").transitionColor(!0).render((function(r){var n=e.select(this),a=n.props();ee(n,"pattern","missing-pattern").call(Pe);var o=qt(a.dataKeyName),i=qt(a.geoJsonKeyName),s=r.reduce((function(t,e){return t[o(e)]=e,t})),l=a.geoJson.features.map((function(t){return{geoJson:t,datum:s[i(t.properties)]}}));function c(t){return Wt(t.datum)&&a.defined(t.datum)?a.fill(t.datum):"url(#missing-pattern)"}var u=n.selectAll(".sszvis-map__geojsonelement").data(l),p=u.enter().append("path").classed("sszvis-map__geojsonelement",!0).attr("data-event-target","").attr("fill",c);u.exit().remove(),u=u.merge(p),n.selectAll(".sszvis-map__geojsonelement--undefined").attr("fill",c),u.classed("sszvis-map__geojsonelement--undefined",(function(t){return!Wt(t.datum)||!a.defined(t.datum)})).attr("d",(function(t){return a.mapPath(t.geoJson)})),a.transitionColor?u.transition().call(nn).attr("fill",c):u.attr("fill",c),u.attr("stroke",(function(t){return Wt(t.datum)&&a.defined(t.datum)?a.stroke(t.datum):""})).attr("stroke-width",a.strokeWidth),n.selectAll("[data-event-target]").on("mouseover",(function(e){t.over(e.datum)})).on("mouseout",(function(e){t.out(e.datum)})).on("click",(function(e){t.click(e.datum)}));var d=Ne().position((function(t){t.geoJson.properties||(t.geoJson.properties={});var r=t.geoJson.properties.sphericalCentroid;return r||(t.geoJson.properties.sphericalCentroid=r=e.geoCentroid(t.geoJson)),a.mapPath.projection()(r)}));n.selectGroup("tooltipAnchors").datum(l).call(d)}));return r.on=function(){var e=t.on.apply(t,arguments);return e===t?r:e},r},t.mapRendererHighlight=Mn,t.mapRendererImage=function(){return Ce().prop("projection").prop("src").prop("geoBounds").prop("opacity").opacity(1).render((function(){var t=e.select(this),r=t.props(),n=t.selectAll(".sszvis-map__image").data([0]),a=n.enter().append("img").classed("sszvis-map__image",!0);n.exit().remove(),n=n.merge(a);var o=r.projection(r.geoBounds[0]),i=r.projection(r.geoBounds[1]);n.attr("src",r.src).style("left",Math.round(o[0])+"px").style("top",Math.round(o[1])+"px").style("width",Math.round(i[0]-o[0])+"px").style("height",Math.round(i[1]-o[1])+"px").style("opacity",r.opacity)}))},t.mapRendererMesh=Bn,t.mapRendererPatternedLakeOverlay=Dn,t.mapRendererRaster=function(){return Ce().prop("debug").debug(!1).prop("width").prop("height").prop("position").prop("cellSide").cellSide(2).prop("fill",Zt).prop("opacity").opacity(1).render((function(t){var r=e.select(this),n=r.props(),a=r.selectAll(".sszvis-map__rasterimage").data([0]),o=a.enter().append("canvas").classed("sszvis-map__rasterimage",!0);a.exit().remove(),(a=a.merge(o)).attr("width",n.width).attr("height",n.height).style("opacity",n.opacity);var i=a.node().getContext("2d");i.clearRect(0,0,n.width,n.height),n.debug&&(i.fillStyle="rgba(255, 0, 0, 0.2)",i.fillRect(0,0,n.width,n.height));var s=n.cellSide/2;t.forEach((function(t){var e=n.position(t);i.fillStyle=n.fill(t),i.fillRect(e[0]-s,e[1]-s,n.cellSide,n.cellSide)}))}))},t.measureAxisLabel=qr,t.measureDimensions=Yr,t.measureLegendLabel=Xr,t.measureText=Kr,t.memoize=te,t.modularTextHTML=Hn,t.modularTextSVG=Gn,t.move=jr,t.muchDarker=function(t){return e.hsl(t).darker(.7)},t.not=Kt,t.panning=function(){var t=e.dispatch("start","pan","end"),r=Ce().prop("elementSelector").render((function(){var r=e.select(this),n=r.props();r.selectAll(n.elementSelector).attr("data-sszvis-behavior-pannable","").classed("sszvis-interactive",!0).on("mouseenter",(function(){t.apply("start",this,arguments)})).on("mousemove",(function(){t.apply("pan",this,arguments)})).on("mouseleave",(function(){t.apply("end",this,arguments)})).on("touchstart",(function(e){e.preventDefault(),t.apply("start",this,arguments)})).on("touchmove",(function(e){e.preventDefault();var r=Hr(Ut(e));null!==r?t.apply("pan",this,arguments):t.apply("end",this,arguments)})).on("touchend",(function(){t.apply("end",this,arguments)}))}));return r.on=function(){var e=t.on.apply(t,arguments);return e===t?r:e},r},t.parseDate=function(t){return jn(t)},t.parseNumber=function(t){return""===t.trim()?NaN:+t},t.parseYear=function(t){return Nn(t)},t.pie=function(){return Ce().prop("radius").prop("fill").prop("stroke").prop("angle",Zt).render((function(t){var r=e.select(this),n=r.props(),a=n.stroke||"#FFFFFF",o=0;t.forEach((function(t){t._a0=o,isNaN(t.a0)&&(t.a0=o),o+=n.angle(t),t._a1=o,isNaN(t.a1)&&(t.a1=o)}));var i=e.arc().innerRadius(4).outerRadius(n.radius).startAngle((function(t){return t.a0})).endAngle((function(t){return t.a1})),s=r.selectAll(".sszvis-path").each((function(e,r){t[r]&&(t[r].a0=e.a0,t[r].a1=e.a1)})).data(t),l=s.enter().append("path").classed("sszvis-path",!0).attr("transform","translate("+n.radius+","+n.radius+")").attr("fill",n.fill).attr("stroke",a);s.exit().remove(),(s=s.merge(l)).transition(rn()).attr("transform","translate("+n.radius+","+n.radius+")").attrTween("d",(function(t){var r=e.interpolate(t.a0,t._a0),n=e.interpolate(t.a1,t._a1);return function(e){return t.a0=r(e),t.a1=n(e),i(t)}})).attr("fill",n.fill).attr("stroke",a);var c=Ne().position((function(t){var e=t.a0+Math.abs(t.a1-t.a0)/2-Math.PI/2,r=2*n.radius/3;return[n.radius+Math.cos(e)*r,n.radius+Math.sin(e)*r]}));r.datum(t).call(c)}))},t.pixelsFromGeoDistance=function(t,e,r){var n=r/(2*Math.PI*6367475)*360/2,a=[[e[0]-n,e[1]-n],[e[0]+n,e[1]+n]].map(t);return(Math.abs(a[1][0]-a[0][0])+Math.abs(a[1][1]-a[0][1]))/2},t.prepareMergedGeoData=Tn,t.prop=qt,t.propOr=Xt,t.pyramid=function(){return Ce().prop("barHeight",Zt).prop("barWidth",Zt).prop("barPosition",Zt).prop("barFill",Zt).barFill("#000").prop("tooltipAnchor").tooltipAnchor([.5,.5]).prop("leftAccessor").prop("rightAccessor").prop("leftRefAccessor").prop("rightRefAccessor").render((function(t){var r=e.select(this),n=r.props(),a=on().x((function(t){return-.5-n.barWidth(t)})).y(n.barPosition).height(n.barHeight).width(n.barWidth).fill(n.barFill).tooltipAnchor(n.tooltipAnchor),o=on().x(.5).y(n.barPosition).height(n.barHeight).width(n.barWidth).fill(n.barFill).tooltipAnchor(n.tooltipAnchor),i=sn().barPosition(n.barPosition).barWidth(n.barWidth).mirror(!0),s=sn().barPosition(n.barPosition).barWidth(n.barWidth);r.selectGroup("left").datum(n.leftAccessor(t)).call(a),r.selectGroup("right").datum(n.rightAccessor(t)).call(o),r.selectGroup("leftReference").datum(n.leftRefAccessor?[n.leftRefAccessor(t)]:[]).call(i),r.selectGroup("rightReference").datum(n.rightRefAccessor?[n.rightRefAccessor(t)]:[]).call(s)}))},t.range=Tr,t.responsiveProps=function(){var t=dr(),e={};function r(r){if(!(Vt(r)&&(n=r,Wt(n)&&Wt(n.width)&&Wt(n.screenWidth)&&Wt(n.screenHeight))))return Sr("Could not determine the current breakpoint, returning the default props"),Object.keys(e).reduce((function(t,e,r){return t[r]=e._,t}),{});var n,a=cr(t,r);return Object.keys(e).reduce((function(n,o){var i=e[o];if(!function(t,e){if(!Wt(t._))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&"_"!==r&&!Wt(sr(e,r)))return!1;return!0}(i,t))return Sr('responsiveProps was given an invalid propSpec for property: "'+o+'". The spec: ',i),n;var s=Ht((function(t){return Wt(i[t.name])}),a);return n[o]=i[s.name](r.width),n}),{})}return r.prop=function(t,n){var a;return e[t]=(a=n,Object.keys(a).reduce((function(t,e){return t[e]=Zt(a[e]),t}),{})),r},r.breakpoints=function(e){return 0===arguments.length?t:(t=ur(e),r)},r},t.roundTransformString=function(t){var e=Nt(Math.floor,Number);return t.replace(/(translate\()\s*([0-9., ]+)\s*(\))/i,(function(t,r,n,a){return r+n.replace(","," ").replace(/\s+/," ").split(" ").map(e).join(",")+a}))},t.sankey=function(){return Ce().prop("sizeScale").prop("columnPosition").prop("nodeThickness").prop("nodePadding").prop("columnPadding",Zt).prop("columnLabel",Zt).columnLabel("").prop("columnLabelOffset",Zt).columnLabelOffset(0).prop("linkCurvature").linkCurvature(.5).prop("nodeColor",Zt).prop("linkColor",Zt).prop("linkSort",Zt).linkSort((function(t,e){return t.value-e.value})).prop("labelSide",Zt).labelSide("left").prop("labelSideSwitch").prop("labelOpacity",Zt).labelOpacity(1).prop("labelHitBoxSize").labelHitBoxSize(0).prop("nameLabel").nameLabel(Bt).prop("linkSourceLabels").linkSourceLabels([]).prop("linkTargetLabels").linkTargetLabels([]).prop("linkLabel",Zt).render((function(t){var r=e.select(this),n=r.props(),a=qt("id"),o=function(t){return Math.floor(n.columnPadding(t.columnIndex)+n.sizeScale(t.valueOffset)+n.nodePadding*t.nodeIndex)},i=function(t){return n.columnPosition(t.columnIndex)},s=function(t){return o(t)},l=function(){return Math.max(n.nodeThickness,1)},c=function(t){return Math.ceil(Math.max(n.sizeScale(t.value),1))},u=on().x(i).y(s).width(l).height(c).fill(n.nodeColor),p=r.selectGroup("nodes").datum(t.nodes);p.call(u);var d=Ne().position((function(t){return[i(t)+l()/2,s(t)+c(t)/2]}));p.call(d);var f=function(t){return n.columnPosition(t)+n.nodeThickness/2},h=p.selectAll(".sszvis-sankey-column-label").data(t.columnLengths),v=h.enter().append("text").attr("class","sszvis-sankey-label sszvis-sankey-weak-label sszvis-sankey-column-label");(h=h.merge(v)).exit().remove(),h.attr("transform",(function(t,e){return je(f(e)+n.columnLabelOffset(t,e),-24)})).text((function(t,e){return n.columnLabel(e)}));var m=p.selectAll(".sszvis-sankey-column-label-tick").data(t.columnLengths),g=m.enter().append("line").attr("class","sszvis-sankey-column-label-tick");(m=m.merge(g)).exit().remove(),m.attr("x1",(function(t,e){return De(f(e))})).attr("x2",(function(t,e){return De(f(e))})).attr("y1",De(-16)).attr("y2",De(-12));var y=function(t){return[n.columnPosition(t.src.columnIndex)+n.nodeThickness+1,n.columnPosition(t.tgt.columnIndex)-1,o(t.src)+n.sizeScale(t.srcOffset)+n.sizeScale(t.value)/2,o(t.tgt)+n.sizeScale(t.tgtOffset)+n.sizeScale(t.value)/2]},b=function(t){var e,r,n,a,o=y(t);return e=o[0],r=o[1],n=o[2],a=o[3],[e,r,n,a]},x=r.selectGroup("links"),k=x.selectAll(".sszvis-link").data(t.links,a),_=k.enter().append("path").attr("class","sszvis-link");(k=k.merge(_)).exit().remove(),k.attr("fill","none").attr("d",(function(t){var r,a,o,i,s,l,c=y(t),u=e.interpolateNumber(c[0],c[1]),p=u(n.linkCurvature),d=u(1-n.linkCurvature);return r=c[0],a=p,o=d,i=c[1],s=c[2],l=c[3],"M"+r+","+s+"C"+a+","+s+" "+o+","+l+" "+i+","+l})).attr("stroke-width",(function(t){return Math.max(n.sizeScale(t.value),1)})).attr("stroke",n.linkColor).sort(n.linkSort),x.datum(t.links);var w=Ne().position((function(t){var e=b(t);return[(e[0]+e[1])/2,(e[2]+e[3])/2]}));x.call(w);var z=r.selectGroup("linklabels"),A=z.selectAll(".sszvis-sankey-link-source-label").data(n.linkSourceLabels),S=A.enter().append("text").attr("class","sszvis-sankey-label sszvis-sankey-strong-label sszvis-sankey-link-source-label");(A=A.merge(S)).exit().remove(),A.attr("transform",(function(t){var e=b(t);return je(e[0]+6,e[2])})).text(n.linkLabel);var P=z.selectAll(".sszvis-sankey-link-target-label").data(n.linkTargetLabels),F=P.enter().append("text").attr("class","sszvis-sankey-label sszvis-sankey-strong-label sszvis-sankey-link-target-label");(P=P.merge(F)).exit().remove(),P.attr("transform",(function(t){var e=b(t);return je(e[1]-6,e[3])})).text(n.linkLabel);var E=function(t){var e=n.labelSide(t);return n.labelSideSwitch&&(e="left"===e?"right":"left"),e},T=r.selectGroup("nodelabels"),O=T.selectAll(".sszvis-sankey-node-label").data(t.nodes),C=O.enter().append("text").attr("class","sszvis-sankey-label sszvis-sankey-weak-label sszvis-sankey-node-label");(O=O.merge(C)).exit().remove(),O.text((function(t){return n.nameLabel(t.id)})).attr("text-align","middle").attr("text-anchor",(function(t){return"left"===E(t.columnIndex)?"end":"start"})).attr("x",(function(t){return"left"===E(t.columnIndex)?i(t)-6:i(t)+n.nodeThickness+6})).attr("y",(function(t){return s(t)+c(t)/2})).style("opacity",n.labelOpacity);var R=T.selectAll(".sszvis-sankey-hitbox").data(t.nodes),M=R.enter().append("rect").attr("class","sszvis-sankey-hitbox");(R=R.merge(M)).exit().remove(),R.attr("fill","transparent").attr("x",(function(t){return i(t)+("left"===E(t.columnIndex)?-n.labelHitBoxSize:0)})).attr("y",(function(t){return s(t)-n.nodePadding/2})).attr("width",n.labelHitBoxSize+n.nodeThickness).attr("height",(function(t){return c(t)+n.nodePadding}))}))},t.sankeyLayout=function(t,r,n,a){var o=e.min(t.map((function(t){var e=.15*n/(t-1);return Math.max(12,Math.min(50,e))}))),i=e.min(t.map((function(t,e){return Math.max(1,n-(t-1)*o)/r[e]}))),s=o/i,l=o,c=e.max(r),u=t.map((function(t,e){return r[e]*i+(t-1)*l})),p=e.max(u),d=t.map((function(t,e){return(p-u[e])/2})),f=[0,c],h=[0,c*i],v=t.length;return{valuePadding:s,nodePadding:l,columnPaddings:d,valueDomain:f,valueRange:h,nodeThickness:20,columnDomain:[0,1],columnRange:[0,(a-20)/(v-1)]}},t.sankeyPrepareData=function(){var t=Bt,r=Bt,n=Bt,a=[],o=qt("value"),i=function(t,r){return e.ascending(o(t),o(r))},s=function(t,r){return e.descending(o(t),o(r))},l=s,c=function(i){var c=a.reduce((function(t,e,r){return e.forEach((function(e){t.has(e)&&Sr("Duplicate column member id passed to sszvis.layout.sankey.prepareData.column:",e,"The existing value will be overwritten");var n={id:e,columnIndex:r,nodeIndex:0,value:0,valueOffset:0,linksFrom:[],linksTo:[]};t.set(e,n)})),t}),new Map),u=i.map((function(e){var a=t(e),o=r(e),i=+n(e)||0,s=c.get(a),l=c.get(o);if(!s)return Sr("Found invalid source column id:",a),null;if(!l)return Sr("Found invalid target column id:",o),null;var u={id:Pn(),value:i,src:s,srcOffset:0,tgt:l,tgtOffset:0};return s.linksFrom.push(u),l.linksTo.push(u),u})),p=[...c.values()],d=p.reduce((function(t,r){var n=e.sum(r.linksFrom,o),a=e.sum(r.linksTo,o);return r.value=Math.max(0,n,a),t[r.columnIndex]+=r.value,t}),It(a.length,0)),f=a.map((function(t){return t.length}));return p.sort(l),u.sort(s),p.reduce((function(t,e){return e.valueOffset=t[0][e.columnIndex],e.nodeIndex=t[1][e.columnIndex],t[0][e.columnIndex]+=e.value,t[1][e.columnIndex]+=1,t}),[It(a.length,0),It(a.length,0)]),p.forEach((function(t){t.linksFrom.sort((function(t,e){return t.tgt.nodeIndex-e.tgt.nodeIndex})),t.linksTo.sort((function(t,e){return t.src.nodeIndex-e.src.nodeIndex})),t.linksFrom.reduce((function(t,e){return e.srcOffset=t,t+o(e)}),0),t.linksTo.reduce((function(t,e){return e.tgtOffset=t,t+o(e)}),0)})),{nodes:p,links:u,columnTotals:d,columnLengths:f}};return c.apply=function(t){return c(t)},c.source=function(e){return t=e,c},c.target=function(t){return r=t,c},c.value=function(t){return n=t,c},c.descendingSort=function(){return l=s,c},c.ascendingSort=function(){return l=i,c},c.idLists=function(t){return a=t,c},c},t.scaleDeepGry=we,t.scaleDimGry=ke,t.scaleDivNtr=ve,t.scaleDivNtrGry=me,t.scaleDivVal=fe,t.scaleDivValGry=he,t.scaleGry=xe,t.scaleLightGry=ye,t.scaleMedGry=_e,t.scalePaleGry=be,t.scaleQual12=ne,t.scaleQual6=ae,t.scaleQual6a=oe,t.scaleQual6b=ie,t.scaleSeqBlu=le,t.scaleSeqBrn=pe,t.scaleSeqGrn=ue,t.scaleSeqRed=ce,t.selectMenu=function(){return Ce().prop("values").prop("current").prop("width").width(300).prop("change").change(Bt).render((function(){var t=e.select(this),r=t.props(),n=t.selectAll(".sszvis-control-optionSelectable").data(["sszvis-control-select"],(function(t){return t})),a=n.enter().append("div").classed("sszvis-control-optionSelectable",!0).classed("sszvis-control-select",!0);n.exit().remove(),(n=n.merge(a)).style("width",r.width+"px");var o=n.selectDiv("selectMetrics").classed("sszvis-control-select__metrics",!0),i=n.selectAll(".sszvis-control-select__element").data([1]),s=i.enter().append("select").classed("sszvis-control-select__element",!0).on("change",(function(){var t=e.select(this).property("value");r.change(r.values[t]),setTimeout((function(){window.focus()}),0)}));(i=i.merge(s)).style("width",r.width+30+"px");var l=i.selectAll("option").data(r.values),c=l.enter().append("option");l.exit().remove(),l.merge(c).attr("selected",(function(t){return t===r.current?"selected":null})).attr("value",(function(t,e){return e})).text((function(t){return function(t,e,r){var n=function(r,a){t.text(r);var o=Math.ceil(t.node().clientWidth);return a<1e3&&o>e?n(r.slice(0,r.length-2)+"…",a+1):r};return n(r,0)}(o,r.width-40,t)}))}))},t.set=$t,t.slider=function(){return Ce().prop("scale").prop("value").prop("onchange").prop("minorTicks").minorTicks([]).prop("majorTicks").majorTicks([]).prop("tickLabels",Zt).tickLabels(Bt).prop("label",Zt).label(Bt).render((function(){var t=e.select(this),r=t.props(),n=De(18),a=r.scale.domain(),o=Tr(r.scale),i=r.scale.copy().range([o[0]+5.5,o[1]-5.5]),s=t.selectAll("g.sszvis-control-slider__backgroundgroup").data([1]),l=s.enter().append("g").classed("sszvis-control-slider__backgroundgroup",!0);(s=s.merge(l)).exit().remove();var c=Mr().scale(i).orient("bottom").hideBorderTickThreshold(0).tickSize(12).tickPadding(6).tickValues($t([].concat(r.majorTicks,r.minorTicks))).tickFormat((function(t){return _n(t,r.majorTicks)?r.tickLabels(t):""})),u=s.selectAll("g.sszvis-axisGroup").data([1]),p=u.enter().append("g").classed("sszvis-axisGroup sszvis-axis sszvis-axis--bottom sszvis-axis--slider",!0);(u=u.merge(p)).attr("transform",je(0,28)).call(c),u.selectAll(".tick line").filter((function(t){return!_n(t,r.majorTicks)})).attr("y2",4);var d=u.selectAll(".tick text").filter((function(t){return _n(t,r.majorTicks)})),f=d.size();d.style("text-anchor",(function(t,e){return 0===e?"start":e===f-1?"end":"middle"}));var h=s.selectAll("g.sszvis-slider__background").data([1]),v=h.enter().append("g").classed("sszvis-slider__background",!0);(h=h.merge(v)).attr("transform",je(0,n));var m=h.selectAll(".sszvis-slider__background__bg1").data([1]),g=m.enter().append("line").classed("sszvis-slider__background__bg1",!0).style("stroke-width",6).style("stroke","#888").style("stroke-linecap","round");(m=m.merge(g)).attr("x1",Math.ceil(o[0]+3)).attr("x2",Math.floor(o[1]-3));var y=h.selectAll(".sszvis-slider__background__bg2").data([1]),b=y.enter().append("line").classed("sszvis-slider__background__bg2",!0).style("stroke-width",5).style("stroke","#fff").style("stroke-linecap","round");(y=y.merge(b)).attr("x1",Math.ceil(o[0]+3)).attr("x2",Math.floor(o[1]-3));var x=h.selectAll(".sszvis-slider__backgroundshadow").data([r.value]),k=x.enter().append("line").attr("class","sszvis-slider__backgroundshadow").attr("stroke-width",5).style("stroke","#E0E0E0").style("stroke-linecap","round");(x=x.merge(k)).attr("x1",Math.ceil(o[0]+3)).attr("x2",Nt(Math.floor,i));var _=t.selectAll("g.sszvis-control-slider__handle").data([r.value]);_.exit().remove();var w=_.enter().append("g").classed("sszvis-control-slider__handle",!0);(_=_.merge(w)).attr("transform",(function(t){return je(De(i(t)),.5)})),w.append("text").classed("sszvis-control-slider--label",!0),_.selectAll(".sszvis-control-slider--label").data((function(t){return[t]})).text(r.label).style("text-anchor",(function(t){return Qt(t,a[0])?"start":Qt(t,a[1])?"end":"middle"})).attr("dx",(function(t){return Qt(t,a[0])?-5:Qt(t,a[1])?5:0})),w.append("rect").classed("sszvis-control-slider__handlebox",!0).attr("x",-5).attr("y",n-11.5).attr("width",10).attr("height",23).attr("rx",2).attr("ry",2);w.append("line").classed("sszvis-control-slider__handleline",!0).attr("y1",n-7.5).attr("y2",n+7.5);var z=jr().xScale(r.scale).yScale(e.scaleLinear().range([-11,40])).draggable(!0).on("drag",r.onchange);t.selectGroup("sliderInteraction").classed("sszvis-control-slider--interactionLayer",!0).attr("transform",je(0,4)).call(z)}))},t.slightlyDarker=function(t){return e.hsl(t).darker(.4)},t.slowTransition=nn,t.some=function(t,e){for(var r=0;r<e.length;r++)if(t(e[r]))return!0;return!1},t.stackedArea=function(){return Ce().prop("x").prop("y0").prop("y1").prop("fill").prop("stroke").prop("strokeWidth").prop("defined").prop("key").key((function(t,e){return e})).prop("transition").transition(!0).render((function(t){var r=e.select(this),n=r.props(),a=e.area().defined(void 0!==n.defined?n.defined:function(){return Nt(Kt(isNaN),n.y0)&&Nt(Kt(isNaN),n.y1)}).x(n.x).y0(n.y0).y1(n.y1),o=r.selectAll("path.sszvis-path").data(t,n.key),i=o.enter().append("path").classed("sszvis-path",!0);o.exit().remove(),o=o.merge(i),n.transition&&(o=o.transition(rn())),o.attr("d",a).attr("fill",n.fill).attr("stroke",n.stroke||"#ffffff").attr("stroke-width",void 0!==n.strokeWidth?n.strokeWidth:1)}))},t.stackedAreaMultiples=function(){return Ce().prop("x").prop("y0").prop("y1").prop("fill").prop("stroke").prop("strokeWidth").prop("defined").prop("key").key((function(t,e){return e})).prop("valuesAccessor").valuesAccessor(Bt).prop("transition").transition(!0).render((function(t){var r=e.select(this),n=r.props();t=t.slice().reverse();var a=e.area().defined(void 0!==n.defined?n.defined:function(){return Nt(Kt(isNaN),n.y0)&&Nt(Kt(isNaN),n.y1)}).x(n.x).y0(n.y0).y1(n.y1),o=r.selectAll("path.sszvis-path").data(t,n.key),i=o.enter().append("path").classed("sszvis-path",!0);o.exit().remove(),o=i.merge(o),n.transition&&(o=o.transition(rn())),o.attr("d",Nt(a,n.valuesAccessor)).attr("fill",n.fill).attr("stroke",n.stroke).attr("stroke-width",void 0!==n.strokeWidth?n.strokeWidth:1)}))},t.stackedBarHorizontal=function(){return hn(vn)},t.stackedBarHorizontalData=dn,t.stackedBarVertical=function(){return hn(mn)},t.stackedBarVerticalData=fn,t.stackedPyramid=function(){return Ce().prop("barHeight",Zt).prop("barWidth",Zt).prop("barPosition",Zt).prop("barFill",Zt).barFill("#000").prop("tooltipAnchor").tooltipAnchor([.5,.5]).prop("leftAccessor").prop("rightAccessor").prop("leftRefAccessor").prop("rightRefAccessor").render((function(t){var r=e.select(this),n=r.props(),a=on().x((function(t){return-.5-n.barWidth(t[1])})).y(Nt(n.barPosition,yn)).height(n.barHeight).width((function(t){return n.barWidth(t[1])-n.barWidth(t[0])})).fill(Nt(n.barFill,gn)).tooltipAnchor(n.tooltipAnchor),o=on().x((function(t){return.5+n.barWidth(t[0])})).y(Nt(n.barPosition,yn)).height(n.barHeight).width((function(t){return n.barWidth(t[1])-n.barWidth(t[0])})).fill(Nt(n.barFill,gn)).tooltipAnchor(n.tooltipAnchor),i=bn().stackElement(a),s=bn().stackElement(o),l=xn().barPosition(n.barPosition).barWidth(n.barWidth).mirror(!0),c=xn().barPosition(n.barPosition).barWidth(n.barWidth);r.selectGroup("leftStack").datum(n.leftAccessor(t)).call(i),r.selectGroup("rightStack").datum(n.rightAccessor(t)).call(s),r.selectGroup("leftReference").datum(n.leftRefAccessor?[n.leftRefAccessor(t)]:[]).call(l),r.selectGroup("rightReference").datum(n.rightRefAccessor?[n.rightRefAccessor(t)]:[]).call(c)}))},t.stackedPyramidData=function(t,r,n,a){return function(o){var i=tn().arrayBy(t).arrayBy(r).objectBy(n).apply(o).map((function(r){var n=Object.keys(r[0]),o=t(r[0][n[0]][0]),i=e.stack().keys(n).value((function(t,e){return a(t[e][0])}))(r);return i.forEach((function(t,e){t.forEach((function(t,r){return t.data=t.data[n[e]][0],t.series=n[e],t.side=o,t.row=r,t.value=a(t.data),t}))})),i}));return i.maxValue=e.max(i,(function(t){return e.max(t,(function(t){return e.max(t,(function(t){return t[1]}))}))})),i}},t.stringEqual=Qt,t.sunburst=function(){return Ce().prop("angleScale").angleScale(e.scaleLinear().range([0,2*Math.PI])).prop("radiusScale").prop("centerRadius").prop("fill").prop("stroke").stroke("white").render((function(t){var r=e.select(this),n=r.props();var a=function(t){return Math.max(0,Math.min(kn,n.angleScale(t.x0)))},o=function(t){return Math.max(0,Math.min(kn,n.angleScale(t.x1)))},i=function(t){return n.centerRadius+Math.max(0,n.radiusScale(t.y0))},s=function(t){return n.centerRadius+Math.max(0,n.radiusScale(t.y1))},l=e.arc().startAngle(a).endAngle(o).innerRadius(i).outerRadius(s);t.forEach((function(t){t._x0=t.x0,t._x1=t.x1}));var c=r.selectAll(".sszvis-sunburst-arc").each((function(e,r){t[r]&&(t[r].x0=e.x0,t[r].x1=e.x1)})).data(t),u=c.enter().append("path").attr("class","sszvis-sunburst-arc");c.exit().remove(),(c=c.merge(u)).attr("stroke",n.stroke).attr("fill",(function t(r){if(r.data.isSunburstRoot)return"transparent";if(r.parent){if(r.parent.data.isSunburstRoot)return e.hsl(n.fill(r.data.key));var a=t(r.parent);return a.l*=1.15,a}return Sr("Data passed to sszvis.component.sunburst does not have the expected tree structure. You should prepare it using sszvis.format.sunburst.prepareData"),e.hsl(n.fill(r.data.key))})),c.transition(rn()).attrTween("d",(function(t){var r=e.interpolate(t.x0,t._x0),n=e.interpolate(t.x1,t._x1);return function(e){return t.x0=r(e),t.x1=n(e),l(t)}}));var p=Ne().position((function(t){var e=a(t),r=o(t),n=e+Math.abs(r-e)/2-Math.PI/2,l=(i(t)+s(t))/2;return[Math.cos(n)*l,Math.sin(n)*l]}));r.call(p)}))},t.sunburstGetRadiusExtent=function(t){return[e.min(t,(function(t){return t.y0})),e.max(t,(function(t){return t.y1}))]},t.sunburstLayout=function(t,e){var r=e/2,n=r/3;return{centerRadius:n,numLayers:t,ringWidth:Math.max(10,Math.min(60,(r-n)/t))}},t.sunburstPrepareData=function(){var t=[],r=Bt,n=function(){return 0};function a(a){var o=function t(e){return Array.from(e,([e,r])=>({key:e,values:r.size?t(r):void 0,value:r.size?void 0:r}))}(e.rollup(a,Gt,...t));console.log(o);var i=e.hierarchy({isSunburstRoot:!0,values:o},qt("values")).sort(n).sum((function(t){return t.value?r(t.value):0}));return e.partition()(i),function t(e){return[].concat.apply([e],(e.children||[]).map(t))}(i).filter((function(t){return!t.data.isSunburstRoot}))}return a.calculate=function(t){return a(t)},a.layer=function(e){return t.push(e),a},a.value=function(t){return r=t,a},a.sort=function(t){return n=t,a},a},t.swissMapPath=En,t.swissMapProjection=Fn,t.textWrap=Or,t.tooltip=function(){var t=Qe();return Ce().delegate("header",t).delegate("body",t).delegate("orientation",t).delegate("dx",t).delegate("dy",t).delegate("opacity",t).prop("renderInto").prop("visible",Zt).visible(!1).renderSelection((function(e){var r=e.props(),n=r.renderInto.node().getBoundingClientRect(),a=[];e.each((function(t){if(r.visible(t)){var e=this.getBoundingClientRect(),o=[e.left-n.left,e.top-n.top];a.push({datum:t,x:o[0],y:o[1]})}})),r.renderInto.datum(a).call(t)}))},t.tooltipAnchor=Ne,t.transformTranslateSubpixelShift=Le,t.translateString=je,t.viewport=nr,t.voronoi=function(){var t=e.dispatch("over","out"),r=Ce().prop("x").prop("y").prop("bounds").prop("debug").render((function(r){var n=e.select(this),a=n.props();if(!a.bounds)return Pr("behavior.voronoi - requires bounds"),!1;var o=e.Delaunay.from(r,t=>a.x(t),t=>a.y(t)),i=o.voronoi(a.bounds),s=n.selectAll("[data-sszvis-behavior-voronoi]").data(i.cellPolygons()),l=s.enter().append("path").attr("data-sszvis-behavior-voronoi","").attr("data-sszvis-behavior-pannable","").attr("class","sszvis-interactive");s.exit().remove(),(s=s.merge(l)).attr("d",(function(t){return"M"+t.join("L")+"Z"})).attr("fill","transparent").on("mouseover",(function(e){var n=this.parentNode.getBoundingClientRect(),i=o.find(e.clientX,e.clientY);Ur(e,[n.left+a.x(r[i]),n.top+a.y(r[i])])&&t.apply("over",this,[r[i]])})).on("mousemove",(function(e){var n=this.parentNode.getBoundingClientRect(),i=o.find(e.clientX,e.clientY);Ur(e,[n.left+a.x(r[i]),n.top+a.y(r[i])])?t.apply("over",this,[r[i]]):t.apply("out",this,[])})).on("mouseout",(function(){t.apply("out",this,[])})).on("touchstart",(function(n){var i=this.parentNode.getBoundingClientRect(),s=o.find(n.clientX,n.clientY);if(Ur(Ut(n),[i.left+a.x(r[s]),i.top+a.y(r[s])])){n.preventDefault(),t.apply("over",this,[r[s]]);e.select(this).on("touchmove",(function(){var e=Ut(n),r=Wr(e),o=Ir(r);if(null!==o){var i=r.parentNode.getBoundingClientRect();Ur(e,[i.left+a.x(o.data),i.top+a.y(o.data)])?(n.cancelable&&n.preventDefault(),t.apply("over",this,[o.data])):t.apply("out",this,[])}else t.apply("out",this,[])})).on("touchend",(function(){t.apply("out",this,[]),e.select(this).on("touchmove",null).on("touchend",null)}))}})),a.debug&&s.attr("stroke","#f00")}));return r.on=function(){var e=t.on.apply(t,arguments);return e===t?r:e},r},t.widthAdaptiveMapPathStroke=function(t){return Math.min(Math.max(.8,t/400),1.1)},t.withAlpha=function(t,r){var n=e.rgb(t);return"rgba("+n.r+","+n.g+","+n.b+","+r+")"},Object.defineProperty(t,"__esModule",{value:!0})}));
