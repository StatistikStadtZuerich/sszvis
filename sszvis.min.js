/*! sszvis v2.6.8, Copyright 2014-present Statistik Stadt Zürich */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3")):"function"==typeof define&&define.amd?define(["exports","d3"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).sszvis={},t.d3)}(this,(function(t,e){"use strict";e.selection.prototype.selectDiv=function(t){var e=this.selectAll('[data-d3-selectdiv="'+t+'"]').data((function(t){return[t]})),r=e.enter().append("div").attr("data-d3-selectdiv",t).style("position","absolute");return e.merge(r)},e.selection.prototype.selectGroup=function(t){var e=this.selectAll('[data-d3-selectgroup="'+t+'"]').data((function(t){return[t]})),r=e.enter().append("g").attr("data-d3-selectgroup",t);return e.merge(r)};var r=function(t){return t},n=function(t){return"[object String]"===Object.prototype.toString.call(t)},a=function(t){return t instanceof e.selection},o=function(t,e){switch(t){case 0:return function(){return e.call(this)};case 1:return function(t){return e.call(this,t)};case 2:return function(t,r){return e.call(this,t,r)};case 3:return function(t,r,n){return e.call(this,t,r,n)};case 4:return function(t,r,n,a){return e.call(this,t,r,n,a)};case 5:return function(t,r,n,a,o){return e.call(this,t,r,n,a,o)};case 6:return function(t,r,n,a,o,i){return e.call(this,t,r,n,a,o,i)};case 7:return function(t,r,n,a,o,i,s){return e.call(this,t,r,n,a,o,i,s)};case 8:return function(t,r,n,a,o,i,s,l){return e.call(this,t,r,n,a,o,i,s,l)};case 9:return function(t,r,n,a,o,i,s,l,c){return e.call(this,t,r,n,a,o,i,s,l,c)};case 10:return function(t,r,n,a,o,i,s,l,c,u){return e.call(this,t,r,n,a,o,i,s,l,c,u)};default:return e}},i=function(){var t=arguments,e=arguments.length-1;return function(){for(var r=e,n=t[r].apply(this,arguments);r--;)n=t[r].call(this,n);return n}},s=function(t){return void 0!==t&&null!=t&&!Number.isNaN(t)},l=function(t,e){for(var r=new Array(t),n=0;n<t;++n)r[n]=e;return r},c=function(t,e){for(var r=0;r<e.length;r++)if(t(e[r]))return e[r]},u=function(t){return t[0]},p=function(t){return t.touches&&t.touches.length?t.touches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null},d=function(t){return null===t},f=function(t){return Object(t)===t},h=function(t){return t[t.length-1]},v=function(t){return function(){return!t.apply(this,arguments)}},g=function(t){return function(e){return e[t]}},m=function(t,e){return function(r){var n=void 0!==r?r[t]:void 0;return void 0!==n?n:e}},y=function(t,e){return e||(e=r),t.reduce((function(r,n,a){var o=e(n,a,t);return r.indexOf(o)<0?r.concat(o):r}),[])},b=function(t,e){return t.toString()===e.toString()},x=function(t){return"function"==typeof t?t:function(){return t}},_=function(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var i=t.apply(this,n);return r.cache=o.set(a,i)||o,i};return r.cache=new Map,r};function k(t,e,r){var n=function(t){var e=t.selectAll("defs").data([0]),r=e.enter().append("defs");return e.merge(r)}(t).selectAll(e+"#"+r).data([0]),a=n.enter().append(e).attr("id",r);return n.merge(a)}var z=.6;function A(t){return function(){return at(e.scaleOrdinal().range(t.map(it)).unknown(it(t[0])))}}const w="#3431DE",S="#0A8DF6",F="#23C3F1",P="#7B4FB7",M="#DB247D",C="#FB737E",R="#007C78",E="#1D942E",O="#99C32E",T="#9A5B01",D="#FF720C",L="#FBB900";var B=A([w,S,F,P,M,C,R,E,O,T,D,L]),W=A([w,M,E,L,F,D]),N=A([w,S,F,P,M,C]),j=A([R,E,O,T,D,L]);function H(t){return function(){return ot(e.scaleLinear().range(t.map(it)))}}var G=H(["#CADEFF","#5B6EFF","#211A8A"]),I=H(["#FED2EE","#ED408D","#7D0044"]),J=H(["#CFEED8","#34B446","#0C4B1F"]),Y=H(["#FCDDBB","#EA5D00","#611F00"]);function U(t){return function(){return function(t){return t=function(t){var r=t.domain;if(!t.range())return t;var n=t.range().length;return t.domain=function(t){if(!t)return r.call(this);for(var a=[],o=0;o<n;o++)a.push(e.quantile(t,o/(n-1)));return r.call(this,a)},t}(t),t.reverse=function(){return ot(t.copy().range(t.range().reverse()))},t}(e.scaleLinear().range(t.map(it)))}}var V=U(["#611F00","#A13200","#EA5D00","#FF9A54","#FCDDBB","#CADEFF","#89AFFF","#5B6EFF","#3431DE","#211A8A"]),K=U(["#782600","#CC4309","#FF720C","#FFBC88","#E4E0DF","#AECBFF","#6B8EFF","#3B51FF","#2F2ABB"]),X=U(["#7D0044","#C4006A","#ED408D","#FF83B9","#FED2EE","#CFEED8","#81C789","#34B446","#1A7F2D","#0C4B1F"]),q=U(["#A30059","#DB247D","#FF579E","#FFA8D0","#E4E0DF","#A8DBB1","#55BC5D","#1D942E","#10652A"]);function Q(t){return function(){return ot(e.scaleOrdinal().range(t.map(it)))}}var Z=Q(["#FAFAFA"]),$=Q(["#EAEAEA"]),tt=Q(["#D6D6D6"]),et=Q(["#B8B8B8"]),rt=Q(["#7C7C7C"]),nt=Q(["#545454"]);function at(t){return t.darker=function(){return at(t.copy().range(t.range().map(e.lab).map(st("darker",z))))},t.brighter=function(){return at(t.copy().range(t.range().map(e.lab).map(st("brighter",z))))},t.reverse=function(){return at(t.copy().range(t.range().reverse()))},t}function ot(t){return t=function(t){var r=t.domain;return t.domain=function(t){if(1===arguments.length){var n=[t[0],e.mean(t),t[1]];return r.call(this,n)}return r.apply(this,arguments)},t}(t),t.reverse=function(){return ot(t.copy().range(t.range().reverse()))},t}function it(t){return e.lab(t)}function st(t){var e=Array.prototype.slice.call(arguments,1);return function(r){return r[t].apply(r,e)}}var lt=function(t){var e="#CCCCCC";t.attr("patternUnits","userSpaceOnUse").attr("patternContentUnits","userSpaceOnUse").attr("x",0).attr("y",0).attr("width",14).attr("height",14),t.append("rect").attr("x",0).attr("y",0).attr("width",14).attr("height",14).attr("fill","#FAFAFA"),t.append("line").attr("x1",1).attr("y1",10).attr("x2",5).attr("y2",14).attr("stroke",e),t.append("line").attr("x1",5).attr("y1",10).attr("x2",1).attr("y2",14).attr("stroke",e),t.append("line").attr("x1",8).attr("y1",3).attr("x2",12).attr("y2",7).attr("stroke",e),t.append("line").attr("x1",12).attr("y1",3).attr("x2",8).attr("y2",7).attr("stroke",e)},ct=function(t){t.attr("patternUnits","userSpaceOnUse").attr("patternContentUnits","userSpaceOnUse").attr("x",0).attr("y",0).attr("width",6).attr("height",6),t.append("rect").attr("x",0).attr("y",0).attr("width",6).attr("height",6).attr("fill","#fff"),t.append("line").attr("x1",0).attr("y1",3).attr("x2",3).attr("y2",0).attr("stroke","#ddd").attr("stroke-linecap","square"),t.append("line").attr("x1",3).attr("y1",6).attr("x2",6).attr("y2",3).attr("stroke","#ddd").attr("stroke-linecap","square")},ut=function(t){t.attr("x1",0).attr("y1",0).attr("x2",.55).attr("y2",1).attr("id","lake-fade-gradient"),t.append("stop").attr("offset",.74).attr("stop-color","white").attr("stop-opacity",1),t.append("stop").attr("offset",.97).attr("stop-color","white").attr("stop-opacity",0)},pt=function(t){t.attr("maskContentUnits","objectBoundingBox"),t.append("rect").attr("fill","url(#lake-fade-gradient)").attr("width",1).attr("height",1)},dt=function(t){t.attr("patternUnits","userSpaceOnUse").attr("patternContentUnits","userSpaceOnUse").attr("x",0).attr("y",0).attr("width",6).attr("height",6),t.append("line").attr("x1",0).attr("y1",3).attr("x2",3).attr("y2",0).attr("stroke","#e6e6e6").attr("stroke-width",1.1),t.append("line").attr("x1",3).attr("y1",6).attr("x2",6).attr("y2",3).attr("stroke","#e6e6e6").attr("stroke-width",1.1)};function ft(){var t={},e=null,r=ht;function n(n){e&&(n.props=function(){return gt(t)},e.apply(n,vt(arguments))),n.each((function(){this.__props__=gt(t),r.apply(this,vt(arguments))}))}return n.prop=function(e,r){return r||(r=ht),n[e]=function(t,e,r){return r||(r=ht),function(){return arguments.length?(t[e]=r.apply(null,vt(arguments)),this):t[e]}}(t,e,r.bind(n)).bind(n),n},n.delegate=function(t,e){return n[t]=function(){var r=e[t].apply(e,vt(arguments));return 0===arguments.length?r:n},n},n.renderSelection=function(t){return e=t,n},n.render=function(t){return r=t,n},n}function ht(t){return t}function vt(t){return Array.prototype.slice.call(t)}function gt(t){var e={};for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}e.selection.prototype.props=function(){if(arguments.length)throw new Error("selection.props() does not accept any arguments");if(1!=this.size())throw new Error("only one group is supported");if(1!=this._groups[0].length)throw new Error("only one node is supported");return this._groups[0][0].__props__||{}};var mt=function(t){return Math.floor(t)+.5},yt=function(t){var e=i(Math.floor,Number),r=t.match(/(translate\()\s*([0-9.,\- ]+)\s*(\))/i)[2].replace(","," ").replace(/\s+/," ").split(" ").map(Number);1===r.length&&r.push([0]);var n=r.map(e);return[r[0]-n[0],r[1]-n[1]]};function bt(t,e){return"translate("+t+","+e+")"}function xt(){return ft().prop("position").position(x([0,0])).prop("debug").render((function(r){var n=e.select(this),a=n.props(),o=n.selectAll("[data-tooltip-anchor]").data(r),s=o.enter().append("rect").attr("height",1).attr("width",1).attr("fill","none").attr("stroke","none").attr("visibility","none").attr("data-tooltip-anchor","");if(o.exit().remove(),(o=o.merge(s)).attr("transform",i(t,a.position)),a.debug){var l=n.selectAll("[data-tooltip-anchor-debug]").data(r),c=l.enter().append("circle").attr("data-tooltip-anchor-debug","");l.exit().remove(),(l=l.merge(c)).attr("r",2).attr("fill","#fff").attr("stroke","#f00").attr("stroke-width",1.5).attr("transform",i(t,a.position))}}));function t(t){return bt.apply(null,t)}}function _t(t,e,r){return function(n){var a=n.enter().append("circle").classed("sszvis-rangeFlag__mark",!0).classed(t,!0);n.exit().remove(),(n=n.merge(a)).attr("r",3.5).attr("cx",e).attr("cy",r)}}var kt={decimal:".",thousands:" ",grouping:[3],currency:["CHF ",""],dateTime:"%a. %e. %B %X %Y",date:"%d.%m.%Y",time:"%H:%M:%S",periods:[],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]},zt=e.timeFormatLocale(kt).format,At=e.formatLocale(kt).format,wt=function(t){for(var e=[[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%H:%M",function(t){return t.getMinutes()}],["%H Uhr",function(t){return t.getHours()}],["%a., %d.",function(t){return t.getDay()&&1!=t.getDate()}],["%e. %b",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",function(){return!0}]],r=0;r<e.length;++r)if(e[r][1](t))return zt(e[r][0])(t)},St=i((function(t){return t.toUpperCase()}),zt("%b")),Ft=zt("%Y"),Pt=function(t){var e,r=Math.abs(t);return null==t||isNaN(t)?"–":r>=1e4?At(",.0f")(t):r>=100?(e=Math.min(1,Rt(t)),Et(At("."+e+"f")(t))):r>0?(e=Math.min(2,Rt(t)),Et(At("."+e+"f")(t))):At(".0f")(0)},Mt=function(t,e){return arguments.length>1?Mt(t)(e):function(e){var r=Math.abs(e);return r>=100&&r<1e4?At("."+t+"f")(e):At(",."+t+"f")(e)}},Ct=function(t){return String(t)};function Rt(t){return(String(Math.abs(t)).split(".")[1]||"").length}function Et(t){return t.replace(/(\.[0-9]*[1-9])0+$|\.0*$/,"$1")}var Ot=function(){return ft().prop("header").prop("body").prop("orientation",x).orientation("bottom").prop("dx",x).dx(1).prop("dy",x).dy(1).prop("opacity",x).opacity(1).renderSelection((function(t){var r=t.datum(),n=t.props(),a=s,o=a(n.header)&&!a(n.body)||!a(n.header)&&a(n.body),i=t.selectAll(".sszvis-tooltip").data(r);i.exit().remove();var l=i.enter().append("div");(i=i.merge(l)).style("pointer-events","none").style("opacity",n.opacity).style("padding-top",(function(t){return"top"===n.orientation(t)?"6px":null})).style("padding-right",(function(t){return"right"===n.orientation(t)?"6px":null})).style("padding-bottom",(function(t){return"bottom"===n.orientation(t)?"6px":null})).style("padding-left",(function(t){return"left"===n.orientation(t)?"6px":null})).classed("sszvis-tooltip",!0);var c=l.append("svg").attr("class","sszvis-tooltip__background").attr("height",0).attr("width",0),u=c.append("path");if(void 0!==window.SVGFEColorMatrixElement&&2==SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE){var p=c.append("filter").attr("id","sszvisTooltipShadowFilter").attr("height","150%");p.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",2),p.append("feComponentTransfer").append("feFuncA").attr("type","linear").attr("slope",.2);var d=p.append("feMerge");d.append("feMergeNode"),d.append("feMergeNode").attr("in","SourceGraphic"),u.attr("filter","url(#sszvisTooltipShadowFilter)")}else c.classed("sszvis-tooltip__background--fallback",!0);var f=l.append("div").classed("sszvis-tooltip__content",!0);f.append("div").classed("sszvis-tooltip__header",!0),f.append("div").classed("sszvis-tooltip__body",!0),i.select(".sszvis-tooltip__header").datum(g("datum")).html(n.header||x("")),i.select(".sszvis-tooltip__body").datum(g("datum")).html((function(t){var e=n.body?x(n.body)(t):"";return Array.isArray(e)?'<table class="sszvis-tooltip__body__table">'+e.map((function(t){return"<tr>"+t.map((function(t){return"<td>"+t+"</td>"})).join("")+"</tr>"})).join("")+"</table>":e})),t.selectAll(".sszvis-tooltip").classed("sszvis-tooltip--small",o).each((function(t){var r=e.select(this),a=r.node().getBoundingClientRect(),i=n.orientation.apply(this,arguments);switch(i){case"top":r.style("left",t.x-a.width/2+"px").style("top",t.y+n.dy(t)+"px");break;case"bottom":r.style("left",t.x-a.width/2+"px").style("top",t.y-n.dy(t)-a.height+"px");break;case"left":r.style("left",t.x+n.dx(t)+"px").style("top",t.y-a.height/2+"px");break;case"right":r.style("left",t.x-n.dx(t)-a.width+"px").style("top",t.y-a.height/2+"px")}var s=a.height+10,l=a.width+10;r.select(".sszvis-tooltip__background").attr("height",s).attr("width",l).style("left","-5px").style("top","-5px").select("path").attr("d",function(t,e,r,n){switch(r){case"top":t[1]=t[1]+6;break;case"bottom":e[1]=e[1]-6;break;case"left":t[0]=t[0]+6;break;case"right":e[0]=e[0]-6}function a(t){return t[0]}function o(t){return t[1]}function i(t,e,r,n,a,o,i){var s=r+(a-r)/2,l=n+(o-n)/2,c=[];return i&&n===o?c=r<a?["L",s-6,l,"L",s,l-6,"L",s+6,l]:["L",s+6,l,"L",s,l+6,"L",s-6,l]:i&&r===a&&(c=n<o?["L",s,l-6,"L",s+6,l,"L",s,l+6]:["L",s,l+6,"L",s-6,l,"L",s,l-6]),[].concat(["Q",t,e,r,n],c,["L",a,o])}return[["M",a(t),o(t)+n],i(a(t),o(t),a(t)+n,o(t),a(e)-n,o(t),"top"===r),i(a(e),o(t),a(e),o(t)+n,a(e),o(e)-n,"right"===r),i(a(e),o(e),a(e)-n,o(e),a(t)+n,o(e),"bottom"===r),i(a(t),o(e),a(t),o(e)-n,a(t),o(t)+n,"left"===r)].map((function(t){return t.join(" ")})).join(" ")}([5,5],[l-5,s-5],i,o?3:4))}))}))};var Tt=Symbol.for("immer-nothing"),Dt=Symbol.for("immer-draftable"),Lt=Symbol.for("immer-state");function Bt(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Wt=Object.getPrototypeOf;function Nt(t){return!!t&&!!t[Lt]}function jt(t){return!!t&&(Gt(t)||Array.isArray(t)||!!t[Dt]||!!t.constructor?.[Dt]||Vt(t)||Kt(t))}var Ht=Object.prototype.constructor.toString();function Gt(t){if(!t||"object"!=typeof t)return!1;const e=Wt(t);if(null===e)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===Ht}function It(t,e){0===Jt(t)?Reflect.ownKeys(t).forEach((r=>{e(r,t[r],t)})):t.forEach(((r,n)=>e(n,r,t)))}function Jt(t){const e=t[Lt];return e?e.type_:Array.isArray(t)?1:Vt(t)?2:Kt(t)?3:0}function Yt(t,e){return 2===Jt(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Ut(t,e,r){const n=Jt(t);2===n?t.set(e,r):3===n?t.add(r):t[e]=r}function Vt(t){return t instanceof Map}function Kt(t){return t instanceof Set}function Xt(t){return t.copy_||t.base_}function qt(t,e){if(Vt(t))return new Map(t);if(Kt(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=Gt(t);if(!0===e||"class_only"===e&&!r){const e=Object.getOwnPropertyDescriptors(t);delete e[Lt];let r=Reflect.ownKeys(e);for(let n=0;n<r.length;n++){const a=r[n],o=e[a];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[a]})}return Object.create(Wt(t),e)}{const e=Wt(t);if(null!==e&&r)return{...t};const n=Object.create(e);return Object.assign(n,t)}}function Qt(t,e=!1){return $t(t)||Nt(t)||!jt(t)||(Jt(t)>1&&(t.set=t.add=t.clear=t.delete=Zt),Object.freeze(t),e&&Object.entries(t).forEach((([t,e])=>Qt(e,!0)))),t}function Zt(){Bt(2)}function $t(t){return Object.isFrozen(t)}var te,ee={};function re(t){const e=ee[t];return e||Bt(0),e}function ne(){return te}function ae(t,e){e&&(re("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function oe(t){ie(t),t.drafts_.forEach(le),t.drafts_=null}function ie(t){t===te&&(te=t.parent_)}function se(t){return te={drafts_:[],parent_:te,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function le(t){const e=t[Lt];0===e.type_||1===e.type_?e.revoke_():e.revoked_=!0}function ce(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return void 0!==t&&t!==r?(r[Lt].modified_&&(oe(e),Bt(4)),jt(t)&&(t=ue(e,t),e.parent_||de(e,t)),e.patches_&&re("Patches").generateReplacementPatches_(r[Lt].base_,t,e.patches_,e.inversePatches_)):t=ue(e,r,[]),oe(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Tt?t:void 0}function ue(t,e,r){if($t(e))return e;const n=e[Lt];if(!n)return It(e,((a,o)=>pe(t,n,e,a,o,r))),e;if(n.scope_!==t)return e;if(!n.modified_)return de(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const e=n.copy_;let a=e,o=!1;3===n.type_&&(a=new Set(e),e.clear(),o=!0),It(a,((a,i)=>pe(t,n,e,a,i,r,o))),de(t,e,!1),r&&t.patches_&&re("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function pe(t,e,r,n,a,o,i){if(Nt(a)){const i=ue(t,a,o&&e&&3!==e.type_&&!Yt(e.assigned_,n)?o.concat(n):void 0);if(Ut(r,n,i),!Nt(i))return;t.canAutoFreeze_=!1}else i&&r.add(a);if(jt(a)&&!$t(a)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;ue(t,a),e&&e.scope_.parent_||"symbol"==typeof n||!Object.prototype.propertyIsEnumerable.call(r,n)||de(t,a)}}function de(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Qt(e,r)}var fe={get(t,e){if(e===Lt)return t;const r=Xt(t);if(!Yt(r,e))return function(t,e,r){const n=ge(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}(t,r,e);const n=r[e];return t.finalized_||!jt(n)?n:n===ve(t.base_,e)?(ye(t),t.copy_[e]=be(n,t)):n},has:(t,e)=>e in Xt(t),ownKeys:t=>Reflect.ownKeys(Xt(t)),set(t,e,r){const n=ge(Xt(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const n=ve(Xt(t),e),i=n?.[Lt];if(i&&i.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(((a=r)===(o=n)?0!==a||1/a==1/o:a!=a&&o!=o)&&(void 0!==r||Yt(t.base_,e)))return!0;ye(t),me(t)}var a,o;return t.copy_[e]===r&&(void 0!==r||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty:(t,e)=>(void 0!==ve(t.base_,e)||e in t.base_?(t.assigned_[e]=!1,ye(t),me(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0),getOwnPropertyDescriptor(t,e){const r=Xt(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n?{writable:!0,configurable:1!==t.type_||"length"!==e,enumerable:n.enumerable,value:r[e]}:n},defineProperty(){Bt(11)},getPrototypeOf:t=>Wt(t.base_),setPrototypeOf(){Bt(12)}},he={};function ve(t,e){const r=t[Lt];return(r?Xt(r):t)[e]}function ge(t,e){if(!(e in t))return;let r=Wt(t);for(;r;){const t=Object.getOwnPropertyDescriptor(r,e);if(t)return t;r=Wt(r)}}function me(t){t.modified_||(t.modified_=!0,t.parent_&&me(t.parent_))}function ye(t){t.copy_||(t.copy_=qt(t.base_,t.scope_.immer_.useStrictShallowCopy_))}It(fe,((t,e)=>{he[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),he.deleteProperty=function(t,e){return he.set.call(this,t,e,void 0)},he.set=function(t,e,r){return fe.set.call(this,t[0],e,r,t[0])};function be(t,e){const r=Vt(t)?re("MapSet").proxyMap_(t,e):Kt(t)?re("MapSet").proxySet_(t,e):function(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:ne(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,o=fe;r&&(a=[n],o=he);const{revoke:i,proxy:s}=Proxy.revocable(a,o);return n.draft_=s,n.revoke_=i,s}(t,e);return(e?e.scope_:ne()).drafts_.push(r),r}function xe(t){if(!jt(t)||$t(t))return t;const e=t[Lt];let r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=qt(t,e.scope_.immer_.useStrictShallowCopy_)}else r=qt(t,!0);return It(r,((t,e)=>{Ut(r,t,xe(e))})),e&&(e.finalized_=!1),r}var _e=new class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,e,r)=>{if("function"==typeof t&&"function"!=typeof e){const r=e;e=t;const n=this;return function(t=r,...a){return n.produce(t,(t=>e.call(this,t,...a)))}}let n;if("function"!=typeof e&&Bt(6),void 0!==r&&"function"!=typeof r&&Bt(7),jt(t)){const a=se(this),o=be(t,void 0);let i=!0;try{n=e(o),i=!1}finally{i?oe(a):ie(a)}return ae(a,r),ce(n,a)}if(!t||"object"!=typeof t){if(n=e(t),void 0===n&&(n=t),n===Tt&&(n=void 0),this.autoFreeze_&&Qt(n,!0),r){const e=[],a=[];re("Patches").generateReplacementPatches_(t,n,e,a),r(e,a)}return n}Bt(1)},this.produceWithPatches=(t,e)=>{if("function"==typeof t)return(e,...r)=>this.produceWithPatches(e,(e=>t(e,...r)));let r,n;return[this.produce(t,e,((t,e)=>{r=t,n=e})),r,n]},"boolean"==typeof t?.autoFreeze&&this.setAutoFreeze(t.autoFreeze),"boolean"==typeof t?.useStrictShallowCopy&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){jt(t)||Bt(8),Nt(t)&&(t=function(t){Nt(t)||Bt(10);return xe(t)}(t));const e=se(this),r=be(t,void 0);return r[Lt].isManual_=!0,ie(e),r}finishDraft(t,e){const r=t&&t[Lt];r&&r.isManual_||Bt(9);const{scope_:n}=r;return ae(n,e),ce(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const n=e[r];if(0===n.path.length&&"replace"===n.op){t=n.value;break}}r>-1&&(e=e.slice(r+1));const n=re("Patches").applyPatches_;return Nt(t)?n(t,e):this.produce(t,(t=>n(t,e)))}};_e.produce,_e.produceWithPatches.bind(_e);var ke=_e.setAutoFreeze.bind(_e);_e.setUseStrictShallowCopy.bind(_e),_e.applyPatches.bind(_e);var ze=_e.createDraft.bind(_e),Ae=_e.finishDraft.bind(_e),we=function(t,r){r||(r={}),r.src||(r.src="fallback.png"),(a(t)?t:e.select(t)).append("img").attr("class","sszvis-fallback-image").attr("src",r.src)};function Se(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fe=function(t,e,r){var n,a=0;return arguments.length<3&&(r=!0),function(){var o=arguments,i=this;n=function(){t.apply(i,o),a=(new Date).getTime()+e,n=null,r&&setTimeout((function(){n&&n()}),e)},(new Date).getTime()>a&&n()}},Pe=Se(Fe),Me={resize:[]};"undefined"!=typeof window&&e.select(window).on("resize",Pe((function(){Ce("resize")}),500));var Ce=function(t){var e=Array.prototype.slice.call(arguments,1);return Me[t]&&Me[t].forEach((function(t){t.apply(null,e)})),this},Re={on:function(t,e){return Me[t]||(Me[t]=[]),Me[t]=Me[t].filter((function(t){return t!==e})).concat(e),this},off:function(t,e){return Me[t]?(Me[t]=Me[t].filter((function(t){return t!==e})),this):this},trigger:Ce};ke(!1);function Ee(t,e){if(!t)throw new Error("[sszvis.app] ".concat(e))}function Oe(t){return"function"==typeof t}function Te(t,e){var r=Ie(e);return c((function(t){return Le(t,r)}),t)}function De(t,e){return c((function(t){return t.name===e}),t)}function Le(t,e){var r=t.measurement,n=Ie(e);return n.width<=r.width&&n.screenHeight<=r.screenHeight}function Be(t,e){var r=Ie(e);return t.filter((function(t){return Le(t,r)}))}function We(t){return t.map(Je).concat(Je({name:"_"}))}var Ne,je=(Ne=We([{name:"palm",width:540},{name:"lap",width:749}]),function(){return Ne}),He=Ye("palm"),Ge=Ye("lap");function Ie(t){var e=m("width",1/0),r=m("screenHeight",1/0);return{width:e(t),screenHeight:r(t)}}function Je(t){var e;return e=s(t.measurement)?Ie(t.measurement):Ie({width:t.width,screenHeight:t.screenHeight}),{name:t.name,measurement:e}}function Ye(t){return function(e){return Le(De(je(),t),e)}}function Ue(t,e){var r=t/e;return function(t){return t/r}}var Ve=Ue(4,3),Ke=Ue(16,10),Xe=function(t){return Math.min(Ue(12,5)(t),500)};Xe.MAX_HEIGHT=500;var qe=function(t){return Math.min(Ue(1,1)(t),420)};qe.MAX_HEIGHT=420;var Qe=function(t){return Math.min(Ue(4,5)(t),600)};Qe.MAX_HEIGHT=600;var Ze={palm:Ve,lap:Ke,_:Xe},$e=function(t){var e=Te(je(),t);return(0,Ze[e.name])(t.width)},tr=rr("warn"),er=rr("error");function rr(t){return function(){var e;console&&console[t]&&(e=arguments,Array.prototype.slice.call(e)).forEach((function(e){console[t](e)}))}}var nr=function(t){return t.rangeExtent?t.rangeExtent():(e=t.range(),r=e[0],n=e[e.length-1],r<n?[r,n]:[n,r]);var e,r,n};function ar(t,r,n,a){a=(a||5)-2;var o=r;r-=2*(n=n||5);var i=[];return t.each((function(){var t,s,l=e.select(this),c=l.text().split(/[ \f\n\r\t\v]+/).reverse(),u=[],p=0,d=l.attr("y"),f=parseFloat(l.attr("dy")),h=1,v=l.style("text-anchor")||"start";if(isNaN(f)&&(f=0),e.select(l.node().parentNode).classed("tick"))switch(v){case"start":s=-r/2;break;case"middle":s=0;break;case"end":s=r/2}else switch(v){case"start":s=n;break;case"middle":s=o/2;break;case"end":s=o-n}d=+(null===d?a:d);for(var g=l.text(null).append("tspan").attr("x",s).attr("y",d).attr("dy",f+"em");c.length>0;)t=c.pop(),u.push(t),g.text(u.join(" ")),g.node().getComputedTextLength()>r&&u.length>1&&(u.pop(),g.text(u.join(" ")),u=[t],g=l.append("tspan").attr("x",s).attr("y",d).attr("dy",1.1*++p+f+"em").text(t),++h);i.push(h)})),i}var or=function(){var t=ft().prop("scale").prop("orient").prop("ticks").prop("tickValues").prop("tickSize").prop("tickSizeInner").prop("tickSizeOuter").prop("tickPadding").prop("tickFormat").prop("_scale").prop("orient").orient("bottom").prop("alignOuterLabels").alignOuterLabels(!1).prop("contour").prop("hideBorderTickThreshold").hideBorderTickThreshold(8).prop("hideLabelThreshold").hideLabelThreshold(10).prop("highlightTick",x).prop("showZeroY").showZeroY(!1).prop("slant").prop("textWrap").prop("tickLength").prop("title").prop("titleAnchor").prop("titleCenter").prop("dxTitle").prop("dyTitle").prop("titleVertical").prop("vertical").vertical(!1).prop("yOffset").yOffset(0).render((function(){var t=e.select(this),r=t.props(),n=!r.vertical&&"bottom"===r.orient,a=function(){switch(r.orient){case"bottom":return e.axisBottom();case"top":return e.axisTop();case"left":return e.axisLeft();case"right":return e.axisRight()}}();["scale","ticks","tickValues","tickSizeInner","tickSizeOuter","tickPadding","tickFormat","tickSize"].forEach((function(t){if(void 0!==r[t]){if(void 0===a[t])throw new Error('axis: "'+t+'" not available');a[t](r[t])}})),r._scale&&a.scale(r._scale);var o=t.selectGroup("sszvis-axis").classed("sszvis-axis",!0).classed("sszvis-axis--top",!r.vertical&&"top"===r.orient).classed("sszvis-axis--bottom",n).classed("sszvis-axis--vertical",r.vertical).attr("transform",bt(0,r.yOffset)).call(a);o.attr("fill",null).attr("font-size",null).attr("font-family",null);var i=a.scale(),l=o.selectAll("g.tick"),c=l.selectAll("text");l.each((function(){var t=yt(this.getAttribute("transform")),r=mt(0)-t[0],a=mt(n?2:0)+t[1];e.select(this).select("line").attr("transform",bt(r,a))})),c.each((function(){"top"!==r.orient&&"bottom"!==r.orient||e.select(this).attr("dx","-0.5"),"left"!==r.orient&&"right"!==r.orient||e.select(this).attr("y","-0.5")})),o.selectAll("path.domain");var u=nr(i);if(l.selectAll("line").each((function(t){var n=i(t),a=e.select(this);a.classed("hidden",!a.classed("sszvis-axis__longtick")&&(cr(n,u[0])<r.hideBorderTickThreshold||cr(n,u[1])<r.hideBorderTickThreshold))})),s(r.tickLength)){var p=e.extent(i.domain()),d=l.filter((function(t){return!b(t,p[0])&&!b(t,p[1])})),f=r.orient,h=2;"left"!==f&&"right"!==f||(d.selectAll("text").each((function(){h=Math.max(this.getBoundingClientRect().width,h)})),h+=2);var v=d.selectAll("line.sszvis-axis__longtick").data([0]);if(r.tickLength>h){var g=v.enter().append("line").classed("sszvis-axis__longtick",!0);v=v.merge(g),"top"===f?v.attr("y1",h).attr("y2",r.tickLength):"bottom"===f?v.attr("y1",-h).attr("y2",-r.tickLength):"left"===f?v.attr("x1",-h).attr("x2",-r.tickLength):"right"===f&&v.attr("x1",h).attr("x2",r.tickLength)}else v.remove()}if(r.alignOuterLabels){var m=nr(i),y=m[0],x=m[1];c.style("text-anchor",(function(t){var e=i(t);return cr(e,y)<12?"start":cr(e,x)<12?"end":"middle"}))}if(s(r.textWrap)&&c.call(ar,r.textWrap),r.slant&&c.call(ur[r.orient][r.slant]),r.highlightTick){var _=[],k=[];c.classed("hidden",!1).classed("active",r.highlightTick),r.hideLabelThreshold>0&&!r.slant&&(c.each((function(t){var e=this.getBoundingClientRect(),n={node:this,bounds:{top:e.top,right:e.right,bottom:e.bottom,left:e.left}};r.highlightTick(t)?(n.bounds.left-=r.hideLabelThreshold,n.bounds.right+=r.hideLabelThreshold,_.push(n)):k.push(n)})),_.forEach((function(t){k.forEach((function(r){var n,a;e.select(r.node).classed("hidden",(n=r.bounds,!((a=t.bounds).left>n.right||a.right<n.left||a.top>n.bottom||a.bottom<n.top)))}))})))}if(r.title){var z=o.selectAll(".sszvis-axis__title").data([r.title]),A=z.enter().append("text").classed("sszvis-axis__title",!0);z.exit().remove(),z.merge(A).text((function(t){return t})).attr("transform",(function(){var t,e=r.orient,n=nr(i);return(t=r.titleCenter?{left:"left"===e||"right"===e?0:"top"===e||"bottom"===e?(n[0]+n[1])/2:0,top:"left"===e||"right"===e?(n[0]+n[1])/2:"top"===e?0:"bottom"===e?32:0}:{left:"left"===e||"right"===e||"top"===e?0:"bottom"===e?n[1]:0,top:"left"===e||"right"===e||"top"===e?0:"bottom"===e?32:0}).vertical=!!r.titleVertical,t.left+=r.dxTitle||0,t.top+=r.dyTitle||0,"translate("+t.left+", "+t.top+") rotate("+(t.vertical?"-90":"0")+")"})).style("text-anchor",(function(){var t=r.orient;return void 0!==r.titleAnchor?r.titleAnchor:"left"===t?"end":"right"===t?"start":"top"===t||"bottom"===t?"end":void 0}))}r.contour&&r.slant?tr("Can't apply contour to slanted labels"):r.contour&&l.each((function(){var t=e.select(this),r=t.select("text").node(),n=t.select(".sszvis-axis__label-contour");n.empty()&&(n=e.select(r.cloneNode()).classed("sszvis-axis__label-contour",!0),this.insertBefore(n.node(),r)),n.text(r.textContent)}))}));return t},ir=function(t){var e=this.scale().domain(),r=[],n=Math.round(e.length/t);void 0!==e[0]&&r.push(e[0]);for(var a=n,o=e.length;a<o-1;a+=n)void 0!==e[a]&&r.push(e[a]);return void 0!==e[e.length-1]&&r.push(e[e.length-1]),this.tickValues(r),t},sr=function(){return or().yOffset(2).ticks(3).tickSizeInner(4).tickSizeOuter(6.5).tickPadding(6).tickFormat(o(1,Pt))};sr.time=function(){return sr().tickFormat(wt).alignOuterLabels(!0)},sr.ordinal=function(){return sr().prop("ticks",ir).tickFormat(Ct)},sr.pyramid=function(){return sr().ticks(10).prop("scale",(function(t){var e=t.copy(),r=e.domain(),n=e.range();return e.domain([-r[1],r[1]]).range([n[0]-n[1],n[0]+n[1]]),this._scale(e),e})).tickFormat((function(t){return Pt(Math.abs(t))}))};var lr=function(){var t=or().ticks(6).tickSize(0,0).tickPadding(0).tickFormat((function(e){return 0!==e||t.showZeroY()?Pt(e):null})).vertical(!0);return t};function cr(t,e){return Math.abs(t-e)}lr.time=function(){return lr().tickFormat(wt)},lr.ordinal=function(){return lr().prop("ticks",ir).tickFormat(Ct)};var ur={top:{horizontal:function(t){t.style("text-anchor","middle").attr("dx","-0.5").attr("dy","0.71em").attr("transform",null)},vertical:function(t){t.style("text-anchor","start").attr("dx","0em").attr("dy","0.35em").attr("transform","rotate(-90)")},diagonal:function(t){t.style("text-anchor","start").attr("dx","0.1em").attr("dy","0.1em").attr("transform","translate(-0.5) rotate(-45)")}},bottom:{horizontal:function(t){t.style("text-anchor","middle").attr("dx","-0.5").attr("dy","0.71em").attr("transform",null)},vertical:function(t){t.style("text-anchor","end").attr("dx","-1em").attr("dy","-0.75em").attr("transform","rotate(-90)")},diagonal:function(t){t.style("text-anchor","end").attr("dx","-0.8em").attr("dy","0em").attr("transform","rotate(-45)")}}};function pr(){var t=e.dispatch("start","move","drag","end"),r=ft().prop("debug").prop("xScale").prop("yScale").prop("draggable").prop("cancelScrolling",x).cancelScrolling(!1).prop("fireOnPanOnly",x).fireOnPanOnly(!1).prop("padding",(function(t){var e={top:0,left:0,bottom:0,right:0};for(var r in t)e[r]=t[r];return e})).padding({}).render((function(){var r=e.select(this),n=r.props(),a=nr(n.xScale).sort(e.ascending),o=nr(n.yScale).sort(e.ascending);a[0]-=n.padding.left,a[1]+=n.padding.right,o[0]-=n.padding.top,o[1]+=n.padding.bottom;var i=r.selectAll("[data-sszvis-behavior-move]").data([0]),s=i.enter().append("rect").attr("data-sszvis-behavior-move","").attr("class","sszvis-interactive");i=i.merge(s),n.draggable&&i.classed("sszvis-interactive--draggable",!0),i.attr("x",a[0]).attr("y",o[0]).attr("width",a[1]-a[0]).attr("height",o[1]-o[0]).attr("fill","transparent").on("mouseover",(function(){t.apply("start",this,arguments)})).on("mousedown",(function(r){var a=this,o=e.select(document),i=e.select(window),s=function(){var a=e.pointer(r),o=dr(n.xScale,a[0]),i=dr(n.yScale,a[1]);r.preventDefault(),t.apply("drag",this,[o,i])},l=function(){a.__dragging__=!1,i.on("mouseup.sszvis-behavior-move",null),i.on("mousemove.sszvis-behavior-move",null),o.on("mouseout.sszvis-behavior-move",null),t.apply("end",this,arguments)};i.on("mousemove.sszvis-behavior-move",s),i.on("mouseup.sszvis-behavior-move",l),o.on("mouseout.sszvis-behavior-move",(function(){var t=r.relatedTarget||r.toElement;t&&"HTML"!==t.nodeName||l()})),a.__dragging__=!0,s()})).on("mousemove",(function(r){var a=e.pointer(r),o=dr(n.xScale,a[0]),i=dr(n.yScale,a[1]);this.__dragging__||t.apply("move",this,[o,i])})).on("mouseout",(function(){t.apply("end",this,[])})).on("touchstart",(function(r){var a=u(e.pointer(r)),o=dr(n.xScale,a[0]),i=dr(n.yScale,a[1]),s=n.cancelScrolling(o,i);if(s&&r.preventDefault(),!n.fireOnPanOnly()||s){t.apply("start",this,[o,i]),t.apply("drag",this,[o,i]),t.apply("move",this,[o,i]);e.select(this).on("touchmove",(function(){var a=u(e.pointer(r)),o=dr(n.xScale,a[0]),i=dr(n.yScale,a[1]),s=n.cancelScrolling(o,i);s&&r.preventDefault(),!n.fireOnPanOnly()||s?(t.apply("drag",this,[o,i]),t.apply("move",this,[o,i])):t.apply("end",this,[])})).on("touchend",(function(){t.apply("end",this,[]),e.select(this).on("touchmove",null).on("touchend",null)}))}})),n.debug&&i.attr("fill","rgba(255,0,0,0.2)")}));return r.on=function(){var e=t.on.apply(t,arguments);return e===t?r:e},r}function dr(t,e){switch(t.invert?"Linear":t.paddingInner?"Band":"Point"){case"Linear":return t.invert(e);case"Band":return function(t,e){var r=t.step(),n=t.paddingOuter()*r,a=t.paddingInner()*r,o=t.bandwidth(),i=t.range(),s=t.domain();if(1===s.length)return i[0]<=e&&i[1]>=e?s[0]:null;for(var l=s.map((function(t,e){return 0===e?[i[0],i[0]+n+o+a/2]:e===s.length-1?[i[1]-(n+o+a/2),i[1]]:[i[0]+n+e*r-a/2,i[0]+n+(e+1)*r-a/2]})),c=0,u=l.length;c<u;c++)if(l[c][0]<e&&e<=l[c][1])return s[c];return null}(t,e);case"Point":return function(t,e){var r=t.step(),n=t.padding()*r,a=t.range(),o=t.domain();if(1===o.length)return a[0]<=e&&a[1]>=e?o[0]:null;for(var i=o.map((function(t,e){return 0===e?[a[0],a[0]+n+r/2]:e===o.length-1?[a[1]-(n+r/2),a[1]]:[a[0]+n+e*r-r/2,a[0]+n+e*r+r/2]})),s=0,l=i.length;s<l;s++)if(i[s][0]<e&&e<=i[s][1])return o[s];return null}(t,e);default:throw new Error("Unknown scale type, could not invert")}}var fr=function(t){return!d(t)&&s(t)?document.elementFromPoint(t.clientX,t.clientY):null},hr=function(t){if(!d(t)){var r=e.select(t);if(!d(r.attr("data-sszvis-behavior-pannable"))){var n=r.datum();if(s(n))return n}}return null};var vr=Math.pow(15,2);function gr(t,e){var r=t.clientX-e[0],n=t.clientY-e[1];return r*r+n*n<vr}var mr,yr,br=function(t){var r;return{width:(r=n(t)?e.select(t).node():a(t)?t.node():t)?r.getBoundingClientRect().width:void 0,screenWidth:window.innerWidth,screenHeight:window.innerHeight}},xr=(mr=document.createElement("canvas").getContext("2d"),yr={},function(t,e,r){var n=[t,e,r].join("-");return mr.font=t+"px "+e,yr[n]||(yr[n]=mr.measureText(r).width)}),_r=function(t){return xr(10,"Arial, sans-serif",t)},kr=function(t){return xr(12,"Arial, sans-serif",t)},zr=516;function Ar(t,r){var n=null,o=null;0===arguments.length?n={}:1===arguments.length?f(t)?n=t:a(t)?(n={},o=t):(n={},o=e.select(t)):(n=t,o=a(r)?r:e.select(r));var i={top:wr(n.top,0),right:wr(n.right,1),bottom:wr(n.bottom,0),left:wr(n.left,1)},l=s(o)?br(o):{width:zr},c=wr(n.width,l.width),u=$e(l),p=wr(n.height,u+i.top+i.bottom);return{innerHeight:p-i.top-i.bottom,innerWidth:c-i.left-i.right,padding:i,height:p,width:c,screenWidth:l.screenWidth,screenHeight:l.screenHeight}}function wr(t,e){return void 0===t?e:t}function Sr(t,e){for(var r in t)e(t[r],r)}function Fr(){var t,e={},r=[],n=[];function a(e,o){if(o>=r.length)return t&&e.sort(t),e;var i=n[o],s=r[o++],l=function(t,e){for(var r,n,a={},o=0,i=t.length;o<i;++o)a[r=e(n=t[o])]?a[r].push(n):a[r]=[n];return a}(e,s.func);if("obj"===s.type){var c={};return Sr(l,(function(t,e){c[e]=a(t,o)})),c}if("arr"===s.type){var u=[];if(i)!function(t,e){for(var r=0,n=t.length;r<n;++r)e(t[r],r)}(Object.keys(l).sort(i),(function(t){u.push(a(l[t],o))}));else Sr(l,(function(t){u.push(a(t,o))}));return u}}return e.apply=function(t){return a(t,0)},e.objectBy=function(t){return r.push({type:"obj",func:t}),e},e.arrayBy=function(t,a){return r.push({type:"arr",func:t}),a&&(n[r.length-1]=a),e},e.sort=function(r){return t=r,e},e}var Pr=e.easePolyOut,Mr=function(){return e.transition().ease(Pr).duration(300)},Cr=function(){return e.transition().ease(Pr).duration(500)};function Rr(t){return isNaN(t)?0:t}function Er(){return ft().prop("x",x).prop("y",x).prop("width",x).prop("height",x).prop("fill",x).prop("stroke",x).prop("centerTooltip").prop("tooltipAnchor").prop("transition").transition(!0).render((function(t){var r,n=e.select(this),a=n.props(),o=i(Rr,a.x),s=i(Rr,a.y),l=i(Rr,a.width),c=i(Rr,a.height),u=n.selectAll(".sszvis-bar").data(t);if(u.exit().remove(),u.enter().append("rect").classed("sszvis-bar",!0).attr("x",o).attr("y",s).attr("width",l).attr("height",c).merge(u).attr("fill",a.fill).attr("stroke",a.stroke),a.transition&&(u=u.transition(Mr())),u.attr("x",o).attr("y",s).attr("width",l).attr("height",c),a.centerTooltip)r=function(t){return[o(t)+l(t)/2,s(t)+c(t)/2]};else if(a.tooltipAnchor){var p=a.tooltipAnchor.map(parseFloat);r=function(t){return[o(t)+p[0]*l(t),s(t)+p[1]*c(t)]}}else r=function(t){return[o(t)+l(t)/2,s(t)]};var d=xt().position(r);n.call(d)}))}function Or(){return ft().prop("barPosition").prop("barWidth").prop("mirror").mirror(!1).render((function(t){var r=e.select(this),n=r.props(),a=e.line().x(n.barWidth).y(n.barPosition),o=r.selectAll(".sszvis-pyramid__referenceline").data(t);o.exit().remove();var i=o.enter().append("path").attr("class","sszvis-pyramid__referenceline");(o=o.merge(i)).attr("transform",n.mirror?"scale(-1, 1)":"").transition(Mr()).attr("d",a)}))}var Tr=g("stack"),Dr=g("0"),Lr=g("1");function Br(t){return function(r,n,a){return function(o){var i=Fr().arrayBy(r).objectBy(n).apply(o),s=i.reduce((function(t,e){return y(t.concat(Object.keys(e)))}),[]),l=e.stack().keys(s).value((function(t,e){return a(t[e][0])})).order(t)(i);return l.forEach((function(t){t.forEach((function(e){e.series=t.key,e.data=e.data[t.key][0],e.stack=r(e.data)}))})),l.keys=s,l.maxValue=e.max(l,(function(t){return e.max(t,(function(t){return t[1]}))})),l}}}var Wr=Br(e.stackOrderNone),Nr=Br(e.stackOrderReverse);function jr(t){return ft().prop("xScale",x).prop("width",x).prop("yScale",x).prop("height",x).prop("fill").prop("stroke").render((function(r){var n=e.select(this),a=n.props(),o=Er().x(t.x(a)).y(t.y(a)).width(t.width(a)).height(t.height(a)).fill(a.fill).stroke(a.stroke||"#FFFFFF"),i=n.selectAll(".sszvis-stack").data(r),s=i.enter().append("g").classed("sszvis-stack",!0);i.exit().remove(),(i=i.merge(s)).call(o)}))}var Hr={x:function(t){return i(t.xScale,Dr)},y:function(t){return i(t.yScale,Tr)},width:function(t){return function(e){return t.xScale(e[1])-t.xScale(e[0])}},height:function(t){return t.height}},Gr={x:function(t){return i(t.xScale,Tr)},y:function(t){return i(t.yScale,Lr)},width:function(t){return t.width},height:function(t){return function(e){return t.yScale(e[0])-t.yScale(e[1])}}},Ir=g("data"),Jr=g("row");function Yr(){return ft().prop("stackElement").renderSelection((function(t){var r=t.datum(),n=t.props(),a=t.selectAll("[data-sszvis-stack]").data(r),o=a.enter().append("g").attr("data-sszvis-stack","");a.exit().remove(),(a=a.merge(o)).each((function(t){e.select(this).datum(t).call(n.stackElement)}))}))}function Ur(){return ft().prop("barPosition").prop("barWidth").prop("mirror").mirror(!1).render((function(t){var r=e.select(this),n=r.props(),a=e.line().x(n.barWidth).y(n.barPosition),o=r.selectAll(".sszvis-path").data(t);o.exit().remove();var i=o.enter().append("path").attr("class","sszvis-path").attr("fill","none").attr("stroke","#aaa").attr("stroke-width",2).attr("stroke-dasharray","3 3");(o=o.merge(i)).attr("transform",n.mirror?"scale(-1, 1)":"").transition(Mr()).attr("d",a)}))}var Vr=2*Math.PI;function Kr(t,e){return e.indexOf(t)>=0}var Xr=21;function qr(){return ft().prop("scale").prop("rowHeight").rowHeight(Xr).prop("columnWidth").columnWidth(200).prop("rows").rows(3).prop("columns").columns(3).prop("verticallyCentered").verticallyCentered(!1).prop("orientation").prop("reverse").reverse(!1).prop("rightAlign").rightAlign(!1).prop("horizontalFloat").horizontalFloat(!1).prop("floatPadding").floatPadding(20).prop("floatWidth").floatWidth(600).render((function(){var t,r,n=e.select(this),a=n.props(),o=a.scale.domain();a.reverse&&(o=o.slice().reverse()),"horizontal"===a.orientation?(r=Math.ceil(a.columns),t=Math.ceil(o.length/r)):"vertical"===a.orientation&&(t=Math.ceil(a.rows),r=Math.ceil(o.length/t));var i=n.selectAll(".sszvis-legend--entry").data(o),s=i.enter().append("g").classed("sszvis-legend--entry",!0);i.exit().remove();var l=i.merge(s).selectAll(".sszvis-legend__mark").data((function(t){return[t]})),c=l.enter().append("circle").classed("sszvis-legend__mark",!0);l.exit().remove(),l.merge(c).attr("cx",a.rightAlign?-6:6).attr("cy",mt(a.rowHeight/2)).attr("r",5).attr("fill",(function(t){return a.scale(t)})).attr("stroke",(function(t){return a.scale(t)})).attr("stroke-width",1);var u=i.merge(s).selectAll(".sszvis-legend__label").data((function(t){return[t]})),p=u.enter().append("text").classed("sszvis-legend__label",!0);u.exit().remove(),u.merge(p).text((function(t){return t})).attr("dy","0.35em").style("text-anchor",(function(){return a.rightAlign?"end":"start"})).attr("transform",(function(){return bt(a.rightAlign?-18:18,mt(a.rowHeight/2))}));var d="";if(a.verticallyCentered&&(d="translate(0,"+String(-o.length*a.rowHeight/2)+") "),a.horizontalFloat){var f=0,h=0;i.merge(s).attr("transform",(function(){var t=this.getBoundingClientRect().width;h+t>a.floatWidth&&(f+=a.rowHeight,h=0);var e=bt(h,f);return h+=t+a.floatPadding,d+e}))}else i.merge(s).attr("transform",(function(e,n){return"horizontal"===a.orientation?d+"translate("+n%r*a.columnWidth+","+Math.floor(n/r)*a.rowHeight+")":"vertical"===a.orientation?d+"translate("+Math.floor(n/t)*a.columnWidth+","+n%t*a.rowHeight+")":void 0}))}))}var Qr=2,Zr=40;function $r(t,r){const n=t.length,a=e.max(t,tn),o=e.sum(t,tn);var i=n<=4?1:en(r,a,Qr);const s=1===i&&o<=r;return{columns:i,rows:s?1:Math.ceil(n/i),columnWidth:1===i?null:a,legendWidth:i*a,horizontalFloat:s,orientation:s?null:"vertical"}}function tn(t){return kr(t)+Zr}function en(t,e,r){return r<=1?1:e<=t/r?r:en(t,e,r-1)}var rn,nn=(rn=0,function(){return++rn});function an(t){return Array.from(t,(t=>{let[e,r]=t;return{key:e,values:r.size?an(r):void 0,value:r.size?void 0:r}}))}var on=_((function(t,r,n){return e.geoMercator().fitSize([t,r],n)}),(function(t,e,r,n){return t+","+e+","+n})),sn=function(t,r,n,a){return e.geoPath().projection(on(t,r,n,a))},ln="geoId",cn=function(t,e,r){r||(r=ln);var n=Array.isArray(t)?t.reduce((function(t,e){return t[e[r]]=e,t}),{}):{};return e.features.map((function(t){return{geoJson:t,datum:n[t.id]}}))},un=function(t){if(!t.properties.cachedCenter){var r=t.properties.center;t.properties.cachedCenter=r?r.split(",").map(parseFloat):e.geoCentroid(t)}return t.properties.cachedCenter},pn=g("datum");function dn(){return ft().prop("mergedData").prop("geoJson").prop("mapPath").prop("defined",x).defined(!0).prop("fill",x).fill((function(){return"black"})).prop("transitionColor").transitionColor(!0).render((function(){var t=e.select(this),r=t.props();function n(t){return r.defined(t.datum)?r.fill(t.datum):"url(#missing-pattern)"}k(t,"pattern","missing-pattern").call(lt);var a=t.selectAll(".sszvis-map__area").data(r.mergedData),o=a.enter().append("path").classed("sszvis-map__area",!0).classed("sszvis-map__area--entering",!0).attr("data-event-target","").attr("fill",n);a.classed("sszvis-map__area--entering",!1),a.exit().remove(),a=a.merge(o),t.selectAll(".sszvis-map__area--undefined").attr("fill",n),a.classed("sszvis-map__area--undefined",(function(t){return!s(t.datum)||!r.defined(t.datum)})).attr("d",(function(t){return r.mapPath(t.geoJson)})),r.transitionColor?a.transition().call(Cr).attr("fill",n):a.attr("fill",n);var i=xt().position((function(t){return r.mapPath.projection()(un(t.geoJson))}));t.selectGroup("tooltipAnchors").datum(r.mergedData).call(i)}))}function fn(){return ft().prop("keyName").keyName(ln).prop("geoJson").prop("mapPath").prop("highlight").highlight([]).prop("highlightStroke",x).highlightStroke("white").prop("highlightStrokeWidth",x).highlightStrokeWidth(2).render((function(){var t=e.select(this),r=t.props(),n=t.selectAll(".sszvis-map__highlight");if(!r.highlight.length)return n.remove(),!0;var a=r.geoJson.features.reduce((function(t,e){return t[e.id]=e,t}),{}),o=r.highlight.reduce((function(t,e){return e&&t.push({geoJson:a[e[r.keyName]],datum:e}),t}),[]),i=(n=n.data(o)).enter().append("path").classed("sszvis-map__highlight",!0);n.exit().remove(),(n=n.merge(i)).attr("d",(function(t){return r.mapPath(t.geoJson)})).style("stroke",(function(t){return r.highlightStroke(t.datum)})).style("stroke-width",(function(t){return r.highlightStrokeWidth(t.datum)}))}))}function hn(){return ft().prop("geoJson").prop("mapPath").prop("borderColor").borderColor("white").prop("strokeWidth").strokeWidth(1.25).render((function(){var t=e.select(this),r=t.props(),n=t.selectAll(".sszvis-map__border").data([r.geoJson]),a=n.enter().append("path").classed("sszvis-map__border",!0);n.exit().remove(),(n=n.merge(a)).attr("d",r.mapPath).style("stroke",r.borderColor).style("stroke-width",r.strokeWidth)}))}function vn(){return ft().prop("mapPath").prop("lakeFeature").prop("lakeBounds").prop("lakePathColor").prop("fadeOut").fadeOut(!0).render((function(){var t=e.select(this),r=t.props();k(t,"pattern","lake-pattern").call(ct),r.fadeOut&&(k(t,"linearGradient","lake-fade-gradient").call(ut),k(t,"mask","lake-fade-mask").call(pt));var n=t.selectAll(".sszvis-map__lakezurich").data([r.lakeFeature]),a=n.enter().append("path").classed("sszvis-map__lakezurich",!0);n.exit().remove(),(n=n.merge(a)).attr("d",r.mapPath).attr("fill","url(#lake-pattern)"),r.fadeOut&&n.attr("mask","url(#lake-fade-mask)");var o=t.selectAll(".sszvis-map__lakepath").data([r.lakeBounds]),i=o.enter().append("path").classed("sszvis-map__lakepath",!0);o.exit().remove(),(o=o.merge(i)).attr("d",r.mapPath),r.lakePathColor&&o.style("stroke",r.lakePathColor)}))}var gn=e.timeFormatLocale(kt).parse,mn=gn("%d.%m.%Y"),yn=gn("%Y");function bn(t){return function(){var e,r=(e=[[]],{addLine:function(){e.push([])},addWord:function(t,r){h(e).push({text:x(r),style:t})},lines:function(){return e}});function n(e){return t(r,e)}return n.newline=function(){return r.addLine(),n},["bold","italic","plain"].forEach((function(t){n[t]=function(e){return r.addWord(t,e),n}})),n}}var xn,_n=bn((xn={plain:function(t){return t},italic:function(t){return"<em>"+t+"</em>"},bold:function(t){return"<strong>"+t+"</strong>"}},function(t,e){return t.lines().map((function(t){return t.map((function(t){return xn[t.style].call(null,t.text(e))})).join(" ")})).join("<br/>")})),kn=bn(function(){var t={plain:function(t){return"<tspan>"+t+"</tspan>"},italic:function(t){return'<tspan style="font-style:italic">'+t+"</tspan>"},bold:function(t){return'<tspan style="font-weight:bold">'+t+"</tspan>"}};return function(e,r){return e.lines().reduce((function(e,n,a){return e+'<tspan x="0" dy="'+(0===a?0:"1.2em")+'">'+n.map((function(e){return t[e.style].call(null,e.text(r))})).join(" ")+"</tspan>"}),"")}}());t.AGGLOMERATION_2012_KEY="zurichAgglomeration2012",t.DEFAULT_LEGEND_COLOR_ORDINAL_ROW_HEIGHT=Xr,t.DEFAULT_WIDTH=zr,t.GEO_KEY_DEFAULT=ln,t.RATIO=16/9,t.STADT_KREISE_KEY="zurichStadtKreise",t.STATISTISCHE_QUARTIERE_KEY="zurichStatistischeQuartiere",t.STATISTISCHE_ZONEN_KEY="zurichStatistischeZonen",t.SWITZERLAND_KEY="switzerland",t.WAHL_KREISE_KEY="zurichWahlKreise",t.annotationCircle=function(){return ft().prop("x",x).prop("y",x).prop("r",x).prop("dx",x).prop("dy",x).prop("caption",x).render((function(t){var r=e.select(this),n=r.props();k(r,"pattern","data-area-pattern").call(dt);var a=r.selectAll(".sszvis-dataareacircle").data(t),o=a.enter().append("circle").classed("sszvis-dataareacircle",!0);if((a=a.merge(o)).attr("cx",n.x).attr("cy",n.y).attr("r",n.r).attr("fill","url(#data-area-pattern)"),n.caption){var i=r.selectAll(".sszvis-dataareacircle__caption").data(t),s=i.enter().append("text").classed("sszvis-dataareacircle__caption",!0);(i=i.merge(s)).attr("x",n.x).attr("y",n.y).attr("dx",n.dx).attr("dy",n.dy).text(n.caption)}}))},t.annotationLine=function(){return ft().prop("x1").prop("x2").prop("y1").prop("y2").prop("xScale").prop("yScale").prop("dx",x).dx(0).prop("dy",x).dy(0).prop("caption",x).render((function(t){var r=e.select(this),n=r.props(),a=n.xScale(n.x1),o=n.yScale(n.y1),i=n.xScale(n.x2),s=n.yScale(n.y2),l=r.selectAll(".sszvis-referenceline").data(t);l.exit().remove();var c=l.enter().append("line").classed("sszvis-referenceline",!0);if((l=l.merge(c)).attr("x1",a).attr("y1",o).attr("x2",i).attr("y2",s),n.caption){var u=r.selectAll(".sszvis-referenceline__caption").data([0]);u.exit().remove();var p=u.enter().append("text").classed("sszvis-referenceline__caption",!0);(u=u.merge(p)).attr("transform",(function(){var t=i-a,e=s-o,r=180*Math.atan2(e,t)/Math.PI;return"translate("+(a+i)/2+","+(o+s)/2+") rotate("+r+")"})).attr("dx",n.dx).attr("dy",n.dy).text(n.caption)}}))},t.annotationRangeFlag=function(){return ft().prop("x",x).prop("y0",x).prop("y1",x).render((function(t){var r=e.select(this),n=r.props(),a=i(mt,n.x),o=i(mt,n.y0),s=i(mt,n.y1);r.selectAll(".sszvis-rangeFlag__mark.bottom").data(t).call(_t("bottom",a,o)),r.selectAll(".sszvis-rangeFlag__mark.top").data(t).call(_t("top",a,s));var l=xt().position((function(t){return[a(t),mt((n.y0(t)+n.y1(t))/2)]}));r.call(l)}))},t.annotationRangeRuler=function(){return ft().prop("x",x).prop("y0",x).prop("y1",x).prop("top").prop("bottom").prop("label").prop("removeStroke").label(x("")).prop("total").prop("flip",x).flip(!1).render((function(t){var r=e.select(this),n=r.props(),a=i(mt,n.x),o=i(mt,n.y0),s=i(mt,n.y1),l=function(t){return mt((n.y0(t)+n.y1(t))/2)},c=r.selectAll(".sszvis-rangeRuler__rule").data([0]),u=c.enter().append("line").classed("sszvis-rangeRuler__rule",!0);c.exit().remove(),(c=c.merge(u)).attr("x1",a).attr("y1",n.top).attr("x2",a).attr("y2",n.bottom);var p=r.selectAll(".sszvis-rangeRuler--mark").data(t),d=p.enter().append("g").classed("sszvis-rangeRuler--mark",!0);p.exit().remove(),p=p.merge(d),d.append("circle").classed("sszvis-rangeRuler__p1",!0),d.append("circle").classed("sszvis-rangeRuler__p2",!0),d.append("text").classed("sszvis-rangeRuler__label-contour",!0),d.append("text").classed("sszvis-rangeRuler__label",!0),p.selectAll(".sszvis-rangeRuler__p1").data((function(t){return[t]})).attr("cx",a).attr("cy",o).attr("r",1.5),p.selectAll(".sszvis-rangeRuler__p2").data((function(t){return[t]})).attr("cx",a).attr("cy",s).attr("r",1.5),p.selectAll(".sszvis-rangeRuler__label").data((function(t){return[t]})).attr("x",(function(t){var e=n.flip(t)?-10:10;return a(t)+e})).attr("y",l).attr("dy","0.35em").style("text-anchor",(function(t){return n.flip(t)?"end":"start"})).text(i(Pt,n.label)),p.selectAll(".sszvis-rangeRuler__label-contour").data((function(t){return[t]})).attr("x",(function(t){var e=n.flip(t)?-10:10;return a(t)+e})).attr("y",l).attr("dy","0.35em").style("text-anchor",(function(t){return n.flip(t)?"end":"start"})).text(i(Pt,n.label)),r.selectAll("g.sszvis-rangeRuler--mark").each((function(){var t=e.select(this),r=t.select("text").node(),o=t.select(".sszvis-rangeRuler__label-contour");o.empty()?(o=e.select(r.cloneNode()).classed("sszvis-rangeRuler__label-contour",!0).classed("sszvis-rangeRuler__label",!1),this.insertBefore(o.node(),r)):o.attr("x",(function(t){var e=n.flip(t)?-10:10;return a(t)+e})).attr("y",l).attr("dy","0.35em").style("text-anchor",(function(t){return n.flip(t)?"end":"start"})),o.text(r.textContent)})),n.removeStroke||p.attr("stroke","white").attr("stroke-width",.5).attr("stroke-opacity",.75);var f=r.selectAll(".sszvis-rangeRuler__total").data([h(t)]),v=f.enter().append("text").classed("sszvis-rangeRuler__total",!0);f.exit().remove(),(f=f.merge(v)).attr("x",(function(t){var e=n.flip(t)?-10:10;return a(t)+e})).attr("y",n.top-10).style("text-anchor",(function(t){return n.flip(t)?"end":"start"})).text("Total "+Pt(n.total));var g=f.node(),m=r.select(".sszvis-rangeRuler__total-contour");m.empty()?(m=e.select(g.cloneNode()).classed("sszvis-rangeRuler__total-contour",!0).classed("sszvis-rangeRuler__total",!1),this.insertBefore(m.node(),g)):m.attr("x",(function(t){var e=n.flip(t)?-10:10;return a(t)+e})).attr("y",n.top-10).style("text-anchor",(function(t){return n.flip(t)?"end":"start"})),m.text(g.textContent),n.removeStroke||f.attr("stroke","white").attr("stroke-width",.5).attr("stroke-opacity",.75)}))},t.annotationRectangle=function(){return ft().prop("x",x).prop("y",x).prop("width",x).prop("height",x).prop("dx",x).prop("dy",x).prop("caption",x).render((function(t){var r=e.select(this),n=r.props();k(r,"pattern","data-area-pattern").call(dt);var a=r.selectAll(".sszvis-dataarearectangle").data(t),o=a.enter().append("rect").classed("sszvis-dataarearectangle",!0);if((a=a.merge(o)).attr("x",n.x).attr("y",n.y).attr("width",n.width).attr("height",n.height).attr("fill","url(#data-area-pattern)"),n.caption){var i=r.selectAll(".sszvis-dataarearectangle__caption").data(t),s=i.enter().append("text").classed("sszvis-dataarearectangle__caption",!0);(i=i.merge(s)).attr("x",(function(t,e){return n.x(t,e)+n.width(t,e)/2})).attr("y",(function(t,e){return n.y(t,e)+n.height(t,e)/2})).attr("dx",n.dx).attr("dy",n.dy).text(n.caption)}}))},t.annotationRuler=function(){return ft().prop("top").prop("bottom").prop("x",x).prop("y",x).prop("label").label(x("")).prop("color").prop("flip",x).flip(!1).prop("labelId",x).prop("reduceOverlap").reduceOverlap(!0).render((function(t){var r=e.select(this),n=r.props(),a=n.labelId||function(t){return n.x(t)+"_"+n.y(t)},o=r.selectAll(".sszvis-ruler__rule").data(t,a),s=o.enter().append("line").classed("sszvis-ruler__rule",!0);o.exit().remove(),(o=o.merge(s)).attr("x1",i(mt,n.x)).attr("y1",n.y).attr("x2",i(mt,n.x)).attr("y2",n.bottom);var l=r.selectAll(".sszvis-ruler__dot").data(t,a),c=l.enter().append("circle").classed("sszvis-ruler__dot",!0);l.exit().remove(),(l=l.merge(c)).attr("cx",i(mt,n.x)).attr("cy",i(mt,n.y)).attr("r",3.5).attr("fill",n.color);var u=r.selectAll(".sszvis-ruler__label-outline").data(t,a),p=u.enter().append("text").classed("sszvis-ruler__label-outline",!0);u.exit().remove(),u=u.merge(p);var d=r.selectAll(".sszvis-ruler__label").data(t,a),f=d.enter().append("text").classed("sszvis-ruler__label",!0);d.exit().remove(),d=d.merge(f);var h=i(mt,n.x),v=i(mt,n.y),g=r.selectAll(".sszvis-ruler__label, .sszvis-ruler__label-outline").attr("transform",(function(t){var e=h(t),r=v(t),a=n.flip(t)?-10:10,o=r<n.top+o?2*o:r>n.bottom-o?0:5;return bt(e+a,r+o)})).style("text-anchor",(function(t){return n.flip(t)?"end":"start"})).html(n.label);if(n.reduceOverlap){var m=10,y=[],b={};for(g.attr("y",""),d.each((function(t){var e=this.getBoundingClientRect(),r={top:e.top,bottom:e.bottom,dy:0};y.push(r),b[a(t)]=r})),y.sort((function(t,r){return e.ascending(t.top,r.top)}));m--;)y.forEach((function(t,e){y.slice(e+1).forEach((function(e){var r=t.bottom-e.top;if(r>=2){var n=r/2;t.bottom-=n,t.top-=n,t.dy-=n,e.bottom+=n,e.top+=n,e.dy+=n}}))}));g.attr("y",(function(t){return b[a(t)].dy}))}}))},t.app=t=>{let e,r,{init:n,render:a,actions:o={},fallback:i}=t;Ee(Oe(n),'An "init" function returning a Promise must be provided.'),Ee(Oe(a),'A "render" function must be provided.');const s=Object.keys(o).reduce(((t,e)=>(t[e]=t=>{c(e,t)},t)),{});function l(t){e||(e=!0,requestAnimationFrame((()=>{a(r,s),e=!1}))),Oe(t)&&t(c)}function c(t,e){Ee(null!=o[t],'Action "'.concat(t,'" is not defined, add it to "actions".'));const n=ze(r),a=o[t](n,e);r=Ae(n),l(a)}const u=ze({});n(u).then((t=>{r=Ae(u),l(t),Re.on("resize",l)})).catch((t=>{Ee(!1,t),i&&we(i.element,{src:i.src})}))},t.arity=o,t.aspectRatio=Ue,t.aspectRatio12to5=Xe,t.aspectRatio16to10=Ke,t.aspectRatio4to3=Ve,t.aspectRatioAuto=$e,t.aspectRatioPortrait=Qe,t.aspectRatioSquare=qe,t.axisX=sr,t.axisY=lr,t.bar=Er,t.bounds=Ar,t.breakpointCreateSpec=We,t.breakpointDefaultSpec=je,t.breakpointFind=Te,t.breakpointFindByName=De,t.breakpointLap=Ge,t.breakpointMatch=Be,t.breakpointPalm=He,t.breakpointTest=Le,t.buttonGroup=function(){return ft().prop("values").prop("current").prop("width").width(300).prop("change").change(r).render((function(){var t=e.select(this),r=t.props(),n=r.width/r.values.length,a=t.selectAll(".sszvis-control-optionSelectable").data(["sszvis-control-buttonGroup"],(function(t){return t})),o=a.enter().append("div").classed("sszvis-control-optionSelectable",!0).classed("sszvis-control-buttonGroup",!0);a.exit().remove(),(a=a.merge(o)).style("width",r.width+"px");var i=a.selectAll(".sszvis-control-buttonGroup__item").data(r.values),s=i.enter().append("div").classed("sszvis-control-buttonGroup__item",!0);i.exit().remove(),(i=i.merge(s)).style("width",n+"px").classed("selected",(function(t){return t===r.current})).text((function(t){return t})).on("click",r.change)}))},t.cascade=Fr,t.choropleth=function(){var t=e.dispatch("over","out","click"),r=dn(),n=hn(),a=vn(),o=fn(),i=ft().prop("width").prop("height").prop("keyName").keyName(ln).prop("withLake").withLake(!0).prop("anchoredShape").prop("features").prop("borders").prop("lakeFeatures").prop("lakeBorders").prop("lakeFadeOut").lakeFadeOut(!1).delegate("defined",r).delegate("fill",r).delegate("transitionColor",r).delegate("borderColor",n).delegate("strokeWidth",n).delegate("highlight",o).delegate("highlightStroke",o).delegate("highlightStrokeWidth",o).delegate("lakePathColor",a).render((function(i){var s=e.select(this),l=s.props(),c=sn(l.width,l.height,l.features,"zurichStadtfeatures"),u=cn(i,l.features,l.keyName);r.geoJson(l.features).mergedData(u).mapPath(c),n.geoJson(l.borders).mapPath(c),a.lakeFeature(l.lakeFeatures).lakeBounds(l.lakeBorders).mapPath(c).fadeOut(l.lakeFadeOut),o.geoJson(l.features).keyName(l.keyName).mapPath(c),s.call(r).call(n),l.withLake&&s.call(a),s.call(o),l.anchoredShape&&(l.anchoredShape.mergedData(u).mapPath(c),s.call(l.anchoredShape)),s.selectAll("[data-event-target]").on("mouseover",(function(e){t.call("over",this,e.datum)})).on("mouseout",(function(e){t.call("out",this,e.datum)})).on("click",(function(e){t.call("click",this,e.datum)}))}));return i.on=function(){var e=t.on.apply(t,arguments);return e===t?i:e},i},t.colorLegendDimensions=$r,t.colorLegendLayout=function(t,r){let{legendLabels:n,axisLabels:a=[],slant:o="horizontal"}=t;const i=$r(n,br(r).width),s=n.length>6?B().domain(n):W().domain(n),l=qr().scale(s).horizontalFloat(i.horizontalFloat).rows(i.rows).columnWidth(i.columnWidth).orientation(i.orientation),c=function(t,r){switch(t){case"vertical":return 40+e.max(r,_r);case"diagonal":return 40+Math.sqrt(2*Math.pow(e.max(r,_r)/2,2));default:return 60}}(o,a),u=i.rows*Xr;return{axisLabelPadding:c,legendPadding:u,bottomPadding:c+u,legendWidth:i.legendWidth,legend:l,scale:s}},t.compose=i,t.contains=function(t,e){return t.indexOf(e)>=0},t.createHtmlLayer=function(t,r,n){r||(r=Ar()),n||(n={});var o="data-sszvis-html-"+(n.key||"default"),i=a(t)?t:e.select(t);i.classed("sszvis-outer-container",!0);var s=i.selectAll("[data-sszvis-html-layer]["+o+"]").data([0]),l=s.enter().append("div").classed("sszvis-html-layer",!0).attr("data-sszvis-html-layer","").attr(o,"");return(s=s.merge(l)).style("position","absolute").style("left",r.padding.left+"px").style("top",r.padding.top+"px"),s},t.createSvgLayer=function(t,r,n){r||(r=Ar()),n||(n={});var o="data-sszvis-svg-"+(n.key||"default"),i=n.title||"",s=n.description||"",l=(a(t)?t:e.select(t)).selectAll("svg["+o+"]").data([0]),c=l.enter().append("svg");c.classed("sszvis-svg-layer",!0).attr(o,"").attr("role","img").attr("aria-label",i+" – "+s),c.append("title").text(i),c.append("desc").text(s).classed("sszvis-svg-layer",!0).attr(o,"").attr("role","img"),l.merge(c).attr("height",r.height).attr("width",r.width);var u=l.merge(c).selectAll("[data-sszvis-svg-layer]").data((function(){return[0]})),p=u.enter().append("g").attr("data-sszvis-svg-layer","");return u.merge(p).attr("transform","translate("+r.padding.left+","+r.padding.top+")"),u.merge(p)},t.dataAreaPattern=dt,t.defaultTransition=Mr,t.defined=s,t.derivedSet=function(t,e){e||(e=r);for(var n,a,o=[],i=[],s=0,l=t.length;s<l;++s)a=e(n=t[s],s,t),o.indexOf(a)<0&&(o.push(a),i.push(n));return i},t.dimensionsHeatTable=function(t,e,r,n,a){a||(a={}),a.top||(a.top=0),a.right||(a.right=0),a.bottom||(a.bottom=0),a.left||(a.left=0);var o=t-a.left-a.right,i=Math.min((o-e*(r-1))/r,30),s=i+e,l=r*s-e;return{side:i,paddedSide:s,padRatio:1-i/s,width:l,height:n*s-e,centeredOffset:Math.max((o-l)/2,0)}},t.dimensionsHorizontalBarChart=function(t){var e=24,r=e*t+20*(t-1);return{barHeight:e,padHeight:20,padRatio:1-e/44,outerRatio:0,axisOffset:-22,barGroupHeight:r,totalHeight:r+0}},t.dimensionsVerticalBarChart=function(t,e){var r=1-.7,n=e-1,a=t*r/(r*n+.7*e),o=(t-a*n)/e;o>48&&(a=(t-(o=48)*e)/n),a<2&&(a=2),a>100&&(a=100);var i=o*e+a*n;return{barWidth:o,padWidth:a,padRatio:1-o/(o+a),outerRatio:(t-i)/2/(o+a),barGroupWidth:i,totalWidth:t}},t.dot=function(){return ft().prop("x",x).prop("y",x).prop("radius").prop("stroke").prop("fill").prop("transition").transition(!0).render((function(t){var r=e.select(this),n=r.props(),a=r.selectAll(".sszvis-circle").data(t);a.exit().remove(),a.enter().append("circle").classed("sszvis-circle",!0).attr("cx",n.x).attr("cy",n.y).attr("r",n.radius).merge(a).attr("stroke",n.stroke).attr("fill",n.fill),n.transition&&(a=a.transition(Mr())),a.attr("cx",n.x).attr("cy",n.y).attr("r",n.radius);var o=xt().position((function(t){return[n.x(t),n.y(t)]}));r.call(o)}))},t.ensureDefsElement=k,t.every=function(t,e){for(var r=0;r<e.length;r++)if(!t(e[r]))return!1;return!0},t.fallbackCanvasUnsupported=function(){return!!!document.createElement("canvas").getContext},t.fallbackRender=we,t.fallbackUnsupported=function(){return!(!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)},t.fastTransition=function(){return e.transition().ease(Pr).duration(50)},t.filledArray=l,t.find=c,t.first=u,t.firstTouch=p,t.fitTooltip=function(t,e){var r=Math.min(1*e.innerWidth/4,100),n=Math.max(3*e.innerWidth/4,e.innerWidth-100);return function(e){var a=e.x;return a>n?"right":a<r?"left":t}},t.flatten=function(t){return Array.prototype.concat.apply([],t)},t.foldPattern=function(t,e){var r=e[t];if("function"==typeof r)return r();throw new Error("[foldPattern] No definition provided for key: "+t)},t.formatAge=function(t){return String(Math.round(t))},t.formatAxisTimeFormat=wt,t.formatFractionPercent=function(t){return Pt(100*t)+" %"},t.formatMonth=St,t.formatNone=function(){return""},t.formatNumber=Pt,t.formatPercent=function(t){return Pt(t)+" %"},t.formatPreciseNumber=Mt,t.formatText=Ct,t.formatYear=Ft,t.functor=x,t.getGeoJsonCenter=un,t.groupedBars=function(){return ft().prop("groupScale").prop("groupSize").prop("groupWidth").prop("groupSpace").groupSpace(.05).prop("y",x).prop("height").prop("fill").prop("stroke").prop("defined",x).defined(!0).render((function(t){var r=e.select(this),n=r.props(),a=e.scaleBand().domain(e.range(n.groupSize)).padding(n.groupSpace).paddingOuter(0).rangeRound([0,n.groupWidth]),o=r.selectAll("g.sszvis-bargroup").data(t),i=o.enter().append("g").classed("sszvis-bargroup",!0);o.exit().remove();var s=(o=o.merge(i)).selectAll("g.sszvis-barunit").data((function(t){return t})),l=s.enter().append("g").classed("sszvis-barunit",!0);s.exit().remove(),(s=s.merge(l)).each((function(t,e){t.__sszvisGroupedBarIndex__=e}));var c=s.filter(n.defined);c.selectAll("*").remove(),c.attr("transform",(function(){return bt(0,0)})),c.append("rect").classed("sszvis-bar",!0).attr("fill",n.fill).attr("x",(function(t){return n.groupScale(t)+a(t.__sszvisGroupedBarIndex__)})).attr("y",n.y).attr("width",a.bandwidth()).attr("height",n.height);var u=s.filter(v(n.defined));u.selectAll("*").remove(),u.attr("transform",(function(t,e){return bt(n.groupScale(t)+a(t.__sszvisGroupedBarIndex__)+a.bandwidth()/2,n.y(t,e))})),u.append("line").classed("sszvis-bar--missing line1",!0).attr("x1",-4).attr("y1",-4).attr("x2",4).attr("y2",4),u.append("line").classed("sszvis-bar--missing line2",!0).attr("x1",4).attr("y1",-4).attr("x2",-4).attr("y2",4);var p=xt().position((function(t){var e=0,r=1/0;return t.forEach((function(t,o){e+=n.groupScale(t)+a(t.__sszvisGroupedBarIndex__)+a.bandwidth()/2,r=Math.min(r,n.y(t,o))})),[e/t.length,r]}));r.call(p)}))},t.halfPixel=mt,t.handleRuler=function(){return ft().prop("x",x).prop("y",x).prop("top").prop("bottom").prop("label").label(x("")).prop("color").prop("flip",x).flip(!1).render((function(t){var r=e.select(this),n=r.props(),a=i(mt,n.x),o=i(mt,n.y),s=n.bottom-4,l=n.top-24,c=r.selectAll(".sszvis-handleRuler__group").data([0]),u=c.enter().append("g").classed("sszvis-handleRuler__group",!0);c.exit().remove(),c=c.merge(u),u.append("line").classed("sszvis-ruler__rule",!0),u.append("rect").classed("sszvis-handleRuler__handle",!0),u.append("line").classed("sszvis-handleRuler__handle-mark",!0),c.selectAll(".sszvis-ruler__rule").attr("x1",a).attr("y1",mt(n.top)).attr("x2",a).attr("y2",mt(s)),c.selectAll(".sszvis-handleRuler__handle").attr("x",(function(t){return a(t)-5})).attr("y",mt(l)).attr("width",10).attr("height",24).attr("rx",2).attr("ry",2),c.selectAll(".sszvis-handleRuler__handle-mark").attr("x1",a).attr("y1",mt(l+24*.15)).attr("x2",a).attr("y2",mt(l+20.4));var p=c.selectAll(".sszvis-ruler__dot").data(t),d=p.enter().append("circle").classed("sszvis-ruler__dot",!0);p.exit().remove(),(p=p.merge(d)).attr("cx",a).attr("cy",o).attr("r",3.5).attr("fill",n.color);var f=r.selectAll(".sszvis-ruler__label-outline").data(t),h=f.enter().append("text").classed("sszvis-ruler__label-outline",!0);f.exit().remove(),f=f.merge(h);var v=r.selectAll(".sszvis-ruler__label").data(t),g=v.enter().append("text").classed("sszvis-ruler__label",!0);v.exit().remove(),v=v.merge(g),r.selectAll(".sszvis-ruler__label, .sszvis-ruler__label-outline").attr("transform",(function(t){var e=i(mt,n.x)(t),r=i(mt,n.y)(t),a=n.flip(t)?-10:10,o=r<n.top+o?2*o:r>n.bottom-o?0:5;return bt(e+a,r+o)})).style("text-anchor",(function(t){return n.flip(t)?"end":"start"})).html(n.label)}))},t.hashableSet=function(t,e){e||(e=r);for(var n,a={},o=[],i=0,s=t.length;i<s;++i)a[n=e(t[i],i,t)]||(a[n]=!0,o.push(n));return o},t.heatTableMissingValuePattern=function(t){var e=Z(),r="#A4A4A4",n=.35,a=.65;t.attr("patternUnits","objectBoundingBox").attr("patternContentUnits","objectBoundingBox").attr("x",0).attr("y",0).attr("width",1).attr("height",1),t.append("rect").attr("x",0).attr("y",0).attr("width",1).attr("height",1).attr("fill",e),t.append("line").attr("x1",n).attr("y1",n).attr("x2",a).attr("y2",a).attr("stroke-width",.035).attr("stroke",r),t.append("line").attr("x1",a).attr("y1",n).attr("x2",n).attr("y2",a).attr("stroke-width",.035).attr("stroke",r)},t.identity=r,t.isFunction=function(t){return"function"==typeof t},t.isNull=d,t.isNumber=function(t){return"[object Number]"===Object.prototype.toString.call(t)&&!Number.isNaN(t)},t.isObject=f,t.isSelection=a,t.isString=n,t.last=h,t.layoutPopulationPyramid=function(t,e){for(var r=Math.min(Qe(t),480),n=1*(e-1),a=Math.round((r-n)/e),o=e*(a=Math.max(a,2))+n,i=o-a,s=a+1,l=[];i>=0;)l.push(i),i-=s;var c=Math.min(t/2,.8*Qe.MAX_HEIGHT/2);return{barHeight:a,padding:1,totalHeight:o,positions:l,maxBarLength:c,chartPadding:Math.max((t-2*c)/2,1)}},t.layoutSmallMultiples=function(){return ft().prop("width").prop("height").prop("paddingX").prop("paddingY").prop("rows").prop("cols").render((function(t){var r=e.select(this),n=r.props(),a=(n.width-n.paddingX*(n.cols-1))/n.cols,o=(n.height-n.paddingY*(n.rows-1))/n.rows,i=a/2,s=o/2,l=r.selectAll("g.sszvis-multiple").data(t),c=l.enter().append("g").classed("sszvis-g sszvis-multiple",!0);l.exit().remove();var u=(l=l.merge(c)).selectAll("g.sszvis-multiple-chart").data((function(t){return[t.values]})),p=u.enter().append("g").classed("sszvis-multiple-chart",!0);u.exit().remove(),u=u.merge(p),l.datum((function(t,e){return t.gx=e%n.cols*(a+n.paddingX),t.gw=a,t.cx=i,t.gy=Math.floor(e/n.cols)*(o+n.paddingY),t.gh=o,t.cy=s,t})).attr("transform",(function(t){return"translate("+t.gx+","+t.gy+")"}))}))},t.layoutStackedAreaMultiples=function(t,e,r){r||(r=.1);for(var n=t/(e-r),a=n*(1-r),o=a,i=[];o-t<1;)i.push(o),o+=n;return{range:i,bandHeight:a,padHeight:n*r}},t.legendColorBinned=function(){return ft().prop("scale").prop("displayValues").prop("endpoints").prop("width").width(200).prop("labelFormat").labelFormat(r).render((function(){var t=e.select(this),r=t.props();if(!r.scale)return er("legend.binnedColorScale - a scale must be specified.");if(!r.displayValues)return er("legend.binnedColorScale - display values must be specified.");if(!r.endpoints)return er("legend.binnedColorScale - endpoints must be specified");var n=[0,r.width-10],a=e.scaleLinear().domain(r.endpoints).range(n),o=0,i=[],s=r.endpoints[0];r.displayValues.forEach((function(t){var e=a(t)-o,n=o%1;i.push({x:Math.floor(5+o),w:e+n,c:r.scale(s),p:t}),o+=e,s=t})),i.push({x:Math.floor(5+o),w:n[1]-o,c:r.scale(s)});var l=t.selectAll("circle.sszvis-legend__circle").data(r.endpoints),c=l.enter().append("circle").classed("sszvis-legend__circle",!0);(l=l.merge(c)).exit().remove(),l.attr("r",5).attr("cy",5).attr("cx",(function(t,e){return 0===e?5:r.width-5})).attr("fill",r.scale);var u=t.selectAll("rect.sszvis-legend__crispmark").data(i),p=u.enter().append("rect").classed("sszvis-legend__crispmark",!0);(u=u.merge(p)).exit().remove(),u.attr("x",(function(t){return t.x})).attr("y",0).attr("width",(function(t){return t.w})).attr("height",10).attr("fill",(function(t){return t.c}));var d=i.slice(0,-1),f=t.selectAll("line.sszvis-legend__crispmark").data(d),h=f.enter().append("line").classed("sszvis-legend__crispmark",!0);f.merge(h),f.exit().remove(),f.attr("x1",(function(t){return mt(t.x+t.w)})).attr("x2",(function(t){return mt(t.x+t.w)})).attr("y1",11).attr("y2",16).attr("stroke","#B8B8B8");var v=t.selectAll(".sszvis-legend__axislabel").data(d),g=v.enter().append("text").classed("sszvis-legend__axislabel",!0);(v=v.merge(g)).exit().remove(),v.style("text-anchor","middle").attr("transform",(function(t){return"translate("+(t.x+t.w)+",30)"})).text((function(t){return r.labelFormat(t.p)}))}))},t.legendColorLinear=function(){return ft().prop("scale").prop("displayValues").displayValues([]).prop("width").width(200).prop("segments").segments(8).prop("labelText").prop("labelFormat").labelFormat(r).render((function(){var t=e.select(this),r=t.props();if(!r.scale)return er("legend.linearColorScale - a scale must be specified."),!1;var n=r.scale.domain(),a=r.displayValues;!a.length&&r.scale.ticks&&(a=r.scale.ticks(r.segments-1)),a.push(h(n));var o=a.length>0?r.width/a.length:0,i=t.selectAll("rect.sszvis-legend__mark").data(a),s=i.enter().append("rect").classed("sszvis-legend__mark",!0);i.exit().remove(),(i=i.merge(s)).attr("x",(function(t,e){return e*o-1})).attr("y",0).attr("width",o+1).attr("height",10).attr("fill",(function(t){return r.scale(t)}));var l=[u(n),h(n)],c=r.labelText||l,p=t.selectAll("circle.ssvis-legend--mark").data(l),d=p.enter().append("circle").attr("class","ssvis-legend--mark");p.exit().remove(),(p=p.merge(d)).attr("cx",(function(t,e){return e*r.width})).attr("cy",5).attr("r",5).attr("fill",(function(t){return r.scale(t)}));var f=t.selectAll(".sszvis-legend__label").data(c),v=f.enter().append("text").classed("sszvis-legend__label",!0);f.exit().remove(),f=f.merge(v);f.style("text-anchor",(function(t,e){return 0===e?"end":"start"})).attr("dy","0.35em").attr("transform",(function(t,e){return"translate("+(e*r.width+16*(0===e?-1:1))+", 5)"})).text((function(t,e){return r.labelFormat(t,e)}))}))},t.legendColorOrdinal=qr,t.legendRadius=function(){return ft().prop("scale").prop("tickFormat").tickFormat(r).prop("tickValues").render((function(){var t=e.select(this),r=t.props(),n=r.scale.domain(),a=r.tickValues||[n[1],r.scale.invert(e.mean(r.scale.range())),n[0]],o=nr(r.scale)[1],i=t.selectAll("g.sszvis-legend__elementgroup").data([0]),s=i.enter().append("g").attr("class","sszvis-legend__elementgroup");(i=i.merge(s)).attr("transform",bt(mt(o),mt(o)));var l=i.selectAll("circle.sszvis-legend__greyline").data(a),c=l.enter().append("circle").classed("sszvis-legend__greyline",!0);function u(t){return o-2*r.scale(t)}l.exit().remove(),(l=l.merge(c)).attr("r",r.scale).attr("stroke-width",1).attr("cy",(function(t){return o-r.scale(t)}));var p=i.selectAll("line.sszvis-legend__dashedline").data(a),d=p.enter().append("line").classed("sszvis-legend__dashedline",!0);p.exit().remove(),(p=p.merge(d)).attr("x1",0).attr("y1",u).attr("x2",o+15).attr("y2",u);var f=i.selectAll(".sszvis-legend__label").data(a),h=f.enter().append("text").attr("class","sszvis-legend__label sszvis-legend__label--small");f.exit().remove(),(f=f.merge(h)).attr("dx",o+18).attr("y",u).attr("dy","0.35em").text(r.tickFormat)}))},t.line=function(){return ft().prop("x").prop("y").prop("stroke").prop("strokeWidth").prop("defined").prop("key").key((function(t,e){return e})).prop("valuesAccessor").valuesAccessor(r).prop("transition").transition(!0).render((function(t){var r=e.select(this),n=r.props(),a=e.line().defined(void 0!==n.defined?n.defined:i(v(isNaN),n.y)).x(n.x).y(n.y),o=r.selectAll(".sszvis-line").data(t,n.key),s=o.enter().append("path").classed("sszvis-line",!0).style("stroke",n.stroke);(o=o.merge(s)).exit().remove(),o.order(),n.transition&&(o=o.transition(Mr())),o.attr("d",i(a,n.valuesAccessor)).style("stroke",n.stroke).style("stroke-width",n.strokeWidth)}))},t.loadError=function(t){er(t)},t.locale=kt,t.mapLakeFadeGradient=ut,t.mapLakeGradientMask=pt,t.mapLakePattern=ct,t.mapMissingValuePattern=lt,t.mapRendererBase=dn,t.mapRendererBubble=function(){var t=e.dispatch("over","out","click"),r=ft().prop("mergedData").prop("mapPath").prop("radius",x).prop("fill",x).prop("strokeColor",x).strokeColor("#ffffff").prop("strokeWidth",x).strokeWidth(1).prop("transition").transition(!0).render((function(){var r=e.select(this),n=r.props(),a=i(n.radius,pn),o=r.selectGroup("anchoredCircles").selectAll(".sszvis-anchored-circle").data(n.mergedData,(function(t){return t.geoJson.id}));if(o.enter().append("circle").attr("class","sszvis-anchored-circle sszvis-anchored-circle--entering").attr("r",a).on("mouseover",(function(e){t.call("over",this,e.datum)})).on("mouseout",(function(e){t.call("out",this,e.datum)})).on("click",(function(e){t.call("click",this,e.datum)})).merge(o).attr("transform",(function(t){var e=n.mapPath.projection()(un(t.geoJson));return bt(e[0],e[1])})).style("fill",(function(t){return n.fill(t.datum)})).style("stroke",(function(t){return n.strokeColor(t.datum)})).style("stroke-width",(function(t){return n.strokeWidth(t.datum)})).sort((function(t,e){return n.radius(e.datum)-n.radius(t.datum)})),o.classed("sszvis-anchored-circle--entering",!1),n.transition){var s=Mr();o.exit().transition(s).attr("r",0).remove(),o.transition(s).attr("r",a)}else o.exit().remove(),o.attr("r",a)}));return r.on=function(){var e=t.on.apply(t,arguments);return e===t?r:e},r},t.mapRendererGeoJson=function(){var t=e.dispatch("over","out","click"),r=ft().prop("dataKeyName").dataKeyName(ln).prop("geoJsonKeyName").geoJsonKeyName("id").prop("geoJson").prop("mapPath").prop("defined",x).defined(!0).prop("fill",x).fill("black").prop("stroke",x).stroke("black").prop("strokeWidth",x).strokeWidth(1.25).prop("transitionColor").transitionColor(!0).render((function(r){var n=e.select(this),a=n.props();k(n,"pattern","missing-pattern").call(lt);var o=g(a.dataKeyName),i=g(a.geoJsonKeyName),l=r.reduce((function(t,e){return t[o(e)]=e,t})),c=a.geoJson.features.map((function(t){return{geoJson:t,datum:l[i(t.properties)]}}));function u(t){return s(t.datum)&&a.defined(t.datum)?a.fill(t.datum):"url(#missing-pattern)"}var p=n.selectAll(".sszvis-map__geojsonelement").data(c),d=p.enter().append("path").classed("sszvis-map__geojsonelement",!0).attr("data-event-target","").attr("fill",u);p.exit().remove(),p=p.merge(d),n.selectAll(".sszvis-map__geojsonelement--undefined").attr("fill",u),p.classed("sszvis-map__geojsonelement--undefined",(function(t){return!s(t.datum)||!a.defined(t.datum)})).attr("d",(function(t){return a.mapPath(t.geoJson)})),a.transitionColor?p.transition().call(Cr).attr("fill",u):p.attr("fill",u),p.attr("stroke",(function(t){return s(t.datum)&&a.defined(t.datum)?a.stroke(t.datum):""})).attr("stroke-width",a.strokeWidth),n.selectAll("[data-event-target]").on("mouseover",(function(e){t.over(e.datum)})).on("mouseout",(function(e){t.out(e.datum)})).on("click",(function(e){t.click(e.datum)}));var f=xt().position((function(t){t.geoJson.properties||(t.geoJson.properties={});var r=t.geoJson.properties.sphericalCentroid;return r||(t.geoJson.properties.sphericalCentroid=r=e.geoCentroid(t.geoJson)),a.mapPath.projection()(r)}));n.selectGroup("tooltipAnchors").datum(c).call(f)}));return r.on=function(){var e=t.on.apply(t,arguments);return e===t?r:e},r},t.mapRendererHighlight=fn,t.mapRendererImage=function(){return ft().prop("projection").prop("src").prop("geoBounds").prop("opacity").opacity(1).render((function(){var t=e.select(this),r=t.props(),n=t.selectAll(".sszvis-map__image").data([0]),a=n.enter().append("img").classed("sszvis-map__image",!0);n.exit().remove(),n=n.merge(a);var o=r.projection(r.geoBounds[0]),i=r.projection(r.geoBounds[1]);n.attr("src",r.src).style("left",Math.round(o[0])+"px").style("top",Math.round(o[1])+"px").style("width",Math.round(i[0]-o[0])+"px").style("height",Math.round(i[1]-o[1])+"px").style("opacity",r.opacity)}))},t.mapRendererMesh=hn,t.mapRendererPatternedLakeOverlay=vn,t.mapRendererRaster=function(){return ft().prop("debug").debug(!1).prop("width").prop("height").prop("position").prop("cellSide").cellSide(2).prop("fill",x).prop("opacity").opacity(1).render((function(t){var r=e.select(this),n=r.props(),a=r.selectAll(".sszvis-map__rasterimage").data([0]),o=a.enter().append("canvas").classed("sszvis-map__rasterimage",!0);a.exit().remove(),(a=a.merge(o)).attr("width",n.width).attr("height",n.height).style("opacity",n.opacity);var i=a.node().getContext("2d");i.clearRect(0,0,n.width,n.height),n.debug&&(i.fillStyle="rgba(255, 0, 0, 0.2)",i.fillRect(0,0,n.width,n.height));var s=n.cellSide/2;t.forEach((function(t){var e=n.position(t);i.fillStyle=n.fill(t),i.fillRect(e[0]-s,e[1]-s,n.cellSide,n.cellSide)}))}))},t.measureAxisLabel=_r,t.measureDimensions=br,t.measureLegendLabel=kr,t.measureText=xr,t.memoize=_,t.modularTextHTML=_n,t.modularTextSVG=kn,t.move=pr,t.muchDarker=function(t){return e.hsl(t).darker(.7)},t.not=v,t.panning=function(){var t=e.dispatch("start","pan","end"),r=ft().prop("elementSelector").render((function(){var r=e.select(this),n=r.props();r.selectAll(n.elementSelector).attr("data-sszvis-behavior-pannable","").classed("sszvis-interactive",!0).on("mouseenter",(function(){t.apply("start",this,arguments)})).on("mousemove",(function(){t.apply("pan",this,arguments)})).on("mouseleave",(function(){t.apply("end",this,arguments)})).on("touchstart",(function(e){e.preventDefault(),t.apply("start",this,arguments)})).on("touchmove",(function(e){var r;e.preventDefault(),null!==(r=p(e),hr(fr(r)))?t.apply("pan",this,arguments):t.apply("end",this,arguments)})).on("touchend",(function(){t.apply("end",this,arguments)}))}));return r.on=function(){var e=t.on.apply(t,arguments);return e===t?r:e},r},t.parseDate=function(t){return mn(t)},t.parseNumber=function(t){return""===t.trim()?NaN:+t},t.parseYear=function(t){return yn(t)},t.pie=function(){return ft().prop("radius").prop("fill").prop("stroke").prop("angle",x).render((function(t){var r=e.select(this),n=r.props(),a=n.stroke||"#FFFFFF",o=0;t.forEach((function(t){t._a0=o,isNaN(t.a0)&&(t.a0=o),o+=n.angle(t),t._a1=o,isNaN(t.a1)&&(t.a1=o)}));var i=e.arc().innerRadius(4).outerRadius(n.radius).startAngle((function(t){return t.a0})).endAngle((function(t){return t.a1})),s=r.selectAll(".sszvis-path").each((function(e,r){t[r]&&(t[r].a0=e.a0,t[r].a1=e.a1)})).data(t),l=s.enter().append("path").classed("sszvis-path",!0).attr("transform","translate("+n.radius+","+n.radius+")").attr("fill",n.fill).attr("stroke",a);s.exit().remove(),(s=s.merge(l)).transition(Mr()).attr("transform","translate("+n.radius+","+n.radius+")").attrTween("d",(function(t){var r=e.interpolate(t.a0,t._a0),n=e.interpolate(t.a1,t._a1);return function(e){return t.a0=r(e),t.a1=n(e),i(t)}})).attr("fill",n.fill).attr("stroke",a);var c=xt().position((function(t){var e=t.a0+Math.abs(t.a1-t.a0)/2-Math.PI/2,r=2*n.radius/3;return[n.radius+Math.cos(e)*r,n.radius+Math.sin(e)*r]}));r.datum(t).call(c)}))},t.pixelsFromGeoDistance=function(t,e,r){var n=r/(2*Math.PI*6367475)*360/2,a=[[e[0]-n,e[1]-n],[e[0]+n,e[1]+n]].map(t);return(Math.abs(a[1][0]-a[0][0])+Math.abs(a[1][1]-a[0][1]))/2},t.prepareMergedGeoData=cn,t.prop=g,t.propOr=m,t.pyramid=function(){return ft().prop("barHeight",x).prop("barWidth",x).prop("barPosition",x).prop("barFill",x).barFill("#000").prop("tooltipAnchor").tooltipAnchor([.5,.5]).prop("leftAccessor").prop("rightAccessor").prop("leftRefAccessor").prop("rightRefAccessor").render((function(t){var r=e.select(this),n=r.props(),a=Er().x((function(t){return-.5-n.barWidth(t)})).y(n.barPosition).height(n.barHeight).width(n.barWidth).fill(n.barFill).tooltipAnchor(n.tooltipAnchor),o=Er().x(.5).y(n.barPosition).height(n.barHeight).width(n.barWidth).fill(n.barFill).tooltipAnchor(n.tooltipAnchor),i=Or().barPosition(n.barPosition).barWidth(n.barWidth).mirror(!0),s=Or().barPosition(n.barPosition).barWidth(n.barWidth);r.selectGroup("left").datum(n.leftAccessor(t)).call(a),r.selectGroup("right").datum(n.rightAccessor(t)).call(o),r.selectGroup("leftReference").datum(n.leftRefAccessor?[n.leftRefAccessor(t)]:[]).call(i),r.selectGroup("rightReference").datum(n.rightRefAccessor?[n.rightRefAccessor(t)]:[]).call(s)}))},t.range=nr,t.responsiveProps=function(){var t=je(),e={};function r(r){if(!(f(r)&&(n=r,s(n)&&s(n.width)&&s(n.screenWidth)&&s(n.screenHeight))))return tr("Could not determine the current breakpoint, returning the default props"),Object.keys(e).reduce((function(t,e,r){return t[r]=e._,t}),{});var n,a=Be(t,r);return Object.keys(e).reduce((function(n,o){var i=e[o];if(!function(t,e){if(!s(t._))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&"_"!==r&&!s(De(e,r)))return!1;return!0}(i,t))return tr('responsiveProps was given an invalid propSpec for property: "'+o+'". The spec: ',i),n;var l=c((function(t){return s(i[t.name])}),a);return n[o]=i[l.name](r.width),n}),{})}return r.prop=function(t,n){var a;return e[t]=(a=n,Object.keys(a).reduce((function(t,e){return t[e]=x(a[e]),t}),{})),r},r.breakpoints=function(e){return 0===arguments.length?t:(t=We(e),r)},r},t.roundTransformString=function(t){var e=i(Math.floor,Number);return t.replace(/(translate\()\s*([0-9., ]+)\s*(\))/i,(function(t,r,n,a){return r+n.replace(","," ").replace(/\s+/," ").split(" ").map(e).join(",")+a}))},t.sankey=function(){return ft().prop("sizeScale").prop("columnPosition").prop("nodeThickness").prop("nodePadding").prop("columnPadding",x).prop("columnLabel",x).columnLabel("").prop("columnLabelOffset",x).columnLabelOffset(0).prop("linkCurvature").linkCurvature(.5).prop("nodeColor",x).prop("linkColor",x).prop("linkSort",x).linkSort((function(t,e){return t.value-e.value})).prop("labelSide",x).labelSide("left").prop("labelSideSwitch").prop("labelOpacity",x).labelOpacity(1).prop("labelHitBoxSize").labelHitBoxSize(0).prop("nameLabel").nameLabel(r).prop("linkSourceLabels").linkSourceLabels([]).prop("linkTargetLabels").linkTargetLabels([]).prop("linkLabel",x).render((function(t){var r=e.select(this),n=r.props(),a=g("id"),o=function(t){return Math.floor(n.columnPadding(t.columnIndex)+n.sizeScale(t.valueOffset)+n.nodePadding*t.nodeIndex)},i=function(t){return n.columnPosition(t.columnIndex)},s=function(t){return o(t)},l=function(){return Math.max(n.nodeThickness,1)},c=function(t){return Math.ceil(Math.max(n.sizeScale(t.value),1))},u=Er().x(i).y(s).width(l).height(c).fill(n.nodeColor),p=r.selectGroup("nodes").datum(t.nodes);p.call(u);var d=xt().position((function(t){return[i(t)+l()/2,s(t)+c(t)/2]}));p.call(d);var f=function(t){return n.columnPosition(t)+n.nodeThickness/2},h=p.selectAll(".sszvis-sankey-column-label").data(t.columnLengths),v=h.enter().append("text").attr("class","sszvis-sankey-label sszvis-sankey-weak-label sszvis-sankey-column-label");(h=h.merge(v)).exit().remove(),h.attr("transform",(function(t,e){return bt(f(e)+n.columnLabelOffset(t,e),-24)})).text((function(t,e){return n.columnLabel(e)}));var m=p.selectAll(".sszvis-sankey-column-label-tick").data(t.columnLengths),y=m.enter().append("line").attr("class","sszvis-sankey-column-label-tick");(m=m.merge(y)).exit().remove(),m.attr("x1",(function(t,e){return mt(f(e))})).attr("x2",(function(t,e){return mt(f(e))})).attr("y1",mt(-16)).attr("y2",mt(-12));var b=function(t){return[n.columnPosition(t.src.columnIndex)+n.nodeThickness+1,n.columnPosition(t.tgt.columnIndex)-1,o(t.src)+n.sizeScale(t.srcOffset)+n.sizeScale(t.value)/2,o(t.tgt)+n.sizeScale(t.tgtOffset)+n.sizeScale(t.value)/2]},x=function(t){var e,r,n,a,o=b(t);return e=o[0],r=o[1],n=o[2],a=o[3],[e,r,n,a]},_=r.selectGroup("links"),k=_.selectAll(".sszvis-link").data(t.links,a),z=k.enter().append("path").attr("class","sszvis-link");(k=k.merge(z)).exit().remove(),k.attr("fill","none").attr("d",(function(t){var r,a,o,i,s,l,c=b(t),u=e.interpolateNumber(c[0],c[1]),p=u(n.linkCurvature),d=u(1-n.linkCurvature);return r=c[0],a=p,o=d,i=c[1],s=c[2],l=c[3],"M"+r+","+s+"C"+a+","+s+" "+o+","+l+" "+i+","+l})).attr("stroke-width",(function(t){return Math.max(n.sizeScale(t.value),1)})).attr("stroke",n.linkColor).sort(n.linkSort),_.datum(t.links);var A=xt().position((function(t){var e=x(t);return[(e[0]+e[1])/2,(e[2]+e[3])/2]}));_.call(A);var w=r.selectGroup("linklabels"),S=w.selectAll(".sszvis-sankey-link-source-label").data(n.linkSourceLabels),F=S.enter().append("text").attr("class","sszvis-sankey-label sszvis-sankey-strong-label sszvis-sankey-link-source-label");(S=S.merge(F)).exit().remove(),S.attr("transform",(function(t){var e=x(t);return bt(e[0]+6,e[2])})).text(n.linkLabel);var P=w.selectAll(".sszvis-sankey-link-target-label").data(n.linkTargetLabels),M=P.enter().append("text").attr("class","sszvis-sankey-label sszvis-sankey-strong-label sszvis-sankey-link-target-label");(P=P.merge(M)).exit().remove(),P.attr("transform",(function(t){var e=x(t);return bt(e[1]-6,e[3])})).text(n.linkLabel);var C=function(t){var e=n.labelSide(t);return n.labelSideSwitch&&(e="left"===e?"right":"left"),e},R=r.selectGroup("nodelabels"),E=R.selectAll(".sszvis-sankey-node-label").data(t.nodes),O=E.enter().append("text").attr("class","sszvis-sankey-label sszvis-sankey-weak-label sszvis-sankey-node-label");(E=E.merge(O)).exit().remove(),E.text((function(t){return n.nameLabel(t.id)})).attr("text-align","middle").attr("text-anchor",(function(t){return"left"===C(t.columnIndex)?"end":"start"})).attr("x",(function(t){return"left"===C(t.columnIndex)?i(t)-6:i(t)+n.nodeThickness+6})).attr("y",(function(t){return s(t)+c(t)/2})).style("opacity",n.labelOpacity);var T=R.selectAll(".sszvis-sankey-hitbox").data(t.nodes),D=T.enter().append("rect").attr("class","sszvis-sankey-hitbox");(T=T.merge(D)).exit().remove(),T.attr("fill","transparent").attr("x",(function(t){return i(t)+("left"===C(t.columnIndex)?-n.labelHitBoxSize:0)})).attr("y",(function(t){return s(t)-n.nodePadding/2})).attr("width",n.labelHitBoxSize+n.nodeThickness).attr("height",(function(t){return c(t)+n.nodePadding}))}))},t.sankeyLayout=function(t,r,n,a){var o=e.min(t.map((function(t){var e=.15*n/(t-1);return Math.max(12,Math.min(50,e))}))),i=e.min(t.map((function(t,e){return Math.max(1,n-(t-1)*o)/r[e]}))),s=o/i,l=o,c=e.max(r),u=t.map((function(t,e){return r[e]*i+(t-1)*l})),p=e.max(u),d=t.map((function(t,e){return(p-u[e])/2})),f=[0,c],h=[0,c*i],v=t.length;return{valuePadding:s,nodePadding:l,columnPaddings:d,valueDomain:f,valueRange:h,nodeThickness:20,columnDomain:[0,1],columnRange:[0,(a-20)/(v-1)]}},t.sankeyPrepareData=function(){var t=r,n=r,a=r,o=[],i=g("value"),s=function(t,r){return e.ascending(i(t),i(r))},c=function(t,r){return e.descending(i(t),i(r))},u=c,p=function(r){var s=o.reduce((function(t,e,r){return e.forEach((function(e){t.has(e)&&tr("Duplicate column member id passed to sszvis.layout.sankey.prepareData.column:",e,"The existing value will be overwritten");var n={id:e,columnIndex:r,nodeIndex:0,value:0,valueOffset:0,linksFrom:[],linksTo:[]};t.set(e,n)})),t}),new Map),p=r.map((function(e){var r=t(e),o=n(e),i=+a(e)||0,l=s.get(r),c=s.get(o);if(!l)return tr("Found invalid source column id:",r),null;if(!c)return tr("Found invalid target column id:",o),null;var u={id:nn(),value:i,src:l,srcOffset:0,tgt:c,tgtOffset:0};return l.linksFrom.push(u),c.linksTo.push(u),u})),d=[...s.values()],f=d.reduce((function(t,r){var n=e.sum(r.linksFrom,i),a=e.sum(r.linksTo,i);return r.value=Math.max(0,n,a),t[r.columnIndex]+=r.value,t}),l(o.length,0)),h=o.map((function(t){return t.length}));return d.sort(u),p.sort(c),d.reduce((function(t,e){return e.valueOffset=t[0][e.columnIndex],e.nodeIndex=t[1][e.columnIndex],t[0][e.columnIndex]+=e.value,t[1][e.columnIndex]+=1,t}),[l(o.length,0),l(o.length,0)]),d.forEach((function(t){t.linksFrom.sort((function(t,e){return t.tgt.nodeIndex-e.tgt.nodeIndex})),t.linksTo.sort((function(t,e){return t.src.nodeIndex-e.src.nodeIndex})),t.linksFrom.reduce((function(t,e){return e.srcOffset=t,t+i(e)}),0),t.linksTo.reduce((function(t,e){return e.tgtOffset=t,t+i(e)}),0)})),{nodes:d,links:p,columnTotals:f,columnLengths:h}};return p.apply=function(t){return p(t)},p.source=function(e){return t=e,p},p.target=function(t){return n=t,p},p.value=function(t){return a=t,p},p.descendingSort=function(){return u=c,p},p.ascendingSort=function(){return u=s,p},p.idLists=function(t){return o=t,p},p},t.scaleDeepGry=nt,t.scaleDimGry=et,t.scaleDivNtr=X,t.scaleDivNtrGry=q,t.scaleDivVal=V,t.scaleDivValGry=K,t.scaleGry=tt,t.scaleLightGry=Z,t.scaleMedGry=rt,t.scalePaleGry=$,t.scaleQual12=B,t.scaleQual6=W,t.scaleQual6a=N,t.scaleQual6b=j,t.scaleSeqBlu=G,t.scaleSeqBrn=Y,t.scaleSeqGrn=J,t.scaleSeqRed=I,t.selectMenu=function(){return ft().prop("values").prop("current").prop("width").width(300).prop("change").change(r).render((function(){var t=e.select(this),r=t.props(),n=t.selectAll(".sszvis-control-optionSelectable").data(["sszvis-control-select"],(function(t){return t})),a=n.enter().append("div").classed("sszvis-control-optionSelectable",!0).classed("sszvis-control-select",!0);n.exit().remove(),(n=n.merge(a)).style("width",r.width+"px");var o=n.selectDiv("selectMetrics").classed("sszvis-control-select__metrics",!0),i=n.selectAll(".sszvis-control-select__element").data([1]),s=i.enter().append("select").classed("sszvis-control-select__element",!0).on("change",(function(){var t=e.select(this).property("value");r.change(r.values[t]),setTimeout((function(){window.focus()}),0)}));(i=i.merge(s)).style("width",r.width+30+"px");var l=i.selectAll("option").data(r.values),c=l.enter().append("option");l.exit().remove(),l.merge(c).attr("selected",(function(t){return t===r.current?"selected":null})).attr("value",(function(t,e){return e})).text((function(t){return function(t,e,r){var n=1e3,a=function(r,o){t.text(r);var i=Math.ceil(t.node().clientWidth);return o<n&&i>e?a(r.slice(0,r.length-2)+"…",o+1):r};return a(r,0)}(o,r.width-40,t)}))}))},t.set=y,t.slider=function(){return ft().prop("scale").prop("value").prop("onchange").prop("minorTicks").minorTicks([]).prop("majorTicks").majorTicks([]).prop("tickLabels",x).tickLabels(r).prop("label",x).label(r).render((function(){var t=e.select(this),r=t.props(),n=mt(18),a=r.scale.domain(),o=nr(r.scale),s=r.scale.copy().range([o[0]+5.5,o[1]-5.5]),l=t.selectAll("g.sszvis-control-slider__backgroundgroup").data([1]),c=l.enter().append("g").classed("sszvis-control-slider__backgroundgroup",!0);(l=l.merge(c)).exit().remove();var u=sr().scale(s).orient("bottom").hideBorderTickThreshold(0).tickSize(12).tickPadding(6).tickValues(y([].concat(r.majorTicks,r.minorTicks))).tickFormat((function(t){return Kr(t,r.majorTicks)?r.tickLabels(t):""})),p=l.selectAll("g.sszvis-axisGroup").data([1]),d=p.enter().append("g").classed("sszvis-axisGroup sszvis-axis sszvis-axis--bottom sszvis-axis--slider",!0);(p=p.merge(d)).attr("transform",bt(0,28)).call(u),p.selectAll(".tick line").filter((function(t){return!Kr(t,r.majorTicks)})).attr("y2",4);var f=p.selectAll(".tick text").filter((function(t){return Kr(t,r.majorTicks)})),h=f.size();f.style("text-anchor",(function(t,e){return 0===e?"start":e===h-1?"end":"middle"}));var v=l.selectAll("g.sszvis-slider__background").data([1]),g=v.enter().append("g").classed("sszvis-slider__background",!0);(v=v.merge(g)).attr("transform",bt(0,n));var m=v.selectAll(".sszvis-slider__background__bg1").data([1]),x=m.enter().append("line").classed("sszvis-slider__background__bg1",!0).style("stroke-width",6).style("stroke","#888").style("stroke-linecap","round");(m=m.merge(x)).attr("x1",Math.ceil(o[0]+3)).attr("x2",Math.floor(o[1]-3));var _=v.selectAll(".sszvis-slider__background__bg2").data([1]),k=_.enter().append("line").classed("sszvis-slider__background__bg2",!0).style("stroke-width",5).style("stroke","#fff").style("stroke-linecap","round");(_=_.merge(k)).attr("x1",Math.ceil(o[0]+3)).attr("x2",Math.floor(o[1]-3));var z=v.selectAll(".sszvis-slider__backgroundshadow").data([r.value]),A=z.enter().append("line").attr("class","sszvis-slider__backgroundshadow").attr("stroke-width",5).style("stroke","#E0E0E0").style("stroke-linecap","round");(z=z.merge(A)).attr("x1",Math.ceil(o[0]+3)).attr("x2",i(Math.floor,s));var w=t.selectAll("g.sszvis-control-slider__handle").data([r.value]);w.exit().remove();var S=w.enter().append("g").classed("sszvis-control-slider__handle",!0);(w=w.merge(S)).attr("transform",(function(t){return bt(mt(s(t)),.5)})),S.append("text").classed("sszvis-control-slider--label",!0),w.selectAll(".sszvis-control-slider--label").data((function(t){return[t]})).text(r.label).style("text-anchor",(function(t){return b(t,a[0])?"start":b(t,a[1])?"end":"middle"})).attr("dx",(function(t){return b(t,a[0])?-5:b(t,a[1])?5:0})),S.append("rect").classed("sszvis-control-slider__handlebox",!0).attr("x",-5).attr("y",n-11.5).attr("width",10).attr("height",23).attr("rx",2).attr("ry",2);S.append("line").classed("sszvis-control-slider__handleline",!0).attr("y1",n-7.5).attr("y2",n+7.5);var F=pr().xScale(r.scale).yScale(e.scaleLinear().range([-11,40])).draggable(!0).on("drag",r.onchange);t.selectGroup("sliderInteraction").classed("sszvis-control-slider--interactionLayer",!0).attr("transform",bt(0,4)).call(F)}))},t.slightlyDarker=function(t){return e.hsl(t).darker(.4)},t.slowTransition=Cr,t.some=function(t,e){for(var r=0;r<e.length;r++)if(t(e[r]))return!0;return!1},t.stackedArea=function(){return ft().prop("x").prop("y0").prop("y1").prop("fill").prop("stroke").prop("strokeWidth").prop("defined").prop("key").key((function(t,e){return e})).prop("transition").transition(!0).render((function(t){var r=e.select(this),n=r.props(),a=e.area().defined(void 0!==n.defined?n.defined:function(){return i(v(isNaN),n.y0)&&i(v(isNaN),n.y1)}).x(n.x).y0(n.y0).y1(n.y1),o=r.selectAll("path.sszvis-path").data(t,n.key),s=o.enter().append("path").classed("sszvis-path",!0);o.exit().remove(),o=o.merge(s),n.transition&&(o=o.transition(Mr())),o.attr("d",a).attr("fill",n.fill).attr("stroke",n.stroke||"#ffffff").attr("stroke-width",void 0!==n.strokeWidth?n.strokeWidth:1)}))},t.stackedAreaMultiples=function(){return ft().prop("x").prop("y0").prop("y1").prop("fill").prop("stroke").prop("strokeWidth").prop("defined").prop("key").key((function(t,e){return e})).prop("valuesAccessor").valuesAccessor(r).prop("transition").transition(!0).render((function(t){var r=e.select(this),n=r.props();t=t.slice().reverse();var a=e.area().defined(void 0!==n.defined?n.defined:function(){return i(v(isNaN),n.y0)&&i(v(isNaN),n.y1)}).x(n.x).y0(n.y0).y1(n.y1),o=r.selectAll("path.sszvis-path").data(t,n.key),s=o.enter().append("path").classed("sszvis-path",!0);o.exit().remove(),o=s.merge(o),n.transition&&(o=o.transition(Mr())),o.attr("d",i(a,n.valuesAccessor)).attr("fill",n.fill).attr("stroke",n.stroke).attr("stroke-width",void 0!==n.strokeWidth?n.strokeWidth:1)}))},t.stackedBarHorizontal=function(){return jr(Hr)},t.stackedBarHorizontalData=Wr,t.stackedBarVertical=function(){return jr(Gr)},t.stackedBarVerticalData=Nr,t.stackedPyramid=function(){return ft().prop("barHeight",x).prop("barWidth",x).prop("barPosition",x).prop("barFill",x).barFill("#000").prop("tooltipAnchor").tooltipAnchor([.5,.5]).prop("leftAccessor").prop("rightAccessor").prop("leftRefAccessor").prop("rightRefAccessor").render((function(t){var r=e.select(this),n=r.props(),a=Er().x((function(t){return-.5-n.barWidth(t[1])})).y(i(n.barPosition,Jr)).height(n.barHeight).width((function(t){return n.barWidth(t[1])-n.barWidth(t[0])})).fill(i(n.barFill,Ir)).tooltipAnchor(n.tooltipAnchor),o=Er().x((function(t){return.5+n.barWidth(t[0])})).y(i(n.barPosition,Jr)).height(n.barHeight).width((function(t){return n.barWidth(t[1])-n.barWidth(t[0])})).fill(i(n.barFill,Ir)).tooltipAnchor(n.tooltipAnchor),s=Yr().stackElement(a),l=Yr().stackElement(o),c=Ur().barPosition(n.barPosition).barWidth(n.barWidth).mirror(!0),u=Ur().barPosition(n.barPosition).barWidth(n.barWidth);r.selectGroup("leftStack").datum(n.leftAccessor(t)).call(s),r.selectGroup("rightStack").datum(n.rightAccessor(t)).call(l),r.selectGroup("leftReference").datum(n.leftRefAccessor?[n.leftRefAccessor(t)]:[]).call(c),r.selectGroup("rightReference").datum(n.rightRefAccessor?[n.rightRefAccessor(t)]:[]).call(u)}))},t.stackedPyramidData=function(t,r,n,a){return function(o){var i=Fr().arrayBy(t).arrayBy(r).objectBy(n).apply(o).map((function(r){var n=Object.keys(r[0]),o=t(r[0][n[0]][0]),i=e.stack().keys(n).value((function(t,e){return a(t[e][0])}))(r);return i.forEach((function(t,e){t.forEach((function(t,r){return t.data=t.data[n[e]][0],t.series=n[e],t.side=o,t.row=r,t.value=a(t.data),t}))})),i}));return i.maxValue=e.max(i,(function(t){return e.max(t,(function(t){return e.max(t,(function(t){return t[1]}))}))})),i}},t.stringEqual=b,t.sunburst=function(){return ft().prop("angleScale").angleScale(e.scaleLinear().range([0,2*Math.PI])).prop("radiusScale").prop("centerRadius").prop("fill").prop("stroke").stroke("white").render((function(t){var r=e.select(this),n=r.props();var a=function(t){return Math.max(0,Math.min(Vr,n.angleScale(t.x0)))},o=function(t){return Math.max(0,Math.min(Vr,n.angleScale(t.x1)))},i=function(t){return n.centerRadius+Math.max(0,n.radiusScale(t.y0))},s=function(t){return n.centerRadius+Math.max(0,n.radiusScale(t.y1))},l=e.arc().startAngle(a).endAngle(o).innerRadius(i).outerRadius(s);t.forEach((function(t){t._x0=t.x0,t._x1=t.x1}));var c=r.selectAll(".sszvis-sunburst-arc").each((function(e,r){t[r]&&(t[r].x0=e.x0,t[r].x1=e.x1)})).data(t),u=c.enter().append("path").attr("class","sszvis-sunburst-arc");c.exit().remove(),(c=c.merge(u)).attr("stroke",n.stroke).attr("fill",(function t(r){if(r.data.isSunburstRoot)return"transparent";if(r.parent){if(r.parent.data.isSunburstRoot)return e.hsl(n.fill(r.data.key));var a=t(r.parent);return a.l*=1.15,a}return tr("Data passed to sszvis.component.sunburst does not have the expected tree structure. You should prepare it using sszvis.format.sunburst.prepareData"),e.hsl(n.fill(r.data.key))})),c.transition(Mr()).attrTween("d",(function(t){var r=e.interpolate(t.x0,t._x0),n=e.interpolate(t.x1,t._x1);return function(e){return t.x0=r(e),t.x1=n(e),l(t)}}));var p=xt().position((function(t){var e=a(t),r=o(t),n=e+Math.abs(r-e)/2-Math.PI/2,l=(i(t)+s(t))/2;return[Math.cos(n)*l,Math.sin(n)*l]}));r.call(p)}))},t.sunburstGetRadiusExtent=function(t){return[e.min(t,(function(t){return t.y0})),e.max(t,(function(t){return t.y1}))]},t.sunburstLayout=function(t,e){var r=e/2,n=r/3;return{centerRadius:n,numLayers:t,ringWidth:Math.max(10,Math.min(60,(r-n)/t))}},t.sunburstPrepareData=function(){const t=[];var n=r,a=function(){return 0};function o(r){const o=an(e.rollup(r,u,...t));console.log(o);const i=e.hierarchy({isSunburstRoot:!0,values:o},g("values")).sort(a).sum((function(t){return t.value?n(t.value):0}));return e.partition()(i),function t(e){return[].concat.apply([e],(e.children||[]).map(t))}(i).filter((function(t){return!t.data.isSunburstRoot}))}return o.calculate=function(t){return o(t)},o.layer=function(e){return t.push(e),o},o.value=function(t){return n=t,o},o.sort=function(t){return a=t,o},o},t.swissMapPath=sn,t.swissMapProjection=on,t.textWrap=ar,t.tooltip=function(){var t=Ot();return ft().delegate("header",t).delegate("body",t).delegate("orientation",t).delegate("dx",t).delegate("dy",t).delegate("opacity",t).prop("renderInto").prop("visible",x).visible(!1).renderSelection((function(e){var r=e.props(),n=r.renderInto.node().getBoundingClientRect(),a=[];e.each((function(t){if(r.visible(t)){var e=this.getBoundingClientRect(),o=[e.left-n.left,e.top-n.top];a.push({datum:t,x:o[0],y:o[1]})}})),r.renderInto.datum(a).call(t)}))},t.tooltipAnchor=xt,t.transformTranslateSubpixelShift=yt,t.translateString=bt,t.viewport=Re,t.voronoi=function(){var t=e.dispatch("over","out"),r=ft().prop("x").prop("y").prop("bounds").prop("debug").render((function(r){var n=e.select(this),a=n.props();if(!a.bounds)return er("behavior.voronoi - requires bounds"),!1;const o=e.Delaunay.from(r,(t=>a.x(t)),(t=>a.y(t)));var i=o.voronoi(a.bounds),s=n.selectAll("[data-sszvis-behavior-voronoi]").data(i.cellPolygons()),l=s.enter().append("path").attr("data-sszvis-behavior-voronoi","").attr("data-sszvis-behavior-pannable","").attr("class","sszvis-interactive");s.exit().remove(),(s=s.merge(l)).attr("d",(function(t){return"M"+t.join("L")+"Z"})).attr("fill","transparent").on("mouseover",(function(e){var n=this.parentNode.getBoundingClientRect();const i=o.find(e.clientX,e.clientY);gr(e,[n.left+a.x(r[i]),n.top+a.y(r[i])])&&t.apply("over",this,[r[i]])})).on("mousemove",(function(e){var n=this.parentNode.getBoundingClientRect();const i=o.find(e.clientX,e.clientY);gr(e,[n.left+a.x(r[i]),n.top+a.y(r[i])])?t.apply("over",this,[r[i]]):t.apply("out",this,[])})).on("mouseout",(function(){t.apply("out",this,[])})).on("touchstart",(function(n){var i=this.parentNode.getBoundingClientRect();const s=o.find(n.clientX,n.clientY);if(gr(p(n),[i.left+a.x(r[s]),i.top+a.y(r[s])])){n.preventDefault(),t.apply("over",this,[r[s]]);e.select(this).on("touchmove",(function(){var e=p(n),r=fr(e),o=hr(r);if(null!==o){var i=r.parentNode.getBoundingClientRect();gr(e,[i.left+a.x(o.data),i.top+a.y(o.data)])?(n.cancelable&&n.preventDefault(),t.apply("over",this,[o.data])):t.apply("out",this,[])}else t.apply("out",this,[])})).on("touchend",(function(){t.apply("out",this,[]),e.select(this).on("touchmove",null).on("touchend",null)}))}})),a.debug&&s.attr("stroke","#f00")}));return r.on=function(){var e=t.on.apply(t,arguments);return e===t?r:e},r},t.widthAdaptiveMapPathStroke=function(t){return Math.min(Math.max(.8,t/400),1.1)},t.withAlpha=function(t,r){var n=e.rgb(t);return"rgba("+n.r+","+n.g+","+n.b+","+r+")"}}));
