/*! sszvis v2.6.8, Copyright 2014-present Statistik Stadt Zürich */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3")):"function"==typeof define&&define.amd?define(["exports","d3"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).sszvis={},t.d3)}(this,(function(t,e){"use strict";e.selection.prototype.selectDiv=function(t){const e=this.selectAll('[data-d3-selectdiv="'+t+'"]').data((t=>[t])),r=e.enter().append("div").attr("data-d3-selectdiv",t).style("position","absolute");return e.merge(r)},e.selection.prototype.selectGroup=function(t){const e=this.selectAll('[data-d3-selectgroup="'+t+'"]').data((t=>[t])),r=e.enter().append("g").attr("data-d3-selectgroup",t);return e.merge(r)};const r=function(t){return t},n=function(t){return"[object String]"===Object.prototype.toString.call(t)},o=function(t){return t instanceof e.selection},a=function(t,e){switch(t){case 0:return function(){return e.call(this)};case 1:return function(t){return e.call(this,t)};case 2:return function(t,r){return e.call(this,t,r)};case 3:return function(t,r,n){return e.call(this,t,r,n)};case 4:return function(t,r,n,o){return e.call(this,t,r,n,o)};case 5:return function(t,r,n,o,a){return e.call(this,t,r,n,o,a)};case 6:return function(t,r,n,o,a,s){return e.call(this,t,r,n,o,a,s)};case 7:return function(t,r,n,o,a,s,i){return e.call(this,t,r,n,o,a,s,i)};case 8:return function(t,r,n,o,a,s,i,l){return e.call(this,t,r,n,o,a,s,i,l)};case 9:return function(t,r,n,o,a,s,i,l,c){return e.call(this,t,r,n,o,a,s,i,l,c)};case 10:return function(t,r,n,o,a,s,i,l,c,p){return e.call(this,t,r,n,o,a,s,i,l,c,p)};default:return e}},s=function(){const t=arguments,e=arguments.length-1;return function(){let r=e,n=Reflect.apply(t[r],this,arguments);for(;r--;)n=t[r].call(this,n);return n}},i=function(t){return void 0!==t&&null!=t&&!Number.isNaN(t)},l=function(t,e){const r=Array.from({length:t});for(let n=0;n<t;++n)r[n]=e;return r},c=function(t,e){for(const r of e)if(t(r))return r},p=function(t){return t[0]},u=function(t){return t.touches&&t.touches.length>0?t.touches[0]:t.changedTouches&&t.changedTouches.length>0?t.changedTouches[0]:null},d=function(t){return null===t},h=function(t){return Object(t)===t},f=function(t){return t.at(-1)},m=function(t){return function(){return!Reflect.apply(t,this,arguments)}},g=function(t){return function(e){return e[t]}},y=function(t,e){return function(r){const n=void 0===r?void 0:r[t];return void 0===n?e:n}},v=function(t,e){return e||(e=r),t.reduce(((r,n,o)=>{const a=e(n,o,t);return r.includes(a)?r:[...r,a]}),[])},b=function(t,e){return t.toString()===e.toString()},x=function(t){return"function"==typeof t?t:function(){return t}},_=function(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");const r=function(){const n=arguments,o=e?e.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);const s=t.apply(this,n);return r.cache=a.set(o,s)||a,s};return r.cache=new Map,r};function k(t,e,r){const n=function(t){const e=t.selectAll("defs").data([0]),r=e.enter().append("defs");return e.merge(r)}(t).selectAll(e+"#"+r).data([0]),o=n.enter().append(e).attr("id",r);return n.merge(o)}const z=.6;function A(t){return function(){return ot(e.scaleOrdinal().range(t.map(st)).unknown(st(t[0])))}}const w="#3431DE",S="#0A8DF6",F="#23C3F1",P="#7B4FB7",M="#DB247D",R="#FB737E",C="#007C78",T="#1D942E",O="#99C32E",D="#9A5B01",L="#FF720C",B="#FBB900",E=A([w,S,F,P,M,R,C,T,O,D,L,B]),N=A([w,M,T,B,F,L]),W=A([w,S,F,P,M,R]),j=A([C,T,O,D,L,B]);function H(t){return function(){return at(e.scaleLinear().range(t.map(st)))}}const G=H(["#CADEFF","#5B6EFF","#211A8A"]),I=H(["#FED2EE","#ED408D","#7D0044"]),J=H(["#CFEED8","#34B446","#0C4B1F"]),Y=H(["#FCDDBB","#EA5D00","#611F00"]);function U(t){return function(){return function(t){return t=function(t){const r=t.domain;if(!t.range())return t;const n=t.range().length;return t.domain=function(t){if(!t)return r.call(this);const o=[];for(let r=0;r<n;r++)o.push(e.quantile(t,r/(n-1)));return r.call(this,o)},t}(t),t.reverse=function(){return at(t.copy().range(t.range().reverse()))},t}(e.scaleLinear().range(t.map(st)))}}const V=U(["#611F00","#A13200","#EA5D00","#FF9A54","#FCDDBB","#CADEFF","#89AFFF","#5B6EFF","#3431DE","#211A8A"]),K=U(["#782600","#CC4309","#FF720C","#FFBC88","#E4E0DF","#AECBFF","#6B8EFF","#3B51FF","#2F2ABB"]),X=U(["#7D0044","#C4006A","#ED408D","#FF83B9","#FED2EE","#CFEED8","#81C789","#34B446","#1A7F2D","#0C4B1F"]),q=U(["#A30059","#DB247D","#FF579E","#FFA8D0","#E4E0DF","#A8DBB1","#55BC5D","#1D942E","#10652A"]);function Q(t){return function(){return at(e.scaleOrdinal().range(t.map(st)))}}const Z=Q(["#FAFAFA"]),$=Q(["#EAEAEA"]),tt=Q(["#D6D6D6"]),et=Q(["#B8B8B8"]),rt=Q(["#7C7C7C"]),nt=Q(["#545454"]);function ot(t){return t.darker=function(){return ot(t.copy().range(t.range().map(e.lab).map(it("darker",z))))},t.brighter=function(){return ot(t.copy().range(t.range().map(e.lab).map(it("brighter",z))))},t.reverse=function(){return ot(t.copy().range(t.range().reverse()))},t}function at(t){return t=function(t){const r=t.domain;return t.domain=function(t){if(1===arguments.length){const n=[t[0],e.mean(t),t[1]];return r.call(this,n)}return Reflect.apply(r,this,arguments)},t}(t),t.reverse=function(){return at(t.copy().range(t.range().reverse()))},t}function st(t){return e.lab(t)}function it(t){const e=Array.prototype.slice.call(arguments,1);return function(r){return r[t].apply(r,e)}}const lt=function(t){const e="#CCCCCC";t.attr("patternUnits","userSpaceOnUse").attr("patternContentUnits","userSpaceOnUse").attr("x",0).attr("y",0).attr("width",14).attr("height",14),t.append("rect").attr("x",0).attr("y",0).attr("width",14).attr("height",14).attr("fill","#FAFAFA"),t.append("line").attr("x1",1).attr("y1",10).attr("x2",5).attr("y2",14).attr("stroke",e),t.append("line").attr("x1",5).attr("y1",10).attr("x2",1).attr("y2",14).attr("stroke",e),t.append("line").attr("x1",8).attr("y1",3).attr("x2",12).attr("y2",7).attr("stroke",e),t.append("line").attr("x1",12).attr("y1",3).attr("x2",8).attr("y2",7).attr("stroke",e)},ct=function(t){t.attr("patternUnits","userSpaceOnUse").attr("patternContentUnits","userSpaceOnUse").attr("x",0).attr("y",0).attr("width",6).attr("height",6),t.append("rect").attr("x",0).attr("y",0).attr("width",6).attr("height",6).attr("fill","#fff"),t.append("line").attr("x1",0).attr("y1",3).attr("x2",3).attr("y2",0).attr("stroke","#ddd").attr("stroke-linecap","square"),t.append("line").attr("x1",3).attr("y1",6).attr("x2",6).attr("y2",3).attr("stroke","#ddd").attr("stroke-linecap","square")},pt=function(t){t.attr("x1",0).attr("y1",0).attr("x2",.55).attr("y2",1).attr("id","lake-fade-gradient"),t.append("stop").attr("offset",.74).attr("stop-color","white").attr("stop-opacity",1),t.append("stop").attr("offset",.97).attr("stop-color","white").attr("stop-opacity",0)},ut=function(t){t.attr("maskContentUnits","objectBoundingBox"),t.append("rect").attr("fill","url(#lake-fade-gradient)").attr("width",1).attr("height",1)},dt=function(t){t.attr("patternUnits","userSpaceOnUse").attr("patternContentUnits","userSpaceOnUse").attr("x",0).attr("y",0).attr("width",6).attr("height",6),t.append("line").attr("x1",0).attr("y1",3).attr("x2",3).attr("y2",0).attr("stroke","#e6e6e6").attr("stroke-width",1.1),t.append("line").attr("x1",3).attr("y1",6).attr("x2",6).attr("y2",3).attr("stroke","#e6e6e6").attr("stroke-width",1.1)};function ht(){const t={};let e=null,r=ft;function n(n){e&&(n.props=function(){return gt(t)},e.apply(n,mt(arguments))),n.each((function(){this.__props__=gt(t),r.apply(this,mt(arguments))}))}return n.prop=function(e,r){return r||(r=ft),n[e]=function(t,e,r){return r||(r=ft),function(){return 0===arguments.length?t[e]:(t[e]=r.apply(null,mt(arguments)),this)}}(t,e,r.bind(n)).bind(n),n},n.delegate=function(t,e){return n[t]=function(){const r=e[t].apply(e,mt(arguments));return 0===arguments.length?r:n},n},n.renderSelection=function(t){return e=t,n},n.render=function(t){return r=t,n},n}function ft(t){return t}function mt(t){return Array.prototype.slice.call(t)}function gt(t){const e={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}e.selection.prototype.props=function(){if(arguments.length>0)throw new Error("selection.props() does not accept any arguments");if(1!=this.size())throw new Error("only one group is supported");if(1!=this._groups[0].length)throw new Error("only one node is supported");return this._groups[0][0].__props__||{}};const yt=function(t){return Math.floor(t)+.5},vt=function(t){const e=s(Math.floor,Number),r=t.match(/(translate\()\s*([\d ,.-]+)\s*(\))/i)[2].replace(","," ").replace(/\s+/," ").split(" ").map(Number);1===r.length&&r.push([0]);const n=r.map(e);return[r[0]-n[0],r[1]-n[1]]};function bt(t,e){return"translate("+t+","+e+")"}function xt(t){return bt.apply(null,t)}function _t(){return ht().prop("position").position(x([0,0])).prop("debug").render((function(t){const r=e.select(this),n=r.props();let o=r.selectAll("[data-tooltip-anchor]").data(t);const a=o.enter().append("rect").attr("height",1).attr("width",1).attr("fill","none").attr("stroke","none").attr("visibility","none").attr("data-tooltip-anchor","");if(o.exit().remove(),o=o.merge(a),o.attr("transform",s(xt,n.position)),n.debug){let e=r.selectAll("[data-tooltip-anchor-debug]").data(t);const o=e.enter().append("circle").attr("data-tooltip-anchor-debug","");e.exit().remove(),e=e.merge(o),e.attr("r",2).attr("fill","#fff").attr("stroke","#f00").attr("stroke-width",1.5).attr("transform",s(xt,n.position))}}))}function kt(t,e,r){return function(n){const o=n.enter().append("circle").classed("sszvis-rangeFlag__mark",!0).classed(t,!0);n.exit().remove(),(n=n.merge(o)).attr("r",3.5).attr("cx",e).attr("cy",r)}}const zt={decimal:".",thousands:" ",grouping:[3],currency:["CHF ",""],dateTime:"%a. %e. %B %X %Y",date:"%d.%m.%Y",time:"%H:%M:%S",periods:[],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]},At=e.timeFormatLocale(zt).format,wt=e.formatLocale(zt).format,St=function(t){const e=[[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%H:%M",function(t){return t.getMinutes()}],["%H Uhr",function(t){return t.getHours()}],["%a., %d.",function(t){return t.getDay()&&1!=t.getDate()}],["%e. %b",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",function(){return!0}]];for(const r of e)if(r[1](t))return At(r[0])(t)},Ft=s((t=>t.toUpperCase()),At("%b")),Pt=At("%Y"),Mt=function(t){let e;const r=Math.abs(t);return null==t||Number.isNaN(t)?"–":r>=1e4?wt(",.0f")(t):r>=100?(e=Math.min(1,Tt(t)),Ot(wt("."+e+"f")(t))):r>0?(e=Math.min(2,Tt(t)),Ot(wt("."+e+"f")(t))):wt(".0f")(0)},Rt=function(t,e){return arguments.length>1?Rt(t)(e):function(e){const r=Math.abs(e);return r>=100&&r<1e4?wt("."+t+"f")(e):wt(",."+t+"f")(e)}},Ct=String;function Tt(t){return(String(Math.abs(t)).split(".")[1]||"").length}function Ot(t){return t.replace(/(\.\d*[1-9])0+$|\.0*$/,"$1")}const Dt=6;const Lt=function(){return ht().prop("header").prop("body").prop("orientation",x).orientation("bottom").prop("dx",x).dx(1).prop("dy",x).dy(1).prop("opacity",x).opacity(1).renderSelection((t=>{const r=t.datum(),n=t.props(),o=i,a=o(n.header)&&!o(n.body)||!o(n.header)&&o(n.body);let s=t.selectAll(".sszvis-tooltip").data(r);s.exit().remove();const l=s.enter().append("div");s=s.merge(l),s.style("pointer-events","none").style("opacity",n.opacity).style("padding-top",(t=>"top"===n.orientation(t)?Dt+"px":null)).style("padding-right",(t=>"right"===n.orientation(t)?Dt+"px":null)).style("padding-bottom",(t=>"bottom"===n.orientation(t)?Dt+"px":null)).style("padding-left",(t=>"left"===n.orientation(t)?Dt+"px":null)).classed("sszvis-tooltip",!0);const c=l.append("svg").attr("class","sszvis-tooltip__background").attr("height",0).attr("width",0),p=c.append("path");if(void 0!==window.SVGFEColorMatrixElement&&2==SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE){const t=c.append("filter").attr("id","sszvisTooltipShadowFilter").attr("height","150%");t.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",2),t.append("feComponentTransfer").append("feFuncA").attr("type","linear").attr("slope",.2);const e=t.append("feMerge");e.append("feMergeNode"),e.append("feMergeNode").attr("in","SourceGraphic"),p.attr("filter","url(#sszvisTooltipShadowFilter)")}else c.classed("sszvis-tooltip__background--fallback",!0);const u=l.append("div").classed("sszvis-tooltip__content",!0);u.append("div").classed("sszvis-tooltip__header",!0),u.append("div").classed("sszvis-tooltip__body",!0),s.select(".sszvis-tooltip__header").datum(g("datum")).html(n.header||x("")),s.select(".sszvis-tooltip__body").datum(g("datum")).html((t=>{const e=n.body?x(n.body)(t):"";return Array.isArray(e)?'<table class="sszvis-tooltip__body__table">'+e.map((t=>"<tr>"+t.map((t=>"<td>"+t+"</td>")).join("")+"</tr>")).join("")+"</table>":e})),t.selectAll(".sszvis-tooltip").classed("sszvis-tooltip--small",a).each((function(t){const r=e.select(this),o=r.node().getBoundingClientRect(),s=Reflect.apply(n.orientation,this,arguments);switch(s){case"top":r.style("left",t.x-o.width/2+"px").style("top",t.y+n.dy(t)+"px");break;case"bottom":r.style("left",t.x-o.width/2+"px").style("top",t.y-n.dy(t)-o.height+"px");break;case"left":r.style("left",t.x+n.dx(t)+"px").style("top",t.y-o.height/2+"px");break;case"right":r.style("left",t.x-n.dx(t)-o.width+"px").style("top",t.y-o.height/2+"px")}const i=o.height+10,l=o.width+10;r.select(".sszvis-tooltip__background").attr("height",i).attr("width",l).style("left","-5px").style("top","-5px").select("path").attr("d",function(t,e,r,n){switch(r){case"top":t[1]=t[1]+Dt;break;case"bottom":e[1]=e[1]-Dt;break;case"left":t[0]=t[0]+Dt;break;case"right":e[0]=e[0]-Dt}return[["M",Bt(t),Et(t)+n],Nt(Bt(t),Et(t),Bt(t)+n,Et(t),Bt(e)-n,Et(t),"top"===r),Nt(Bt(e),Et(t),Bt(e),Et(t)+n,Bt(e),Et(e)-n,"right"===r),Nt(Bt(e),Et(e),Bt(e)-n,Et(e),Bt(t)+n,Et(e),"bottom"===r),Nt(Bt(t),Et(e),Bt(t),Et(e)-n,Bt(t),Et(t)+n,"left"===r)].map((t=>t.join(" "))).join(" ")}([5,5],[l-5,i-5],s,a?3:4))}))}))};function Bt(t){return t[0]}function Et(t){return t[1]}function Nt(t,e,r,n,o,a,s){const i=r+(o-r)/2,l=n+(a-n)/2;let c=[];s&&n===a?c=r<o?["L",i-Dt,l,"L",i,l-Dt,"L",i+Dt,l]:["L",i+Dt,l,"L",i,l+Dt,"L",i-Dt,l]:s&&r===o&&(c=n<a?["L",i,l-Dt,"L",i+Dt,l,"L",i,l+Dt]:["L",i,l+Dt,"L",i-Dt,l,"L",i,l-Dt]);const p=["L",o,a];return[...["Q",t,e,r,n],...c,...p]}var Wt=Symbol.for("immer-nothing"),jt=Symbol.for("immer-draftable"),Ht=Symbol.for("immer-state");function Gt(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var It=Object.getPrototypeOf;function Jt(t){return!!t&&!!t[Ht]}function Yt(t){return!!t&&(Vt(t)||Array.isArray(t)||!!t[jt]||!!t.constructor?.[jt]||Zt(t)||$t(t))}var Ut=Object.prototype.constructor.toString();function Vt(t){if(!t||"object"!=typeof t)return!1;const e=It(t);if(null===e)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===Ut}function Kt(t,e){0===Xt(t)?Reflect.ownKeys(t).forEach((r=>{e(r,t[r],t)})):t.forEach(((r,n)=>e(n,r,t)))}function Xt(t){const e=t[Ht];return e?e.type_:Array.isArray(t)?1:Zt(t)?2:$t(t)?3:0}function qt(t,e){return 2===Xt(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Qt(t,e,r){const n=Xt(t);2===n?t.set(e,r):3===n?t.add(r):t[e]=r}function Zt(t){return t instanceof Map}function $t(t){return t instanceof Set}function te(t){return t.copy_||t.base_}function ee(t,e){if(Zt(t))return new Map(t);if($t(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=Vt(t);if(!0===e||"class_only"===e&&!r){const e=Object.getOwnPropertyDescriptors(t);delete e[Ht];let r=Reflect.ownKeys(e);for(let n=0;n<r.length;n++){const o=r[n],a=e[o];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(e[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(It(t),e)}{const e=It(t);if(null!==e&&r)return{...t};const n=Object.create(e);return Object.assign(n,t)}}function re(t,e=!1){return oe(t)||Jt(t)||!Yt(t)||(Xt(t)>1&&(t.set=t.add=t.clear=t.delete=ne),Object.freeze(t),e&&Object.entries(t).forEach((([t,e])=>re(e,!0)))),t}function ne(){Gt(2)}function oe(t){return Object.isFrozen(t)}var ae,se={};function ie(t){const e=se[t];return e||Gt(0),e}function le(){return ae}function ce(t,e){e&&(ie("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function pe(t){ue(t),t.drafts_.forEach(he),t.drafts_=null}function ue(t){t===ae&&(ae=t.parent_)}function de(t){return ae={drafts_:[],parent_:ae,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function he(t){const e=t[Ht];0===e.type_||1===e.type_?e.revoke_():e.revoked_=!0}function fe(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return void 0!==t&&t!==r?(r[Ht].modified_&&(pe(e),Gt(4)),Yt(t)&&(t=me(e,t),e.parent_||ye(e,t)),e.patches_&&ie("Patches").generateReplacementPatches_(r[Ht].base_,t,e.patches_,e.inversePatches_)):t=me(e,r,[]),pe(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Wt?t:void 0}function me(t,e,r){if(oe(e))return e;const n=e[Ht];if(!n)return Kt(e,((o,a)=>ge(t,n,e,o,a,r))),e;if(n.scope_!==t)return e;if(!n.modified_)return ye(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const e=n.copy_;let o=e,a=!1;3===n.type_&&(o=new Set(e),e.clear(),a=!0),Kt(o,((o,s)=>ge(t,n,e,o,s,r,a))),ye(t,e,!1),r&&t.patches_&&ie("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function ge(t,e,r,n,o,a,s){if(Jt(o)){const s=me(t,o,a&&e&&3!==e.type_&&!qt(e.assigned_,n)?a.concat(n):void 0);if(Qt(r,n,s),!Jt(s))return;t.canAutoFreeze_=!1}else s&&r.add(o);if(Yt(o)&&!oe(o)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;me(t,o),e&&e.scope_.parent_||"symbol"==typeof n||!Object.prototype.propertyIsEnumerable.call(r,n)||ye(t,o)}}function ye(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&re(e,r)}var ve={get(t,e){if(e===Ht)return t;const r=te(t);if(!qt(r,e))return function(t,e,r){const n=_e(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}(t,r,e);const n=r[e];return t.finalized_||!Yt(n)?n:n===xe(t.base_,e)?(ze(t),t.copy_[e]=Ae(n,t)):n},has:(t,e)=>e in te(t),ownKeys:t=>Reflect.ownKeys(te(t)),set(t,e,r){const n=_e(te(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const n=xe(te(t),e),o=n?.[Ht];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}(r,n)&&(void 0!==r||qt(t.base_,e)))return!0;ze(t),ke(t)}return t.copy_[e]===r&&(void 0!==r||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty:(t,e)=>(void 0!==xe(t.base_,e)||e in t.base_?(t.assigned_[e]=!1,ze(t),ke(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0),getOwnPropertyDescriptor(t,e){const r=te(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n?{writable:!0,configurable:1!==t.type_||"length"!==e,enumerable:n.enumerable,value:r[e]}:n},defineProperty(){Gt(11)},getPrototypeOf:t=>It(t.base_),setPrototypeOf(){Gt(12)}},be={};function xe(t,e){const r=t[Ht];return(r?te(r):t)[e]}function _e(t,e){if(!(e in t))return;let r=It(t);for(;r;){const t=Object.getOwnPropertyDescriptor(r,e);if(t)return t;r=It(r)}}function ke(t){t.modified_||(t.modified_=!0,t.parent_&&ke(t.parent_))}function ze(t){t.copy_||(t.copy_=ee(t.base_,t.scope_.immer_.useStrictShallowCopy_))}Kt(ve,((t,e)=>{be[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),be.deleteProperty=function(t,e){return be.set.call(this,t,e,void 0)},be.set=function(t,e,r){return ve.set.call(this,t[0],e,r,t[0])};function Ae(t,e){const r=Zt(t)?ie("MapSet").proxyMap_(t,e):$t(t)?ie("MapSet").proxySet_(t,e):function(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:le(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=n,a=ve;r&&(o=[n],a=be);const{revoke:s,proxy:i}=Proxy.revocable(o,a);return n.draft_=i,n.revoke_=s,i}(t,e);return(e?e.scope_:le()).drafts_.push(r),r}function we(t){if(!Yt(t)||oe(t))return t;const e=t[Ht];let r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=ee(t,e.scope_.immer_.useStrictShallowCopy_)}else r=ee(t,!0);return Kt(r,((t,e)=>{Qt(r,t,we(e))})),e&&(e.finalized_=!1),r}var Se=new class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,e,r)=>{if("function"==typeof t&&"function"!=typeof e){const r=e;e=t;const n=this;return function(t=r,...o){return n.produce(t,(t=>e.call(this,t,...o)))}}let n;if("function"!=typeof e&&Gt(6),void 0!==r&&"function"!=typeof r&&Gt(7),Yt(t)){const o=de(this),a=Ae(t,void 0);let s=!0;try{n=e(a),s=!1}finally{s?pe(o):ue(o)}return ce(o,r),fe(n,o)}if(!t||"object"!=typeof t){if(n=e(t),void 0===n&&(n=t),n===Wt&&(n=void 0),this.autoFreeze_&&re(n,!0),r){const e=[],o=[];ie("Patches").generateReplacementPatches_(t,n,e,o),r(e,o)}return n}Gt(1)},this.produceWithPatches=(t,e)=>{if("function"==typeof t)return(e,...r)=>this.produceWithPatches(e,(e=>t(e,...r)));let r,n;return[this.produce(t,e,((t,e)=>{r=t,n=e})),r,n]},"boolean"==typeof t?.autoFreeze&&this.setAutoFreeze(t.autoFreeze),"boolean"==typeof t?.useStrictShallowCopy&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Yt(t)||Gt(8),Jt(t)&&(t=function(t){Jt(t)||Gt(10);return we(t)}(t));const e=de(this),r=Ae(t,void 0);return r[Ht].isManual_=!0,ue(e),r}finishDraft(t,e){const r=t&&t[Ht];r&&r.isManual_||Gt(9);const{scope_:n}=r;return ce(n,e),fe(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const n=e[r];if(0===n.path.length&&"replace"===n.op){t=n.value;break}}r>-1&&(e=e.slice(r+1));const n=ie("Patches").applyPatches_;return Jt(t)?n(t,e):this.produce(t,(t=>n(t,e)))}};Se.produce,Se.produceWithPatches.bind(Se);var Fe=Se.setAutoFreeze.bind(Se);Se.setUseStrictShallowCopy.bind(Se),Se.applyPatches.bind(Se);var Pe=Se.createDraft.bind(Se),Me=Se.finishDraft.bind(Se);const Re=function(t,r){r||(r={}),r.src||(r.src="fallback.png");(o(t)?t:e.select(t)).append("img").attr("class","sszvis-fallback-image").attr("src",r.src)};function Ce(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Te=function(t,e,r){var n,o=0;return arguments.length<3&&(r=!0),function(){var a=arguments,s=this;n=function(){t.apply(s,a),o=(new Date).getTime()+e,n=null,r&&setTimeout((function(){n&&n()}),e)},(new Date).getTime()>o&&n()}},Oe=Ce(Te);const De={resize:[]};"undefined"!=typeof window&&e.select(window).on("resize",Oe((()=>{Le("resize")}),500));const Le=function(t){const e=Array.prototype.slice.call(arguments,1);if(De[t])for(const r of De[t])r.apply(null,e);return this},Be={on:function(t,e){return De[t]||(De[t]=[]),De[t]=[...De[t].filter((t=>t!==e)),e],this},off:function(t,e){return De[t]?(De[t]=De[t].filter((t=>t!==e)),this):this},trigger:Le};Fe(!1);function Ee(t,e){if(!t)throw new Error("[sszvis.app] ".concat(e))}function Ne(t){return"function"==typeof t}function We(t,e){const r=Ve(e);return c((t=>He(t,r)),t)}function je(t,e){return c((function(t){return t.name===e}),t)}function He(t,e){const r=t.measurement,n=Ve(e);return n.width<=r.width&&n.screenHeight<=r.screenHeight}function Ge(t,e){const r=Ve(e);return t.filter((t=>He(t,r)))}function Ie(t){return[...t.map(Ke),Ke({name:"_"})]}const Je=function(){const t=Ie([{name:"palm",width:540},{name:"lap",width:749}]);return function(){return t}}(),Ye=Xe("palm"),Ue=Xe("lap");function Ve(t){const e=y("width",1/0),r=y("screenHeight",1/0);return{width:e(t),screenHeight:r(t)}}function Ke(t){const e=i(t.measurement)?Ve(t.measurement):Ve({width:t.width,screenHeight:t.screenHeight});return{name:t.name,measurement:e}}function Xe(t){return function(e){return He(je(Je(),t),e)}}function qe(t,e){const r=t/e;return function(t){return t/r}}const Qe=qe(4,3),Ze=qe(16,10),$e=function(t){return Math.min(qe(12,5)(t),500)};$e.MAX_HEIGHT=500;const tr=function(t){return Math.min(qe(1,1)(t),420)};tr.MAX_HEIGHT=420;const er=function(t){return Math.min(qe(4,5)(t),600)};er.MAX_HEIGHT=600;const rr={palm:Qe,lap:Ze,_:$e},nr=function(t){const e=We(Je(),t);return(0,rr[e.name])(t.width)},or=sr("warn"),ar=sr("error");function sr(t){return function(){if(console&&console[t])for(const r of(e=arguments,Array.prototype.slice.call(e)))console[t](r);var e}}const ir=function(t){return t.rangeExtent?t.rangeExtent():function(t){const e=t[0],r=t.at(-1);return e<r?[e,r]:[r,e]}(t.range())};function lr(t,r,n,o){o=(o||5)-2;const a=r;r-=2*(n=n||5);const s=[];return t.each((function(){const t=e.select(this),i=t.text().split(/[\t\n\v\f\r ]+/).reverse();let l,c=[],p=0;let u,d=t.attr("y"),h=Number.parseFloat(t.attr("dy")),f=1;const m=t.style("text-anchor")||"start";Number.isNaN(h)&&(h=0);if(e.select(t.node().parentNode).classed("tick"))switch(m){case"start":u=-r/2;break;case"middle":u=0;break;case"end":u=r/2}else switch(m){case"start":u=n;break;case"middle":u=a/2;break;case"end":u=a-n}d=+(null===d?o:d);let g=t.text(null).append("tspan").attr("x",u).attr("y",d).attr("dy",h+"em");for(;i.length>0;)l=i.pop(),c.push(l),g.text(c.join(" ")),g.node().getComputedTextLength()>r&&c.length>1&&(c.pop(),g.text(c.join(" ")),c=[l],g=t.append("tspan").attr("x",u).attr("y",d).attr("dy",1.1*++p+h+"em").text(l),++f);s.push(f)})),s}const cr=function(){return ht().prop("scale").prop("orient").prop("ticks").prop("tickValues").prop("tickSize").prop("tickSizeInner").prop("tickSizeOuter").prop("tickPadding").prop("tickFormat").prop("_scale").prop("orient").orient("bottom").prop("alignOuterLabels").alignOuterLabels(!1).prop("contour").prop("hideBorderTickThreshold").hideBorderTickThreshold(8).prop("hideLabelThreshold").hideLabelThreshold(10).prop("highlightTick",x).prop("showZeroY").showZeroY(!1).prop("slant").prop("textWrap").prop("tickLength").prop("title").prop("titleAnchor").prop("titleCenter").prop("dxTitle").prop("dyTitle").prop("titleVertical").prop("vertical").vertical(!1).prop("yOffset").yOffset(0).render((function(){const t=e.select(this),r=t.props(),n=!r.vertical&&"bottom"===r.orient,o=function(){switch(r.orient){case"bottom":return e.axisBottom();case"top":return e.axisTop();case"left":return e.axisLeft();case"right":return e.axisRight()}}();for(const t of["scale","ticks","tickValues","tickSizeInner","tickSizeOuter","tickPadding","tickFormat","tickSize"])if(void 0!==r[t]){if(void 0===o[t])throw new Error('axis: "'+t+'" not available');o[t](r[t])}r._scale&&o.scale(r._scale);const a=t.selectGroup("sszvis-axis").classed("sszvis-axis",!0).classed("sszvis-axis--top",!r.vertical&&"top"===r.orient).classed("sszvis-axis--bottom",n).classed("sszvis-axis--vertical",r.vertical).attr("transform",bt(0,r.yOffset)).call(o);a.attr("fill",null).attr("font-size",null).attr("font-family",null);const s=o.scale(),l=a.selectAll("g.tick"),c=l.selectAll("text");l.each((function(){const t=vt(this.getAttribute("transform")),r=yt(0)-t[0],o=yt(n?2:0)+t[1];e.select(this).select("line").attr("transform",bt(r,o))})),c.each((function(){"top"!==r.orient&&"bottom"!==r.orient||e.select(this).attr("dx","-0.5"),"left"!==r.orient&&"right"!==r.orient||e.select(this).attr("y","-0.5")})),a.selectAll("path.domain");const p=ir(s);if(l.selectAll("line").each((function(t){const n=s(t),o=e.select(this);o.classed("hidden",!o.classed("sszvis-axis__longtick")&&(hr(n,p[0])<r.hideBorderTickThreshold||hr(n,p[1])<r.hideBorderTickThreshold))})),i(r.tickLength)){const t=e.extent(s.domain()),n=l.filter((e=>!b(e,t[0])&&!b(e,t[1]))),o=r.orient;let a=2;"left"!==o&&"right"!==o||(n.selectAll("text").each((function(){a=Math.max(this.getBoundingClientRect().width,a)})),a+=2);let i=n.selectAll("line.sszvis-axis__longtick").data([0]);if(r.tickLength>a){const t=i.enter().append("line").classed("sszvis-axis__longtick",!0);switch(i=i.merge(t),o){case"top":i.attr("y1",a).attr("y2",r.tickLength);break;case"bottom":i.attr("y1",-a).attr("y2",-r.tickLength);break;case"left":i.attr("x1",-a).attr("x2",-r.tickLength);break;case"right":i.attr("x1",a).attr("x2",r.tickLength)}}else i.remove()}if(r.alignOuterLabels){const t=ir(s),e=t[0],r=t[1];c.style("text-anchor",(t=>{const n=s(t);return hr(n,e)<12?"start":hr(n,r)<12?"end":"middle"}))}if(i(r.textWrap)&&c.call(lr,r.textWrap),r.slant&&c.call(fr[r.orient][r.slant]),r.highlightTick){const t=[],n=[];if(c.classed("hidden",!1).classed("active",r.highlightTick),r.hideLabelThreshold>0&&!r.slant){c.each((function(e){const o=this.getBoundingClientRect(),a={node:this,bounds:{top:o.top,right:o.right,bottom:o.bottom,left:o.left}};r.highlightTick(e)?(a.bounds.left-=r.hideLabelThreshold,a.bounds.right+=r.hideLabelThreshold,t.push(a)):n.push(a)}));for(const r of t)for(const t of n)e.select(t.node).classed("hidden",(u=t.bounds,!((d=r.bounds).left>u.right||d.right<u.left||d.top>u.bottom||d.bottom<u.top)))}}var u,d;if(r.title){const t=a.selectAll(".sszvis-axis__title").data([r.title]),e=t.enter().append("text").classed("sszvis-axis__title",!0);t.exit().remove(),t.merge(e).text((t=>t)).attr("transform",(()=>{const t=r.orient,e=ir(s),n=r.titleCenter?{left:"left"===t||"right"===t?0:"top"===t||"bottom"===t?(e[0]+e[1])/2:0,top:"left"===t||"right"===t?(e[0]+e[1])/2:"top"===t?0:"bottom"===t?32:0}:{left:"left"===t||"right"===t||"top"===t?0:"bottom"===t?e[1]:0,top:"left"===t||"right"===t||"top"===t?0:"bottom"===t?32:0};return n.vertical=!!r.titleVertical,n.left+=r.dxTitle||0,n.top+=r.dyTitle||0,"translate("+n.left+", "+n.top+") rotate("+(n.vertical?"-90":"0")+")"})).style("text-anchor",(()=>{const t=r.orient;if(void 0!==r.titleAnchor)return r.titleAnchor;switch(t){case"left":case"top":case"bottom":return"end";case"right":return"start"}}))}r.contour&&r.slant?or("Can't apply contour to slanted labels"):r.contour&&l.each((function(){const t=e.select(this),r=t.select("text").node();let n=t.select(".sszvis-axis__label-contour");n.empty()&&(n=e.select(r.cloneNode()).classed("sszvis-axis__label-contour",!0),this.insertBefore(n.node(),r)),n.text(r.textContent)}))}))},pr=function(t){const e=this.scale().domain(),r=[],n=Math.round(e.length/t);void 0!==e[0]&&r.push(e[0]);for(let t=n,o=e.length;t<o-1;t+=n)void 0!==e[t]&&r.push(e[t]);return void 0!==e.at(-1)&&r.push(e.at(-1)),this.tickValues(r),t},ur=function(){return cr().yOffset(2).ticks(3).tickSizeInner(4).tickSizeOuter(6.5).tickPadding(6).tickFormat(a(1,Mt))};ur.time=function(){return ur().tickFormat(St).alignOuterLabels(!0)},ur.ordinal=function(){return ur().prop("ticks",pr).tickFormat(Ct)},ur.pyramid=function(){return ur().ticks(10).prop("scale",(function(t){const e=t.copy(),r=e.domain(),n=e.range();return e.domain([-r[1],r[1]]).range([n[0]-n[1],n[0]+n[1]]),this._scale(e),e})).tickFormat((t=>Mt(Math.abs(t))))};const dr=function(){const t=cr().ticks(6).tickSize(0,0).tickPadding(0).tickFormat((e=>0!==e||t.showZeroY()?Mt(e):null)).vertical(!0);return t};function hr(t,e){return Math.abs(t-e)}dr.time=function(){return dr().tickFormat(St)},dr.ordinal=function(){return dr().prop("ticks",pr).tickFormat(Ct)};const fr={top:{horizontal(t){t.style("text-anchor","middle").attr("dx","-0.5").attr("dy","0.71em").attr("transform",null)},vertical(t){t.style("text-anchor","start").attr("dx","0em").attr("dy","0.35em").attr("transform","rotate(-90)")},diagonal(t){t.style("text-anchor","start").attr("dx","0.1em").attr("dy","0.1em").attr("transform","translate(-0.5) rotate(-45)")}},bottom:{horizontal(t){t.style("text-anchor","middle").attr("dx","-0.5").attr("dy","0.71em").attr("transform",null)},vertical(t){t.style("text-anchor","end").attr("dx","-1em").attr("dy","-0.75em").attr("transform","rotate(-90)")},diagonal(t){t.style("text-anchor","end").attr("dx","-0.8em").attr("dy","0em").attr("transform","rotate(-45)")}}};function mr(){const t=e.dispatch("start","move","drag","end"),r=ht().prop("debug").prop("xScale").prop("yScale").prop("draggable").prop("cancelScrolling",x).cancelScrolling(!1).prop("fireOnPanOnly",x).fireOnPanOnly(!1).prop("padding",(t=>{const e={top:0,left:0,bottom:0,right:0};for(const r in t)e[r]=t[r];return e})).padding({}).render((function(){const r=e.select(this),n=r.props(),o=ir(n.xScale).sort(e.ascending),a=ir(n.yScale).sort(e.ascending);o[0]-=n.padding.left,o[1]+=n.padding.right,a[0]-=n.padding.top,a[1]+=n.padding.bottom;let s=r.selectAll("[data-sszvis-behavior-move]").data([0]);const i=s.enter().append("rect").attr("data-sszvis-behavior-move","").attr("class","sszvis-interactive");s=s.merge(i),n.draggable&&s.classed("sszvis-interactive--draggable",!0),s.attr("x",o[0]).attr("y",a[0]).attr("width",o[1]-o[0]).attr("height",a[1]-a[0]).attr("fill","transparent").on("mouseover",(function(){t.apply("start",this,arguments)})).on("mousedown",(function(r){const o=this,a=e.select(document),s=e.select(window),i=function(){const o=e.pointer(r),a=gr(n.xScale,o[0]),s=gr(n.yScale,o[1]);r.preventDefault(),t.apply("drag",this,[a,s])},l=function(){o.__dragging__=!1,s.on("mouseup.sszvis-behavior-move",null),s.on("mousemove.sszvis-behavior-move",null),a.on("mouseout.sszvis-behavior-move",null),t.apply("end",this,arguments)};s.on("mousemove.sszvis-behavior-move",i),s.on("mouseup.sszvis-behavior-move",l),a.on("mouseout.sszvis-behavior-move",(()=>{const t=r.relatedTarget||r.toElement;t&&"HTML"!==t.nodeName||l()})),o.__dragging__=!0,i()})).on("mousemove",(function(r){const o=e.pointer(r),a=gr(n.xScale,o[0]),s=gr(n.yScale,o[1]);this.__dragging__||t.apply("move",this,[a,s])})).on("mouseout",(function(){t.apply("end",this,[])})).on("touchstart",(function(r){const o=p(e.pointer(r)),a=gr(n.xScale,o[0]),s=gr(n.yScale,o[1]),i=n.cancelScrolling(a,s);if(i&&r.preventDefault(),!n.fireOnPanOnly()||i){t.apply("start",this,[a,s]),t.apply("drag",this,[a,s]),t.apply("move",this,[a,s]);const o=function(){const o=p(e.pointer(r)),a=gr(n.xScale,o[0]),s=gr(n.yScale,o[1]),i=n.cancelScrolling(a,s);i&&r.preventDefault(),!n.fireOnPanOnly()||i?(t.apply("drag",this,[a,s]),t.apply("move",this,[a,s])):t.apply("end",this,[])},i=function(){t.apply("end",this,[]),e.select(this).on("touchmove",null).on("touchend",null)};e.select(this).on("touchmove",o).on("touchend",i)}})),n.debug&&s.attr("fill","rgba(255,0,0,0.2)")}));return r.on=function(){const e=t.on.apply(t,arguments);return e===t?r:e},r}function gr(t,e){switch(t.invert?"Linear":t.paddingInner?"Band":"Point"){case"Linear":return t.invert(e);case"Band":return function(t,e){const r=t.step(),n=t.paddingOuter()*r,o=t.paddingInner()*r,a=t.bandwidth(),s=t.range(),i=t.domain();if(1===i.length)return s[0]<=e&&s[1]>=e?i[0]:null;const l=i.map(((t,e)=>0===e?[s[0],s[0]+n+a+o/2]:e===i.length-1?[s[1]-(n+a+o/2),s[1]]:[s[0]+n+e*r-o/2,s[0]+n+(e+1)*r-o/2]));for(let t=0,r=l.length;t<r;t++)if(l[t][0]<e&&e<=l[t][1])return i[t];return null}(t,e);case"Point":return function(t,e){const r=t.step(),n=t.padding()*r,o=t.range(),a=t.domain();if(1===a.length)return o[0]<=e&&o[1]>=e?a[0]:null;const s=a.map(((t,e)=>0===e?[o[0],o[0]+n+r/2]:e===a.length-1?[o[1]-(n+r/2),o[1]]:[o[0]+n+e*r-r/2,o[0]+n+e*r+r/2]));for(let t=0,r=s.length;t<r;t++)if(s[t][0]<e&&e<=s[t][1])return a[t];return null}(t,e);default:throw new Error("Unknown scale type, could not invert")}}const yr=function(t){return!d(t)&&i(t)?document.elementFromPoint(t.clientX,t.clientY):null},vr=function(t){if(!d(t)){const r=e.select(t);if(!d(r.attr("data-sszvis-behavior-pannable"))){const t=r.datum();if(i(t))return t}}return null};const br=Math.pow(15,2);function xr(t,e){const r=t.clientX-e[0],n=t.clientY-e[1];return r*r+n*n<br}const _r=function(t){let r;return r=n(t)?e.select(t).node():o(t)?t.node():t,{width:r?r.getBoundingClientRect().width:void 0,screenWidth:window.innerWidth,screenHeight:window.innerHeight}},kr=function(){const t=document.createElement("canvas").getContext("2d"),e={};return function(r,n,o){const a=[r,n,o].join("-");return t.font=r+"px "+n,e[a]||(e[a]=t.measureText(o).width)}}(),zr=function(t){return kr(10,"Arial, sans-serif",t)},Ar=function(t){return kr(12,"Arial, sans-serif",t)},wr=516;function Sr(t,r){let n=null,a=null;0===arguments.length?n={}:1===arguments.length?h(t)?n=t:o(t)?(n={},a=t):(n={},a=e.select(t)):(n=t,a=o(r)?r:e.select(r));const s={top:Fr(n.top,0),right:Fr(n.right,1),bottom:Fr(n.bottom,0),left:Fr(n.left,1)},l=i(a)?_r(a):{width:wr},c=Fr(n.width,l.width),p=nr(l),u=Fr(n.height,p+s.top+s.bottom);return{innerHeight:u-s.top-s.bottom,innerWidth:c-s.left-s.right,padding:s,height:u,width:c,screenWidth:l.screenWidth,screenHeight:l.screenHeight}}function Fr(t,e){return void 0===t?e:t}function Pr(t,e){for(const r in t)e(t[r],r)}function Mr(){const t={},e=[],r=[];let n;function o(t,a){if(a>=e.length)return n&&t.sort(n),t;const s=r[a],i=e[a++],l=function(t,e){const r={};let n;for(let o,a=0,s=t.length;a<s;++a)o=t[a],n=e(o),r[n]?r[n].push(o):r[n]=[o];return r}(t,i.func);if("obj"===i.type){const t={};return Pr(l,((e,r)=>{t[r]=o(e,a)})),t}if("arr"===i.type){const t=[];if(s){!function(t,e){for(let r=0,n=t.length;r<n;++r)e(t[r],r)}(Object.keys(l).sort(s),(e=>{t.push(o(l[e],a))}))}else Pr(l,(e=>{t.push(o(e,a))}));return t}}return t.apply=function(t){return o(t,0)},t.objectBy=function(r){return e.push({type:"obj",func:r}),t},t.arrayBy=function(n,o){return e.push({type:"arr",func:n}),o&&(r[e.length-1]=o),t},t.sort=function(e){return n=e,t},t}const Rr=e.easePolyOut,Cr=function(){return e.transition().ease(Rr).duration(300)},Tr=function(){return e.transition().ease(Rr).duration(500)};function Or(t){return Number.isNaN(t)?0:t}function Dr(){return ht().prop("x",x).prop("y",x).prop("width",x).prop("height",x).prop("fill",x).prop("stroke",x).prop("centerTooltip").prop("tooltipAnchor").prop("transition").transition(!0).render((function(t){const r=e.select(this),n=r.props(),o=s(Or,n.x),a=s(Or,n.y),i=s(Or,n.width),l=s(Or,n.height);let c,p=r.selectAll(".sszvis-bar").data(t);if(p.exit().remove(),p.enter().append("rect").classed("sszvis-bar",!0).attr("x",o).attr("y",a).attr("width",i).attr("height",l).merge(p).attr("fill",n.fill).attr("stroke",n.stroke),n.transition&&(p=p.transition(Cr())),p.attr("x",o).attr("y",a).attr("width",i).attr("height",l),n.centerTooltip)c=function(t){return[o(t)+i(t)/2,a(t)+l(t)/2]};else if(n.tooltipAnchor){const t=n.tooltipAnchor.map(Number.parseFloat);c=function(e){return[o(e)+t[0]*i(e),a(e)+t[1]*l(e)]}}else c=function(t){return[o(t)+i(t)/2,a(t)]};const u=_t().position(c);r.call(u)}))}function Lr(){return ht().prop("barPosition").prop("barWidth").prop("mirror").mirror(!1).render((function(t){const r=e.select(this),n=r.props(),o=e.line().x(n.barWidth).y(n.barPosition);let a=r.selectAll(".sszvis-pyramid__referenceline").data(t);a.exit().remove();const s=a.enter().append("path").attr("class","sszvis-pyramid__referenceline");a=a.merge(s),a.attr("transform",n.mirror?"scale(-1, 1)":"").transition(Cr()).attr("d",o)}))}const Br=g("stack"),Er=g("0"),Nr=g("1");function Wr(t){return function(r,n,o){return function(a){const s=Mr().arrayBy(r).objectBy(n).apply(a),i=s.reduce(((t,e)=>v([...t,...Object.keys(e)])),[]),l=e.stack().keys(i).value(((t,e)=>o(t[e][0]))).order(t)(s);for(const t of l)for(const e of t)e.series=t.key,e.data=e.data[t.key][0],e.stack=r(e.data);return l.keys=i,l.maxValue=e.max(l,(t=>e.max(t,(t=>t[1])))),l}}}const jr=Wr(e.stackOrderNone),Hr=Wr(e.stackOrderReverse);function Gr(t){return ht().prop("xScale",x).prop("width",x).prop("yScale",x).prop("height",x).prop("fill").prop("stroke").render((function(r){const n=e.select(this),o=n.props(),a=Dr().x(t.x(o)).y(t.y(o)).width(t.width(o)).height(t.height(o)).fill(o.fill).stroke(o.stroke||"#FFFFFF");let s=n.selectAll(".sszvis-stack").data(r);const i=s.enter().append("g").classed("sszvis-stack",!0);s.exit().remove(),s=s.merge(i),s.call(a)}))}const Ir={x:t=>s(t.xScale,Er),y:t=>s(t.yScale,Br),width:t=>function(e){return t.xScale(e[1])-t.xScale(e[0])},height:t=>t.height},Jr={x:t=>s(t.xScale,Br),y:t=>s(t.yScale,Nr),width:t=>t.width,height:t=>function(e){return t.yScale(e[0])-t.yScale(e[1])}},Yr=g("data"),Ur=g("row");function Vr(){return ht().prop("stackElement").renderSelection((t=>{const r=t.datum(),n=t.props();let o=t.selectAll("[data-sszvis-stack]").data(r);const a=o.enter().append("g").attr("data-sszvis-stack","");o.exit().remove(),o=o.merge(a),o.each((function(t){e.select(this).datum(t).call(n.stackElement)}))}))}function Kr(){return ht().prop("barPosition").prop("barWidth").prop("mirror").mirror(!1).render((function(t){const r=e.select(this),n=r.props(),o=e.line().x(n.barWidth).y(n.barPosition);let a=r.selectAll(".sszvis-path").data(t);a.exit().remove();const s=a.enter().append("path").attr("class","sszvis-path").attr("fill","none").attr("stroke","#aaa").attr("stroke-width",2).attr("stroke-dasharray","3 3");a=a.merge(s),a.attr("transform",n.mirror?"scale(-1, 1)":"").transition(Cr()).attr("d",o)}))}const Xr=2*Math.PI;function qr(t,e){return e.includes(t)}const Qr=21;function Zr(){return ht().prop("scale").prop("rowHeight").rowHeight(Qr).prop("columnWidth").columnWidth(200).prop("rows").rows(3).prop("columns").columns(3).prop("verticallyCentered").verticallyCentered(!1).prop("orientation").prop("reverse").reverse(!1).prop("rightAlign").rightAlign(!1).prop("horizontalFloat").horizontalFloat(!1).prop("floatPadding").floatPadding(20).prop("floatWidth").floatWidth(600).render((function(){const t=e.select(this),r=t.props();let n,o,a=r.scale.domain();r.reverse&&(a=[...a].reverse()),"horizontal"===r.orientation?(o=Math.ceil(r.columns),n=Math.ceil(a.length/o)):"vertical"===r.orientation&&(n=Math.ceil(r.rows),o=Math.ceil(a.length/n));const s=t.selectAll(".sszvis-legend--entry").data(a),i=s.enter().append("g").classed("sszvis-legend--entry",!0);s.exit().remove();const l=s.merge(i).selectAll(".sszvis-legend__mark").data((t=>[t])),c=l.enter().append("circle").classed("sszvis-legend__mark",!0);l.exit().remove(),l.merge(c).attr("cx",r.rightAlign?-6:6).attr("cy",yt(r.rowHeight/2)).attr("r",5).attr("fill",(t=>r.scale(t))).attr("stroke",(t=>r.scale(t))).attr("stroke-width",1);const p=s.merge(i).selectAll(".sszvis-legend__label").data((t=>[t])),u=p.enter().append("text").classed("sszvis-legend__label",!0);p.exit().remove(),p.merge(u).text((t=>t)).attr("dy","0.35em").style("text-anchor",(()=>r.rightAlign?"end":"start")).attr("transform",(()=>bt(r.rightAlign?-18:18,yt(r.rowHeight/2))));let d="";if(r.verticallyCentered&&(d="translate(0,"+String(-a.length*r.rowHeight/2)+") "),r.horizontalFloat){let t=0,e=0;s.merge(i).attr("transform",(function(){const n=this.getBoundingClientRect().width;e+n>r.floatWidth&&(t+=r.rowHeight,e=0);const o=bt(e,t);return e+=n+r.floatPadding,d+o}))}else s.merge(i).attr("transform",((t,e)=>"horizontal"===r.orientation?d+"translate("+e%o*r.columnWidth+","+Math.floor(e/o)*r.rowHeight+")":"vertical"===r.orientation?d+"translate("+Math.floor(e/n)*r.columnWidth+","+e%n*r.rowHeight+")":void 0))}))}const $r=2,tn=40;function en(t,r){const n=t.length,o=e.max(t,rn),a=e.sum(t,rn),s=n<=4?1:nn(r,o,$r),i=1===s&&a<=r;return{columns:s,rows:i?1:Math.ceil(n/s),columnWidth:1===s?null:o,legendWidth:s*o,horizontalFloat:i,orientation:i?null:"vertical"}}function rn(t){return Ar(t)+tn}function nn(t,e,r){return r<=1?1:e<=t/r?r:nn(t,e,r-1)}const on=function(){let t=0;return function(){return++t}}();function an(t){return Array.from(t,(t=>{let[e,r]=t;return{key:e,values:r.size>0?an(r):void 0,value:r.size>0?void 0:r}}))}let sn=function(){return 0};const ln=_(((t,r,n)=>e.geoMercator().fitSize([t,r],n)),((t,e,r,n)=>t+","+e+","+n)),cn=function(t,r,n,o){return e.geoPath().projection(ln(t,r,n,o))},pn="geoId",un=function(t,e,r){r||(r=pn);const n=Array.isArray(t)?t.reduce(((t,e)=>(t[e[r]]=e,t)),{}):{};return e.features.map((t=>({geoJson:t,datum:n[t.id]})))},dn=function(t){if(!t.properties.cachedCenter){const r=t.properties.center;t.properties.cachedCenter=r?r.split(",").map(Number.parseFloat):e.geoCentroid(t)}return t.properties.cachedCenter},hn=g("datum");function fn(){return ht().prop("mergedData").prop("geoJson").prop("mapPath").prop("defined",x).defined(!0).prop("fill",x).fill((()=>"black")).prop("transitionColor").transitionColor(!0).render((function(){const t=e.select(this),r=t.props();function n(t){return r.defined(t.datum)?r.fill(t.datum):"url(#missing-pattern)"}k(t,"pattern","missing-pattern").call(lt);let o=t.selectAll(".sszvis-map__area").data(r.mergedData);const a=o.enter().append("path").classed("sszvis-map__area",!0).classed("sszvis-map__area--entering",!0).attr("data-event-target","").attr("fill",n);o.classed("sszvis-map__area--entering",!1),o.exit().remove(),o=o.merge(a),t.selectAll(".sszvis-map__area--undefined").attr("fill",n),o.classed("sszvis-map__area--undefined",(t=>!i(t.datum)||!r.defined(t.datum))).attr("d",(t=>r.mapPath(t.geoJson))),r.transitionColor?o.transition().call(Tr).attr("fill",n):o.attr("fill",n);const s=_t().position((t=>r.mapPath.projection()(dn(t.geoJson))));t.selectGroup("tooltipAnchors").datum(r.mergedData).call(s)}))}function mn(){return ht().prop("keyName").keyName(pn).prop("geoJson").prop("mapPath").prop("highlight").highlight([]).prop("highlightStroke",x).highlightStroke("white").prop("highlightStrokeWidth",x).highlightStrokeWidth(2).render((function(){const t=e.select(this),r=t.props();let n=t.selectAll(".sszvis-map__highlight");if(0===r.highlight.length)return n.remove(),!0;const o=r.geoJson.features.reduce(((t,e)=>(t[e.id]=e,t)),{}),a=r.highlight.reduce(((t,e)=>(e&&t.push({geoJson:o[e[r.keyName]],datum:e}),t)),[]);n=n.data(a);const s=n.enter().append("path").classed("sszvis-map__highlight",!0);n.exit().remove(),n=n.merge(s),n.attr("d",(t=>r.mapPath(t.geoJson))).style("stroke",(t=>r.highlightStroke(t.datum))).style("stroke-width",(t=>r.highlightStrokeWidth(t.datum)))}))}function gn(){return ht().prop("geoJson").prop("mapPath").prop("borderColor").borderColor("white").prop("strokeWidth").strokeWidth(1.25).render((function(){const t=e.select(this),r=t.props();let n=t.selectAll(".sszvis-map__border").data([r.geoJson]);const o=n.enter().append("path").classed("sszvis-map__border",!0);n.exit().remove(),n=n.merge(o),n.attr("d",r.mapPath).style("stroke",r.borderColor).style("stroke-width",r.strokeWidth)}))}function yn(){return ht().prop("mapPath").prop("lakeFeature").prop("lakeBounds").prop("lakePathColor").prop("fadeOut").fadeOut(!0).render((function(){const t=e.select(this),r=t.props();k(t,"pattern","lake-pattern").call(ct),r.fadeOut&&(k(t,"linearGradient","lake-fade-gradient").call(pt),k(t,"mask","lake-fade-mask").call(ut));let n=t.selectAll(".sszvis-map__lakezurich").data([r.lakeFeature]);const o=n.enter().append("path").classed("sszvis-map__lakezurich",!0);n.exit().remove(),n=n.merge(o),n.attr("d",r.mapPath).attr("fill","url(#lake-pattern)"),r.fadeOut&&n.attr("mask","url(#lake-fade-mask)");let a=t.selectAll(".sszvis-map__lakepath").data([r.lakeBounds]);const s=a.enter().append("path").classed("sszvis-map__lakepath",!0);a.exit().remove(),a=a.merge(s),a.attr("d",r.mapPath),r.lakePathColor&&a.style("stroke",r.lakePathColor)}))}const vn=e.timeFormatLocale(zt).parse,bn=vn("%d.%m.%Y"),xn=vn("%Y");function _n(t){return function(){const e=function(){const t=[[]];return{addLine(){t.push([])},addWord(e,r){f(t).push({text:x(r),style:e})},lines:()=>t}}();function r(r){return t(e,r)}r.newline=function(){return e.addLine(),r};for(const t of["bold","italic","plain"])r[t]=function(n){return e.addWord(t,n),r};return r}}const kn=_n(function(){const t={plain:t=>t,italic:t=>"<em>"+t+"</em>",bold:t=>"<strong>"+t+"</strong>"};return function(e,r){return e.lines().map((e=>e.map((e=>t[e.style].call(null,e.text(r)))).join(" "))).join("<br/>")}}()),zn=_n(function(){const t={plain:t=>"<tspan>"+t+"</tspan>",italic:t=>'<tspan style="font-style:italic">'+t+"</tspan>",bold:t=>'<tspan style="font-weight:bold">'+t+"</tspan>"};return function(e,r){return e.lines().reduce(((e,n,o)=>e+'<tspan x="0" dy="'+(0===o?0:"1.2em")+'">'+n.map((e=>t[e.style].call(null,e.text(r)))).join(" ")+"</tspan>"),"")}}());t.AGGLOMERATION_2012_KEY="zurichAgglomeration2012",t.DEFAULT_LEGEND_COLOR_ORDINAL_ROW_HEIGHT=Qr,t.DEFAULT_WIDTH=wr,t.GEO_KEY_DEFAULT=pn,t.RATIO=16/9,t.STADT_KREISE_KEY="zurichStadtKreise",t.STATISTISCHE_QUARTIERE_KEY="zurichStatistischeQuartiere",t.STATISTISCHE_ZONEN_KEY="zurichStatistischeZonen",t.SWITZERLAND_KEY="switzerland",t.WAHL_KREISE_KEY="zurichWahlKreise",t.annotationCircle=function(){return ht().prop("x",x).prop("y",x).prop("r",x).prop("dx",x).prop("dy",x).prop("caption",x).render((function(t){const r=e.select(this),n=r.props();k(r,"pattern","data-area-pattern").call(dt);let o=r.selectAll(".sszvis-dataareacircle").data(t);const a=o.enter().append("circle").classed("sszvis-dataareacircle",!0);if(o=o.merge(a),o.attr("cx",n.x).attr("cy",n.y).attr("r",n.r).attr("fill","url(#data-area-pattern)"),n.caption){let e=r.selectAll(".sszvis-dataareacircle__caption").data(t);const o=e.enter().append("text").classed("sszvis-dataareacircle__caption",!0);e=e.merge(o),e.attr("x",n.x).attr("y",n.y).attr("dx",n.dx).attr("dy",n.dy).text(n.caption)}}))},t.annotationLine=function(){return ht().prop("x1").prop("x2").prop("y1").prop("y2").prop("xScale").prop("yScale").prop("dx",x).dx(0).prop("dy",x).dy(0).prop("caption",x).render((function(t){const r=e.select(this),n=r.props(),o=n.xScale(n.x1),a=n.yScale(n.y1),s=n.xScale(n.x2),i=n.yScale(n.y2);let l=r.selectAll(".sszvis-referenceline").data(t);l.exit().remove();const c=l.enter().append("line").classed("sszvis-referenceline",!0);if(l=l.merge(c),l.attr("x1",o).attr("y1",a).attr("x2",s).attr("y2",i),n.caption){let t=r.selectAll(".sszvis-referenceline__caption").data([0]);t.exit().remove();const e=t.enter().append("text").classed("sszvis-referenceline__caption",!0);t=t.merge(e),t.attr("transform",(()=>{const t=s-o,e=i-a,r=180*Math.atan2(e,t)/Math.PI;return"translate("+(o+s)/2+","+(a+i)/2+") rotate("+r+")"})).attr("dx",n.dx).attr("dy",n.dy).text(n.caption)}}))},t.annotationRangeFlag=function(){return ht().prop("x",x).prop("y0",x).prop("y1",x).render((function(t){const r=e.select(this),n=r.props(),o=s(yt,n.x),a=s(yt,n.y0),i=s(yt,n.y1);r.selectAll(".sszvis-rangeFlag__mark.bottom").data(t).call(kt("bottom",o,a)),r.selectAll(".sszvis-rangeFlag__mark.top").data(t).call(kt("top",o,i));const l=_t().position((t=>[o(t),yt((n.y0(t)+n.y1(t))/2)]));r.call(l)}))},t.annotationRangeRuler=function(){return ht().prop("x",x).prop("y0",x).prop("y1",x).prop("top").prop("bottom").prop("label").prop("removeStroke").label(x("")).prop("total").prop("flip",x).flip(!1).render((function(t){const r=e.select(this),n=r.props(),o=s(yt,n.x),a=s(yt,n.y0),i=s(yt,n.y1),l=function(t){return yt((n.y0(t)+n.y1(t))/2)};let c=r.selectAll(".sszvis-rangeRuler__rule").data([0]);const p=c.enter().append("line").classed("sszvis-rangeRuler__rule",!0);c.exit().remove(),c=c.merge(p),c.attr("x1",o).attr("y1",n.top).attr("x2",o).attr("y2",n.bottom);let u=r.selectAll(".sszvis-rangeRuler--mark").data(t);const d=u.enter().append("g").classed("sszvis-rangeRuler--mark",!0);u.exit().remove(),u=u.merge(d),d.append("circle").classed("sszvis-rangeRuler__p1",!0),d.append("circle").classed("sszvis-rangeRuler__p2",!0),d.append("text").classed("sszvis-rangeRuler__label-contour",!0),d.append("text").classed("sszvis-rangeRuler__label",!0),u.selectAll(".sszvis-rangeRuler__p1").data((t=>[t])).attr("cx",o).attr("cy",a).attr("r",1.5),u.selectAll(".sszvis-rangeRuler__p2").data((t=>[t])).attr("cx",o).attr("cy",i).attr("r",1.5),u.selectAll(".sszvis-rangeRuler__label").data((t=>[t])).attr("x",(t=>{const e=n.flip(t)?-10:10;return o(t)+e})).attr("y",l).attr("dy","0.35em").style("text-anchor",(t=>n.flip(t)?"end":"start")).text(s(Mt,n.label)),u.selectAll(".sszvis-rangeRuler__label-contour").data((t=>[t])).attr("x",(t=>{const e=n.flip(t)?-10:10;return o(t)+e})).attr("y",l).attr("dy","0.35em").style("text-anchor",(t=>n.flip(t)?"end":"start")).text(s(Mt,n.label)),r.selectAll("g.sszvis-rangeRuler--mark").each((function(){const t=e.select(this),r=t.select("text").node();let a=t.select(".sszvis-rangeRuler__label-contour");a.empty()?(a=e.select(r.cloneNode()).classed("sszvis-rangeRuler__label-contour",!0).classed("sszvis-rangeRuler__label",!1),this.insertBefore(a.node(),r)):a.attr("x",(t=>{const e=n.flip(t)?-10:10;return o(t)+e})).attr("y",l).attr("dy","0.35em").style("text-anchor",(t=>n.flip(t)?"end":"start")),a.text(r.textContent)})),n.removeStroke||u.attr("stroke","white").attr("stroke-width",.5).attr("stroke-opacity",.75);let h=r.selectAll(".sszvis-rangeRuler__total").data([f(t)]);const m=h.enter().append("text").classed("sszvis-rangeRuler__total",!0);h.exit().remove(),h=h.merge(m),h.attr("x",(t=>{const e=n.flip(t)?-10:10;return o(t)+e})).attr("y",n.top-10).style("text-anchor",(t=>n.flip(t)?"end":"start")).text("Total "+Mt(n.total));const g=h.node();let y=r.select(".sszvis-rangeRuler__total-contour");y.empty()?(y=e.select(g.cloneNode()).classed("sszvis-rangeRuler__total-contour",!0).classed("sszvis-rangeRuler__total",!1),this.insertBefore(y.node(),g)):y.attr("x",(t=>{const e=n.flip(t)?-10:10;return o(t)+e})).attr("y",n.top-10).style("text-anchor",(t=>n.flip(t)?"end":"start")),y.text(g.textContent),n.removeStroke||h.attr("stroke","white").attr("stroke-width",.5).attr("stroke-opacity",.75)}))},t.annotationRectangle=function(){return ht().prop("x",x).prop("y",x).prop("width",x).prop("height",x).prop("dx",x).prop("dy",x).prop("caption",x).render((function(t){const r=e.select(this),n=r.props();k(r,"pattern","data-area-pattern").call(dt);let o=r.selectAll(".sszvis-dataarearectangle").data(t);const a=o.enter().append("rect").classed("sszvis-dataarearectangle",!0);if(o=o.merge(a),o.attr("x",n.x).attr("y",n.y).attr("width",n.width).attr("height",n.height).attr("fill","url(#data-area-pattern)"),n.caption){let e=r.selectAll(".sszvis-dataarearectangle__caption").data(t);const o=e.enter().append("text").classed("sszvis-dataarearectangle__caption",!0);e=e.merge(o),e.attr("x",((t,e)=>n.x(t,e)+n.width(t,e)/2)).attr("y",((t,e)=>n.y(t,e)+n.height(t,e)/2)).attr("dx",n.dx).attr("dy",n.dy).text(n.caption)}}))},t.annotationRuler=function(){return ht().prop("top").prop("bottom").prop("x",x).prop("y",x).prop("label").label(x("")).prop("color").prop("flip",x).flip(!1).prop("labelId",x).prop("reduceOverlap").reduceOverlap(!0).render((function(t){const r=e.select(this),n=r.props(),o=n.labelId||function(t){return n.x(t)+"_"+n.y(t)};let a=r.selectAll(".sszvis-ruler__rule").data(t,o);const i=a.enter().append("line").classed("sszvis-ruler__rule",!0);a.exit().remove(),a=a.merge(i),a.attr("x1",s(yt,n.x)).attr("y1",n.y).attr("x2",s(yt,n.x)).attr("y2",n.bottom);let l=r.selectAll(".sszvis-ruler__dot").data(t,o);const c=l.enter().append("circle").classed("sszvis-ruler__dot",!0);l.exit().remove(),l=l.merge(c),l.attr("cx",s(yt,n.x)).attr("cy",s(yt,n.y)).attr("r",3.5).attr("fill",n.color);let p=r.selectAll(".sszvis-ruler__label-outline").data(t,o);const u=p.enter().append("text").classed("sszvis-ruler__label-outline",!0);p.exit().remove(),p=p.merge(u);let d=r.selectAll(".sszvis-ruler__label").data(t,o);const h=d.enter().append("text").classed("sszvis-ruler__label",!0);d.exit().remove(),d=d.merge(h);const f=s(yt,n.x),m=s(yt,n.y),g=r.selectAll(".sszvis-ruler__label, .sszvis-ruler__label-outline").attr("transform",(t=>{const e=f(t),r=m(t),o=n.flip(t)?-10:10,a=r<n.top+a?2*a:r>n.bottom-a?0:5;return bt(e+o,r+a)})).style("text-anchor",(t=>n.flip(t)?"end":"start")).html(n.label);if(n.reduceOverlap){const t=2;let r=10;const n=[],a={};for(g.attr("y",""),d.each((function(t){const e=this.getBoundingClientRect(),r={top:e.top,bottom:e.bottom,dy:0};n.push(r),a[o(t)]=r})),n.sort(((t,r)=>e.ascending(t.top,r.top)));r--;)for(const[e,r]of n.entries())for(const o of n.slice(e+1)){const e=r.bottom-o.top;if(e>=t){const t=e/2;r.bottom-=t,r.top-=t,r.dy-=t,o.bottom+=t,o.top+=t,o.dy+=t}}g.attr("y",(t=>a[o(t)].dy))}}))},t.app=t=>{let e,r,{init:n,render:o,actions:a={},fallback:s}=t;Ee(Ne(n),'An "init" function returning a Promise must be provided.'),Ee(Ne(o),'A "render" function must be provided.');const i=Object.keys(a).reduce(((t,e)=>(t[e]=t=>{c(e,t)},t)),{});function l(t){e||(e=!0,requestAnimationFrame((()=>{o(r,i),e=!1}))),Ne(t)&&t(c)}function c(t,e){Ee(null!=a[t],'Action "'.concat(t,'" is not defined, add it to "actions".'));const n=Pe(r),o=a[t](n,e);r=Me(n),l(o)}const p=Pe({});n(p).then((t=>{r=Me(p),l(t),Be.on("resize",l)})).catch((t=>{Ee(!1,t),s&&Re(s.element,{src:s.src})}))},t.arity=a,t.aspectRatio=qe,t.aspectRatio12to5=$e,t.aspectRatio16to10=Ze,t.aspectRatio4to3=Qe,t.aspectRatioAuto=nr,t.aspectRatioPortrait=er,t.aspectRatioSquare=tr,t.axisX=ur,t.axisY=dr,t.bar=Dr,t.bounds=Sr,t.breakpointCreateSpec=Ie,t.breakpointDefaultSpec=Je,t.breakpointFind=We,t.breakpointFindByName=je,t.breakpointLap=Ue,t.breakpointMatch=Ge,t.breakpointPalm=Ye,t.breakpointTest=He,t.buttonGroup=function(){return ht().prop("values").prop("current").prop("width").width(300).prop("change").change(r).render((function(){const t=e.select(this),r=t.props(),n=r.width/r.values.length;let o=t.selectAll(".sszvis-control-optionSelectable").data(["sszvis-control-buttonGroup"],(t=>t));const a=o.enter().append("div").classed("sszvis-control-optionSelectable",!0).classed("sszvis-control-buttonGroup",!0);o.exit().remove(),o=o.merge(a),o.style("width",r.width+"px");let s=o.selectAll(".sszvis-control-buttonGroup__item").data(r.values);const i=s.enter().append("div").classed("sszvis-control-buttonGroup__item",!0);s.exit().remove(),s=s.merge(i),s.style("width",n+"px").classed("selected",(t=>t===r.current)).text((t=>t)).on("click",r.change)}))},t.cascade=Mr,t.choropleth=function(){const t=e.dispatch("over","out","click"),r=fn(),n=gn(),o=yn(),a=mn(),s=ht().prop("width").prop("height").prop("keyName").keyName(pn).prop("withLake").withLake(!0).prop("anchoredShape").prop("features").prop("borders").prop("lakeFeatures").prop("lakeBorders").prop("lakeFadeOut").lakeFadeOut(!1).delegate("defined",r).delegate("fill",r).delegate("transitionColor",r).delegate("borderColor",n).delegate("strokeWidth",n).delegate("highlight",a).delegate("highlightStroke",a).delegate("highlightStrokeWidth",a).delegate("lakePathColor",o).render((function(s){const i=e.select(this),l=i.props(),c=cn(l.width,l.height,l.features,"zurichStadtfeatures"),p=un(s,l.features,l.keyName);r.geoJson(l.features).mergedData(p).mapPath(c),n.geoJson(l.borders).mapPath(c),o.lakeFeature(l.lakeFeatures).lakeBounds(l.lakeBorders).mapPath(c).fadeOut(l.lakeFadeOut),a.geoJson(l.features).keyName(l.keyName).mapPath(c),i.call(r).call(n),l.withLake&&i.call(o),i.call(a),l.anchoredShape&&(l.anchoredShape.mergedData(p).mapPath(c),i.call(l.anchoredShape)),i.selectAll("[data-event-target]").on("mouseover",(function(e){t.call("over",this,e.datum)})).on("mouseout",(function(e){t.call("out",this,e.datum)})).on("click",(function(e){t.call("click",this,e.datum)}))}));return s.on=function(){const e=t.on.apply(t,arguments);return e===t?s:e},s},t.colorLegendDimensions=en,t.colorLegendLayout=function(t,r){let{legendLabels:n,axisLabels:o=[],slant:a="horizontal"}=t;const s=en(n,_r(r).width),i=n.length>6?E().domain(n):N().domain(n),l=Zr().scale(i).horizontalFloat(s.horizontalFloat).rows(s.rows).columnWidth(s.columnWidth).orientation(s.orientation),c=function(t,r){switch(t){case"vertical":return 40+e.max(r,zr);case"diagonal":return 40+Math.sqrt(2*Math.pow(e.max(r,zr)/2,2));default:return 60}}(a,o),p=s.rows*Qr;return{axisLabelPadding:c,legendPadding:p,bottomPadding:c+p,legendWidth:s.legendWidth,legend:l,scale:i}},t.compose=s,t.contains=function(t,e){return t.includes(e)},t.createHtmlLayer=function(t,r,n){r||(r=Sr()),n||(n={});const a="data-sszvis-html-"+(n.key||"default"),s=o(t)?t:e.select(t);s.classed("sszvis-outer-container",!0);let i=s.selectAll("[data-sszvis-html-layer]["+a+"]").data([0]);const l=i.enter().append("div").classed("sszvis-html-layer",!0).attr("data-sszvis-html-layer","").attr(a,"");return i=i.merge(l),i.style("position","absolute").style("left",r.padding.left+"px").style("top",r.padding.top+"px"),i},t.createSvgLayer=function(t,r,n){r||(r=Sr()),n||(n={});const a="data-sszvis-svg-"+(n.key||"default"),s=n.title||"",i=n.description||"",l=(o(t)?t:e.select(t)).selectAll("svg["+a+"]").data([0]),c=l.enter().append("svg");c.classed("sszvis-svg-layer",!0).attr(a,"").attr("role","img").attr("aria-label",s+" – "+i),c.append("title").text(s),c.append("desc").text(i).classed("sszvis-svg-layer",!0).attr(a,"").attr("role","img"),l.merge(c).attr("height",r.height).attr("width",r.width);const p=l.merge(c).selectAll("[data-sszvis-svg-layer]").data((()=>[0])),u=p.enter().append("g").attr("data-sszvis-svg-layer","");return p.merge(u).attr("transform","translate("+r.padding.left+","+r.padding.top+")"),p.merge(u)},t.dataAreaPattern=dt,t.defaultTransition=Cr,t.defined=i,t.derivedSet=function(t,e){e||(e=r);const n=[],o=[];let a,s;for(let r=0,i=t.length;r<i;++r)a=t[r],s=e(a,r,t),n.includes(s)||(n.push(s),o.push(a));return o},t.dimensionsHeatTable=function(t,e,r,n,o){o||(o={}),o.top||(o.top=0),o.right||(o.right=0),o.bottom||(o.bottom=0),o.left||(o.left=0);const a=t-o.left-o.right,s=Math.min((a-e*(r-1))/r,30),i=s+e,l=r*i-e;return{side:s,paddedSide:i,padRatio:1-s/i,width:l,height:n*i-e,centeredOffset:Math.max((a-l)/2,0)}},t.dimensionsHorizontalBarChart=function(t){const e=24,r=e*t+20*(t-1);return{barHeight:e,padHeight:20,padRatio:1-e/44,outerRatio:0,axisOffset:-22,barGroupHeight:r,totalHeight:r+0}},t.dimensionsVerticalBarChart=function(t,e){const r=1-.7,n=e-1;let o=t*r/(r*n+.7*e),a=(t-o*n)/e;a>48&&(a=48,o=(t-a*e)/n),o<2&&(o=2),o>100&&(o=100);const s=a*e+o*n;return{barWidth:a,padWidth:o,padRatio:1-a/(a+o),outerRatio:(t-s)/2/(a+o),barGroupWidth:s,totalWidth:t}},t.dot=function(){return ht().prop("x",x).prop("y",x).prop("radius").prop("stroke").prop("fill").prop("transition").transition(!0).render((function(t){const r=e.select(this),n=r.props();let o=r.selectAll(".sszvis-circle").data(t);o.exit().remove(),o.enter().append("circle").classed("sszvis-circle",!0).attr("cx",n.x).attr("cy",n.y).attr("r",n.radius).merge(o).attr("stroke",n.stroke).attr("fill",n.fill),n.transition&&(o=o.transition(Cr())),o.attr("cx",n.x).attr("cy",n.y).attr("r",n.radius);const a=_t().position((t=>[n.x(t),n.y(t)]));r.call(a)}))},t.ensureDefsElement=k,t.every=function(t,e){for(const r of e)if(!t(r))return!1;return!0},t.fallbackCanvasUnsupported=function(){return!!!document.createElement("canvas").getContext},t.fallbackRender=Re,t.fallbackUnsupported=function(){return!(!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)},t.fastTransition=function(){return e.transition().ease(Rr).duration(50)},t.filledArray=l,t.find=c,t.first=p,t.firstTouch=u,t.fitTooltip=function(t,e){const r=Math.min(1*e.innerWidth/4,100),n=Math.max(3*e.innerWidth/4,e.innerWidth-100);return function(e){const o=e.x;return o>n?"right":o<r?"left":t}},t.flatten=function(t){return t.flat()},t.foldPattern=function(t,e){const r=e[t];if("function"==typeof r)return r();throw new Error("[foldPattern] No definition provided for key: "+t)},t.formatAge=function(t){return String(Math.round(t))},t.formatAxisTimeFormat=St,t.formatFractionPercent=function(t){return Mt(100*t)+" %"},t.formatMonth=Ft,t.formatNone=function(){return""},t.formatNumber=Mt,t.formatPercent=function(t){return Mt(t)+" %"},t.formatPreciseNumber=Rt,t.formatText=Ct,t.formatYear=Pt,t.functor=x,t.getGeoJsonCenter=dn,t.groupedBars=function(){return ht().prop("groupScale").prop("groupSize").prop("groupWidth").prop("groupSpace").groupSpace(.05).prop("y",x).prop("height").prop("fill").prop("stroke").prop("defined",x).defined(!0).render((function(t){const r=e.select(this),n=r.props(),o=e.scaleBand().domain(e.range(n.groupSize)).padding(n.groupSpace).paddingOuter(0).rangeRound([0,n.groupWidth]);let a=r.selectAll("g.sszvis-bargroup").data(t);const s=a.enter().append("g").classed("sszvis-bargroup",!0);a.exit().remove(),a=a.merge(s);let i=a.selectAll("g.sszvis-barunit").data((t=>t));const l=i.enter().append("g").classed("sszvis-barunit",!0);i.exit().remove(),i=i.merge(l),i.each(((t,e)=>{t.__sszvisGroupedBarIndex__=e}));const c=i.filter(n.defined);c.selectAll("*").remove(),c.attr("transform",(()=>bt(0,0))),c.append("rect").classed("sszvis-bar",!0).attr("fill",n.fill).attr("x",(t=>n.groupScale(t)+o(t.__sszvisGroupedBarIndex__))).attr("y",n.y).attr("width",o.bandwidth()).attr("height",n.height);const p=i.filter(m(n.defined));p.selectAll("*").remove(),p.attr("transform",((t,e)=>bt(n.groupScale(t)+o(t.__sszvisGroupedBarIndex__)+o.bandwidth()/2,n.y(t,e)))),p.append("line").classed("sszvis-bar--missing line1",!0).attr("x1",-4).attr("y1",-4).attr("x2",4).attr("y2",4),p.append("line").classed("sszvis-bar--missing line2",!0).attr("x1",4).attr("y1",-4).attr("x2",-4).attr("y2",4);const u=_t().position((t=>{let e=0,r=1/0;for(const[a,s]of t.entries())e+=n.groupScale(s)+o(s.__sszvisGroupedBarIndex__)+o.bandwidth()/2,r=Math.min(r,n.y(s,a));return[e/t.length,r]}));r.call(u)}))},t.halfPixel=yt,t.handleRuler=function(){return ht().prop("x",x).prop("y",x).prop("top").prop("bottom").prop("label").label(x("")).prop("color").prop("flip",x).flip(!1).render((function(t){const r=e.select(this),n=r.props(),o=s(yt,n.x),a=s(yt,n.y),i=n.bottom-4,l=n.top-24;let c=r.selectAll(".sszvis-handleRuler__group").data([0]);const p=c.enter().append("g").classed("sszvis-handleRuler__group",!0);c.exit().remove(),c=c.merge(p),p.append("line").classed("sszvis-ruler__rule",!0),p.append("rect").classed("sszvis-handleRuler__handle",!0),p.append("line").classed("sszvis-handleRuler__handle-mark",!0),c.selectAll(".sszvis-ruler__rule").attr("x1",o).attr("y1",yt(n.top)).attr("x2",o).attr("y2",yt(i)),c.selectAll(".sszvis-handleRuler__handle").attr("x",(t=>o(t)-5)).attr("y",yt(l)).attr("width",10).attr("height",24).attr("rx",2).attr("ry",2),c.selectAll(".sszvis-handleRuler__handle-mark").attr("x1",o).attr("y1",yt(l+24*.15)).attr("x2",o).attr("y2",yt(l+20.4));let u=c.selectAll(".sszvis-ruler__dot").data(t);const d=u.enter().append("circle").classed("sszvis-ruler__dot",!0);u.exit().remove(),u=u.merge(d),u.attr("cx",o).attr("cy",a).attr("r",3.5).attr("fill",n.color);let h=r.selectAll(".sszvis-ruler__label-outline").data(t);const f=h.enter().append("text").classed("sszvis-ruler__label-outline",!0);h.exit().remove(),h=h.merge(f);let m=r.selectAll(".sszvis-ruler__label").data(t);const g=m.enter().append("text").classed("sszvis-ruler__label",!0);m.exit().remove(),m=m.merge(g),r.selectAll(".sszvis-ruler__label, .sszvis-ruler__label-outline").attr("transform",(t=>{const e=s(yt,n.x)(t),r=s(yt,n.y)(t),o=n.flip(t)?-10:10,a=r<n.top+a?2*a:r>n.bottom-a?0:5;return bt(e+o,r+a)})).style("text-anchor",(t=>n.flip(t)?"end":"start")).html(n.label)}))},t.hashableSet=function(t,e){e||(e=r);const n={},o=[];let a;for(let r=0,s=t.length;r<s;++r)a=e(t[r],r,t),n[a]||(n[a]=!0,o.push(a));return o},t.heatTableMissingValuePattern=function(t){const e=Z(),r="#A4A4A4",n=.35,o=.65;t.attr("patternUnits","objectBoundingBox").attr("patternContentUnits","objectBoundingBox").attr("x",0).attr("y",0).attr("width",1).attr("height",1),t.append("rect").attr("x",0).attr("y",0).attr("width",1).attr("height",1).attr("fill",e),t.append("line").attr("x1",n).attr("y1",n).attr("x2",o).attr("y2",o).attr("stroke-width",.035).attr("stroke",r),t.append("line").attr("x1",o).attr("y1",n).attr("x2",n).attr("y2",o).attr("stroke-width",.035).attr("stroke",r)},t.identity=r,t.isFunction=function(t){return"function"==typeof t},t.isNull=d,t.isNumber=function(t){return"[object Number]"===Object.prototype.toString.call(t)&&!Number.isNaN(t)},t.isObject=h,t.isSelection=o,t.isString=n,t.last=f,t.layoutPopulationPyramid=function(t,e){const r=Math.min(er(t),480),n=1*(e-1);let o=Math.round((r-n)/e);o=Math.max(o,2);const a=e*o+n;let s=a-o;const i=o+1,l=[];for(;s>=0;)l.push(s),s-=i;const c=Math.min(t/2,.8*er.MAX_HEIGHT/2);return{barHeight:o,padding:1,totalHeight:a,positions:l,maxBarLength:c,chartPadding:Math.max((t-2*c)/2,1)}},t.layoutSmallMultiples=function(){return ht().prop("width").prop("height").prop("paddingX").prop("paddingY").prop("rows").prop("cols").render((function(t){const r=e.select(this),n=r.props(),o=(n.width-n.paddingX*(n.cols-1))/n.cols,a=(n.height-n.paddingY*(n.rows-1))/n.rows,s=o/2,i=a/2;let l=r.selectAll("g.sszvis-multiple").data(t);const c=l.enter().append("g").classed("sszvis-g sszvis-multiple",!0);l.exit().remove(),l=l.merge(c);let p=l.selectAll("g.sszvis-multiple-chart").data((t=>[t.values]));const u=p.enter().append("g").classed("sszvis-multiple-chart",!0);p.exit().remove(),p=p.merge(u),l.datum(((t,e)=>(t.gx=e%n.cols*(o+n.paddingX),t.gw=o,t.cx=s,t.gy=Math.floor(e/n.cols)*(a+n.paddingY),t.gh=a,t.cy=i,t))).attr("transform",(t=>"translate("+t.gx+","+t.gy+")"))}))},t.layoutStackedAreaMultiples=function(t,e,r){r||(r=.1);const n=t/(e-r),o=n*(1-r),a=[];let s=o;for(;s-t<1;)a.push(s),s+=n;return{range:a,bandHeight:o,padHeight:n*r}},t.legendColorBinned=function(){return ht().prop("scale").prop("displayValues").prop("endpoints").prop("width").width(200).prop("labelFormat").labelFormat(r).render((function(){const t=e.select(this),r=t.props();if(!r.scale)return ar("legend.binnedColorScale - a scale must be specified.");if(!r.displayValues)return ar("legend.binnedColorScale - display values must be specified.");if(!r.endpoints)return ar("legend.binnedColorScale - endpoints must be specified");const n=[0,r.width-10],o=e.scaleLinear().domain(r.endpoints).range(n);let a=0;const s=[];let i=r.endpoints[0];for(const t of r.displayValues){const e=o(t)-a,n=a%1;s.push({x:Math.floor(5+a),w:e+n,c:r.scale(i),p:t}),a+=e,i=t}s.push({x:Math.floor(5+a),w:n[1]-a,c:r.scale(i)});let l=t.selectAll("circle.sszvis-legend__circle").data(r.endpoints);const c=l.enter().append("circle").classed("sszvis-legend__circle",!0);l=l.merge(c),l.exit().remove(),l.attr("r",5).attr("cy",5).attr("cx",((t,e)=>0===e?5:r.width-5)).attr("fill",r.scale);let p=t.selectAll("rect.sszvis-legend__crispmark").data(s);const u=p.enter().append("rect").classed("sszvis-legend__crispmark",!0);p=p.merge(u),p.exit().remove(),p.attr("x",(t=>t.x)).attr("y",0).attr("width",(t=>t.w)).attr("height",10).attr("fill",(t=>t.c));const d=s.slice(0,-1),h=t.selectAll("line.sszvis-legend__crispmark").data(d),f=h.enter().append("line").classed("sszvis-legend__crispmark",!0);h.merge(f),h.exit().remove(),h.attr("x1",(t=>yt(t.x+t.w))).attr("x2",(t=>yt(t.x+t.w))).attr("y1",11).attr("y2",16).attr("stroke","#B8B8B8");let m=t.selectAll(".sszvis-legend__axislabel").data(d);const g=m.enter().append("text").classed("sszvis-legend__axislabel",!0);m=m.merge(g),m.exit().remove(),m.style("text-anchor","middle").attr("transform",(t=>"translate("+(t.x+t.w)+",30)")).text((t=>r.labelFormat(t.p)))}))},t.legendColorLinear=function(){return ht().prop("scale").prop("displayValues").displayValues([]).prop("width").width(200).prop("segments").segments(8).prop("labelText").prop("labelFormat").labelFormat(r).render((function(){const t=e.select(this),r=t.props();if(!r.scale)return ar("legend.linearColorScale - a scale must be specified."),!1;const n=r.scale.domain();let o=r.displayValues;0===o.length&&r.scale.ticks&&(o=r.scale.ticks(r.segments-1)),o.push(f(n));const a=o.length>0?r.width/o.length:0;let s=t.selectAll("rect.sszvis-legend__mark").data(o);const i=s.enter().append("rect").classed("sszvis-legend__mark",!0);s.exit().remove(),s=s.merge(i),s.attr("x",((t,e)=>e*a-1)).attr("y",0).attr("width",a+1).attr("height",10).attr("fill",(t=>r.scale(t)));const l=[p(n),f(n)],c=r.labelText||l;let u=t.selectAll("circle.ssvis-legend--mark").data(l);const d=u.enter().append("circle").attr("class","ssvis-legend--mark");u.exit().remove(),u=u.merge(d),u.attr("cx",((t,e)=>e*r.width)).attr("cy",5).attr("r",5).attr("fill",(t=>r.scale(t)));let h=t.selectAll(".sszvis-legend__label").data(c);const m=h.enter().append("text").classed("sszvis-legend__label",!0);h.exit().remove(),h=h.merge(m);h.style("text-anchor",((t,e)=>0===e?"end":"start")).attr("dy","0.35em").attr("transform",((t,e)=>"translate("+(e*r.width+16*(0===e?-1:1))+", 5)")).text(((t,e)=>r.labelFormat(t,e)))}))},t.legendColorOrdinal=Zr,t.legendRadius=function(){return ht().prop("scale").prop("tickFormat").tickFormat(r).prop("tickValues").render((function(){const t=e.select(this),r=t.props(),n=r.scale.domain(),o=r.tickValues||[n[1],r.scale.invert(e.mean(r.scale.range())),n[0]],a=ir(r.scale)[1];let s=t.selectAll("g.sszvis-legend__elementgroup").data([0]);const i=s.enter().append("g").attr("class","sszvis-legend__elementgroup");s=s.merge(i),s.attr("transform",bt(yt(a),yt(a)));let l=s.selectAll("circle.sszvis-legend__greyline").data(o);const c=l.enter().append("circle").classed("sszvis-legend__greyline",!0);function p(t){return a-2*r.scale(t)}l.exit().remove(),l=l.merge(c),l.attr("r",r.scale).attr("stroke-width",1).attr("cy",(function(t){return a-r.scale(t)}));let u=s.selectAll("line.sszvis-legend__dashedline").data(o);const d=u.enter().append("line").classed("sszvis-legend__dashedline",!0);u.exit().remove(),u=u.merge(d),u.attr("x1",0).attr("y1",p).attr("x2",a+15).attr("y2",p);let h=s.selectAll(".sszvis-legend__label").data(o);const f=h.enter().append("text").attr("class","sszvis-legend__label sszvis-legend__label--small");h.exit().remove(),h=h.merge(f),h.attr("dx",a+18).attr("y",p).attr("dy","0.35em").text(r.tickFormat)}))},t.line=function(){return ht().prop("x").prop("y").prop("stroke").prop("strokeWidth").prop("defined").prop("key").key(((t,e)=>e)).prop("valuesAccessor").valuesAccessor(r).prop("transition").transition(!0).render((function(t){const r=e.select(this),n=r.props(),o=e.line().defined(void 0===n.defined?s(m(Number.isNaN),n.y):n.defined).x(n.x).y(n.y);let a=r.selectAll(".sszvis-line").data(t,n.key);const i=a.enter().append("path").classed("sszvis-line",!0).style("stroke",n.stroke);a=a.merge(i),a.exit().remove(),a.order(),n.transition&&(a=a.transition(Cr())),a.attr("d",s(o,n.valuesAccessor)).style("stroke",n.stroke).style("stroke-width",n.strokeWidth)}))},t.loadError=function(t){ar(t)},t.locale=zt,t.mapLakeFadeGradient=pt,t.mapLakeGradientMask=ut,t.mapLakePattern=ct,t.mapMissingValuePattern=lt,t.mapRendererBase=fn,t.mapRendererBubble=function(){const t=e.dispatch("over","out","click"),r=ht().prop("mergedData").prop("mapPath").prop("radius",x).prop("fill",x).prop("strokeColor",x).strokeColor("#ffffff").prop("strokeWidth",x).strokeWidth(1).prop("transition").transition(!0).render((function(){const r=e.select(this),n=r.props(),o=s(n.radius,hn),a=r.selectGroup("anchoredCircles").selectAll(".sszvis-anchored-circle").data(n.mergedData,(t=>t.geoJson.id));if(a.enter().append("circle").attr("class","sszvis-anchored-circle sszvis-anchored-circle--entering").attr("r",o).on("mouseover",(function(e){t.call("over",this,e.datum)})).on("mouseout",(function(e){t.call("out",this,e.datum)})).on("click",(function(e){t.call("click",this,e.datum)})).merge(a).attr("transform",(t=>{const e=n.mapPath.projection()(dn(t.geoJson));return bt(e[0],e[1])})).style("fill",(t=>n.fill(t.datum))).style("stroke",(t=>n.strokeColor(t.datum))).style("stroke-width",(t=>n.strokeWidth(t.datum))).sort(((t,e)=>n.radius(e.datum)-n.radius(t.datum))),a.classed("sszvis-anchored-circle--entering",!1),n.transition){const t=Cr();a.exit().transition(t).attr("r",0).remove(),a.transition(t).attr("r",o)}else a.exit().remove(),a.attr("r",o)}));return r.on=function(){const e=t.on.apply(t,arguments);return e===t?r:e},r},t.mapRendererGeoJson=function(){const t=e.dispatch("over","out","click"),r=ht().prop("dataKeyName").dataKeyName(pn).prop("geoJsonKeyName").geoJsonKeyName("id").prop("geoJson").prop("mapPath").prop("defined",x).defined(!0).prop("fill",x).fill("black").prop("stroke",x).stroke("black").prop("strokeWidth",x).strokeWidth(1.25).prop("transitionColor").transitionColor(!0).render((function(r){const n=e.select(this),o=n.props();k(n,"pattern","missing-pattern").call(lt);const a=g(o.dataKeyName),s=g(o.geoJsonKeyName),l=r.reduce(((t,e)=>(t[a(e)]=e,t))),c=o.geoJson.features.map((t=>({geoJson:t,datum:l[s(t.properties)]})));function p(t){return i(t.datum)&&o.defined(t.datum)?o.fill(t.datum):"url(#missing-pattern)"}let u=n.selectAll(".sszvis-map__geojsonelement").data(c);const d=u.enter().append("path").classed("sszvis-map__geojsonelement",!0).attr("data-event-target","").attr("fill",p);u.exit().remove(),u=u.merge(d),n.selectAll(".sszvis-map__geojsonelement--undefined").attr("fill",p),u.classed("sszvis-map__geojsonelement--undefined",(t=>!i(t.datum)||!o.defined(t.datum))).attr("d",(t=>o.mapPath(t.geoJson))),o.transitionColor?u.transition().call(Tr).attr("fill",p):u.attr("fill",p),u.attr("stroke",(function(t){return i(t.datum)&&o.defined(t.datum)?o.stroke(t.datum):""})).attr("stroke-width",o.strokeWidth),n.selectAll("[data-event-target]").on("mouseover",(e=>{t.over(e.datum)})).on("mouseout",(e=>{t.out(e.datum)})).on("click",(e=>{t.click(e.datum)}));const h=_t().position((t=>{t.geoJson.properties||(t.geoJson.properties={});let r=t.geoJson.properties.sphericalCentroid;return r||(t.geoJson.properties.sphericalCentroid=r=e.geoCentroid(t.geoJson)),o.mapPath.projection()(r)}));n.selectGroup("tooltipAnchors").datum(c).call(h)}));return r.on=function(){const e=t.on.apply(t,arguments);return e===t?r:e},r},t.mapRendererHighlight=mn,t.mapRendererImage=function(){return ht().prop("projection").prop("src").prop("geoBounds").prop("opacity").opacity(1).render((function(){const t=e.select(this),r=t.props();let n=t.selectAll(".sszvis-map__image").data([0]);const o=n.enter().append("img").classed("sszvis-map__image",!0);n.exit().remove(),n=n.merge(o);const a=r.projection(r.geoBounds[0]),s=r.projection(r.geoBounds[1]);n.attr("src",r.src).style("left",Math.round(a[0])+"px").style("top",Math.round(a[1])+"px").style("width",Math.round(s[0]-a[0])+"px").style("height",Math.round(s[1]-a[1])+"px").style("opacity",r.opacity)}))},t.mapRendererMesh=gn,t.mapRendererPatternedLakeOverlay=yn,t.mapRendererRaster=function(){return ht().prop("debug").debug(!1).prop("width").prop("height").prop("position").prop("cellSide").cellSide(2).prop("fill",x).prop("opacity").opacity(1).render((function(t){const r=e.select(this),n=r.props();let o=r.selectAll(".sszvis-map__rasterimage").data([0]);const a=o.enter().append("canvas").classed("sszvis-map__rasterimage",!0);o.exit().remove(),o=o.merge(a),o.attr("width",n.width).attr("height",n.height).style("opacity",n.opacity);const s=o.node().getContext("2d");s.clearRect(0,0,n.width,n.height),n.debug&&(s.fillStyle="rgba(255, 0, 0, 0.2)",s.fillRect(0,0,n.width,n.height));const i=n.cellSide/2;for(const e of t){const t=n.position(e);s.fillStyle=n.fill(e),s.fillRect(t[0]-i,t[1]-i,n.cellSide,n.cellSide)}}))},t.measureAxisLabel=zr,t.measureDimensions=_r,t.measureLegendLabel=Ar,t.measureText=kr,t.memoize=_,t.modularTextHTML=kn,t.modularTextSVG=zn,t.move=mr,t.muchDarker=function(t){return e.hsl(t).darker(.7)},t.not=m,t.panning=function(){const t=e.dispatch("start","pan","end"),r=ht().prop("elementSelector").render((function(){const r=e.select(this),n=r.props();r.selectAll(n.elementSelector).attr("data-sszvis-behavior-pannable","").classed("sszvis-interactive",!0).on("mouseenter",(function(){t.apply("start",this,arguments)})).on("mousemove",(function(){t.apply("pan",this,arguments)})).on("mouseleave",(function(){t.apply("end",this,arguments)})).on("touchstart",(function(e){e.preventDefault(),t.apply("start",this,arguments)})).on("touchmove",(function(e){e.preventDefault();var r;null===(r=u(e),vr(yr(r)))?t.apply("end",this,arguments):t.apply("pan",this,arguments)})).on("touchend",(function(){t.apply("end",this,arguments)}))}));return r.on=function(){const e=t.on.apply(t,arguments);return e===t?r:e},r},t.parseDate=function(t){return bn(t)},t.parseNumber=function(t){return""===t.trim()?Number.NaN:+t},t.parseYear=function(t){return xn(t)},t.pie=function(){return ht().prop("radius").prop("fill").prop("stroke").prop("angle",x).render((function(t){const r=e.select(this),n=r.props(),o=n.stroke||"#FFFFFF";let a=0;for(const e of t)e._a0=a,(null==e.a0||Number.isNaN(e.a0))&&(e.a0=a),a+=n.angle(e),e._a1=a,(null==e.a1||Number.isNaN(e.a1))&&(e.a1=a);const s=e.arc().innerRadius(4).outerRadius(n.radius).startAngle((t=>t.a0)).endAngle((t=>t.a1));let i=r.selectAll(".sszvis-path").each(((e,r)=>{t[r]&&(t[r].a0=e.a0,t[r].a1=e.a1)})).data(t);const l=i.enter().append("path").classed("sszvis-path",!0).attr("transform","translate("+n.radius+","+n.radius+")").attr("fill",n.fill).attr("stroke",o);i.exit().remove(),i=i.merge(l),i.transition(Cr()).attr("transform","translate("+n.radius+","+n.radius+")").attrTween("d",(t=>{const r=e.interpolate(t.a0,t._a0),n=e.interpolate(t.a1,t._a1);return function(e){return t.a0=r(e),t.a1=n(e),s(t)}})).attr("fill",n.fill).attr("stroke",o);const c=_t().position((t=>{const e=t.a0+Math.abs(t.a1-t.a0)/2-Math.PI/2,r=2*n.radius/3;return[n.radius+Math.cos(e)*r,n.radius+Math.sin(e)*r]}));r.datum(t).call(c)}))},t.pixelsFromGeoDistance=function(t,e,r){const n=r/(2*Math.PI*6367475)*360/2,o=[[e[0]-n,e[1]-n],[e[0]+n,e[1]+n]].map(t);return(Math.abs(o[1][0]-o[0][0])+Math.abs(o[1][1]-o[0][1]))/2},t.prepareMergedGeoData=un,t.prop=g,t.propOr=y,t.pyramid=function(){return ht().prop("barHeight",x).prop("barWidth",x).prop("barPosition",x).prop("barFill",x).barFill("#000").prop("tooltipAnchor").tooltipAnchor([.5,.5]).prop("leftAccessor").prop("rightAccessor").prop("leftRefAccessor").prop("rightRefAccessor").render((function(t){const r=e.select(this),n=r.props(),o=Dr().x((t=>-.5-n.barWidth(t))).y(n.barPosition).height(n.barHeight).width(n.barWidth).fill(n.barFill).tooltipAnchor(n.tooltipAnchor),a=Dr().x(.5).y(n.barPosition).height(n.barHeight).width(n.barWidth).fill(n.barFill).tooltipAnchor(n.tooltipAnchor),s=Lr().barPosition(n.barPosition).barWidth(n.barWidth).mirror(!0),i=Lr().barPosition(n.barPosition).barWidth(n.barWidth);r.selectGroup("left").datum(n.leftAccessor(t)).call(o),r.selectGroup("right").datum(n.rightAccessor(t)).call(a),r.selectGroup("leftReference").datum(n.leftRefAccessor?[n.leftRefAccessor(t)]:[]).call(s),r.selectGroup("rightReference").datum(n.rightRefAccessor?[n.rightRefAccessor(t)]:[]).call(i)}))},t.range=ir,t.responsiveProps=function(){let t=Je();const e={};function r(r){if(!(h(r)&&(n=r,i(n)&&i(n.width)&&i(n.screenWidth)&&i(n.screenHeight))))return or("Could not determine the current breakpoint, returning the default props"),Object.keys(e).reduce(((t,e,r)=>(t[r]=e._,t)),{});var n;const o=Ge(t,r);return Object.keys(e).reduce(((n,a)=>{const s=e[a];if(!function(t,e){if(!i(t._))return!1;for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&"_"!==r&&!i(je(e,r)))return!1;return!0}(s,t))return or('responsiveProps was given an invalid propSpec for property: "'+a+'". The spec: ',s),n;const l=c((t=>i(s[t.name])),o);return n[a]=s[l.name](r.width),n}),{})}return r.prop=function(t,n){var o;return e[t]=(o=n,Object.keys(o).reduce(((t,e)=>(t[e]=x(o[e]),t)),{})),r},r.breakpoints=function(e){return 0===arguments.length?t:(t=Ie(e),r)},r},t.roundTransformString=function(t){const e=s(Math.floor,Number);return t.replace(/(translate\()\s*([\d ,.]+)\s*(\))/i,((t,r,n,o)=>r+n.replace(","," ").replace(/\s+/," ").split(" ").map(e).join(",")+o))},t.sankey=function(){return ht().prop("sizeScale").prop("columnPosition").prop("nodeThickness").prop("nodePadding").prop("columnPadding",x).prop("columnLabel",x).columnLabel("").prop("columnLabelOffset",x).columnLabelOffset(0).prop("linkCurvature").linkCurvature(.5).prop("nodeColor",x).prop("linkColor",x).prop("linkSort",x).linkSort(((t,e)=>t.value-e.value)).prop("labelSide",x).labelSide("left").prop("labelSideSwitch").prop("labelOpacity",x).labelOpacity(1).prop("labelHitBoxSize").labelHitBoxSize(0).prop("nameLabel").nameLabel(r).prop("linkSourceLabels").linkSourceLabels([]).prop("linkTargetLabels").linkTargetLabels([]).prop("linkLabel",x).render((function(t){const r=e.select(this),n=r.props(),o=g("id"),a=function(t){return Math.floor(n.columnPadding(t.columnIndex)+n.sizeScale(t.valueOffset)+n.nodePadding*t.nodeIndex)},s=function(t){return n.columnPosition(t.columnIndex)},i=function(t){return a(t)},l=function(){return Math.max(n.nodeThickness,1)},c=function(t){return Math.ceil(Math.max(n.sizeScale(t.value),1))},p=Dr().x(s).y(i).width(l).height(c).fill(n.nodeColor),u=r.selectGroup("nodes").datum(t.nodes);u.call(p);const d=_t().position((t=>[s(t)+l()/2,i(t)+c(t)/2]));u.call(d);const h=function(t){return n.columnPosition(t)+n.nodeThickness/2};let f=u.selectAll(".sszvis-sankey-column-label").data(t.columnLengths);const m=f.enter().append("text").attr("class","sszvis-sankey-label sszvis-sankey-weak-label sszvis-sankey-column-label");f=f.merge(m),f.exit().remove(),f.attr("transform",((t,e)=>bt(h(e)+n.columnLabelOffset(t,e),-24))).text(((t,e)=>n.columnLabel(e)));let y=u.selectAll(".sszvis-sankey-column-label-tick").data(t.columnLengths);const v=y.enter().append("line").attr("class","sszvis-sankey-column-label-tick");y=y.merge(v),y.exit().remove(),y.attr("x1",((t,e)=>yt(h(e)))).attr("x2",((t,e)=>yt(h(e)))).attr("y1",yt(-16)).attr("y2",yt(-12));const b=function(t){return[n.columnPosition(t.src.columnIndex)+n.nodeThickness+1,n.columnPosition(t.tgt.columnIndex)-1,a(t.src)+n.sizeScale(t.srcOffset)+n.sizeScale(t.value)/2,a(t.tgt)+n.sizeScale(t.tgtOffset)+n.sizeScale(t.value)/2]},x=function(t){const e=b(t);return r=e[0],n=e[1],o=e[2],a=e[3],[r,n,o,a];var r,n,o,a},_=r.selectGroup("links");let k=_.selectAll(".sszvis-link").data(t.links,o);const z=k.enter().append("path").attr("class","sszvis-link");k=k.merge(z),k.exit().remove(),k.attr("fill","none").attr("d",(function(t){const r=b(t),o=e.interpolateNumber(r[0],r[1]),a=o(n.linkCurvature),s=o(1-n.linkCurvature);return i=r[0],l=a,c=s,p=r[1],u=r[2],d=r[3],"M"+i+","+u+"C"+l+","+u+" "+c+","+d+" "+p+","+d;var i,l,c,p,u,d})).attr("stroke-width",(function(t){return Math.max(n.sizeScale(t.value),1)})).attr("stroke",n.linkColor).sort(n.linkSort),_.datum(t.links);const A=_t().position((t=>{const e=x(t);return[(e[0]+e[1])/2,(e[2]+e[3])/2]}));_.call(A);const w=r.selectGroup("linklabels");let S=w.selectAll(".sszvis-sankey-link-source-label").data(n.linkSourceLabels);const F=S.enter().append("text").attr("class","sszvis-sankey-label sszvis-sankey-strong-label sszvis-sankey-link-source-label");S=S.merge(F),S.exit().remove(),S.attr("transform",(t=>{const e=x(t);return bt(e[0]+6,e[2])})).text(n.linkLabel);let P=w.selectAll(".sszvis-sankey-link-target-label").data(n.linkTargetLabels);const M=P.enter().append("text").attr("class","sszvis-sankey-label sszvis-sankey-strong-label sszvis-sankey-link-target-label");P=P.merge(M),P.exit().remove(),P.attr("transform",(t=>{const e=x(t);return bt(e[1]-6,e[3])})).text(n.linkLabel);const R=function(t){let e=n.labelSide(t);return n.labelSideSwitch&&(e="left"===e?"right":"left"),e},C=r.selectGroup("nodelabels");let T=C.selectAll(".sszvis-sankey-node-label").data(t.nodes);const O=T.enter().append("text").attr("class","sszvis-sankey-label sszvis-sankey-weak-label sszvis-sankey-node-label");T=T.merge(O),T.exit().remove(),T.text((t=>n.nameLabel(t.id))).attr("text-align","middle").attr("text-anchor",(t=>"left"===R(t.columnIndex)?"end":"start")).attr("x",(t=>"left"===R(t.columnIndex)?s(t)-6:s(t)+n.nodeThickness+6)).attr("y",(t=>i(t)+c(t)/2)).style("opacity",n.labelOpacity);let D=C.selectAll(".sszvis-sankey-hitbox").data(t.nodes);const L=D.enter().append("rect").attr("class","sszvis-sankey-hitbox");D=D.merge(L),D.exit().remove(),D.attr("fill","transparent").attr("x",(t=>s(t)+("left"===R(t.columnIndex)?-n.labelHitBoxSize:0))).attr("y",(t=>i(t)-n.nodePadding/2)).attr("width",n.labelHitBoxSize+n.nodeThickness).attr("height",(t=>c(t)+n.nodePadding))}))},t.sankeyLayout=function(t,r,n,o){const a=e.min(t.map((t=>{const e=.15*n/(t-1);return Math.max(12,Math.min(50,e))}))),s=e.min(t.map(((t,e)=>Math.max(1,n-(t-1)*a)/r[e]))),i=a/s,l=a,c=e.max(r),p=t.map(((t,e)=>r[e]*s+(t-1)*l)),u=e.max(p),d=t.map(((t,e)=>(u-p[e])/2)),h=[0,c],f=[0,c*s],m=t.length;return{valuePadding:i,nodePadding:l,columnPaddings:d,valueDomain:h,valueRange:f,nodeThickness:20,columnDomain:[0,1],columnRange:[0,(o-20)/(m-1)]}},t.sankeyPrepareData=function(){let t=r,n=r,o=r,a=[];const s=g("value"),i=function(t,r){return e.ascending(s(t),s(r))},c=function(t,r){return e.descending(s(t),s(r))};let p=c;const u=function(r){const i=a.reduce(((t,e,r)=>{for(const n of e){t.has(n)&&or("Duplicate column member id passed to sszvis.layout.sankey.prepareData.column:",n,"The existing value will be overwritten");const e={id:n,columnIndex:r,nodeIndex:0,value:0,valueOffset:0,linksFrom:[],linksTo:[]};t.set(n,e)}return t}),new Map),u=r.map((e=>{const r=t(e),a=n(e),s=+o(e)||0,l=i.get(r),c=i.get(a);if(!l)return or("Found invalid source column id:",r),null;if(!c)return or("Found invalid target column id:",a),null;const p={id:on(),value:s,src:l,srcOffset:0,tgt:c,tgtOffset:0};return l.linksFrom.push(p),c.linksTo.push(p),p})),d=[...i.values()],h=d.reduce(((t,r)=>{const n=e.sum(r.linksFrom,s),o=e.sum(r.linksTo,s);return r.value=Math.max(0,n,o),t[r.columnIndex]+=r.value,t}),l(a.length,0)),f=a.map((t=>t.length));d.sort(p),u.sort(c),d.reduce(((t,e)=>(e.valueOffset=t[0][e.columnIndex],e.nodeIndex=t[1][e.columnIndex],t[0][e.columnIndex]+=e.value,t[1][e.columnIndex]+=1,t)),[l(a.length,0),l(a.length,0)]);for(const t of d)t.linksFrom.sort(((t,e)=>t.tgt.nodeIndex-e.tgt.nodeIndex)),t.linksTo.sort(((t,e)=>t.src.nodeIndex-e.src.nodeIndex)),t.linksFrom.reduce(((t,e)=>(e.srcOffset=t,t+s(e))),0),t.linksTo.reduce(((t,e)=>(e.tgtOffset=t,t+s(e))),0);return{nodes:d,links:u,columnTotals:h,columnLengths:f}};return u.apply=function(t){return u(t)},u.source=function(e){return t=e,u},u.target=function(t){return n=t,u},u.value=function(t){return o=t,u},u.descendingSort=function(){return p=c,u},u.ascendingSort=function(){return p=i,u},u.idLists=function(t){return a=t,u},u},t.scaleDeepGry=nt,t.scaleDimGry=et,t.scaleDivNtr=X,t.scaleDivNtrGry=q,t.scaleDivVal=V,t.scaleDivValGry=K,t.scaleGry=tt,t.scaleLightGry=Z,t.scaleMedGry=rt,t.scalePaleGry=$,t.scaleQual12=E,t.scaleQual6=N,t.scaleQual6a=W,t.scaleQual6b=j,t.scaleSeqBlu=G,t.scaleSeqBrn=Y,t.scaleSeqGrn=J,t.scaleSeqRed=I,t.selectMenu=function(){return ht().prop("values").prop("current").prop("width").width(300).prop("change").change(r).render((function(){const t=e.select(this),r=t.props();let n=t.selectAll(".sszvis-control-optionSelectable").data(["sszvis-control-select"],(t=>t));const o=n.enter().append("div").classed("sszvis-control-optionSelectable",!0).classed("sszvis-control-select",!0);n.exit().remove(),n=n.merge(o),n.style("width",r.width+"px");const a=n.selectDiv("selectMetrics").classed("sszvis-control-select__metrics",!0);let s=n.selectAll(".sszvis-control-select__element").data([1]);const i=s.enter().append("select").classed("sszvis-control-select__element",!0).on("change",(function(){const t=e.select(this).property("value");r.change(r.values[t]),setTimeout((()=>{window.focus()}),0)}));s=s.merge(i),s.style("width",r.width+30+"px");const l=s.selectAll("option").data(r.values),c=l.enter().append("option");l.exit().remove(),l.merge(c).attr("selected",(t=>t===r.current?"selected":null)).attr("value",((t,e)=>e)).text((t=>function(t,e,r){const n=1e3,o=function(r,a){t.text(r);const s=Math.ceil(t.node().clientWidth);return a<n&&s>e?o(r.slice(0,-2)+"…",a+1):r};return o(r,0)}(a,r.width-40,t)))}))},t.set=v,t.slider=function(){return ht().prop("scale").prop("value").prop("onchange").prop("minorTicks").minorTicks([]).prop("majorTicks").majorTicks([]).prop("tickLabels",x).tickLabels(r).prop("label",x).label(r).render((function(){const t=e.select(this),r=t.props(),n=yt(18),o=r.scale.domain(),a=ir(r.scale),i=r.scale.copy().range([a[0]+5.5,a[1]-5.5]);let l=t.selectAll("g.sszvis-control-slider__backgroundgroup").data([1]);const c=l.enter().append("g").classed("sszvis-control-slider__backgroundgroup",!0);l=l.merge(c),l.exit().remove();const p=ur().scale(i).orient("bottom").hideBorderTickThreshold(0).tickSize(12).tickPadding(6).tickValues(v([...r.majorTicks,...r.minorTicks])).tickFormat((t=>qr(t,r.majorTicks)?r.tickLabels(t):""));let u=l.selectAll("g.sszvis-axisGroup").data([1]);const d=u.enter().append("g").classed("sszvis-axisGroup sszvis-axis sszvis-axis--bottom sszvis-axis--slider",!0);u=u.merge(d),u.attr("transform",bt(0,28)).call(p),u.selectAll(".tick line").filter((t=>!qr(t,r.majorTicks))).attr("y2",4);const h=u.selectAll(".tick text").filter((t=>qr(t,r.majorTicks))),f=h.size();h.style("text-anchor",((t,e)=>0===e?"start":e===f-1?"end":"middle"));let m=l.selectAll("g.sszvis-slider__background").data([1]);const g=m.enter().append("g").classed("sszvis-slider__background",!0);m=m.merge(g),m.attr("transform",bt(0,n));let y=m.selectAll(".sszvis-slider__background__bg1").data([1]);const x=y.enter().append("line").classed("sszvis-slider__background__bg1",!0).style("stroke-width",6).style("stroke","#888").style("stroke-linecap","round");y=y.merge(x),y.attr("x1",Math.ceil(a[0]+3)).attr("x2",Math.floor(a[1]-3));let _=m.selectAll(".sszvis-slider__background__bg2").data([1]);const k=_.enter().append("line").classed("sszvis-slider__background__bg2",!0).style("stroke-width",5).style("stroke","#fff").style("stroke-linecap","round");_=_.merge(k),_.attr("x1",Math.ceil(a[0]+3)).attr("x2",Math.floor(a[1]-3));let z=m.selectAll(".sszvis-slider__backgroundshadow").data([r.value]);const A=z.enter().append("line").attr("class","sszvis-slider__backgroundshadow").attr("stroke-width",5).style("stroke","#E0E0E0").style("stroke-linecap","round");z=z.merge(A),z.attr("x1",Math.ceil(a[0]+3)).attr("x2",s(Math.floor,i));let w=t.selectAll("g.sszvis-control-slider__handle").data([r.value]);w.exit().remove();const S=w.enter().append("g").classed("sszvis-control-slider__handle",!0);w=w.merge(S),w.attr("transform",(t=>bt(yt(i(t)),.5))),S.append("text").classed("sszvis-control-slider--label",!0),w.selectAll(".sszvis-control-slider--label").data((t=>[t])).text(r.label).style("text-anchor",(t=>b(t,o[0])?"start":b(t,o[1])?"end":"middle")).attr("dx",(t=>b(t,o[0])?-5:b(t,o[1])?5:0)),S.append("rect").classed("sszvis-control-slider__handlebox",!0).attr("x",-5).attr("y",n-11.5).attr("width",10).attr("height",23).attr("rx",2).attr("ry",2);S.append("line").classed("sszvis-control-slider__handleline",!0).attr("y1",n-7.5).attr("y2",n+7.5);const F=mr().xScale(r.scale).yScale(e.scaleLinear().range([-11,40])).draggable(!0).on("drag",r.onchange);t.selectGroup("sliderInteraction").classed("sszvis-control-slider--interactionLayer",!0).attr("transform",bt(0,4)).call(F)}))},t.slightlyDarker=function(t){return e.hsl(t).darker(.4)},t.slowTransition=Tr,t.some=function(t,e){for(const r of e)if(t(r))return!0;return!1},t.stackedArea=function(){return ht().prop("x").prop("y0").prop("y1").prop("fill").prop("stroke").prop("strokeWidth").prop("defined").prop("key").key(((t,e)=>e)).prop("transition").transition(!0).render((function(t){const r=e.select(this),n=r.props(),o=e.area().defined(void 0===n.defined?function(){return s(m(Number.isNaN),n.y0)&&s(m(Number.isNaN),n.y1)}:n.defined).x(n.x).y0(n.y0).y1(n.y1);let a=r.selectAll("path.sszvis-path").data(t,n.key);const i=a.enter().append("path").classed("sszvis-path",!0);a.exit().remove(),a=a.merge(i),n.transition&&(a=a.transition(Cr())),a.attr("d",o).attr("fill",n.fill).attr("stroke",n.stroke||"#ffffff").attr("stroke-width",void 0===n.strokeWidth?1:n.strokeWidth)}))},t.stackedAreaMultiples=function(){return ht().prop("x").prop("y0").prop("y1").prop("fill").prop("stroke").prop("strokeWidth").prop("defined").prop("key").key(((t,e)=>e)).prop("valuesAccessor").valuesAccessor(r).prop("transition").transition(!0).render((function(t){const r=e.select(this),n=r.props();t=[...t].reverse();const o=e.area().defined(void 0===n.defined?function(){return s(m(Number.isNaN),n.y0)&&s(m(Number.isNaN),n.y1)}:n.defined).x(n.x).y0(n.y0).y1(n.y1);let a=r.selectAll("path.sszvis-path").data(t,n.key);const i=a.enter().append("path").classed("sszvis-path",!0);a.exit().remove(),a=i.merge(a),n.transition&&(a=a.transition(Cr())),a.attr("d",s(o,n.valuesAccessor)).attr("fill",n.fill).attr("stroke",n.stroke).attr("stroke-width",void 0===n.strokeWidth?1:n.strokeWidth)}))},t.stackedBarHorizontal=function(){return Gr(Ir)},t.stackedBarHorizontalData=jr,t.stackedBarVertical=function(){return Gr(Jr)},t.stackedBarVerticalData=Hr,t.stackedPyramid=function(){return ht().prop("barHeight",x).prop("barWidth",x).prop("barPosition",x).prop("barFill",x).barFill("#000").prop("tooltipAnchor").tooltipAnchor([.5,.5]).prop("leftAccessor").prop("rightAccessor").prop("leftRefAccessor").prop("rightRefAccessor").render((function(t){const r=e.select(this),n=r.props(),o=Dr().x((t=>-.5-n.barWidth(t[1]))).y(s(n.barPosition,Ur)).height(n.barHeight).width((t=>n.barWidth(t[1])-n.barWidth(t[0]))).fill(s(n.barFill,Yr)).tooltipAnchor(n.tooltipAnchor),a=Dr().x((t=>.5+n.barWidth(t[0]))).y(s(n.barPosition,Ur)).height(n.barHeight).width((t=>n.barWidth(t[1])-n.barWidth(t[0]))).fill(s(n.barFill,Yr)).tooltipAnchor(n.tooltipAnchor),i=Vr().stackElement(o),l=Vr().stackElement(a),c=Kr().barPosition(n.barPosition).barWidth(n.barWidth).mirror(!0),p=Kr().barPosition(n.barPosition).barWidth(n.barWidth);r.selectGroup("leftStack").datum(n.leftAccessor(t)).call(i),r.selectGroup("rightStack").datum(n.rightAccessor(t)).call(l),r.selectGroup("leftReference").datum(n.leftRefAccessor?[n.leftRefAccessor(t)]:[]).call(c),r.selectGroup("rightReference").datum(n.rightRefAccessor?[n.rightRefAccessor(t)]:[]).call(p)}))},t.stackedPyramidData=function(t,r,n,o){return function(a){const s=Mr().arrayBy(t).arrayBy(r).objectBy(n).apply(a).map((r=>{const n=Object.keys(r[0]),a=t(r[0][n[0]][0]),s=e.stack().keys(n).value(((t,e)=>o(t[e][0])))(r);for(const[t,e]of s.entries())for(const[r,s]of e.entries())s.data=s.data[n[t]][0],s.series=n[t],s.side=a,s.row=r,s.value=o(s.data);return s}));return s.maxValue=e.max(s,(t=>e.max(t,(t=>e.max(t,(t=>t[1])))))),s}},t.stringEqual=b,t.sunburst=function(){return ht().prop("angleScale").angleScale(e.scaleLinear().range([0,2*Math.PI])).prop("radiusScale").prop("centerRadius").prop("fill").prop("stroke").stroke("white").render((function(t){const r=e.select(this),n=r.props();const o=function(t){return Math.max(0,Math.min(Xr,n.angleScale(t.x0)))},a=function(t){return Math.max(0,Math.min(Xr,n.angleScale(t.x1)))},s=function(t){return n.centerRadius+Math.max(0,n.radiusScale(t.y0))},i=function(t){return n.centerRadius+Math.max(0,n.radiusScale(t.y1))},l=e.arc().startAngle(o).endAngle(a).innerRadius(s).outerRadius(i);for(const e of t)e._x0=e.x0,e._x1=e.x1;let c=r.selectAll(".sszvis-sunburst-arc").each(((e,r)=>{t[r]&&(t[r].x0=e.x0,t[r].x1=e.x1)})).data(t);const p=c.enter().append("path").attr("class","sszvis-sunburst-arc");c.exit().remove(),c=c.merge(p),c.attr("stroke",n.stroke).attr("fill",(function t(r){if(r.data.isSunburstRoot)return"transparent";if(r.parent){if(r.parent.data.isSunburstRoot)return e.hsl(n.fill(r.data.key));{const e=t(r.parent);return e.l*=1.15,e}}return or("Data passed to sszvis.component.sunburst does not have the expected tree structure. You should prepare it using sszvis.format.sunburst.prepareData"),e.hsl(n.fill(r.data.key))})),c.transition(Cr()).attrTween("d",(t=>{const r=e.interpolate(t.x0,t._x0),n=e.interpolate(t.x1,t._x1);return function(e){return t.x0=r(e),t.x1=n(e),l(t)}}));const u=_t().position((t=>{const e=o(t),r=a(t),n=e+Math.abs(r-e)/2-Math.PI/2,l=(s(t)+i(t))/2;return[Math.cos(n)*l,Math.sin(n)*l]}));r.call(u)}))},t.sunburstGetRadiusExtent=function(t){return[e.min(t,(t=>t.y0)),e.max(t,(t=>t.y1))]},t.sunburstLayout=function(t,e){const r=e/2,n=r/3;return{centerRadius:n,numLayers:t,ringWidth:Math.max(10,Math.min(60,(r-n)/t))}},t.sunburstPrepareData=function(){const t=[];let n=r;function o(r){const o=an(e.rollup(r,p,...t));console.log(o);const a=e.hierarchy({isSunburstRoot:!0,values:o},g("values")).sort(sn).sum((t=>t.value?n(t.value):0));return e.partition()(a),function t(e){return Array.prototype.concat.apply([e],(e.children||[]).map(t))}(a).filter((t=>!t.data.isSunburstRoot))}return o.calculate=function(t){return o(t)},o.layer=function(e){return t.push(e),o},o.value=function(t){return n=t,o},o.sort=function(t){return sn=t,o},o},t.swissMapPath=cn,t.swissMapProjection=ln,t.textWrap=lr,t.tooltip=function(){const t=Lt();return ht().delegate("header",t).delegate("body",t).delegate("orientation",t).delegate("dx",t).delegate("dy",t).delegate("opacity",t).prop("renderInto").prop("visible",x).visible(!1).renderSelection((e=>{const r=e.props(),n=r.renderInto.node().getBoundingClientRect(),o=[];e.each((function(t){if(r.visible(t)){const e=this.getBoundingClientRect(),r=[e.left-n.left,e.top-n.top];o.push({datum:t,x:r[0],y:r[1]})}})),r.renderInto.datum(o).call(t)}))},t.tooltipAnchor=_t,t.transformTranslateSubpixelShift=vt,t.translateString=bt,t.viewport=Be,t.voronoi=function(){const t=e.dispatch("over","out"),r=ht().prop("x").prop("y").prop("bounds").prop("debug").render((function(r){const n=e.select(this),o=n.props();if(!o.bounds)return ar("behavior.voronoi - requires bounds"),!1;const a=e.Delaunay.from(r,(t=>o.x(t)),(t=>o.y(t))),s=a.voronoi(o.bounds);let i=n.selectAll("[data-sszvis-behavior-voronoi]").data(s.cellPolygons());const l=i.enter().append("path").attr("data-sszvis-behavior-voronoi","").attr("data-sszvis-behavior-pannable","").attr("class","sszvis-interactive");i.exit().remove(),i=i.merge(l),i.attr("d",(t=>"M"+t.join("L")+"Z")).attr("fill","transparent").on("mouseover",(function(e){const n=this.parentNode.getBoundingClientRect(),s=a.find(e.clientX,e.clientY);xr(e,[n.left+o.x(r[s]),n.top+o.y(r[s])])&&t.apply("over",this,[r[s]])})).on("mousemove",(function(e){const n=this.parentNode.getBoundingClientRect(),s=a.find(e.clientX,e.clientY);xr(e,[n.left+o.x(r[s]),n.top+o.y(r[s])])?t.apply("over",this,[r[s]]):t.apply("out",this,[])})).on("mouseout",(function(){t.apply("out",this,[])})).on("touchstart",(function(n){const s=this.parentNode.getBoundingClientRect(),i=a.find(n.clientX,n.clientY);if(xr(u(n),[s.left+o.x(r[i]),s.top+o.y(r[i])])){n.preventDefault(),t.apply("over",this,[r[i]]);const a=function(){const e=u(n),r=yr(e),a=vr(r);if(null===a)t.apply("out",this,[]);else{const s=r.parentNode.getBoundingClientRect();xr(e,[s.left+o.x(a.data),s.top+o.y(a.data)])?(n.cancelable&&n.preventDefault(),t.apply("over",this,[a.data])):t.apply("out",this,[])}},s=function(){t.apply("out",this,[]),e.select(this).on("touchmove",null).on("touchend",null)};e.select(this).on("touchmove",a).on("touchend",s)}})),o.debug&&i.attr("stroke","#f00")}));return r.on=function(){const e=t.on.apply(t,arguments);return e===t?r:e},r},t.widthAdaptiveMapPathStroke=function(t){return Math.min(Math.max(.8,t/400),1.1)},t.withAlpha=function(t,r){const n=e.rgb(t);return"rgba("+n.r+","+n.g+","+n.b+","+r+")"}}));
