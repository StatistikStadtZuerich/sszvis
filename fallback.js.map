{"version":3,"file":"fallback.js","sources":["../src/fallback.js"],"sourcesContent":["/**\n * Fallback handling\n *\n * Defaults to rendering a fallback image with standard chart proportions.\n *\n * @example\n * if (sszvis.fallback.unsupported()) {\n *   sszvis.fallback.render('#sszvis-chart', {src: '../fallback.png', height: 300});\n *   return;\n * }\n *\n * @module sszvis/fallback\n */\n\nimport { select } from \"d3\";\n\nimport * as fn from \"./fn.js\";\n\nexport const fallbackUnsupported = function () {\n  const supportsSVG =\n    !!document.createElementNS &&\n    !!document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\").createSVGRect;\n  return !supportsSVG;\n};\n\nexport const fallbackCanvasUnsupported = function () {\n  const supportsCanvas = !!document.createElement(\"canvas\").getContext;\n  return !supportsCanvas;\n};\n\nexport const fallbackRender = function (selector, options) {\n  options || (options = {});\n  options.src || (options.src = \"fallback.png\");\n  const selection = fn.isSelection(selector) ? selector : select(selector);\n  selection.append(\"img\").attr(\"class\", \"sszvis-fallback-image\").attr(\"src\", options.src);\n};\n"],"names":["fallbackUnsupported","supportsSVG","document","createElementNS","createSVGRect","fallbackCanvasUnsupported","supportsCanvas","createElement","getContext","fallbackRender","selector","options","src","selection","fn","select","append","attr"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAMaA,MAAAA,mBAAmB,GAAG,YAAY;AAC7C,EAAA,MAAMC,WAAW,GACf,CAAC,CAACC,QAAQ,CAACC,eAAe,IAC1B,CAAC,CAACD,QAAQ,CAACC,eAAe,CAAC,4BAA4B,EAAE,KAAK,CAAC,CAACC,aAAa;AAC/E,EAAA,OAAO,CAACH,WAAW;AACrB;AAEaI,MAAAA,yBAAyB,GAAG,YAAY;EACnD,MAAMC,cAAc,GAAG,CAAC,CAACJ,QAAQ,CAACK,aAAa,CAAC,QAAQ,CAAC,CAACC,UAAU;AACpE,EAAA,OAAO,CAACF,cAAc;AACxB;AAEO,MAAMG,cAAc,GAAG,UAAUC,QAAQ,EAAEC,OAAO,EAAE;AACzDA,EAAAA,OAAO,KAAKA,OAAO,GAAG,EAAE,CAAC;EACzBA,OAAO,CAACC,GAAG,KAAKD,OAAO,CAACC,GAAG,GAAG,cAAc,CAAC;AAC7C,EAAA,MAAMC,SAAS,GAAGC,WAAc,CAACJ,QAAQ,CAAC,GAAGA,QAAQ,GAAGK,MAAM,CAACL,QAAQ,CAAC;EACxEG,SAAS,CAACG,MAAM,CAAC,KAAK,CAAC,CAACC,IAAI,CAAC,OAAO,EAAE,uBAAuB,CAAC,CAACA,IAAI,CAAC,KAAK,EAAEN,OAAO,CAACC,GAAG,CAAC;AACzF;;;;"}