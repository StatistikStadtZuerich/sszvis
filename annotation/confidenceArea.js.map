{"version":3,"file":"confidenceArea.js","sources":["../../src/annotation/confidenceArea.js"],"sourcesContent":["/**\n * @function sszvis.annotationConfidenceArea\n *\n * A component for creating confidence areas. The component should be passed\n * an array of data values, each of which will be used to render a confidence area\n * by passing it through the accessor functions. You can specify the x, y0, and y1\n * properties to define the area. The component also supports stroke, strokeWidth,\n * and fill properties for styling.\n *\n * @module sszvis/annotation/confidenceArea\n *\n * @param {function} x             The x-accessor function.\n * @param {function} y0            The y0-accessor function.\n * @param {function} y1            The y1-accessor function.\n * @param {string} [stroke]        The stroke color of the area.\n * @param {number} [strokeWidth]   The stroke width of the area.\n * @param {string} [fill]          The fill color of the area.\n * @param {function} [key]         The key function for data binding.\n * @param {function} [valuesAccessor] The accessor function for the data values.\n * @param {boolean} [transition]   Whether to apply a transition to the area.\n *\n * @returns {sszvis.component} a confidence area component\n */\n\nimport { area as d3Area, select } from \"d3\";\nimport { component } from \"../d3-component.js\";\nimport * as fn from \"../fn.js\";\nimport { dataAreaPattern } from \"../patterns.js\";\nimport ensureDefsElement from \"../svgUtils/ensureDefsElement.js\";\nimport { defaultTransition } from \"../transition.js\";\n\nexport default function () {\n  return component()\n    .prop(\"x\")\n    .prop(\"y0\")\n    .prop(\"y1\")\n    .prop(\"stroke\")\n    .prop(\"strokeWidth\")\n    .prop(\"fill\")\n    .prop(\"key\")\n    .key((_, i) => i)\n    .prop(\"valuesAccessor\")\n    .valuesAccessor(fn.identity)\n    .prop(\"transition\")\n    .transition(true)\n    .render(function (data) {\n      const selection = select(this);\n      const props = selection.props();\n\n      ensureDefsElement(selection, \"pattern\", \"data-area-pattern\").call(dataAreaPattern);\n\n      // Layouts\n      const area = d3Area().x(props.x).y0(props.y0).y1(props.y1);\n\n      // Rendering\n\n      let path = selection\n        .selectAll(\".sszvis-area\")\n        .data(data, props.key)\n        .join(\"path\")\n        .classed(\"sszvis-area\", true)\n        .style(\"stroke\", props.stroke)\n        .attr(\"fill\", \"url(#data-area-pattern)\")\n        .order();\n\n      if (props.transition) {\n        path = path.transition().call(defaultTransition);\n      }\n\n      path\n        .attr(\"d\", fn.compose(area, props.valuesAccessor))\n        .style(\"stroke\", props.stroke)\n        .style(\"stroke-width\", props.strokeWidth)\n        .attr(\"fill\", \"url(#data-area-pattern)\");\n    });\n}\n"],"names":["component","prop","key","_","i","valuesAccessor","fn","transition","render","data","selection","select","props","ensureDefsElement","call","dataAreaPattern","area","d3Area","x","y0","y1","path","selectAll","join","classed","style","stroke","attr","order","defaultTransition","strokeWidth"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AASe,uBAAA,IAAY;AACzB,EAAA,OAAOA,SAAS,EAAE,CACfC,IAAI,CAAC,GAAG,CAAC,CACTA,IAAI,CAAC,IAAI,CAAC,CACVA,IAAI,CAAC,IAAI,CAAC,CACVA,IAAI,CAAC,QAAQ,CAAC,CACdA,IAAI,CAAC,aAAa,CAAC,CACnBA,IAAI,CAAC,MAAM,CAAC,CACZA,IAAI,CAAC,KAAK,CAAC,CACXC,GAAG,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAAC,CAChBH,IAAI,CAAC,gBAAgB,CAAC,CACtBI,cAAc,CAACC,QAAW,CAAC,CAC3BL,IAAI,CAAC,YAAY,CAAC,CAClBM,UAAU,CAAC,IAAI,CAAC,CAChBC,MAAM,CAAC,UAAUC,IAAI,EAAE;AACtB,IAAA,MAAMC,SAAS,GAAGC,MAAM,CAAC,IAAI,CAAC;AAC9B,IAAA,MAAMC,KAAK,GAAGF,SAAS,CAACE,KAAK,EAAE;IAE/BC,iBAAiB,CAACH,SAAS,EAAE,SAAS,EAAE,mBAAmB,CAAC,CAACI,IAAI,CAACC,eAAe,CAAC;;AAElF;IACA,MAAMC,MAAI,GAAGC,IAAM,EAAE,CAACC,CAAC,CAACN,KAAK,CAACM,CAAC,CAAC,CAACC,EAAE,CAACP,KAAK,CAACO,EAAE,CAAC,CAACC,EAAE,CAACR,KAAK,CAACQ,EAAE,CAAC;;AAE1D;;IAEA,IAAIC,IAAI,GAAGX,SAAS,CACjBY,SAAS,CAAC,cAAc,CAAC,CACzBb,IAAI,CAACA,IAAI,EAAEG,KAAK,CAACV,GAAG,CAAC,CACrBqB,IAAI,CAAC,MAAM,CAAC,CACZC,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,CAC5BC,KAAK,CAAC,QAAQ,EAAEb,KAAK,CAACc,MAAM,CAAC,CAC7BC,IAAI,CAAC,MAAM,EAAE,yBAAyB,CAAC,CACvCC,KAAK,EAAE;IAEV,IAAIhB,KAAK,CAACL,UAAU,EAAE;MACpBc,IAAI,GAAGA,IAAI,CAACd,UAAU,EAAE,CAACO,IAAI,CAACe,iBAAiB,CAAC;AAClD,IAAA;AAEAR,IAAAA,IAAI,CACDM,IAAI,CAAC,GAAG,EAAErB,OAAU,CAACU,MAAI,EAAEJ,KAAK,CAACP,cAAc,CAAC,CAAC,CACjDoB,KAAK,CAAC,QAAQ,EAAEb,KAAK,CAACc,MAAM,CAAC,CAC7BD,KAAK,CAAC,cAAc,EAAEb,KAAK,CAACkB,WAAW,CAAC,CACxCH,IAAI,CAAC,MAAM,EAAE,yBAAyB,CAAC;AAC5C,EAAA,CAAC,CAAC;AACN;;;;"}