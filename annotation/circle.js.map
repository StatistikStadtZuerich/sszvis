{"version":3,"file":"circle.js","sources":["../../src/annotation/circle.js"],"sourcesContent":["/**\n * Circle annotation\n *\n * A component for creating circular data areas. The component should be passed\n * an array of data values, each of which will be used to render a data area by\n * passing it through the accessor functions. You can specify a caption to display,\n * which can be offset from the center of the data area by specifying dx or dy properties.\n *\n * @module sszvis/annotation/circle\n *\n * @param {number, function} x        The x-position of the center of the data area.\n * @param {number, function} y        The y-position of the center of the data area.\n * @param {number, function} r        The radius of the data area.\n * @param {number, function} dx       The x-offset of the data area caption.\n * @param {number, function} dy       The y-offset of the data area caption.\n * @param {string, function} caption  The caption for the data area. Default position is the center of the circle\n *\n * @returns {sszvis.component} a circular data area component\n */\n\nimport { select } from \"d3\";\nimport { component } from \"../d3-component.js\";\nimport * as fn from \"../fn.js\";\nimport { dataAreaPattern } from \"../patterns.js\";\nimport ensureDefsElement from \"../svgUtils/ensureDefsElement.js\";\n\nexport default function () {\n  return component()\n    .prop(\"x\", fn.functor)\n    .prop(\"y\", fn.functor)\n    .prop(\"r\", fn.functor)\n    .prop(\"dx\", fn.functor)\n    .prop(\"dy\", fn.functor)\n    .prop(\"caption\", fn.functor)\n    .render(function (data) {\n      const selection = select(this);\n      const props = selection.props();\n\n      ensureDefsElement(selection, \"pattern\", \"data-area-pattern\").call(dataAreaPattern);\n\n      const dataArea = selection\n        .selectAll(\".sszvis-dataareacircle\")\n        .data(data)\n        .join(\"circle\")\n        .classed(\"sszvis-dataareacircle\", true);\n\n      dataArea\n        .attr(\"cx\", props.x)\n        .attr(\"cy\", props.y)\n        .attr(\"r\", props.r)\n        .attr(\"fill\", \"url(#data-area-pattern)\");\n\n      if (props.caption) {\n        const dataCaptions = selection\n          .selectAll(\".sszvis-dataareacircle__caption\")\n          .data(data)\n          .join(\"text\")\n          .classed(\"sszvis-dataareacircle__caption\", true);\n\n        dataCaptions\n          .attr(\"x\", props.x)\n          .attr(\"y\", props.y)\n          .attr(\"dx\", props.dx)\n          .attr(\"dy\", props.dy)\n          .text(props.caption);\n      }\n    });\n}\n"],"names":["component","prop","fn","render","data","selection","select","props","ensureDefsElement","call","dataAreaPattern","dataArea","selectAll","join","classed","attr","x","y","r","caption","dataCaptions","dx","dy","text"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAQe,eAAA,IAAY;AACzB,EAAA,OAAOA,SAAS,EAAE,CACfC,IAAI,CAAC,GAAG,EAAEC,OAAU,CAAC,CACrBD,IAAI,CAAC,GAAG,EAAEC,OAAU,CAAC,CACrBD,IAAI,CAAC,GAAG,EAAEC,OAAU,CAAC,CACrBD,IAAI,CAAC,IAAI,EAAEC,OAAU,CAAC,CACtBD,IAAI,CAAC,IAAI,EAAEC,OAAU,CAAC,CACtBD,IAAI,CAAC,SAAS,EAAEC,OAAU,CAAC,CAC3BC,MAAM,CAAC,UAAUC,IAAI,EAAE;AACtB,IAAA,MAAMC,SAAS,GAAGC,MAAM,CAAC,IAAI,CAAC;AAC9B,IAAA,MAAMC,KAAK,GAAGF,SAAS,CAACE,KAAK,EAAE;IAE/BC,iBAAiB,CAACH,SAAS,EAAE,SAAS,EAAE,mBAAmB,CAAC,CAACI,IAAI,CAACC,eAAe,CAAC;IAElF,MAAMC,QAAQ,GAAGN,SAAS,CACvBO,SAAS,CAAC,wBAAwB,CAAC,CACnCR,IAAI,CAACA,IAAI,CAAC,CACVS,IAAI,CAAC,QAAQ,CAAC,CACdC,OAAO,CAAC,uBAAuB,EAAE,IAAI,CAAC;AAEzCH,IAAAA,QAAQ,CACLI,IAAI,CAAC,IAAI,EAAER,KAAK,CAACS,CAAC,CAAC,CACnBD,IAAI,CAAC,IAAI,EAAER,KAAK,CAACU,CAAC,CAAC,CACnBF,IAAI,CAAC,GAAG,EAAER,KAAK,CAACW,CAAC,CAAC,CAClBH,IAAI,CAAC,MAAM,EAAE,yBAAyB,CAAC;IAE1C,IAAIR,KAAK,CAACY,OAAO,EAAE;MACjB,MAAMC,YAAY,GAAGf,SAAS,CAC3BO,SAAS,CAAC,iCAAiC,CAAC,CAC5CR,IAAI,CAACA,IAAI,CAAC,CACVS,IAAI,CAAC,MAAM,CAAC,CACZC,OAAO,CAAC,gCAAgC,EAAE,IAAI,CAAC;AAElDM,MAAAA,YAAY,CACTL,IAAI,CAAC,GAAG,EAAER,KAAK,CAACS,CAAC,CAAC,CAClBD,IAAI,CAAC,GAAG,EAAER,KAAK,CAACU,CAAC,CAAC,CAClBF,IAAI,CAAC,IAAI,EAAER,KAAK,CAACc,EAAE,CAAC,CACpBN,IAAI,CAAC,IAAI,EAAER,KAAK,CAACe,EAAE,CAAC,CACpBC,IAAI,CAAChB,KAAK,CAACY,OAAO,CAAC;AACxB,IAAA;AACF,EAAA,CAAC,CAAC;AACN;;;;"}